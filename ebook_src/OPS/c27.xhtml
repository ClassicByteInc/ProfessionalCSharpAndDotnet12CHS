<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops"
    xmlns:svg="http://www.w3.org/2000/svg" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en"
    imt-state="dual" imt-trans-position="after">

<head>
    <title>27 Blazor --- 27 Blazor</title>
    <link href="WileyTemplate_v5.5.css" rel="stylesheet" type="text/css" />
    <meta content="urn:uuid:e0000000-0000-0000-0000-000006715209" name="Adept.expected.resource" />
    <style data-id="immersive-translate-input-injected-css">
        .immersive-translate-input {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            z-index: 2147483647;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .immersive-translate-attach-loading::after {
            content: " ";

            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;

            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-2000%, -50%);
            z-index: 100;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .immersive-translate-input-loading {
            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;
        }

        @keyframes immersiveTranslateShadowRolling {
            0% {
                box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            12% {
                box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            25% {
                box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            36% {
                box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color),
                    100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
            }

            50% {
                box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color),
                    110px 0 var(--loading-color), 100px 0 var(--loading-color);
            }

            62% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color),
                    120px 0 var(--loading-color), 110px 0 var(--loading-color);
            }

            75% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    130px 0 var(--loading-color), 120px 0 var(--loading-color);
            }

            87% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
            }

            100% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
            }
        }

        .immersive-translate-toast {
            display: flex;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            right: 0;
            top: 1%;
            width: fit-content;
            padding: 12px 20px;
            margin: auto;
            overflow: auto;
            background: #fef6f9;
            box-shadow: 0px 4px 10px 0px rgba(0, 10, 30, 0.06);
            font-size: 15px;
            border-radius: 8px;
            color: #333;
        }

        .immersive-translate-toast-content {
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .immersive-translate-toast-hidden {
            margin: 0 20px 0 72px;
            text-decoration: underline;
            cursor: pointer;
        }

        .immersive-translate-toast-close {
            color: #666666;
            font-size: 20px;
            font-weight: bold;
            padding: 0 10px;
            cursor: pointer;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-toast {
                top: 0;
                padding: 12px 0px 0 10px;
            }

            .immersive-translate-toast-content {
                flex-direction: column;
                text-align: center;
            }

            .immersive-translate-toast-hidden {
                margin: 10px auto;
            }
        }

        .immersive-translate-modal {
            display: none;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
            font-size: 15px;
        }

        .immersive-translate-modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 40px 24px 24px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 80%;
            max-width: 270px;
            font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
                "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
                "Segoe UI Symbol", "Noto Color Emoji";
            position: relative;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-content {
                margin: 50% auto !important;
            }
        }

        .immersive-translate-modal .immersive-translate-modal-content-in-input {
            max-width: 500px;
        }

        .immersive-translate-modal-content-in-input .immersive-translate-modal-body {
            text-align: left;
            max-height: unset;
        }

        .immersive-translate-modal-title {
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            color: #333333;
        }

        .immersive-translate-modal-body {
            text-align: center;
            font-size: 14px;
            font-weight: 400;
            color: #333333;
            word-break: break-all;
            margin-top: 24px;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-body {
                max-height: 250px;
                overflow-y: auto;
            }
        }

        .immersive-translate-close {
            color: #666666;
            position: absolute;
            right: 16px;
            top: 16px;
            font-size: 20px;
            font-weight: bold;
        }

        .immersive-translate-close:hover,
        .immersive-translate-close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .immersive-translate-modal-footer {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 24px;
        }

        .immersive-translate-btn {
            width: fit-content;
            color: #fff;
            background-color: #ea4c89;
            border: none;
            font-size: 16px;
            margin: 0 8px;
            padding: 9px 30px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .immersive-translate-btn:hover {
            background-color: #f082ac;
        }

        .immersive-translate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .immersive-translate-btn:disabled:hover {
            background-color: #ea4c89;
        }

        .immersive-translate-cancel-btn {
            /* gray color */
            background-color: rgb(89, 107, 120);
        }

        .immersive-translate-cancel-btn:hover {
            background-color: hsl(205, 20%, 32%);
        }

        .immersive-translate-action-btn {
            background-color: transparent;
            color: #ea4c89;
            border: 1px solid #ea4c89;
        }

        .immersive-translate-btn svg {
            margin-right: 5px;
        }

        .immersive-translate-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #007bff;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-primary-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #ea4c89;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-modal input[type="radio"] {
            margin: 0 6px;
            cursor: pointer;
        }

        .immersive-translate-modal label {
            cursor: pointer;
        }

        .immersive-translate-close-action {
            position: absolute;
            top: 2px;
            right: 0px;
            cursor: pointer;
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5) !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            border-radius: 16px !important;
        }

        .imt-image-status img,
        .imt-image-status svg,
        .imt-img-loading {
            width: 28px !important;
            height: 28px !important;
            margin: 0 0 8px 0 !important;
            min-height: 28px !important;
            min-width: 28px !important;
            position: relative !important;
        }

        .imt-img-loading {
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAtFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////oK74hAAAAPHRSTlMABBMIDyQXHwyBfFdDMSw+OjXCb+5RG51IvV/k0rOqlGRM6KKMhdvNyZBz9MaupmxpWyj437iYd/yJVNZeuUC7AAACt0lEQVRIx53T2XKiUBCA4QYOiyCbiAsuuGBcYtxiYtT3f6/pbqoYHVFO5r+iivpo6DpAWYpqeoFfr9f90DsYAuRSWkFnPO50OgR9PwiCUFcl2GEcx+N/YBh6pvKaefHlUgZd1zVe0NbYcQjGBfzrPE8Xz8aF+71D8gG6DHFPpc4a7xFiCDuhaWgKgGIJQ3d5IMGDrpS4S5KgpIm+en9f6PlAhKby4JwEIxlYJV9h5k5nee9GoxHJ2IDSNB0dwdad1NAxDJ/uXDHYmebdk4PdbkS58CIVHdYSUHTYYRWOJblWSyu2lmy3KNFVJNBhxcuGW4YBVCbYGRZwIooipHsNqjM4FbgOQqQqSKQQU9V8xmi1QlgHqQQ6DDBvRUVCDirs+EzGDGOQTCATgtYTnbCVLgsVgRE0T1QE0qHCFAht2z6dLvJQs3Lo2FQoDxWNUiBhaP4eRgwNkI+dAjVOA/kUrIDwf3CG8NfNOE0eiFotSuo+rBiq8tD9oY4Qzc6YJw99hl1wzpQvD7ef2M8QgnOGJfJw+EltQc+oX2yn907QB22WZcvlUpd143dqQu+8pCJZuGE4xCuPXJqqcs5sNpsI93Rmzym1k4Npk+oD1SH3/a3LOK/JpUBpWfqNySxWzCfNCUITuDG5dtuphrUJ1myeIE9bIsPiKrfqTai5WZxbhtNphYx6GEIHihyGFTI69lje/rxajdh0s0msZ0zYxyPLhYCb1CyHm9Qsd2H37Y3lugVwL9kNh8Ot8cha6fUNQ8nuXi5z9/ExsAO4zQrb/ev1yrCB7lGyQzgYDGuxq1toDN/JGvN+HyWNHKB7zEoK+PX11e12G431erGYzwmytAWU56fkMHY5JJnDRR2eZji3AwtIcrEV8Cojat/BdQ7XOwGV1e1hDjGGjXbdArm8uJZtCH5MbcctVX8A1WpqumJHwckAAAAASUVORK5CYII=");
            background-size: 28px 28px;
            animation: image-loading-rotate 1s linear infinite !important;
        }

        .imt-image-status span {
            color: var(--bg-2, #fff) !important;
            font-size: 14px !important;
            line-height: 14px !important;
            font-weight: 500 !important;
            font-family: "PingFang SC", Arial, sans-serif !important;
        }

        @keyframes image-loading-rotate {
            from {
                transform: rotate(360deg);
            }

            to {
                transform: rotate(0deg);
            }
        }
    </style>
    <style data-id="immersive-translate-default-injected-css">
        :root {
            --immersive-translate-theme-underline-borderColor: #72ece9;
            --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
            --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
            --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
            --immersive-translate-theme-highlight-backgroundColor: #ffff00;
            --immersive-translate-theme-dashed-borderColor: #59c1bd;
            --immersive-translate-theme-blockquote-borderColor: #cc3355;
            --immersive-translate-theme-thinDashed-borderColor: #ff374f;
            --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
            --immersive-translate-theme-dashedBorder-borderRadius: 0;
            --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
            --immersive-translate-theme-solidBorder-borderRadius: 0;
            --immersive-translate-theme-dotted-borderColor: #94a3b8;
            --immersive-translate-theme-wavy-borderColor: #72ece9;
            --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
            --immersive-translate-theme-grey-textColor: #2f4f4f;
            --immersive-translate-theme-marker-backgroundColor: #fbda41;
            --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
            --immersive-translate-theme-marker2-backgroundColor: #ffff00;
            --immersive-translate-theme-background-backgroundColor: #dbafaf;
            --immersive-translate-theme-background-backgroundColor-rgb: 219, 175, 175;
            --immersive-translate-theme-background-backgroundOpacity: 12;
            --immersive-translate-theme-opacity-opacity: 10;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pre-whitespace {
            white-space: pre-wrap !important;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container {
            position: absolute;
            background-color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
                sans-serif;
            top: 0;
            width: 600px;
            height: 100%;
            z-index: 2;
            line-height: 1.3;
            font-size: 16px;
        }

        [imt-state="dual"] .immersive-translate-target-wrapper[dir="rtl"] {
            text-align: right;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
            color: rgb(0, 0, 0);
            white-space: normal;
            position: absolute;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
            color: inherit;
            white-space: inherit;
            position: unset;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper &gt;

        br {
            display: none;
        }

        [imt-state="translation"] .immersive-translate-target-translation-block-wrapper {
            margin: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper {
            margin: 8px 0 !important;
            display: inline-block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            display: block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            margin-top: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pdf-block-wrapper {
            margin: 0 !important;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-grey-inner {
            color: var(--immersive-translate-theme-grey-textColor);
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-underline-inner {
            border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeUnderline-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDashed-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
            text-decoration-style: dashed !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-thinDashed-inner {
            border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dotted-inner {
            background-image: linear-gradient(to right,
                    var(--immersive-translate-theme-dotted-borderColor) 30%,
                    rgba(255, 255, 255, 0) 0%);
            background-position: bottom;
            background-size: 5px 1px;
            background-repeat: repeat-x;
            padding-bottom: 3px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDotted-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
            text-decoration-style: dotted !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-wavy-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
            text-decoration-style: wavy !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dashed-inner {
            background: linear-gradient(to right,
                    var(--immersive-translate-theme-dashed-borderColor) 0%,
                    var(--immersive-translate-theme-dashed-borderColor) 50%,
                    transparent 50%,
                    transparent 100%) repeat-x left bottom;
            background-size: 8px 2px;
            padding-bottom: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            content: "";
            display: block;
            max-width: 80px;
            width: 10%;
            border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            padding-top: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
            content: "";
            border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            max-height: 16px;
            height: 16px;
            padding-left: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-highlight-inner {
            background: var(--immersive-translate-theme-highlight-backgroundColor);
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-marker {
            line-height: 1.5em;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker2-inner {
            font-weight: bold;
            text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
                16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
                2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
                -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker-inner {
            /* TODO: add more texture */
            background: linear-gradient(to right,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-weakening {
            opacity: 0.618 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-italic {
            font-style: italic !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-bold {
            font-weight: bold !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-paper {
            margin: 8px 0;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            padding: 16px 32px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-blockquote {
            border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
            padding-left: 12px !important;
            margin-top: 4px;
            margin-bottom: 4px;
            padding-top: 4px;
            padding-bottom: 4px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        /* opacity theme start */

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,
        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: none !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        /* opacity theme end */

        /* background theme start */
        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-background {
            margin: 8px 0;
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            border-radius: 4px;
            box-shadow: unset !important;
            padding: 12px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-background-inner {
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            padding-left: 6px;
            padding-right: 6px;
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper .immersive-translate-target-translation-theme-background-inner {
            background: unset;
            padding-left: unset;
            padding-right: unset;
        }

        /* background theme end */

        /* vertical css , please remain it in the last one. */
        .immersive-translate-target-translation-vertical-block-wrapper {
            margin: 0px 8px !important;
        }

        .immersive-translate-text {
            font-size: 15px !important;
        }

        .immersive-translate-error-toast {
            position: fixed;
            top: 5%;
            z-index: 99999999;
            left: 0;
            right: 0;
            margin: auto;
            max-width: 300px;
            padding: 16px;
            border-radius: 12px;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }

        @media all and (min-width: 750px) {
            .immersive-translate-error-toast {
                max-width: 400px;
            }
        }

        .immersive-translate-clickable-button {
            cursor: pointer;
        }

        .immersive-translate-help-button {
            cursor: pointer;
        }

        .immersive-translate-loading-text:before {
            content: "...";
        }

        /* dark mode for loading */

        @media only screen and (prefers-color-scheme: dark) {
            .immersive-translate-loading {
                border: 2px rgba(255, 255, 255, 0.25) solid !important;
                border-top: 2px rgba(255, 255, 255, 1) solid !important;
            }
        }

        .immersive-translate-error-wrapper {
            position: relative;
            display: inline-flex;
            padding: 6px;
            margin: 0 12px;
            white-space: nowrap;
            font-size: 0.9em;
        }

        [lang="zh-CN"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        [lang="zh-TW"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        .immersive-translate-tooltip {
            position: relative;
            display: inline-flex;
            /* little indicater to indicate it's hoverable */
        }

        .immersive-translate-tooltip-content {
            /* here's the magic */
            position: absolute;
            z-index: 100000000000;

            left: 50%;
            bottom: 0;
            transform: translate(-50%, 110%);
            line-height: 1;
            /* and add a small left margin */

            /* basic styles */
            width: max-content;
            max-width: 250px;
            word-wrap: break-word;
            white-space: pre-line;
            padding: 10px;
            border-radius: 10px;
            background: #000c;
            color: #fff;
            text-align: center;
            font-size: 14px;
            display: none;
            /* hide by default */
        }

        .immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip-content-table {
            left: unset !important;
            bottom: unset !important;
            transform: translate(-10%, 50%) !important;
        }

        .immersive-translate-tooltip:hover:before {
            display: inline-block;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--bg-2, #fff);
            font-size: 14px;
        }
    </style>
    <style data-id="immersive-translate-user-custom-style">
        :root {

            .immersive-translate-target-inner {
                font-family: inherit;
            }


            .immersive-translate-target-inner {
                font-family: inherit;
            }
        }
    </style>
    <style data-id="immersive-translate-dynamic-injected-css">
        .immersive-translate-target-wrapper[dir='rtl'] {
            text-align: right;
        }

        .immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {
            display: block;
        }

        .immersive-translate-target-wrapper {
            word-break: break-word;
            user-select: text;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper[dir='rtl'] {
            display: inline-block;
        }

        [dir='rtl'] .immersive-translate-target-wrapper:not([dir]) {
            text-align: left;
        }

        [imt-state=dual] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            display: block;
        }

        [imt-trans-position=before] .immersive-translate-target-translation-block-wrapper {
            display: block !important;
        }

        [imt-state][data-immersive-translate_rtl] .immersive-translate-target-wrapper {
            display: block !important;
        }
    </style>
</head>

<body epub:type="bodymatter" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
    <section aria-labelledby="c27_1" epub:type="chapter" role="doc-chapter"
        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
        <header data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
            <h1 id="c27_1" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1"><span aria-label="779" epub:type="pagebreak" id="Page_779"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span><span id="c27"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span><span
                    class="chapterNumber"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">27</span><br /><span
                    class="chapterTitle"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor</span></h1>
        </header>
        <section aria-label="chapter opening" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
            <span id="c27-sec-0001" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
            <aside data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                <div class="top hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <hr />
                </div>
                <section class="feature3" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <h3 data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                        data-immersive-translate-paragraph="1">WHAT'S IN THIS CHAPTER?<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章包含什么内容？</font>
                            </font>
                        </font>
                    </h3>
                    <ul class="check2" id="c27-list-0001"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <li id="c27-li-0001" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Getting to know Blazor Server and Blazor WebAssembly
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">了解 Blazor Server 和 Blazor
                                        WebAssembly</font>
                                </font>
                            </font>
                        </li>
                        <li id="c27-li-0002" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Understanding the layout with Blazor applications
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">理解 Blazor 应用程序的布局</font>
                                </font>
                            </font>
                        </li>
                        <li id="c27-li-0003" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Navigating between Razor components<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">在 Razor 组件之间导航</font>
                                </font>
                            </font>
                        </li>
                        <li id="c27-li-0004" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Creating and using Razor components<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">创建和使用 Razor 组件</font>
                                </font>
                            </font>
                        </li>
                        <li id="c27-li-0005" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Injecting services<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注入服务</font>
                                </font>
                            </font>
                        </li>
                        <li id="c27-li-0006" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Implementing event callbacks between components<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">在组件之间实现事件回调</font>
                                </font>
                            </font>
                        </li>
                        <li id="c27-li-0007" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Using two-way binding<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">使用双向绑定</font>
                                </font>
                            </font>
                        </li>
                        <li id="c27-li-0008" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Cascading parameters with component hierarchies<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">级联参数与组件层次结构</font>
                                </font>
                            </font>
                        </li>
                        <li id="c27-li-0009" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">Creating templated components<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">创建模板化组件</font>
                                </font>
                            </font>
                        </li>
                    </ul>
                    <div class="bottom hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <hr />
                    </div>
                </section>
            </aside>
            <aside data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                <div class="top hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <hr />
                </div>
                <section class="feature3" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span
                        id="c27-fea-0001" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                    <h3 id="head-2-243" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                        data-immersive-translate-paragraph="1">CODE DOWNLOADS FOR THIS CHAPTER<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章代码下载</font>
                            </font>
                        </font>
                    </h3>
                    <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span
                            id="c27-sec-0003"
                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                        <p id="c27-para-0003" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">The source code for this chapter is available on the
                            book page at <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="http://www.wiley.com">www.wiley.com</a></code>.
                            Click the Downloads link. The code can also be found at <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                            in the directory <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">3_Web/Blazor</code>.
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的源代码可在书籍页面 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="http://www.wiley.com">www.wiley.com</a></code>
                                        上找到。点击下载链接。代码也可以在目录 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">3_Web/Blazor</code>
                                        中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                                        找到。</font>
                                </font>
                            </font>
                        </p>
                        <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">The code for this chapter is divided into the
                            following major examples:<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的代码分为以下主要示例：</font>
                                </font>
                            </font>
                        </p>
                        <ul class="check" id="c27-list-0002"
                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                            <li id="c27-li-0010" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                                data-immersive-translate-paragraph="1">Blazor.ServerSample</li>
                            <li id="c27-li-0011" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                                data-immersive-translate-paragraph="1">Blazor.WASMSample</li>
                            <li id="c27-li-0012" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                                data-immersive-translate-paragraph="1">Blazor.ComponentsSample<font
                                    class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                    </font>
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">Blazor 组件示例</font>
                                    </font>
                                </font>
                            </li>
                        </ul>
                        <p id="c27-para-0005" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1">All the projects have <i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">nullable
                                reference types</i> enabled.<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">所有项目都已启用可空引用类型。</font>
                                </font>
                            </font>
                        </p>
                    </section>
                    <div class="bottom hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <hr />
                    </div>
                </section>
            </aside>
        </section> <span aria-label="780" epub:type="pagebreak" id="Page_780" role="doc-pagebreak"
            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
        <section aria-labelledby="head-2-244" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
            <span id="c27-sec-0004" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
            <h2 id="head-2-244" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">BLAZOR SERVER AND BLAZOR WEBASSEMBLY<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">BLAZOR 服务器和 BLAZOR WebAssembly</font>
                    </font>
                </font>
            </h2>
            <p id="c27-para-0006" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">Blazor is a new ASP.NET Core technology to create interactive web
                applications. With Blazor, you get full-stack .NET development without the need to write JavaScript
                code. The application can be built using HTML, C#, and CSS—both for the client and for the server.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">Blazor 是一种新的 ASP.NET Core 技术，用于创建交互式
                            Web 应用程序。使用 Blazor，您可以在无需编写 JavaScript 代码的情况下进行全栈 .NET 开发。应用程序可以使用 HTML、C# 和 CSS
                            构建——既用于客户端，也用于服务器。</font>
                    </font>
                </font>
            </p>
            <p id="c27-para-0007" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">You need to understand the difference between two options: Blazor
                Server and Blazor WebAssembly. Both options offer full-stack .NET development, and with both of these
                options, you're creating Razor components. Razor components are an extension of Razor Pages, which are
                covered in <a href="c26.xhtml"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter 26</a>, “Razor Pages
                and MVC.” With Blazor Server, Razor components run on the server. With Blazor WebAssembly, Razor
                components run on the client. To understand the differences and the advantages and disadvantages of
                these options, let's get into more details.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">你需要理解两个选项之间的区别：Blazor Server 和 Blazor
                            WebAssembly。这两个选项都提供全栈.NET 开发，并且使用这两个选项时，你都在创建 Razor 组件。Razor 组件是 Razor Pages 的扩展，Razor
                            Pages 在《Razor Pages 和 MVC》第 26 章中有所介绍。在 Blazor Server 中，Razor 组件在服务器上运行。在 Blazor WebAssembly
                            中，Razor 组件在客户端运行。为了理解这些选项之间的差异以及它们的优缺点，让我们更详细地了解一下。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0005"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-509" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor Server </h3>
                <p id="c27-para-0008" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With Blazor Server (see <a href="#c27-fig-0001"
                        id="R_c27-fig-0001"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Figure 27-1</a>), the
                    client always needs to be connected to the server. You can write server-side C# code using Razor
                    components. You directly work with HTML and C# on the server and make updates to HTML via data
                    binding. Behind the scenes, HTML updates are sent to the client, and a Blazor client-side JavaScript
                    library, which you don't need to deal with, updates the user interface. With Blazor Server, a
                    connection (a <i data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">circuit</i>)
                    between the client and the server stays open, and the client just needs to run HTML and JavaScript.
                    To keep the connection open and to communicate between the client and the server, SignalR is used.
                    SignalR offers an abstraction layer to WebSockets.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 Blazor Server（见图
                                27-1），客户端始终需要连接到服务器。你可以使用 Razor 组件编写服务器端 C#代码。你直接在服务器上处理 HTML 和 C#，并通过数据绑定更新
                                HTML。在后台，HTML 更新会发送到客户端，而一个你无需处理的 Blazor 客户端 JavaScript 库会更新用户界面。使用 Blazor Server
                                时，客户端和服务器之间的连接（一个电路）保持开启状态，客户端只需运行 HTML 和 JavaScript。为了保持连接开启并在客户端和服务器之间进行通信，使用
                                SignalR。SignalR 提供了一个 WebSocket 的抽象层。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <div class="top hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p id="c27-para-0010" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NOTE</b> <i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">More information
                                on SignalR and how you can use SignalR directly from .NET and JavaScript is covered in
                                <a href="c28.xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter
                                    28</a>, “SignalR.”</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 关于 SignalR 以及如何从.NET 和
                                        JavaScript 直接使用 SignalR 的更多信息，请参见第 28 章“SignalR”。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                            <hr />
                        </div>
                    </section>
                </aside>
                <figure data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> <img
                        alt="Snapshot of the relationship between client and server." class="center"
                        src="images/c27f001.png" />
                    <figcaption data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span
                                class="figureLabel"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a
                                    href="#R_c27-fig-0001" id="c27-fig-0001" role="doc-backlink"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><b
                                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                                        data-immersive-translate-paragraph="1">FIGURE 27-1<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 27-1</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
                <p id="c27-para-0011" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you use Blazor Server, the size of the code downloaded
                    to the client is significantly smaller than with Blazor WebAssembly. With Blazor Server, you can use
                    the server capabilities (for example, features discussed in the previous chapters), and tooling is
                    much more mature. A disadvantage of Blazor Server is that the clients are always connected. There's
                    no offline support. This way more continuous load is created on the server and on the network. What
                    is the number of clients simultaneously connected to the server?<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你使用 Blazor Server
                                时，客户端下载的代码大小显著小于 Blazor WebAssembly。使用 Blazor
                                Server，你可以使用服务器功能（例如，前几章讨论的功能），工具链也更加成熟。Blazor Server
                                的缺点是客户端始终保持连接。没有离线支持。这种方式在服务器和网络上创造了更持续的负载。有多少客户端同时连接到服务器？</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0007"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-510" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">WebAssembly </h3>
                <p id="c27-para-0012" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor WebAssembly is based on the WebAssembly (Wasm)
                    standard (see <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://www.w3.org/TR/wasm-core-1/">https://www.w3.org/TR/wasm-core-1/</a></code>).
                    Wasm defines binary code that can run in the browser. All modern browsers support Wasm (see <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://caniuse.com/?search=webassembly">https://caniuse.com/?search=webassembly</a></code>).
                    That is, Internet Explorer (IE) does not support Wasm, but this shouldn't be an issue today because
                    many websites no longer support IE. However, you need to be aware of what WebAssembly features are
                    supported by the browser. WebAssembly is continuously enhanced with new features; check the roadmap
                    for planned features for WebAssembly at <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://webassembly.org/roadmap/">https://webassembly.org/roadmap/</a></code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Blazor WebAssembly 基于
                                WebAssembly（Wasm）标准（见 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://www.w3.org/TR/wasm-core-1/">https://www.w3.org/TR/wasm-core-1/</a></code>
                                ）。Wasm 定义了可以在浏览器中运行的二进制代码。所有现代浏览器都支持 Wasm（见 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://caniuse.com/?search=webassembly">https://caniuse.com/?search=webassembly</a></code>
                                ）。也就是说，Internet Explorer（IE）不支持 Wasm，但这在今天不应成为问题，因为许多网站不再支持 IE。然而，你需要了解浏览器支持哪些
                                WebAssembly 功能。WebAssembly 不断通过新功能进行增强；请查看 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://webassembly.org/roadmap/">https://webassembly.org/roadmap/</a></code>
                                中关于 WebAssembly 计划功能的路线图。</font>
                        </font>
                    </font>
                </p>
                <p id="c27-para-0013" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1"><span aria-label="781" epub:type="pagebreak" id="Page_781"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>Code to compile
                    Wasm code can be written with many programming languages including C#, F#, C++, Rust, Go, Swift, and
                    Pascal.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">用于编译 Wasm 代码的代码可以用多种编程语言编写，包括
                                C#、F#、C++、Rust、Go、Swift 和 Pascal。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Goals defined by WebAssembly are to have fast-running code
                    (near-native code performance), to be capable of running in a safe environment (the browser's
                    sandbox), and to be portable. Use cases for WebAssembly are to create apps that have issues with
                    JavaScript (such as video or image editing and CAD apps), run fat clients in the browser, and use it
                    for language interpreters and virtual machines. Microsoft created a .NET runtime to run in the
                    browser that's running binary Wasm code. The C# compiler creates IL code, and this IL code can run
                    in the .NET runtime in the browser.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">WebAssembly
                                定义的目标是运行快速代码（接近原生代码性能）、能够在安全环境中运行（浏览器的沙盒）以及具备可移植性。WebAssembly 的应用场景包括创建存在 JavaScript
                                问题的应用（如视频或图像编辑和 CAD 应用）、在浏览器中运行胖客户端，以及用于语言解释器和虚拟机。微软创建了一个.NET 运行时，用于在浏览器中运行二进制 Wasm
                                代码。C#编译器生成 IL 代码，这些 IL 代码可以在浏览器中的.NET 运行时中运行。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <div class="top hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p id="c27-para-0015" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NOTE</b> <i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ASP.NET Core
                                Blazor WebAssembly is one way to run WebAssembly code in the browser. Another option is
                                the Uno Platform (</i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://platform.uno/">https://platform.uno/</a></code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">), which allows
                                you to run C# and XAML code with WinUI controls in the browser. See Chapters for more
                                information on WinUI.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 ASP.NET Core Blazor
                                        WebAssembly 是浏览器中运行 WebAssembly 代码的一种方式。另一种选择是 Uno Platform（ <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://platform.uno/">https://platform.uno/</a></code>
                                        ），它允许你在浏览器中使用 WinUI 控件运行 C#和 XAML 代码。有关 WinUI 的更多信息，请参阅章节。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0009"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-511" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor WebAssembly</h3>
                <p id="c27-para-0016" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you use Blazor WebAssembly, you write Razor components
                    similar to Blazor Server, but that's where the similarities end. Outside of the programming
                    environment, Blazor WebAssembly is very different. Here, the .NET code runs on the client (<a
                        href="#c27-fig-0002" id="R_c27-fig-0002"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Figure 27-2</a>); you
                    don't need a server at all because the files just need to be distributed to the client. Blazor
                    WebAssembly can also be created to be a progressive web application (PWA), which can run without
                    connection to a server (after the application is installed on the client).<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你使用 Blazor WebAssembly 时，你编写
                                Razor 组件与 Blazor Server 类似，但相似之处就此结束。在编程环境之外，Blazor WebAssembly 差异很大。在这里，.NET 代码在客户端运行（图
                                27-2）；你完全不需要服务器，因为文件只需要分发到客户端即可。Blazor WebAssembly
                                还可以创建为渐进式网络应用（PWA），它可以在没有连接到服务器的情况下运行（在应用安装到客户端之后）。</font>
                        </font>
                    </font>
                </p>
                <figure data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> <img
                        alt="Snapshot of the relationship between client and server in blazor web assembly."
                        class="center" src="images/c27f002.png" />
                    <figcaption data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span
                                class="figureLabel"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a
                                    href="#R_c27-fig-0002" id="c27-fig-0002" role="doc-backlink"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><b
                                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                                        data-immersive-translate-paragraph="1">FIGURE 27-2<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 27-2</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
                <p id="c27-para-0017" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor WebAssembly is not making use of SignalR. Instead, the
                    .NET runtime (Wasm binary) and the Blazor runtime are sent to the client along with the .NET DLLs
                    (IL code) of your application. Now, you might think that the .NET runtime is huge. It's not as big
                    as you might expect because it's a specific runtime built for WebAssembly and doesn't support all
                    the features of the .NET runtime that's running locally on your system. Also, the binaries built for
                    ASP.NET Core Blazor WebAssembly and from your application are trimmed. Trimming of the binaries
                    means that code that's not used is trimmed from the binaries, and it plays an important role. Read
                    <a href="c01.xhtml" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter
                        1</a>, “.NET Applications and Tools,” for information on trimming assemblies.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Blazor WebAssembly 没有使用
                                SignalR。相反，.NET 运行时（Wasm 二进制文件）和 Blazor 运行时会与应用程序的.NET DLLs（IL 代码）一起发送到客户端。现在，你可能会认为.NET
                                运行时很大。但它并没有你想象的那么大，因为它是为 WebAssembly 构建的特定运行时，不支持在本地系统上运行的.NET 运行时的所有功能。此外，为 ASP.NET
                                Core Blazor WebAssembly
                                构建的以及你应用程序的二进制文件都经过了修剪。二进制文件的修剪意味着未使用的代码会被从二进制文件中移除，这起到了重要作用。有关修剪程序集的信息，请阅读第 1 章，“.NET
                                应用程序和工具”。</font>
                        </font>
                    </font>
                </p>
                <p id="c27-para-0018" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor WebAssembly can be hosted with a static web app—for
                    example, using an Azure Storage account or, even better, Azure Static Web Apps. Of course, usually a
                    backend is needed as well. With Azure Static Web Apps, you can create a REST API service using Azure
                    Functions, which is covered in <a href="c25.xhtml"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter 25</a>,
                    “Services.”<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Blazor WebAssembly
                                可以与静态网页应用一起托管——例如，使用 Azure 存储账户，或者更好的是 Azure 静态网页应用。当然，通常还需要后端。使用 Azure 静态网页应用，你可以使用
                                Azure Functions 创建 REST API 服务，这在第 25 章，“服务”中有介绍。</font>
                        </font>
                    </font>
                </p>
                <p id="c27-para-0019" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">To take full advantage of Blazor WebAssembly, it's still
                    advantageous to use .NET on the server. Using .NET on the server allows you to prerender HTML code
                    that is sent to the client, so the client can see the HTML code before the WebAssembly code is
                    downloaded and runs.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要充分利用 Blazor
                                WebAssembly，在服务器上使用.NET 仍然有利。在服务器上使用.NET 允许你预渲染发送给客户端的 HTML 代码，这样客户端可以在 WebAssembly
                                代码下载并运行之前看到 HTML 代码。</font>
                        </font>
                    </font>
                </p>
                <p id="c27-para-0020" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Advantages of using Blazor WebAssembly compared to Blazor
                    Server are that you can use the client capabilities and processing power and that the application
                    can be installed as a PWA and can still run without the server available. Of course, there are
                    disadvantages because more code needs to be downloaded to the client, and the development
                    environment is not as mature as with the server side. Today debugging of client-side .NET Code works
                    in most scenarios, but not in all.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">与 Blazor Server 相比，使用 Blazor
                                WebAssembly 的优点在于你可以使用客户端的功能和处理能力，并且应用程序可以作为 PWA
                                安装，即使没有服务器也可以运行。当然，也存在缺点，因为需要下载更多的代码到客户端，并且开发环境不如服务器端成熟。目前，在大多数情况下，客户端.NET
                                代码的调试是可行的，但并非所有情况都适用。</font>
                        </font>
                    </font>
                </p>
            </section>
        </section> <span aria-label="782" epub:type="pagebreak" id="Page_782" role="doc-pagebreak"
            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
        <section aria-labelledby="head-2-245" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
            <span id="c27-sec-0010" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
            <h2 id="head-2-245" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">CREATING A BLAZOR SERVER WEB APPLICATION<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">创建 Blazor 服务器端 Web 应用程序</font>
                    </font>
                </font>
            </h2>
            <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">Let's start by creating a Blazor server web application using the
                .NET CLI with the following:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">让我们开始使用.NET CLI 创建一个 Blazor 服务器端 Web
                            应用程序，具体如下：</font>
                    </font>
                </font>
            </p>
            <pre id="c27-code-0001"><code>&gt; dotnet new blazorserver -o Blazor.ServerSample</code></pre>
            <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">Of course, you can also use a Visual Studio template. With the
                generated code, the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Program.cs</code> file with
                the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Host</code> class
                configuration is the same as you've seen it in the previous chapters, but the configuration of the
                dependency injection container in the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Startup</code> class is
                different, as shown in the following code snippet. After adding Razor Pages with the extension method
                <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddRazorPages</code>,
                services needed for server-side Blazor are added with the extension method <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddServerSideBlazor</code>.
                <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddServerSideBlazor</code>
                returns an <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IServerSideBlazorBuilder</code>,
                which allows configuring hub (<code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddHubOptions</code>) and
                circuit (<code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddCircuitOptions</code>)
                options. Hub options allow you to configure client timeouts, configure buffer sizes, and enable detailed
                errors. The generated template also registers a singleton for weather forecast information (code file
                <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Startup.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">当然，你也可以使用 Visual Studio 模板。生成的代码中，带有
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Host</code> 类配置的
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Program.cs</code>
                            文件与之前章节中看到的一致，但 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Startup</code>
                            类中的依赖注入容器的配置不同，如下面的代码片段所示。通过扩展方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddRazorPages</code>
                            添加 Razor Pages 后，使用扩展方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddServerSideBlazor</code>
                            添加了服务器端 Blazor 所需的服务。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddServerSideBlazor</code>
                            返回一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IServerSideBlazorBuilder</code>
                            ，它允许配置中心（ <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddHubOptions</code>
                            ）和电路（ <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">AddCircuitOptions</code>
                            ）选项。中心选项允许你配置客户端超时、配置缓冲区大小以及启用详细错误。生成的模板还注册了一个用于天气预报信息的单例（代码文件 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Startup.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c27-code-0002"><code>public void ConfigureServices(IServiceCollection services)</code>
<code>{</code>
<code>  services.AddRazorPages();</code>
<code>  services.AddServerSideBlazor();</code>
<code>  services.AddSingleton&lt;WeatherForecastService&gt;();</code>
<code>}</code></pre>
            <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">With the middleware, static files need to be configured to be
                sent to the client (<code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseStaticFiles</code>).
                Endpoint routing specifies that Blazor takes over the default routing (<code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MapBlazorHub</code>); this
                configures the SignalR hub route used for the WebSocket communication from the client to the server. In
                case a route is not found, the fallback is set to <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host</code> with <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MapFallbackToPage</code>
                (code file <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Startup.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用中间件时，静态文件需要配置为发送给客户端（ <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseStaticFiles</code>
                            ）。端点路由指定 Blazor 接管默认路由（ <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MapBlazorHub</code>
                            ）；这配置了用于客户端与服务器之间 WebSocket 通信的 SignalR 中心路由。如果找不到路由，则使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host</code>
                            设置回退，通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MapFallbackToPage</code>
                            （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Startup.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c27-code-0003"><code>public void Configure(IApplicationBuilder app, IWebHostEnvironment env)</code>
<code>{</code>
<code>  //…</code>
<code>  app.UseHttpsRedirection();</code>
<code>  app.UseStaticFiles();</code>
<code> </code>
<code>  app.UseRouting();</code>
<code> </code>
<code>  app.UseEndpoints(endpoints =&gt;</code>
<code>  {</code>
<code>    endpoints.MapBlazorHub();</code>
<code>    endpoints.MapFallbackToPage("/_Host");</code>
<code>  });</code>
<code>}</code></pre>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0011"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-512" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor Server Startup </h3>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">After the startup of ASP.NET Core with the DI container
                    configuration and the middleware configuration, the next step to start Blazor Server is the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host.cshtml</code> Razor
                    page. This file contains the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">component</code> tag
                    helper (which are discussed in <a href="c26.xhtml"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter 26</a>), as shown
                    in the following code snippet, which renders the Razor component <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code>. With the
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">render-mode</code>
                    options, you can specify the output of the Razor component. Setting this to <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Static</code> just
                    renders HTML, and Blazor code is not active. Using <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Server</code> creates
                    markers that are used by the Blazor communication to send the HTML and JavaScript output dynamically
                    via SignalR. The default option is <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ServerPrerendered</code>,
                    where HTML is already prerendered on the server, and in addition to HTML, markers are sent to the
                    client. With <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ServerPrerendered</code>,
                    the client sees the first HTML output faster. The markers are then used for dynamic updates (code
                    file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/_Host.cshtml</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在配置了依赖注入容器和中间件之后启动 ASP.NET Core，启动
                                Blazor Server 的下一步是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host.cshtml</code>
                                Razor 页面。该文件包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">component</code>
                                标签辅助组件（在第 26 章中讨论），如下面的代码片段所示，它渲染了 Razor 组件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code>
                                。通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">render-mode</code>
                                选项，您可以指定 Razor 组件的输出。将其设置为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Static</code>
                                仅渲染 HTML，Blazor 代码不会激活。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Server</code>
                                创建标记，这些标记由 Blazor 通信使用，通过 SignalR 动态发送 HTML 和 JavaScript 输出。默认选项是 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ServerPrerendered</code>
                                ，其中 HTML 在服务器上预先渲染，并且除了 HTML 之外，还会向客户端发送标记。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ServerPrerendered</code>
                                ，客户端可以更快地看到第一个 HTML 输出。然后使用标记进行动态更新（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/_Host.cshtml</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre
                    id="c27-code-0004"><code>&lt;component type="typeof(App)" render-mode="ServerPrerendered"/&gt;</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1"><span aria-label="783" epub:type="pagebreak" id="Page_783"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>With the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host</code> file, the
                    HTML element <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">base</code> plays an
                    important role in setting the base route for Blazor. This helper is used among other HTML header
                    settings and includes style sheets used by all the Razor components (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/_Host.cshtml</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host</code>
                                文件，HTML 元素 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">base</code>
                                在设置 Blazor 的基本路由方面起着重要作用。该辅助组件用于其他 HTML 头部设置中，并包含所有 Razor 组件使用的样式表（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/_Host.cshtml</code>
                                ）。</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0005"><code>&lt;head&gt;</code>
<code>    &lt;meta charset="utf-8"/&gt;</code>
<code>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"/&gt;</code>
<code>    &lt;title&gt;Blazor.ServerSample&lt;/title&gt;</code>
<code>    <b>&lt;base href="~/" /&gt;</b></code>
<code>    &lt;link rel="stylesheet" href="css/bootstrap/bootstrap.min.css"/&gt;</code>
<code>    &lt;link href="css/site.css" rel="stylesheet"/&gt;</code>
<code>    &lt;link href="Blazor.ServerSample.styles.css" rel="stylesheet"/&gt;</code>
<code>&lt;/head&gt;</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code> is the first
                    Razor component that comes into play with bootstrapping of the application. The complete generated
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code> component is
                    shown in the following code snippet. This component includes some other Razor components and a
                    little HTML code. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">p</code> element is HTML;
                    all the other elements are Razor components: <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Router</code>, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Found</code>, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NotFound</code>, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>, and
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutView</code> (code
                    file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/App.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code>
                                是启动应用程序时首先起作用的第一个 Razor 组件。完整的生成 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code>
                                组件显示在下方的代码片段中。该组件包含一些其他的 Razor 组件和少量 HTML 代码。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">p</code> 元素是
                                HTML；所有其他的元素都是 Razor 组件： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Router</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Found</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NotFound</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutView</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/App.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0006"><code>&lt;Router AppAssembly="@typeof(Program).Assembly" PreferExactMatches="@true"&gt;</code>
<code>  &lt;Found Context="routeData"&gt;</code>
<code>    &lt;RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)"/&gt;</code>
<code>  &lt;/Found&gt;</code>
<code>  &lt;NotFound&gt;</code>
<code>    &lt;LayoutView Layout="@typeof(MainLayout)"&gt;</code>
<code>      &lt;p&gt;Sorry, there's nothing at this address.&lt;/p&gt;</code>
<code>    &lt;/LayoutView&gt;</code>
<code>  &lt;/NotFound&gt;</code>
<code>&lt;/Router&gt;</code></pre>
                <p id="c27-para-0027" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Router</code> component
                    is responsible for the routing of Blazor apps. <a href="c26.xhtml"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter 26</a> covers
                    creating routes with Razor pages and the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code> directive.
                    The <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code>
                    directive is used with Razor components as well (but with Razor components, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code> directive is
                    optional). If the Razor component includes a route, it is used by the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Router</code> component
                    to add it to the possible route matches. If a match is found (using the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Found</code> component),
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>
                    component is used to continue. If a match is not found (see the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NotFound</code>
                    component), the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutView</code>
                    component is used. With the generated file, both the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code> as well
                    as the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutView</code> use the
                    same Razor component, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>, to
                    render the HTML layout. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutView</code> renders
                    the child content within the associated layout specified by the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Layout</code> property.
                    With the generated code, simple HTML code is shown if the URL does not have a matching route. With
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>, a
                    default layout is specified, which can be overridden with the components if specific components
                    should use a different layout. Next, the main responsibility of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code> is to
                    activate a Razor component that matches the route and to pass route data to this component.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Router</code>
                                组件负责 Blazor 应用的路由。第 26 章介绍了使用 Razor 页面和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code>
                                指令创建路由。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code>
                                指令也用于 Razor 组件（但在 Razor 组件中， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code>
                                指令是可选的）。如果 Razor 组件包含路由，它会被 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Router</code>
                                组件用来添加到可能的路线匹配中。如果找到匹配项（使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Found</code>
                                组件），则使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>
                                组件继续。如果未找到匹配项（参见 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NotFound</code>
                                组件），则使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutView</code>
                                组件。在生成的文件中， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutView</code>
                                都使用相同的 Razor 组件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                                来渲染 HTML 布局。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutView</code>
                                在由 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Layout</code>
                                属性指定的关联布局内渲染子内容。在生成的代码中，如果 URL 没有匹配的路由，则显示简单的 HTML 代码。使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>
                                指定默认布局，如果特定组件应使用不同布局，则可以通过组件覆盖。接下来， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>
                                的主要职责是激活与路由匹配的 Razor 组件，并将路由数据传递给该组件。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0012"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-513" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor Layout <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Blazor 布局</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">According to the definition of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code> component, the
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                    component as shown in the following code snippet is used for the default layout. This component
                    inherits from the base class <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutComponentBase</code>.
                    <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutComponentBase</code>
                    defines the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Body</code>
                    property of type <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RenderFragment</code>.
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RenderFragment</code>
                    allows creating templated components as shown in detail in the section “Using Templated Components.”
                    With the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>, the
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Body</code> property is
                    used to render the Razor component passed from the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>. Within
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>,
                    you can see another Razor component used: <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code> is a
                    component to show the navigation of the application. <span aria-label="784" epub:type="pagebreak"
                        id="Page_784" role="doc-pagebreak"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>Other than that,
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                    only contains HTML (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Shared/MainLayout.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">根据 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code>
                                组件的定义，以下代码片段中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                                组件用于默认布局。该组件继承自基类 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutComponentBase</code>
                                。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">LayoutComponentBase</code>
                                定义了类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RenderFragment</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Body</code>
                                属性。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RenderFragment</code>
                                允许创建模板化组件，详细内容请参考“使用模板化组件”一节。通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                                ，使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Body</code>
                                属性渲染从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RouteView</code>
                                传递的 Razor 组件。在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                                中，可以看到另一个 Razor 组件： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>
                                是一个用于显示应用程序导航的组件。除此之外， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                                仅包含 HTML（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Shared/MainLayout.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0007"><code><b>@inherits LayoutComponentBase</b></code>
<code> </code>
<code>&lt;div class="page"&gt;</code>
<code>  &lt;div class="sidebar"&gt;</code>
<code>    <b>&lt;NavMenu /&gt;</b></code>
<code>  &lt;/div&gt;</code>
<code> </code>
<code>  &lt;div class="main"&gt;</code>
<code>    &lt;div class="top-row px-4"&gt;</code>
<code>      &lt;a href="https://docs.microsoft.com/aspnet/" target="_blank"&gt;About&lt;/a&gt;</code>
<code>    &lt;/div&gt;</code>
<code> </code>
<code>    &lt;div class="content px-4"&gt;</code>
<code>      <b>@Body</b></code>
<code>    &lt;/div&gt;</code>
<code>  &lt;/div&gt;</code>
<code>&lt;/div&gt;</code></pre>
                <p id="c27-para-0029" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code> is
                    stored in the folder <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Shared</code>. Blazor
                    makes use of the same mechanisms you've seen in the previous chapter. Components are searched first
                    in the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Pages</code>
                    folder, and if they can't be found there, the search continues in the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Shared</code> folder.
                    This way you can override the application to use different <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout.razor</code>
                    layouts in different <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Pages</code> and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Areas</code> folders.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                                存储在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Shared</code>
                                文件夹中。Blazor 利用了你在上一章中看到的相同机制。组件首先在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Pages</code>
                                文件夹中搜索，如果在那里找不到，搜索会继续在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Shared</code>
                                文件夹中。这样，你可以在不同的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Pages</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Areas</code>
                                文件夹中覆盖应用程序，使用不同的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout.razor</code>
                                布局。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0013"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-514" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Navigation <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">导航</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With the Razor component <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>, you can
                    see some more Blazor features in action. As shown in the following code snippet, this component uses
                    an HTML button where the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onclick</code> event is
                    bound to the C# method <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ToggleNavMenu</code>.
                    With Blazor Server, as the user clicks the HTML button on the client, communication happens with the
                    server where the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ToggleNavMenu</code>
                    method runs on the server (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Shared/NavMenu.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 Razor 组件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>
                                ，你可以看到更多 Blazor 功能的应用。如以下代码片段所示，该组件使用了一个 HTML 按钮，其中 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onclick</code>
                                事件绑定到 C#方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ToggleNavMenu</code>
                                。在 Blazor Server 中，当用户在客户端点击 HTML 按钮时，会与服务器进行通信，服务器上运行 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ToggleNavMenu</code>
                                方法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Shared/NavMenu.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0008"><code>&lt;div class="top-row pl-4 navbar navbar-dark"&gt;</code>
<code>  &lt;a class="navbar-brand" href=""&gt;Blazor.ServerSample&lt;/a&gt;</code>
<code>  <b>&lt;button class="navbar-toggler" @onclick="ToggleNavMenu"&gt;</b></code>
<code>    &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;</code>
<code>  &lt;/button&gt;</code>
<code>&lt;/div&gt;</code></pre>
                <p id="c27-para-0031" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">For mapping HTML element events to .NET methods, you just
                    need to use the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@</code> symbol as a
                    prefix to the event name to bind the event to a .NET method. This is covered with more detail in the
                    section “Two-Way Binding.”<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要映射 HTML 元素事件到.NET 方法，你只需要将 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@</code>
                                符号作为事件名称的前缀来绑定事件到.NET 方法。这将在“双向绑定”部分中详细说明。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With Razor components, the C# code is defined within the
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@code</code> section
                    (which is different than the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@functions</code> section
                    with Razor pages). With this code section, you can see the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ToggleNavMenu</code> that
                    switches the value of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">collapseNavMenu</code>
                    between true and false. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenuCssClass</code>
                    returns different values, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">collapse</code> or <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">null</code>, based on the
                    value of the Boolean field (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Shared/NavMenu.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 Razor 组件，C#代码定义在 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@code</code>
                                部分（这与 Razor 页面中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@functions</code>
                                部分不同）。在这个代码部分，你可以看到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ToggleNavMenu</code>
                                切换 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">collapseNavMenu</code>
                                的值在 true 和 false 之间。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenuCssClass</code>
                                根据布尔字段的值返回不同的值 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">collapse</code>
                                或 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">null</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Shared/NavMenu.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0009"><code>@code {</code>
<code>  private bool collapseNavMenu = true;</code>
<code> </code>
<code>  private string? NavMenuCssClass =&gt; collapseNavMenu ? "collapse" : null;</code>
<code> <span aria-label="785" epub:type="pagebreak" id="Page_785" role="doc-pagebreak"></span></code>
<code>  private void ToggleNavMenu()</code>
<code>  {</code>
<code>    collapseNavMenu = !collapseNavMenu;</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Binding in the other direction— from the C# code to HTML— is
                    done with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">class</code> attribute of
                    the first <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">div</code>
                    element in the following code snippet. The HTML attribute <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">class</code> binds to the
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenuCssClass</code>
                    string defined with the code segment. When an event occurs (such as the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">click</code> event) and
                    the C# source changes, the user interface gets updated. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">div</code> element also
                    binds the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onclick</code> event to
                    the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ToggleNavMenu</code>
                    method, so you can either click the button or click the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">div</code> element to
                    invoke this method. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code> component
                    also contains <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavLink</code> components
                    to create HTML links to Razor components that match the default route and the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">counter</code> and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">fetchdata</code> routes
                    as specified by the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">href</code> attributes.
                    The <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">href</code>
                    attributes are added to the anchor (<code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">a</code>) elements that
                    are rendered from <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code> (code file
                    <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Shared/NavMenu.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">反向绑定——从 C#代码到 HTML——是通过以下代码片段中第一个
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">div</code>
                                元素的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">class</code>
                                属性完成的。HTML 属性 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">class</code>
                                绑定到代码段定义的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenuCssClass</code>
                                字符串。当发生事件（如 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">click</code>
                                事件）且 C#源发生变化时，用户界面会更新。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">div</code>
                                元素还绑定 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onclick</code>
                                事件到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ToggleNavMenu</code>
                                方法，因此你可以点击按钮或点击 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">div</code>
                                元素来调用此方法。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>
                                组件还包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavLink</code>
                                组件来创建 HTML 链接到与默认路由和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">counter</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">fetchdata</code>
                                路由匹配的 Razor 组件，这些路由由 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">href</code>
                                属性指定。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">href</code>
                                属性被添加到从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Shared/NavMenu.razor</code>
                                ）渲染的锚（ <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">a</code>
                                ）元素上：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0010"><code>&lt;div <b>class="@NavMenuCssClass" @onclick="ToggleNavMenu"</b>&gt;</code>
<code>  &lt;ul class="nav flex-column"&gt;</code>
<code>    &lt;li class="nav-item px-3"&gt;</code>
<code>      &lt;NavLink class="nav-link" href="" Match="NavLinkMatch.All"&gt;</code>
<code>        &lt;span class="oi oi-home" aria-hidden="true"&gt;&lt;/span&gt; Home</code>
<code>      &lt;/NavLink&gt;</code>
<code>    &lt;/li&gt;</code>
<code>    &lt;li class="nav-item px-3"&gt;</code>
<code>      &lt;NavLink class="nav-link" href="counter"&gt;</code>
<code>        &lt;span class="oi oi-plus" aria-hidden="true"&gt;&lt;/span&gt; Counter</code>
<code>      &lt;/NavLink&gt;</code>
<code>    &lt;/li&gt;</code>
<code>    &lt;li class="nav-item px-3"&gt;</code>
<code>      &lt;NavLink class="nav-link" href="fetchdata"&gt;</code>
<code>        &lt;span class="oi oi-list-rich" aria-hidden="true"&gt;&lt;/span&gt; Fetch data</code>
<code>      &lt;/NavLink&gt;</code>
<code>    &lt;/li&gt;</code>
<code>  &lt;/ul&gt;</code>
<code>&lt;/div&gt;</code></pre>
                <p id="c27-para-0034" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavLink</code> component
                    not only creates an HTML anchor (<code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">a</code>) element, but it
                    also toggles the active CSS class. Setting the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Match</code> property to
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavLinkMatch.All</code>
                    activates the class only if the link matches completely. With the default <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavLinkMatch.Prefix</code>,
                    the CSS class is activated if the start of the link matches.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavLink</code>
                                组件不仅创建 HTML 锚（ <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">a</code>
                                ）元素，还切换活动 CSS 类。将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Match</code>
                                属性设置为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavLinkMatch.All</code>
                                仅当链接完全匹配时才激活该类。在默认的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavLinkMatch.Prefix</code>
                                设置下，如果链接的开头匹配，CSS 类就会被激活。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0014"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-515" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The Counter Component <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">计数器组件</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Now that we've gone through the bootstrap, the layout, and
                    the navigation, let's move on to components. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    is one of the components created with the default template. There's not a big difference from the
                    components <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code> and
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>. The
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                    component starts with a <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code> directive,
                    which defines the link <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">/counter</code>. Razor
                    components without a <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code> directive
                    can only be used within other components. Because <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> has a
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code> directive
                    with the link <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">/counter</code>, this
                    component can be accessed by passing <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">/counter</code> with the
                    URI. The <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                    component also makes use of binding to connect the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onclick</code> event of
                    the button to the .NET method <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IncrementCount</code> and
                    to retrieve the value of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">currentCount</code> field
                    using <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@currentCount</code>
                    (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/Counter.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在我们已经完成了引导、布局和导航的介绍，接下来让我们继续学习组件。
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件是使用默认模板创建的组件之一。它与组件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>
                                没有太大区别。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件以 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code>
                                指令开头，该指令定义了链接 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">/counter</code>
                                。没有 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code>
                                指令的 Razor 组件只能在其他组件内部使用。因为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                有一个带有链接 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">/counter</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code>
                                指令，所以这个组件可以通过在 URI 中传递 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">/counter</code>
                                来访问。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件也使用了绑定功能，将按钮的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onclick</code>
                                事件连接到 .NET 方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IncrementCount</code>
                                ，并使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@currentCount</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/Counter.razor</code>
                                ）来获取 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">currentCount</code>
                                字段的值：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0011"><code>@page "/counter"</code>
<code> </code>
<code>&lt;h1&gt;Counter&lt;/h1&gt;<span aria-label="786" epub:type="pagebreak" id="Page_786" role="doc-pagebreak"></span></code>
<code> </code>
<code>&lt;p&gt;Current count: @currentCount&lt;/p&gt;</code>
<code> </code>
<code>&lt;button class="btn btn-primary" @onclick="IncrementCount"&gt;Click me&lt;/button&gt;</code>
<code> </code>
<code>@code {</code>
<code>  private int currentCount = 0;</code>
<code> </code>
<code>  private void IncrementCount()</code>
<code>  {</code>
<code>    currentCount++;</code>
<code>  }</code>
<code>}</code></pre>
                <p id="c27-para-0036" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you run the application, you can see the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    and click the button to increment the count. When you resize the application to make it smaller, the
                    look changes because of the Bootstrap theme used. Making the application smaller, the toggle button
                    discussed earlier in the section “Navigation” is visible (<a href="#c27-fig-0003"
                        id="R_c27-fig-0003"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Figure 27-3</a>), and you
                    can show or hide the menus.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行应用程序时，你可以看到 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件并点击按钮来增加计数。当你缩小应用程序使其变小时，外观会发生变化，这是因为使用了 Bootstrap 主题。当应用程序变小时，在“导航”部分之前讨论的切换按钮会变得可见（图
                                27-3），你可以显示或隐藏菜单。</font>
                        </font>
                    </font>
                </p>
                <figure data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> <img
                        alt="Snapshot shows the current count as 8." class="center" src="images/c27f003.png" />
                    <figcaption data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span
                                class="figureLabel"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a
                                    href="#R_c27-fig-0003" id="c27-fig-0003" role="doc-backlink"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><b
                                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                                        data-immersive-translate-paragraph="1">FIGURE 27-3<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 27-3</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0015"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-516" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The FetchData Component<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">FetchData 组件</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Another interesting component created with the default
                    template is the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">FetchData</code>
                    component. This component injects the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WeatherForecastService</code>
                    using the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@inject</code> directive.
                    Remember, this service was registered into the <span aria-label="787" epub:type="pagebreak"
                        id="Page_787" role="doc-pagebreak"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>DI container at
                    the start of the section “Creating a Blazor Server Web Application” (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/FetchData.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用默认模板创建的另一个有趣组件是 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">FetchData</code>
                                组件。该组件使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@inject</code>
                                指令注入 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WeatherForecastService</code>
                                。记住，这个服务在“创建 Blazor Server Web 应用程序”章节开始时注册到了 DI 容器中（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/FetchData.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0012"><code>@page "/fetchdata"</code>
<code> </code>
<code>@using Blazor.ServerSample.Data</code>
<code>@inject WeatherForecastService ForecastService</code>
<code>&lt;!-- …  --&gt;</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Within the code section, in the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInitializeAsync</code>
                    method, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">GetForecastAsync</code>
                    method is invoked, which returns weather information for the next few days. With Razor components,
                    on initialization the method <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInitializeAsync</code>
                    is invoked (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/FetchData.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在代码部分中，在 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInitializeAsync</code>
                                方法中调用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">GetForecastAsync</code>
                                方法，该方法返回未来几天的天气信息。使用 Razor 组件时，在初始化时会调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInitializeAsync</code>
                                方法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/FetchData.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0013"><code>@code {</code>
<code>  private WeatherForecast[]? forecasts;</code>
<code> </code>
<code>  protected override async Task OnInitializedAsync()</code>
<code>  {</code>
<code>    forecasts = await ForecastService.GetForecastAsync(DateTime.Now);</code>
<code>  }</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <div class="top hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p id="c27-para-0040" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NOTE</b> <i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">The lifetime of
                                Razor components is different than Razor Pages. As a parent component renders, you can
                                override the following methods; they are invoked in the listed order: </i> <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">SetParametersAsync</code>
                            <i data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> (sets the
                                parameters), </i> <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInitialized(Async)</code>
                            <i data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> (override for
                                your initialization code), </i> <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnParametersSet(Async)</code>
                            <i data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> (parameters are
                                assigned), </i> <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">StateHasChanged</code>
                            <i data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">, </i> <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ShouldRender</code>
                            <i data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> (returns true if
                                rendering should be done), and </i> <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnAfterRender(Async)</code>
                            <i data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> (invoked after
                                rendering). Some of the methods have a synchronous as well an asynchronous version. The
                                synchronous method is invoked before the asynchronous. If you invoke async APIs,
                                override the async method. The </i> <code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInitialized(Async)</code>
                            <i data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> methods are
                                invoked only once when the component is initialized. The other methods are invoked every
                                time the component is shown.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 Razor 组件的生命周期与 Razor
                                        页面不同。当父组件渲染时，你可以重写以下方法；它们按列出的顺序被调用： <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">SetParametersAsync</code>
                                        （设置参数）、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInitialized(Async)</code>
                                        （你的初始化代码的覆盖）、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnParametersSet(Async)</code>
                                        （参数被分配）、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">StateHasChanged</code>
                                        、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ShouldRender</code>
                                        （如果应该进行渲染则返回 true），以及 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnAfterRender(Async)</code>
                                        （渲染后被调用）。其中一些方法有同步和异步版本。同步方法在异步方法之前被调用。如果你调用异步 API，请重写异步方法。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInitialized(Async)</code>
                                        方法仅在组件初始化时被调用一次。其他方法每次组件显示时都会被调用。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With the following code snippet, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WeatherForecast</code>
                    array is used to display the information returned—using Razor syntax mixed with HTML (<code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/FetchData.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用以下代码片段， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WeatherForecast</code>
                                数组用于显示返回的信息——使用 Razor 语法混合 HTML（ <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.ServerSample/Pages/FetchData.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0014"><code>@if (forecasts == null)</code>
<code>{</code>
<code>  &lt;p&gt;&lt;em&gt;Loading…&lt;/em&gt;&lt;/p&gt;</code>
<code>}</code>
<code>else</code>
<code>{</code>
<code>  &lt;table class="table"&gt;</code>
<code>    &lt;thead&gt;</code>
<code>      &lt;tr&gt;</code>
<code>        &lt;th&gt;Date&lt;/th&gt;</code>
<code>        &lt;th&gt;Temp. (C)&lt;/th&gt;</code>
<code>        &lt;th&gt;Temp. (F)&lt;/th&gt;</code>
<code>        &lt;th&gt;Summary&lt;/th&gt;</code>
<code>      &lt;/tr&gt;</code>
<code>    &lt;/thead&gt;</code>
<code>    &lt;tbody&gt;</code>
<code>      @foreach (var forecast in forecasts)<span aria-label="788" epub:type="pagebreak" id="Page_788" role="doc-pagebreak"></span></code>
<code>      {</code>
<code>        &lt;tr&gt;</code>
<code>          &lt;td&gt;@forecast.Date.ToShortDateString()&lt;/td&gt;</code>
<code>          &lt;td&gt;@forecast.TemperatureC&lt;/td&gt;</code>
<code>          &lt;td&gt;@forecast.TemperatureF&lt;/td&gt;</code>
<code>          &lt;td&gt;@forecast.Summary&lt;/td&gt;</code>
<code>        &lt;/tr&gt;</code>
<code>      }</code>
<code>    &lt;/tbody&gt;</code>
<code>  &lt;/table&gt;</code>
<code>}</code></pre>
                <p id="c27-para-0042" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you run the application, you can open the browser's
                    developer tools to see WebSocket communication is used between client and server.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                运行应用程序时，你可以打开浏览器的开发者工具来查看客户端和服务器之间使用 WebSocket 进行通信。</font>
                        </font>
                    </font>
                </p>
            </section>
        </section>
        <section aria-labelledby="head-2-246" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
            <span id="c27-sec-0017" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
            <h2 id="head-2-246" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">BLAZOR WEBASSEMBLY</h2>
            <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">Now that you understand the path through a Blazor Server project,
                let's get into the differences with Blazor WebAssembly. <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">dotnet new blazorwasm</code>
                creates a new Blazor WebAssembly project that you can publish to a server to publish files that need to
                be returned to the client. Let's add the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">--hosted</code> and <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">--pwa</code> options to this:
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">现在你已经了解了 Blazor Server 项目的路径，让我们来看看与
                            Blazor WebAssembly 的不同之处。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">dotnet new blazorwasm</code>
                            创建一个新的 Blazor WebAssembly 项目，你可以将其发布到服务器上以发布需要返回给客户端的文件。让我们向这个项目中添加 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">--hosted</code> 和
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">--pwa</code> 选项：
                        </font>
                    </font>
                </font>
            </p>
            <pre id="c27-code-0015"><code>&gt; dotnet new blazorwasm --hosted --pwa -o Blazor.WasmSample</code></pre>
            <p id="c27-para-0044" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">As a result of this command, three projects are created: a shared
                library containing code that can be used both from the API and from Blazor WebAssembly, an ASP.NET Core
                Web API project that not only hosts a Web API controller but also is used to contain all the Blazor
                WebAssembly files needed when publishing to send it to the client, and a project for Blazor WebAssembly.
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">执行此命令后，将创建三个项目：一个共享库，其中包含 API 和 Blazor
                            WebAssembly 都可以使用的代码，一个 ASP.NET Core Web API 项目，它不仅托管 Web API 控制器，还用于包含所有在发布时需要发送给客户端的
                            Blazor WebAssembly 文件，以及一个 Blazor WebAssembly 项目。</font>
                    </font>
                </font>
            </p>
            <p id="c27-para-0045" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">The <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Server</code>
                project references both the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client</code>
                project as well as the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Shared</code>
                project. This is an ASP.NET Core project hosting Razor Pages (covered in <a href="c26.xhtml"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter 26</a>), an ASP.NET
                Core Web API (covered in <a href="c25.xhtml"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter 25</a>), and the code
                to serve the Blazor client files for the client. When publishing, you need to create a publish package
                with this project that contains all the files you need to publish to the web server. A NuGet package
                added for the server-side part is <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Microsoft.AspNetCore.Components.WebAssembly.Server</code>.
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1"> <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Server</code>
                            项目同时引用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client</code>
                            项目和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Shared</code>
                            项目。这是一个托管 Razor 页面（在第 26 章中介绍）的 ASP.NET Core 项目，一个 ASP.NET Core Web API（在第 25
                            章中介绍），以及用于为客户端提供 Blazor 客户端文件的代码。在发布时，你需要使用这个项目创建一个发布包，其中包含所有需要发布到 Web 服务器的文件。为服务器端部分添加的
                            NuGet 包是 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Microsoft.AspNetCore.Components.WebAssembly.Server</code>
                            。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">With the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Startup</code> class, you'll
                see some specific Blazor configurations with the configuration of the middleware. In development mode,
                <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseWebAssemblyDebugging</code>,
                middleware is added to allow debugging Blazor WebAssembly applications in Chromium-based browsers.
                Google Chrome and Microsoft Edge can be used for debugging. <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseBlazorFrameworkFiles</code>
                defines the path to be used for Blazor WebAssembly. With an overload of the method, you can supply a
                path. By default, the root path is used for Blazor. With the endpoint configuration, Razor Pages are
                mapped (the project contains an <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Error.cshtml</code> Razor
                page that's returned if a server-side exception is returned as defined by the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseExceptionHandler</code>
                method) with the invocation of <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MapRazorPages</code>, and API
                controllers are mapped with the invocation of <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MapControllers</code>. This
                project contains the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WeatherForecastController</code>
                to return weather information from the server. With this project, the fallback path is set to <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">index.html</code>. This file
                cannot be found on the server; it's part of the <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client</code>
                project. The complete <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">wwwroot</code> directory is
                defined with the client project.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Startup</code>
                            类，你将看到一些特定的 Blazor 配置，这些配置与中间件的设置相关。在开发模式下， <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseWebAssemblyDebugging</code>
                            ，会添加中间件以允许在基于 Chromium 的浏览器中调试 Blazor WebAssembly 应用程序。可以使用 Google Chrome 和 Microsoft Edge
                            进行调试。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseBlazorFrameworkFiles</code>
                            定义了用于 Blazor WebAssembly 的路径。通过方法的重载，你可以提供路径。默认情况下，Blazor 使用根路径。通过端点配置，Razor 页面被映射（该项目包含一个
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Error.cshtml</code>
                            Razor 页面，当返回服务器端异常时，该页面会被返回，如 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseExceptionHandler</code>
                            方法所定义），在调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MapRazorPages</code>
                            时映射，API 控制器在调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MapControllers</code>
                            时映射。该项目包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WeatherForecastController</code>
                            以从服务器返回天气信息。使用此项目，回退路径设置为 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">index.html</code>
                            。此文件在服务器上找不到；它是 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client</code>
                            项目的一部分。完整的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">wwwroot</code>
                            目录由客户端项目定义。</font>
                    </font>
                </font>
            </p>
            <pre id="c27-code-0016"><code>public void Configure(IApplicationBuilder app, IWebHostEnvironment env)</code>
<code>{</code>
<code>  if (env.IsDevelopment())</code>
<code>  {</code>
<code>    app.UseDeveloperExceptionPage();</code>
<code>    <b>app.UseWebAssemblyDebugging();</b></code>
<code>  }</code>
<code>  else<span aria-label="789" epub:type="pagebreak" id="Page_789" role="doc-pagebreak"></span></code>
<code>  {</code>
<code>    app.UseExceptionHandler("/Error");</code>
<code>    app.UseHsts();</code>
<code>  }</code>
<code> </code>
<code>  app.UseHttpsRedirection();</code>
<code>  <b>app.UseBlazorFrameworkFiles();</b></code>
<code>  app.UseStaticFiles();</code>
<code> </code>
<code>  app.UseRouting();</code>
<code> </code>
<code>  app.UseEndpoints(endpoints =&gt;</code>
<code>  {</code>
<code>    endpoints.MapRazorPages();</code>
<code>    endpoints.MapControllers();</code>
<code>    <b>endpoints.MapFallbackToFile("index.html");</b></code>
<code>  });</code>
<code>}</code></pre>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0018"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-517" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor WebAssembly Startup<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Blazor WebAssembly 启动</font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0047" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">After the Blazor files are sent to the client, the bootstrap
                    with Blazor WebAssembly is different from Blazor Server. The first difference is the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">index.html</code> file
                    that's used instead of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host</code> Razor page.
                    Razor Pages cannot be used on the client. <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">index.html</code> uses
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">base</code> element
                    for relative addresses and references style sheets similar to <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host</code>. Other than
                    that, the JavaScript file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_framework/blazor.webassembly.js</code>
                    is referenced to load the Blazor WebAssembly.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在 Blazor 文件发送到客户端后，带有 Blazor
                                WebAssembly 的启动与 Blazor Server 不同。第一个区别是使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">index.html</code>
                                文件代替 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host</code>
                                Razor 页面。Razor 页面不能在客户端使用。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">index.html</code>
                                使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">base</code>
                                元素处理相对地址，并像 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_Host</code>
                                一样引用样式表。除此之外，JavaScript 文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">_framework/blazor.webassembly.js</code>
                                被引用以加载 Blazor WebAssembly。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client</code>
                    project, a <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Main</code>
                    method is available that's the start of the .NET code, as shown in the following code snippet. With
                    the WebAssembly, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CreateDefaultBuilder</code>
                    method of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Host</code> class cannot
                    be used because some parts there are not available in the sandbox of the browser. However, the code
                    is not that much different, and a <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ServiceCollection</code>
                    for the DI container is used as well. Here, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WebAssemblyHostBuilder</code>
                    with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CreateDefault</code>
                    method is used to create a <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WebAssemblyHostBuilder</code>
                    instance. This type can be used (similar to the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HostBuilder</code> class)
                    to configure dependency injection, logging, and configuration. With the generated code, an <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                    instance is registered in the DI container. This is important because when you're running in a
                    WebAssembly, you're restricted to the sandbox of the browser, and you can't just create a new <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                    instance and do HTTP requests. Instead, you are limited to using APIs offered by the browser. So
                    that you still can use the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code> class
                    with Blazor WebAssembly, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">System.Net.Http.BrowserHttpHandler</code>
                    is registered as a handler. This handler creates HTTP requests using the browser API. Because <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code> is
                    registered with the DI container, you can inject it and use it in the way you're accustomed to. The
                    root component configured with the DI container is the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code> Razor
                    component (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client</code>
                                项目中，有一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Main</code>
                                方法作为.NET 代码的起始点，如下面的代码片段所示。在 WebAssembly 中，不能使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Host</code>
                                类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CreateDefaultBuilder</code>
                                方法，因为其中一些部分在浏览器的沙盒中不可用。然而，代码差异并不大，同样使用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ServiceCollection</code>
                                作为依赖注入容器的实现。这里使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WebAssemblyHostBuilder</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CreateDefault</code>
                                方法来创建 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WebAssemblyHostBuilder</code>
                                实例。这种类型可以用来（类似于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HostBuilder</code>
                                类）配置依赖注入、日志记录和配置。在生成的代码中， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                                实例被注册到依赖注入容器中。这一点很重要，因为在 WebAssembly 环境中，你受限于浏览器的沙盒，不能随意创建新的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                                实例并进行 HTTP 请求。相反，你只能使用浏览器提供的 API。因此，为了仍然可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                                类与 Blazor WebAssembly， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">System.Net.Http.BrowserHttpHandler</code>
                                被注册为处理器。这个处理器使用浏览器 API 来创建 HTTP 请求。由于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                                被注册到依赖注入容器中，你可以像往常一样注入并使用它。 使用依赖注入容器配置的根组件是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code>
                                Razor 组件（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0017"><code>public static async Task Main(string[] args)</code>
<code>{</code>
<code>  var builder = WebAssemblyHostBuilder.CreateDefault(args);</code>
<code>  builder.RootComponents.Add&lt;App&gt;("#app");</code>
<code> </code>
<code>  builder.Services.AddScoped(sp =&gt; new HttpClient </code>
<code>  { </code>
<code>    BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) </code>
<code>  });</code>
<code> </code>
<code>  await builder.Build().RunAsync();</code>
<code>}</code></pre>
                <p id="c27-para-0049" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code> component, the
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>
                    component, and the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                    component are exactly the same with Blazor WebAssembly as with Blazor Server.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">App</code>
                                组件、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NavMenu</code>
                                组件和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">MainLayout</code>
                                组件与 Blazor WebAssembly 和 Blazor Server 完全相同。</font>
                        </font>
                    </font>
                </p>
            </section> <span aria-label="790" epub:type="pagebreak" id="Page_790" role="doc-pagebreak"
                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0019"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-518" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Injecting HttpClient with Blazor WebAssembly<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在 Blazor WebAssembly 中注入
                                HttpClient</font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0050" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    you've seen with Blazor server is the same with Blazor WebAssembly. This code doesn't need any
                    changes. With Blazor WebAssembly, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    can run completely on the client. What's different is the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">FetchData</code>
                    component. With Blazor Server, functionality on the server can be directly accessed from the server
                    because with Blazor Server the components run on the server. With Blazor WebAssembly, for getting
                    the weather information from the server, an API can be accessed.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你使用 Blazor Server 看到的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件与 Blazor WebAssembly 相同。这段代码不需要任何更改。在 Blazor WebAssembly 中， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件可以完全在客户端运行。不同的是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">FetchData</code>
                                组件。在 Blazor Server 中，服务器上的功能可以直接从服务器访问，因为 Blazor Server 的组件在服务器上运行。在 Blazor WebAssembly
                                中，要从服务器获取天气信息，可以访问 API。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The following code snippet shows the injection of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                    instance that's registered with the DI container using the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@inject</code>
                    declaration. With this component, the namespace <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Shared</code>
                    is also imported. The class <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WeatherForecast</code>
                    defined in the shared library can be used both with the API controller and the client
                    application—.NET full-stack (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample/Pages/FetchData.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">以下代码片段展示了使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@inject</code>
                                声明将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                                实例注入到依赖注入容器中的过程。通过这个组件，还导入了命名空间 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Shared</code>
                                。共享库中定义的类 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">WeatherForecast</code>
                                可用于 API 控制器和客户端应用程序——.NET 全栈（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample/Pages/FetchData.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0018"><code>@page "/fetchdata"</code>
<code>@using Blazor.WasmSample.Shared</code>
<code><b>@inject HttpClient Http</b></code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">On initialization of the component, weather forecast
                    information is retrieved by using the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">GetFromJsonAsync</code>
                    extension method (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample/Pages/FetchData.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在组件初始化时，通过使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">GetFromJsonAsync</code>
                                扩展方法获取天气预报信息（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample/Pages/FetchData.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0019"><code>@code {</code>
<code>  private WeatherForecast[]? forecasts;</code>
<code> </code>
<code>  protected override async Task OnInitializedAsync()</code>
<code>  {</code>
<code>    forecasts = await Http.GetFromJsonAsync&lt;WeatherForecast[]&gt;("WeatherForecast");</code>
<code>  }</code>
<code>}</code></pre>
                <p id="c27-para-0053" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you run the application, you can open the browser
                    developer tools and see the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">dotnet.wasm</code> file
                    downloaded, which is the .NET runtime in WebAssembly form. <a href="#c27-fig-0004"
                        id="R_c27-fig-0004"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Figure 27-4</a> shows the
                    weather information returned from the API and with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">FetchData</code>
                    component.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行应用程序时，可以打开浏览器开发者工具查看下载的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">dotnet.wasm</code>
                                文件，这是以 WebAssembly 形式的 .NET 运行时。图 27-4 展示了从 API 返回的天气信息以及使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">FetchData</code>
                                组件的情况。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <div class="top hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p id="c27-para-0055" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NOTE</b> <i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">With this
                                implementation of the </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">FetchData</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> Razor component,
                                the component is specific for Blazor WebAssembly. If you inject an EF Core context with
                                a Razor component, this component can be used only with Blazor Server. However, you
                                could inject a service that's independent from the client and the server—for example,
                                use the </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IBooksService</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> interface from
                                the Razor component. For a Blazor WebAssembly project, you implement the </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IBooksService</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> interface with a
                            </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksApiClient</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> implementation,
                                which injects the </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">, and configure
                                the </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksApiClient</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> with the DI
                                container of the Blazor WebAssembly project. For a Blazor Server project, you implement
                                the </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IBooksService</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> interface with a
                            </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksDataClient</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> implementation
                                that injects the EF Core context. With the Blazor Server project, you configure the DI
                                container to use the </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksDataClient</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> implementation
                                when </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IBooksService</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> is requested.
                                This way you can put the </i><code
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksComponent</code><i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> in a Razor Class
                                Library and use the library both from Blazor WebAssembly and from Blazor Server.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意：使用此 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">FetchData</code>
                                        Razor 组件实现时，该组件专门针对 Blazor WebAssembly。如果你将 EF Core 上下文与 Razor 组件一起注入，该组件只能与
                                        Blazor Server 一起使用。但是，你可以注入一个与客户端和服务器无关的服务——例如，使用来自 Razor 组件的 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IBooksService</code>
                                        接口。对于 Blazor WebAssembly 项目，你使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IBooksService</code>
                                        接口实现一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksApiClient</code>
                                        实现，该实现注入 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HttpClient</code>
                                        ，并使用 Blazor WebAssembly 项目的 DI 容器配置 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksApiClient</code>
                                        。对于 Blazor Server 项目，你使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IBooksService</code>
                                        接口实现一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksDataClient</code>
                                        实现，该实现注入 EF Core 上下文。对于 Blazor Server 项目，当请求 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksDataClient</code>
                                        时，你配置 DI 容器使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksDataClient</code>
                                        实现。这样你就可以将 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BooksComponent</code>
                                        放在一个 Razor 类库中，并从 Blazor WebAssembly 和 Blazor Server 都使用该库。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section> <span aria-label="791" epub:type="pagebreak" id="Page_791" role="doc-pagebreak"
                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
            <figure data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> <img
                    alt="Snapshot of fetching data for weather forecast." class="center" src="images/c27f004.png" />
                <figcaption data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span class="figureLabel"
                            data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a
                                href="#R_c27-fig-0004" id="c27-fig-0004" role="doc-backlink"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><b
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                                    data-immersive-translate-paragraph="1">FIGURE 27-4<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">
                                              </font>
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">图 27-4</font>
                                        </font>
                                    </font></b></a></span></p>
                </figcaption>
            </figure>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0021"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-519" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Working with Progressive Web Applications <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">与渐进式 Web 应用程序一起工作</font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0056" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor WebAssembly can be configured to run as a PWA
                    application. Using the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">--pwa</code> option when
                    creating the application adds the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">service-worker.js</code>
                    script. If this is enabled, an installation button is available with the browser so you can install
                    the application locally. The application works without being connected to the server.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Blazor WebAssembly 可以配置为作为 PWA
                                应用程序运行。在创建应用程序时使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">--pwa</code>
                                选项会添加 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">service-worker.js</code>
                                脚本。如果启用此功能，浏览器将提供安装按钮，以便您可以在本地安装应用程序。该应用程序无需连接到服务器即可运行。</font>
                        </font>
                    </font>
                </p>
                <p id="c27-para-0057" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">There are some caveats with PWAs. You should use this
                    functionality only if the application works mainly with local data. Two major HTML APIs can be used
                    to read and write data in the browser: local storage and IndexedDB. Local storage (<code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://developer.mozilla.org/docs/Web/API/Window/localStorage">https://developer.mozilla.org/docs/Web/API/Window/localStorage</a></code>)
                    allows storing and retrieving objects using a string index. The Indexed Database API (IndexedDB,
                    <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://www.w3.org/TR/IndexedDB/">https://www.w3.org/TR/IndexedDB/</a></code>)
                    supports storing data in tables, allows using transactions, and allows queries. The network might
                    not be accessible when the application is used, and your APIs might not be accessible. When the
                    network is available and a new version of the application is available, an update happens
                    automatically. Be aware that the update only completes as the user closes the tab of the browser or
                    the application. While the update is still in progress, the user runs an older version of the
                    application. You cannot be sure which version the user is running, so you need to make sure you
                    don't create breaking changes with your applications that break existing client versions.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">PWA
                                有一些注意事项。你应该只在应用程序主要使用本地数据时使用此功能。有两个主要的 HTML API 可以用来在浏览器中读取和写入数据：本地存储和 IndexedDB。本地存储（
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://developer.mozilla.org/docs/Web/API/Window/localStorage">https://developer.mozilla.org/docs/Web/API/Window/localStorage</a></code>
                                ）允许使用字符串索引存储和检索对象。索引数据库 API（IndexedDB， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a href="https://www.w3.org/TR/IndexedDB/">https://www.w3.org/TR/IndexedDB/</a></code>
                                ）支持在表中存储数据，允许使用事务，并允许查询。当应用程序被使用时，网络可能不可用，你的 API
                                也可能不可用。当网络可用并且有新版本的应用程序时，更新会自动发生。要注意的是，更新只有在用户关闭浏览器标签或应用程序时才完成。在更新仍在进行时，用户运行的是较旧版本的应用程序。你无法确定用户正在运行哪个版本，因此你需要确保你的应用程序不会引入破坏现有客户端版本的破坏性更改。
                            </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Be aware that two versions of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">service-worker.js</code>
                    scripts are created. In development mode, there's no implementation in this file. To avoid caching
                    problems while developing, the application is not cached locally. Having an older version of the
                    application would generate headaches with debugging. For publishing, the <span aria-label="792"
                        epub:type="pagebreak" id="Page_792" role="doc-pagebreak"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                    <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">service-worker.published.js</code>
                    file is renamed to be used with the installation, which contains all the functionality for caching
                    and updating the application on the local system. When the application is configured with <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">--pwa</code>, the project
                    configuration file shows the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ServiceWorker</code>
                    definition to use <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">service-worker.published.js</code>
                    on publishing (project configuration file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client/Blazor.WasmSample.Client.csproj</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">注意，创建了两个版本的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">service-worker.js</code>
                                脚本。在开发模式下，此文件中没有实现。为了在开发过程中避免缓存问题，应用程序不会在本地缓存。使用旧版本的应用程序会导致调试时出现麻烦。对于发布， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">service-worker.published.js</code>
                                文件被重命名以用于安装，其中包含所有用于在本地系统上缓存和更新应用程序的功能。当应用程序配置为使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">--pwa</code>
                                时，项目配置文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor.WasmSample.Client/Blazor.WasmSample.Client.csproj</code>
                                中显示 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ServiceWorker</code>
                                定义以在发布时使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">service-worker.published.js</code>
                                ：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0020"><code>&lt;ItemGroup&gt;</code>
<code>  &lt;ServiceWorker Include="wwwroot\service-worker.js" </code>
<code>    PublishedContent="wwwroot\service-worker.published.js"/&gt;</code>
<code>&lt;/ItemGroup&gt;</code></pre>
            </section>
        </section>
        <section aria-labelledby="head-2-247" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
            <span id="c27-sec-0022" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
            <h2 id="head-2-247" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">RAZOR COMPONENTS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">RAZOR 组件 </font>
                    </font>
                </font>
            </h2>
            <p id="c27-para-0059" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">Now that you know the differences between Blazor Server and
                Blazor WebAssembly, let's dig into Razor components. You can use these components with both Blazor
                Server and Blazor WebAssembly.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">既然你已经了解了 Blazor Server 和 Blazor
                            WebAssembly 之间的区别，让我们深入探讨 Razor 组件。你可以使用这些组件与 Blazor Server 和 Blazor WebAssembly 一起使用。
                        </font>
                    </font>
                </font>
            </p>
            <p id="c27-para-0060" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">Although Razor components are built on the concept of Razor Pages
                (which are covered in <a href="c26.xhtml"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter 26</a>), there are
                important differences. The <code
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code> directive can be
                used with both technologies. With Razor components, you cannot use HTML Helpers, Tag Helpers, and view
                components. These features use server-side functionality that is not available when the components run
                on the client.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">尽管 Razor 组件基于 Razor 页面（已在第 26
                            章中介绍）的概念构建，但两者存在重要差异。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@page</code>
                            指令可同时用于这两种技术。在 Razor 组件中，您不能使用 HTML 辅助工具、标签辅助工具和视图组件。这些功能使用的是服务器端功能，而组件在客户端运行时不可用。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">To dig into the features of Razor components, a Blazor
                WebAssembly with a hosting API is created:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">要深入了解 Razor 组件的功能，将创建一个带有托管 API 的
                            Blazor WebAssembly：</font>
                    </font>
                </font>
            </p>
            <pre id="c27-code-0021"><code>&gt; dotnet new blazorwasm --hosted -o Blazor.ComponentsSample</code></pre>
            <p id="c27-para-0062" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">In this section, you learn about passing parameters to
                components, injecting services, using event callbacks, programmatically updating the user interface,
                two-way binding, cascading parameters, templated components, and built-in components.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            在本节中，您将学习如何向组件传递参数、注入服务、使用事件回调、通过编程方式更新用户界面、双向绑定、级联参数、模板化组件和内置组件。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0023"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-520" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Understanding the Parameters of Components <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">理解组件的参数</font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0063" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The “The Counter Component” section earlier in this chapter
                    described the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    and how you navigate to it. A component can also be contained in other components, and properties
                    can be assigned to it.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">本章前面的“计数器组件”部分介绍了 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件以及如何导航到它。一个组件也可以被包含在其他组件中，并且可以为其分配属性。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The next code snippet shows the code block of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    with an <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Incrementor</code>
                    property specified. With the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Parameter</code>
                    attribute, this property can be assigned when using the component. Instead of incrementing the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">currentCount</code>
                    variable by 1, the value of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Incrementor</code>
                    property is now used to calculate the new value (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Counter.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">下一个代码片段显示了具有 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Incrementor</code>
                                属性的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件的代码块。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Parameter</code>
                                属性，可以在使用组件时为其分配值。现在不是通过将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">currentCount</code>
                                变量加 1，而是使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Incrementor</code>
                                属性的值来计算新值（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Counter.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0022"><code>@code {</code>
<code>  private int currentCount = 0;</code>
<code> </code>
<code>  <b>[Parameter]</b></code>
<code>  <b>public int Incrementor { get; set; } = 1;</b></code>
<code> </code>
<code>  private void IncrementCount()</code>
<code>  {</code>
<code>    currentCount += Incrementor;</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    is now added to the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Index</code> component.
                    When used within this component, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    uses an <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Incrementor</code> value
                    of 3 (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Index.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在将 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件添加到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Index</code>
                                组件中。当在组件内部使用时， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Incrementor</code>
                                值为 3（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Index.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0023"><code>&lt;Counter Incrementor="3"/&gt;</code></pre>
                <p id="c27-para-0066" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1"><span aria-label="793" epub:type="pagebreak" id="Page_793"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>When you run the
                    application now, you can see the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    to show up within the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Index</code> page (and
                    also with the navigation of the application). In the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Index</code> component,
                    an increment of 3 is done, while navigating to the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    uses the default increment of 1.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在运行应用程序时，可以看到 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Index</code>
                                页面中显示出来（并且也随着应用程序的导航）。在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Index</code>
                                组件中，进行了 3 的增量，而导航到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件时使用的是默认的 1 增量。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0024"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-521" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Injecting Services <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">注入服务</font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0067" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you run the application and use the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> component
                    (which is contained in the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Index</code> and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> pages),
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">currentCount</code>
                    variable starts with <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">0</code> every time you
                    open the page. When you open the pages, the component is newly initialized.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你运行应用程序并使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                组件（该组件包含在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Index</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                页面中）时，每次打开页面时 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">currentCount</code>
                                变量都从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">0</code>
                                开始。当你打开页面时，组件会重新初始化。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">You can create a service to keep the state and share it with
                    different components. The following <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CounterService</code>
                    class defines the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> property
                    for the state (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Services/CounterService.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你可以创建一个服务来保存状态并在不同的组件之间共享。以下 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CounterService</code>
                                类定义了用于状态管理的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                属性（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Services/CounterService.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0024"><code>public class CounterService</code>
<code>{</code>
<code>  public int Counter { get; set; }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With the configuration of the DI container, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CounterService</code> is
                    registered as a singleton service as shown here (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample.Client/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过依赖注入容器的配置， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CounterService</code>
                                被注册为单例服务，如下所示（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample.Client/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0025"><code>public static async Task Main(string[] args)</code>
<code>{</code>
<code>  var builder = WebAssemblyHostBuilder.CreateDefault(args);</code>
<code>  builder.RootComponents.Add&lt;App&gt;("#app");</code>
<code> </code>
<code>  builder.Services.AddScoped(sp =&gt; new HttpClient </code>
<code>  { </code>
<code>    BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) </code>
<code>  });</code>
<code>  <b>builder.Services.AddScoped&lt;CounterService&gt;();</b></code>
<code>  await builder.Build().RunAsync();</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                    <div class="top hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p id="c27-para-0071" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">NOTE</b> <i
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Blazor
                                WebAssembly currently doesn't have a concept for DI scopes. Scopes behave like singleton
                                services. Read <a href="c15.xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Chapter
                                    15</a>, “Dependency Injection and Configuration,” for information about the
                                different modes for configuring services. With Blazor Server, the DI container is
                                configured on the server side with ASP.NET Core and has the behavior you are used to
                                with ASP.NET Core web applications.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 Blazor WebAssembly
                                        目前还没有 DI（依赖注入）作用域的概念。作用域的行为类似于单例服务。有关配置服务的不同模式的详细信息，请阅读第 15 章“依赖注入和配置”。在 Blazor
                                        Server 中，DI 容器通过 ASP.NET Core 在服务器端进行配置，具有与 ASP.NET Core Web 应用程序相同的熟悉行为。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With the component, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CounterService</code> is
                    injected using the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@inject</code> directive.
                    This directive creates a property of the specified type, and the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CounterService</code> can
                    be used to access the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code> property
                    with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">IncrementCount</code>
                    method to read the value using binding, as shown in the following code snippet (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/CounterWithService.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过组件，使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@inject</code>
                                指令注入 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CounterService</code>
                                。此指令创建指定类型的属性，并且可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CounterService</code>
                                方法通过绑定访问 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Counter</code>
                                属性来读取值，如下面的代码片段（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/CounterWithService.razor</code>
                                ）所示：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0026"><code>@page "/counterwithservice"</code>
<code><b>@inject CounterService CounterService</b></code>
<code> </code>
<code>&lt;h1&gt;Counter&lt;/h1&gt;</code>
<code> </code>
<code>&lt;p&gt;Current count: <b>@CounterService.Counter</b>&lt;/p&gt;</code>
<code> <span aria-label="794" epub:type="pagebreak" id="Page_794" role="doc-pagebreak"></span></code>
<code>&lt;button class="btn btn-primary" @onclick="IncrementCount"&gt;Click me&lt;/button&gt;</code>
<code> </code>
<code>@code {</code>
<code>  [Parameter]</code>
<code>  public int Incrementor { get; set; } = 1;</code>
<code> </code>
<code>  private void IncrementCount()</code>
<code>  {</code>
<code>    CounterService.Counter += Incrementor;</code>
<code>  }</code>
<code>}</code></pre>
                <p id="c27-para-0073" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you use the application and switch to this component,
                    then switch to other components, and then switch back, the state is kept.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                当您使用应用程序并切换到此组件，然后切换到其他组件，再切换回来时，状态会被保留。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0026"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-522" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Working with Event Callback <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">与事件回调一起工作</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Razor components can publish events. To submit events to a
                    parent component, you need to define a property of type <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>. As
                    the following code snippet of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEventshows</code>,
                    an event is fired to the parent every time the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Elapsed</code> event of
                    the .NET class <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Timer</code> is fired.
                    With the generic <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                    type, you can specify information to pass to the parent component. The generic parameter needs to
                    derive from the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventArgs</code> base
                    class. The custom <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEventArgs</code>
                    class defines the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">SignalTime</code>
                    property of type <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DateTime</code>. This
                    value is assigned when firing the callback using the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InvokeAsync</code> method
                    of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                    class. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                    component defines <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Start</code> and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Stop</code> methods to
                    start and stop the timer (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/TimerEvent.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Razor
                                组件可以发布事件。要将事件提交给父组件，你需要定义一个类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                                的属性。以下 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEventshows</code>
                                的代码片段中，每次 .NET 类 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Timer</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Elapsed</code>
                                事件被触发时，都会向父组件触发一个事件。使用泛型 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                                类型，你可以指定要传递给父组件的信息。泛型参数需要继承自 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventArgs</code>
                                基类。自定义 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEventArgs</code>
                                类定义了类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DateTime</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">SignalTime</code>
                                属性。当使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                                类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InvokeAsync</code>
                                方法触发回调时，会分配这个值。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                                组件定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Start</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Stop</code>
                                方法来启动和停止计时器（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/TimerEvent.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0027"><code>@using System.Timers</code>
<code>@implements IDisposable</code>
<code> </code>
<code>&lt;h4&gt;Timer Event&lt;/h4&gt;</code>
<code> </code>
<code>@code {</code>
<code>  <b>[Parameter]</b></code>
<code>  public int DelaySeconds { get; set; } = 10;</code>
<code> </code>
<code>  [Parameter]</code>
<code>  <b>public EventCallback&lt;TimerEventArgs&gt; OnTimerCallback { get; set; }</b></code>
<code> </code>
<code>  public void Start() =&gt; timer?.Start();</code>
<code> </code>
<code>  public void Stop() =&gt; timer?.Stop();</code>
<code> </code>
<code>  private Timer? timer;</code>
<code>  protected override void OnInitialized()</code>
<code>  {</code>
<code>    timer = new()</code>
<code>    {</code>
<code>      Interval = 1000 * DelaySeconds</code>
<code>    };</code>
<code>    timer.Elapsed += async (sender, e) =&gt;</code>
<code>    {</code>
<code>      <b>await OnTimerCallback.InvokeAsync(new TimerEventArgs { SignalTime = e.SignalTime });</b></code>
<code>    };<span aria-label="795" epub:type="pagebreak" id="Page_795" role="doc-pagebreak"></span></code>
<code>  }</code>
<code> </code>
<code>  public void Dipose() =&gt; timer?.Dispose();</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">You use the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                    component from the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseTimer</code>
                    component. The number of seconds to specify with the timer is set by assigning a value to the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DelaySeconds</code>
                    property. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnTimerCallback</code> is
                    similarly assigned to the address of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ShowTimer</code> method.
                    The <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                    uses the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ref</code>
                    keyword to map it to a variable. This allows using the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                    component from the code to invoke methods (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/UseTimer.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你从 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseTimer</code>
                                组件使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                                组件。通过给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DelaySeconds</code>
                                属性赋值来设置计时器要指定的秒数。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnTimerCallback</code>
                                同样被赋值为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ShowTimer</code>
                                方法的地址。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                                使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ref</code>
                                关键字将其映射到变量。这允许从代码中使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                                组件来调用方法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/UseTimer.razor</code>
                                ）。</font>
                        </font>
                    </font>
                </p>
                <pre
                    id="c27-code-0028"><code>&lt;TimerEvent @ref="myTimer" DelaySeconds="3" OnTimerCallback="@ShowTimer"/&gt;</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With the code declaration, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ShowTimer</code> method
                    is specified to receive a parameter of type <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEventArgs</code>—the
                    parameter that was specified with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                    parameter in the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                    component. With the implementation of this method, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">message</code> and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">timeMessage</code> fields
                    are updated to show information from the event with the UI elements that bind to these fields (code
                    file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/UseTimer.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过代码声明， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ShowTimer</code>
                                方法被指定接收一个类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEventArgs</code>
                                的参数——该参数是在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                                组件中用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                                参数指定的。通过实现这个方法， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">message</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">timeMessage</code>
                                字段被更新以显示事件中的信息，这些信息通过绑定到这些字段的 UI 元素展示（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/UseTimer.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0029"><code>@code {</code>
<code>  private TimerEvent? myTimer;</code>
<code>  private string timeMessage = string.Empty;</code>
<code>  private bool disableStartTimerButton = false;</code>
<code>  private bool disableStopTimerButton = true;</code>
<code> </code>
<code>  string message = string.Empty;</code>
<code>  private void ShowTimer(TimerEventArgs e)</code>
<code>  {</code>
<code>    message += ".";</code>
<code>    timeMessage = e.SignalTime.ToLongTimeString();</code>
<code>  }</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">You've seen the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ref</code> keyword used
                    with the HTML code where the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                    component was referenced. Using this keyword requires that you declare a variable with the same name
                    as the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ref</code> name
                    of the type of the component. This variable will be filled when the component is created. With this,
                    methods of the component can be invoked as shown in the following snippet by invoking the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Start</code> and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Stop</code> methods (code
                    file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/UseTimer.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你已看到在引用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TimerEvent</code>
                                组件的 HTML 代码中使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ref</code>
                                关键字。使用这个关键字需要你声明一个与组件的类型名称 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ref</code>
                                相同的名称的变量。当组件被创建时，这个变量将被填充。通过这种方式，可以像以下代码片段中所示通过调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Start</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Stop</code>
                                方法来调用组件的方法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/UseTimer.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0030"><code>private TimerEvent? myTimer;</code>
<code>private void StartTimer()</code>
<code>{</code>
<code>  myTimer?.Start();</code>
<code>  DisableStartTimerButton();</code>
<code>}</code>
<code> </code>
<code>private void StopTimer()</code>
<code>{</code>
<code>  myTimer?.Stop();</code>
<code>  DisableStartTimerButton(false);</code>
<code>}</code></pre>
                <p id="c27-para-0078" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you run the application and click the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Start</code> button of
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseTimer</code>
                    component, you see the timer callback called to show dots and an update of the time, as shown with
                    <a href="#c27-fig-0005" id="R_c27-fig-0005"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Figure 27-5</a>.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你运行应用程序并点击 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">UseTimer</code>
                                组件的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Start</code>
                                按钮时，你会看到计时器回调被调用以显示点并更新时间，如图 27-5 所示。</font>
                        </font>
                    </font>
                </p> <span aria-label="796" epub:type="pagebreak" id="Page_796" role="doc-pagebreak"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <figure data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"> <img
                        alt="Snapshot of using timer for timer event." class="center" src="images/c27f005.png" />
                    <figcaption data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
                        <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span
                                class="figureLabel"
                                data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><a
                                    href="#R_c27-fig-0005" id="c27-fig-0005" role="doc-backlink"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><b
                                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                                        data-immersive-translate-paragraph="1">FIGURE 27-5<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 27-5</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0027"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-523" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Programmatically Updating the UI<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">程序化更新 UI</font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0079" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The user interface is automatically updated with events that
                    are triggered by the user interface or with events specified with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                    type. In case some functionality is triggered in the background, you need to inform the UI that the
                    state has changed to start rendering again by invoking the method <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">StateHasChanged</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">用户界面会通过用户界面触发的事件或指定类型为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EventCallback</code>
                                的事件自动更新。如果后台触发了某些功能，你需要通过调用方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">StateHasChanged</code>
                                来通知 UI 状态已改变，以重新开始渲染。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The following code snippet uses a <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Timer</code> object
                    within a Razor component that updates the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">counter</code> field with
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Elapsed</code>
                    event. In the event handler, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">StateHasChanged</code> is
                    invoked to update the user interface. You can try to comment this method invocation to see that the
                    user interface is not updated without this invocation. Another thing you can see with this code
                    snippet is the expression syntax with binding. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onclick</code> handler
                    invoking the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Start</code> and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Stop</code> methods is
                    implemented directly with the declaration (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Timer2.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">以下代码片段在一个 Razor 组件中使用了一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Timer</code>
                                对象，该对象使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Elapsed</code>
                                事件更新了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">counter</code>
                                字段。在事件处理程序中，调用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">StateHasChanged</code>
                                来更新用户界面。你可以尝试注释掉这个方法调用，看看如果没有这个调用，用户界面不会更新。这个代码片段还展示了绑定表达式语法。调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onclick</code>
                                处理程序中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Start</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Stop</code>
                                方法是直接通过声明（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Timer2.razor</code>
                                ）实现的：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0031"><code>@page "/timer"</code>
<code>@using System.Timers</code>
<code>@implements IDisposable</code>
<code> </code>
<code>&lt;h4&gt;Timer Event&lt;/h4&gt;</code>
<code> </code>
<code>&lt;p&gt;@counter&lt;/p&gt;</code>
<code> </code>
<code>&lt;button <b>@onclick="(() =&gt; timer.Start())"</b>&gt;Start&lt;/button&gt;</code>
<code> </code>
<code>&lt;button <b>@onclick="(() =&gt; timer.Stop())"</b>&gt;Stop&lt;/button&gt;</code>
<code> </code>
<code>@code {</code>
<code>  private int counter = 0;</code>
<code> </code>
<code>  private Timer timer = new(1000);</code>
<code> </code>
<code>  protected override void OnInitialized()</code>
<code>  {</code>
<code>    timer.Elapsed += (sender, e) =&gt;</code>
<code>    {</code>
<code>      counter++;</code>
<code>      <b>StateHasChanged();</b></code>
<code>    };</code>
<code>  }</code>
<code> </code>
<code>  public void Dispose() =&gt; timer.Dispose();</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0028"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-524" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Two-Way Binding <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">双向绑定</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With previous code samples, you've seen binding from the
                    source (a field) to the HTML DOM and from events to methods. Blazor also supports two-way binding
                    with the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@bind</code>
                    directive, as shown with the following code snippet. The following code snippet binds the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">text1</code> field to the
                    value attribute of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">input</code> element
                    (source to DOM) and the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onchange</code> event of
                    the input element to update the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">text1</code> field (code
                    file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample.Client/Pages/Binding.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过之前的代码示例，你已经看到了从源（一个字段）绑定到 HTML
                                DOM，以及从事件绑定到方法。Blazor 也支持使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@bind</code>
                                指令实现双向绑定，如下面的代码片段所示。下面的代码片段将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">text1</code>
                                字段绑定到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">input</code>
                                元素的 value 属性（源到 DOM），并将输入元素的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">onchange</code>
                                事件绑定到更新 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">text1</code>
                                字段（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample.Client/Pages/Binding.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0032"><code>&lt;input id="input1" <b>@bind="text1" </b>/&gt;</code>
<code>&lt;div&gt;@text1&lt;/div&gt;</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1"><span aria-label="797" epub:type="pagebreak" id="Page_797"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>When you run the
                    application, you can see the updated input value within the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">div</code> element as
                    soon as focus is lost. To use two-way binding for other events, you can specify the event by adding
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">event</code>
                    keyword to the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@bind</code> directive.
                    The following code snippet binds the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">text2</code> field to
                    update with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">oninput</code> event;
                    thus, the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">text2</code>
                    field changes with every single character change of the input element (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample.Client/Pages/Binding.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你运行应用程序时，一旦失去焦点，你就可以在 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">div</code>
                                元素中看到更新的输入值。要为其他事件使用双向绑定，可以通过在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@bind</code>
                                指令中添加 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">event</code>
                                关键字来指定事件。下面的代码片段将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">text2</code>
                                字段绑定到使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">oninput</code>
                                事件进行更新；因此， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">text2</code>
                                字段会随着输入元素的每个字符变化而变化（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample.Client/Pages/Binding.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0033"><code>&lt;input id="input2" @bind-value="text2" <b>@bind-value:event="oninput" </b>/&gt;</code>
<code>&lt;div&gt;@text2&lt;/div&gt;</code></pre>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0029"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-525" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Cascading Parameters <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">级联参数</font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0083" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you use the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Parameter</code>
                    attribute, you can set values from a parent component to a child component. As the user interface
                    grows, you might create a hierarchy of components—components that might be nested one within the
                    other. Here, you can pass parameters from the outside to the inside, while components in between
                    don't need to know anything about the parameters flowing from the outside to the inside. You can do
                    this with cascading parameters.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Parameter</code>
                                属性时，可以将父组件的值传递给子组件。随着用户界面的扩展，你可能会创建组件的层次结构——组件可能相互嵌套。在这里，你可以从外部向内部传递参数，而中间的组件无需知道从外部到内部的参数。你可以使用级联参数来实现这一点。
                            </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">With the inner components, you define properties that are
                    annotated with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingParameter</code>
                    attribute. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Cascade3</code> component
                    uses the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingParameter</code>
                    named <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Value1</code> and
                    displays the value (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample.Client/Pages/Cascade3.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">对于内部组件，你定义带有 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingParameter</code>
                                属性注解的属性。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Cascade3</code>
                                组件使用名为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingParameter</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Value1</code>
                                ，并显示该值（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample.Client/Pages/Cascade3.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0034"><code>&lt;h3&gt;Cascade3&lt;/h3&gt;</code>
<code> </code>
<code>&lt;div&gt;@Value1&lt;/div&gt;</code>
<code> </code>
<code>@code {</code>
<code>  <b>[CascadingParameter(Name = "Value1")]</b></code>
<code>  public string Value1 { get; set; } = string.Empty;</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">There's one component in between. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Cascade2</code> component
                    doesn't know anything about the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Value1</code> property
                    and just nests the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Cascade3</code> component
                    (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Cascade2.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">中间有一个组件。 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Cascade2</code>
                                组件不知道任何关于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Value1</code>
                                属性的信息，只是嵌套了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Cascade3</code>
                                组件（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Cascade2.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0035"><code>&lt;h3&gt;Cascade2&lt;/h3&gt;</code>
<code>&lt;Cascade3/&gt;</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">To pass the value down through the complete tree, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Cascade1</code> component
                    uses the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingValue</code>
                    component. With this component, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Value</code> is bound to
                    the <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">SomeValue</code>
                    property. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Name</code> references
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Value1</code>, the same
                    name used with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingParameter</code>
                    value with the inner component (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Cascade1.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">为了将值传递到整个树中， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Cascade1</code>
                                组件使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingValue</code>
                                组件。通过这个组件， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Value</code>
                                绑定到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">SomeValue</code>
                                属性。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Name</code>
                                引用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Value1</code>
                                ，与内部组件使用的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingParameter</code>
                                值相同的名称（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Cascade1.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0036"><code>@page "/cascade"</code>
<code>&lt;h3&gt;Cascade1&lt;/h3&gt;</code>
<code> </code>
<code>&lt;input type="text" @bind-value="SomeValue" @bind-value:event="oninput"/&gt;</code>
<code> </code>
<code><b>&lt;CascadingValue Value="@SomeValue" Name="Value1"&gt;</b></code>
<code>  <b>&lt;Cascade2 /&gt;</b></code>
<code><b>&lt;/CascadingValue&gt;</b></code>
<code> </code>
<code>@code {</code>
<code>  [Parameter]</code>
<code>  public string SomeValue { get; set; } = string.Empty;</code>
<code>}</code></pre>
                <p id="c27-para-0087" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1"><span aria-label="798" epub:type="pagebreak" id="Page_798"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>When you run the
                    application, you can see the value you enter with the outermost component is displayed with the
                    innermost component. The matching between the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingValue</code>
                    component and the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingParameter</code>
                    attribute happens with the type and the name. Supplying the name is optional if you do not use
                    multiple cascading parameters with the same type.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你运行应用程序时，你可以看到外层组件中输入的值与内层组件一起显示。
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingValue</code>
                                组件与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">CascadingParameter</code>
                                属性的匹配基于类型和名称。如果你不使用相同类型的多个级联参数，则提供名称是可选的。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0030"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-526" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Using Templated Components <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用模板组件</font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0088" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you create nested components, you can supply the content
                    of the nested component with the outer component and pass it to the nested inner component. Such
                    components are known by the term <i
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">templated components</i>.
                    Templated components specify one or more properties of type <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RenderFragment</code>.
                    With templated components, generic types can be useful, but this is not a requirement.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                当你创建嵌套组件时，你可以使用外层组件提供嵌套组件的内容，并将其传递给嵌套的内层组件。这类组件被称为模板组件。模板组件指定一个或多个类型为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RenderFragment</code>
                                的属性。使用模板组件时，泛型类型很有用，但这并非强制要求。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">The following code snippet shows the templated component
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Repeater</code>. With
                    this component, you can supply a list of items with the property <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Items</code>. The generic
                    type used is <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TItem</code>, as
                    specified with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@typeparam</code> at the
                    beginning of the code. Two properties are of type <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RenderFragment</code>.
                    The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HeaderTemplate</code>
                    property is used to show header information, and the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ItemTemplate</code>
                    property specifies the look for every item and is invoked within the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@foreach</code> iteration
                    (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Shared/Repeater.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">以下代码片段展示了模板组件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Repeater</code>
                                。使用该组件，你可以通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Items</code>
                                属性提供一系列项目。代码开头使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@typeparam</code>
                                指定了泛型类型 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TItem</code>
                                。有两个属性的类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">RenderFragment</code>
                                。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HeaderTemplate</code>
                                属性用于显示标题信息，而 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ItemTemplate</code>
                                属性指定每个项目的样式，并在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">@foreach</code>
                                迭代中调用（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Shared/Repeater.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0037"><code><b>@typeparam TItem</b></code>
<code> </code>
<code>&lt;div&gt;</code>
<code>  &lt;div&gt;<b>@HeaderTemplate</b>&lt;/div&gt;</code>
<code>  @foreach (var item in Items ?? Array.Empty&lt;TItem&gt;())</code>
<code>  {</code>
<code>    &lt;div&gt;<b>@ItemTemplate(item)</b>&lt;/div&gt;</code>
<code>  }</code>
<code>&lt;/div&gt;</code>
<code> </code>
<code>@code {</code>
<code>#nullable disable</code>
<code>  <b>[Parameter]</b></code>
<code>  <b>public RenderFragment HeaderTemplate { get; set; }</b></code>
<code>  <b>[Parameter]</b></code>
<code>  <b>public RenderFragment&lt;TItem&gt; ItemTemplate { get; set; }</b></code>
<code>#nullable restore</code>
<code>  <b>[Parameter]</b></code>
<code>  <b>public IEnumerable&lt;TItem&gt;? Items { get; set; }</b></code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">When you use the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Repeater</code>
                    component, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HeaderTemplate</code> and
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ItemTemplate</code> are
                    used as child elements. Each of these elements defines the content to be used within the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Repeater</code>
                    component. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TItem</code> attribute
                    specified with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Repeater</code> element
                    defines the generic type, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Book</code> class. The
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Context</code>
                    attribute defines the content parameter for the iteration (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/UseTemplate.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当您使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Repeater</code>
                                组件时， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HeaderTemplate</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ItemTemplate</code>
                                被用作子元素。这些元素中的每一个都定义了要在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Repeater</code>
                                组件内部使用的内容。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Repeater</code>
                                元素指定的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">TItem</code>
                                属性定义了泛型类型，即 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Book</code>
                                类。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Context</code>
                                属性定义了迭代的内容参数（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/UseTemplate.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0038"><code>@page "/template"</code>
<code>&lt;h3&gt;UseTemplate&lt;/h3&gt;</code>
<code> </code>
<code>&lt;Repeater Items="@books" TItem="Book"&gt;</code>
<code>  &lt;HeaderTemplate&gt;</code>
<code>    &lt;div class="bookstitle"&gt;The Books&lt;/div&gt;</code>
<code>  &lt;/HeaderTemplate&gt;</code>
<code>  &lt;ItemTemplate Context="book"&gt;</code>
<code>    &lt;div class="book"&gt;@book.Title&lt;/div&gt;</code>
<code>  &lt;/ItemTemplate&gt;<span aria-label="799" epub:type="pagebreak" id="Page_799" role="doc-pagebreak"></span></code>
<code>&lt;/Repeater&gt;</code>
<code> </code>
<code>@code {</code>
<code>  private IEnumerable&lt;Book&gt; books = Enumerable.Range(1, 10)</code>
<code>    .Select(i =&gt; new Book</code>
<code>    {</code>
<code>      Id = Guid.NewGuid(),</code>
<code>      Title = $"title {i}",</code>
<code>      Publisher = "Sample",</code>
<code>      ReleaseDate = DateTime.Today.AddDays(i)</code>
<code>    }).ToArray();</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"><span id="c27-sec-0031"
                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
                <h3 id="head-3-527" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Using Built-in Components <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用内置组件 </font>
                        </font>
                    </font>
                </h3>
                <p id="c27-para-0091" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Blazor includes several components that can be used with your
                    application. Probably the most important ones are form components that you can use to create
                    editable forms. The next sample defines a type for a form with annotations that can be used to
                    validate the user input.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Blazor
                                包含一些可用于您应用程序的组件。其中最重要的可能是表单组件，您可以使用它们来创建可编辑的表单。下一个示例定义了一个带有注解的表单类型，这些注解可用于验证用户输入。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">To see an edit form in action, define a model-type for all
                    the data that should be filled out with the form, as shown with the following code snippet. With
                    this model, annotations are used for input validation (code file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Models/BookEditModel.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                要查看编辑表单的运行效果，需要为所有应通过表单填写的表单数据定义一个模型类型，如下面的代码片段所示。使用此模型，注释用于输入验证（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Models/BookEditModel.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0039"><code>public class BookEditModel</code>
<code>{</code>
<code>  [StringLength(20, ErrorMessage = "Title is too long")]</code>
<code>  [Required]</code>
<code>  public string Title { get; set; } = string.Empty;</code>
<code> </code>
<code>  public DateTime ReleaseDate { get; set; } = DateTime.Today;</code>
<code>  public string? Type { get; set; } = string.Empty;</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">To create an input formula, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditForm</code> component
                    can be used as shown with the following code snippet. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditForm</code> component
                    creates an <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code> as a
                    cascading parameter. All the children of the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditForm</code> component
                    can access this context to register notifications and play a part in validation. Instead of
                    assigning the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                    directly with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditForm</code>, the
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Model</code> property
                    can be assigned to the model type (the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BookEditModel</code> with
                    the sample), which in turn implicitly sets the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>. Child
                    components used are the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DataAnnotationValidator</code>
                    and the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ValidationSummary</code>
                    components. The <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DataAnnotationValidator</code>
                    uses the annotations of the model (such as the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">StringLength</code> and
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Required</code>
                    attributes) to validate the model. When you click the submit button of the form, the validation is
                    invoked, and error messages are shown with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ValidationSummary</code>
                    component. Information on the errors is accessible with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>, which
                    is used both from the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DataAnnotationValidator</code>
                    as well as the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ValidationSummary</code>
                    components. If the validation is successful, the handler with the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnValidSubmit</code>
                    callback is invoked. With invalid inputs, you can implement a handler for <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInvalidSubmit</code>.
                    To read details of the validation, the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HandleValidSubmit</code>
                    method can access the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                    parameter. With the form, the components <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputText</code>, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputSelect</code>, and
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputDate</code> are
                    used to bind to properties of the model. These components generate HTML <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">input</code>, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">select</code>, and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">input type="date"</code>
                    elements and access the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code> (code
                    file <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Editor.razor</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要创建输入公式，可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditForm</code>
                                组件，如下面的代码片段所示。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditForm</code>
                                组件创建一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                                作为级联参数。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditForm</code>
                                组件的所有子组件都可以访问这个上下文来注册通知并参与验证。而不是直接用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditForm</code>
                                分配 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                                ，可以将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Model</code>
                                属性分配给模型类型（带有 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BookEditModel</code>
                                的示例），这反过来又隐式地设置了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                                。使用的子组件是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DataAnnotationValidator</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ValidationSummary</code>
                                组件。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DataAnnotationValidator</code>
                                使用模型的注解（例如 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">StringLength</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">Required</code>
                                属性）来验证模型。当您点击表单的提交按钮时，会调用验证，并使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ValidationSummary</code>
                                组件显示错误消息。可以通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                                访问错误信息，该组件既用于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DataAnnotationValidator</code>
                                也用于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ValidationSummary</code>
                                组件。如果验证成功，将调用具有 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnValidSubmit</code>
                                回调的处理程序。对于无效输入，您可以实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">OnInvalidSubmit</code>
                                的处理程序。要读取验证的详细信息， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">HandleValidSubmit</code>
                                方法可以访问 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                                参数。对于表单，使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputText</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputSelect</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputDate</code>
                                组件来绑定模型的属性。 这些组件生成 HTML <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">input</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">select</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">input type="date"</code>
                                元素并访问 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">BlazorComponentsSample/Pages/Editor.razor</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c27-code-0040"><code><b>&lt;EditForm Model="@bookEditModel" OnValidSubmit="HandleValidSubmit"&gt;</b></code>
<code>  <b>&lt;DataAnnotationsValidator /&gt;</b></code>
<code>  <b>&lt;ValidationSummary /&gt;</b></code>
<code>  &lt;p&gt;<span aria-label="800" epub:type="pagebreak" id="Page_800" role="doc-pagebreak"></span></code>
<code>    &lt;label&gt;</code>
<code>      Title:</code>
<code>      <b>&lt;InputText @bind-Value="bookEditModel.Title" /&gt;</b></code>
<code>    &lt;/label&gt;</code>
<code>  &lt;/p&gt;</code>
<code>  &lt;p&gt;</code>
<code>    &lt;label&gt;</code>
<code>      Type:</code>
<code>      <b>&lt;InputSelect @bind-Value="bookEditModel.Type"&gt;</b></code>
<code>        <b>&lt;option value="Hardcover"&gt;Hardcover&lt;/option&gt;</b></code>
<code>        <b>&lt;option value="Ebook"&gt;Ebook&lt;/option&gt;</b></code>
<code>      <b>&lt;/InputSelect&gt;</b></code>
<code>    &lt;/label&gt;</code>
<code>  &lt;/p&gt;</code>
<code>  &lt;p&gt;</code>
<code>    &lt;label&gt;</code>
<code>      Release date:</code>
<code>      <b>&lt;InputDate @bind-Value="bookEditModel.ReleaseDate" /&gt;</b></code>
<code>    &lt;/label&gt;</code>
<code>  &lt;/p&gt;</code>
<code> </code>
<code>  &lt;button type="submit"&gt;Submit&lt;/button&gt;</code>
<code>  &lt;div&gt;@validText&lt;/div&gt;</code>
<code>&lt;/EditForm&gt;</code>
<code> </code>
<code>@code {</code>
<code>  private BookEditModel bookEditModel = new();</code>
<code>  private string validText = string.Empty;</code>
<code> </code>
<code>  private <b>void HandleValidSubmit(EditContext context)</b></code>
<code>  {</code>
<code>    validText = "Input is valid, ready to send it to the server";</code>
<code>  }</code>
<code>}</code></pre>
                <p id="c27-para-0094" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">Other built-in Razor components you can use in a form are
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputCheckbox</code>,
                    <code data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputFile</code>, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputNumber</code>, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputRadio</code>, <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputRadioGroup</code>,
                    and <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputTextArea</code>. For
                    custom validation, you can write custom attributes for overriding the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ValidationAttribute</code>
                    or write components that access the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code> for
                    validation similar to the <code
                        data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DataAnnotationValidator</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在表单中可以使用的其他内置 Razor 组件有 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputCheckbox</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputFile</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputNumber</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputRadio</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputRadioGroup</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">InputTextArea</code>
                                。要进行自定义验证，可以编写自定义属性来覆盖 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">ValidationAttribute</code>
                                ，或者编写访问 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">EditContext</code>
                                进行验证的组件，类似于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">DataAnnotationValidator</code>
                                。</font>
                        </font>
                    </font>
                </p>
                <p id="c27-para-0095" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                    data-immersive-translate-paragraph="1">For Blazor, you can find components from many third-party
                    vendors, such as Telerik, Syncfusion, DevExpress, Mublazor, and others. Just look for available
                    NuGet packages.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">对于 Blazor，你可以从许多第三方供应商那里找到组件，例如
                                Telerik、Syncfusion、DevExpress、Mublazor 等。只需查找可用的 NuGet 包。</font>
                        </font>
                    </font>
                </p>
            </section>
        </section>
        <section aria-labelledby="head-2-248" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af">
            <span id="c27-sec-0032" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"></span>
            <h2 id="head-2-248" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">SUMMARY<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">摘要</font>
                    </font>
                </font>
            </h2>
            <p id="c27-para-0096" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">This chapter introduced you to the newest way to create ASP.NET
                Core applications: Blazor. You've seen Blazor with server-side components and Blazor making use of
                WebAssembly to run .NET in the browser.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章向你介绍了创建 ASP.NET Core
                            应用的新方法：Blazor。你看到了使用服务器端组件的 Blazor，以及利用 WebAssembly 在浏览器中运行.NET 的 Blazor。</font>
                    </font>
                </font>
            </p>
            <p id="c27-para-0097" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">You've seen the features of Razor components, including passing
                parameters, injecting services, using events, two-way binding, and more.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">你已经看到了 Razor
                            组件的功能，包括传递参数、注入服务、使用事件、双向绑定等。</font>
                    </font>
                </font>
            </p>
            <p id="c27-para-0098" data-immersive-translate-walked="b774e146-95af-45e7-bbf9-dd532b08f3af"
                data-immersive-translate-paragraph="1">The next chapter dives into SignalR, a technology for real-time
                communication. Blazor Server is based on SignalR. With Blazor WebAssembly, you can use SignalR to send
                notifications to a group of clients.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">下一章将深入探讨 SignalR，这是一种用于实时通信的技术。Blazor
                            Server 基于 SignalR。使用 Blazor WebAssembly，你可以通过 SignalR 向一组客户端发送通知。</font>
                    </font>
                </font>
            </p>
        </section>
    </section>
</body>
<div id="immersive-translate-popup" style="all: initial"></div>

</html>