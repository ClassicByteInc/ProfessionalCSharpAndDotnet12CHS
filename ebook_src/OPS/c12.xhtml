<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops"
    xmlns:svg="http://www.w3.org/2000/svg" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en"
    imt-state="dual" imt-trans-position="after">

<head>
    <title>12 反射、元数据和源生成器 --- 12 Reflection, Metadata, and Source Generators</title>
    <link href="WileyTemplate_v5.5.css" rel="stylesheet" type="text/css" />
    <meta content="urn:uuid:e0000000-0000-0000-0000-000006715209" name="Adept.expected.resource" />
    <style data-id="immersive-translate-input-injected-css">
        .immersive-translate-input {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            z-index: 2147483647;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .immersive-translate-attach-loading::after {
            content: " ";

            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;

            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-2000%, -50%);
            z-index: 100;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .immersive-translate-input-loading {
            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;
        }

        @keyframes immersiveTranslateShadowRolling {
            0% {
                box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            12% {
                box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            25% {
                box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            36% {
                box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color),
                    100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
            }

            50% {
                box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color),
                    110px 0 var(--loading-color), 100px 0 var(--loading-color);
            }

            62% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color),
                    120px 0 var(--loading-color), 110px 0 var(--loading-color);
            }

            75% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    130px 0 var(--loading-color), 120px 0 var(--loading-color);
            }

            87% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
            }

            100% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
            }
        }

        .immersive-translate-toast {
            display: flex;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            right: 0;
            top: 1%;
            width: fit-content;
            padding: 12px 20px;
            margin: auto;
            overflow: auto;
            background: #fef6f9;
            box-shadow: 0px 4px 10px 0px rgba(0, 10, 30, 0.06);
            font-size: 15px;
            border-radius: 8px;
            color: #333;
        }

        .immersive-translate-toast-content {
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .immersive-translate-toast-hidden {
            margin: 0 20px 0 72px;
            text-decoration: underline;
            cursor: pointer;
        }

        .immersive-translate-toast-close {
            color: #666666;
            font-size: 20px;
            font-weight: bold;
            padding: 0 10px;
            cursor: pointer;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-toast {
                top: 0;
                padding: 12px 0px 0 10px;
            }

            .immersive-translate-toast-content {
                flex-direction: column;
                text-align: center;
            }

            .immersive-translate-toast-hidden {
                margin: 10px auto;
            }
        }

        .immersive-translate-modal {
            display: none;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
            font-size: 15px;
        }

        .immersive-translate-modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 40px 24px 24px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 80%;
            max-width: 270px;
            font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
                "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
                "Segoe UI Symbol", "Noto Color Emoji";
            position: relative;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-content {
                margin: 50% auto !important;
            }
        }

        .immersive-translate-modal .immersive-translate-modal-content-in-input {
            max-width: 500px;
        }

        .immersive-translate-modal-content-in-input .immersive-translate-modal-body {
            text-align: left;
            max-height: unset;
        }

        .immersive-translate-modal-title {
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            color: #333333;
        }

        .immersive-translate-modal-body {
            text-align: center;
            font-size: 14px;
            font-weight: 400;
            color: #333333;
            word-break: break-all;
            margin-top: 24px;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-body {
                max-height: 250px;
                overflow-y: auto;
            }
        }

        .immersive-translate-close {
            color: #666666;
            position: absolute;
            right: 16px;
            top: 16px;
            font-size: 20px;
            font-weight: bold;
        }

        .immersive-translate-close:hover,
        .immersive-translate-close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .immersive-translate-modal-footer {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 24px;
        }

        .immersive-translate-btn {
            width: fit-content;
            color: #fff;
            background-color: #ea4c89;
            border: none;
            font-size: 16px;
            margin: 0 8px;
            padding: 9px 30px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .immersive-translate-btn:hover {
            background-color: #f082ac;
        }

        .immersive-translate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .immersive-translate-btn:disabled:hover {
            background-color: #ea4c89;
        }

        .immersive-translate-cancel-btn {
            /* gray color */
            background-color: rgb(89, 107, 120);
        }

        .immersive-translate-cancel-btn:hover {
            background-color: hsl(205, 20%, 32%);
        }

        .immersive-translate-action-btn {
            background-color: transparent;
            color: #ea4c89;
            border: 1px solid #ea4c89;
        }

        .immersive-translate-btn svg {
            margin-right: 5px;
        }

        .immersive-translate-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #007bff;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-primary-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #ea4c89;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-modal input[type="radio"] {
            margin: 0 6px;
            cursor: pointer;
        }

        .immersive-translate-modal label {
            cursor: pointer;
        }

        .immersive-translate-close-action {
            position: absolute;
            top: 2px;
            right: 0px;
            cursor: pointer;
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5) !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            border-radius: 16px !important;
        }

        .imt-image-status img,
        .imt-image-status svg,
        .imt-img-loading {
            width: 28px !important;
            height: 28px !important;
            margin: 0 0 8px 0 !important;
            min-height: 28px !important;
            min-width: 28px !important;
            position: relative !important;
        }

        .imt-img-loading {
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAtFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////oK74hAAAAPHRSTlMABBMIDyQXHwyBfFdDMSw+OjXCb+5RG51IvV/k0rOqlGRM6KKMhdvNyZBz9MaupmxpWyj437iYd/yJVNZeuUC7AAACt0lEQVRIx53T2XKiUBCA4QYOiyCbiAsuuGBcYtxiYtT3f6/pbqoYHVFO5r+iivpo6DpAWYpqeoFfr9f90DsYAuRSWkFnPO50OgR9PwiCUFcl2GEcx+N/YBh6pvKaefHlUgZd1zVe0NbYcQjGBfzrPE8Xz8aF+71D8gG6DHFPpc4a7xFiCDuhaWgKgGIJQ3d5IMGDrpS4S5KgpIm+en9f6PlAhKby4JwEIxlYJV9h5k5nee9GoxHJ2IDSNB0dwdad1NAxDJ/uXDHYmebdk4PdbkS58CIVHdYSUHTYYRWOJblWSyu2lmy3KNFVJNBhxcuGW4YBVCbYGRZwIooipHsNqjM4FbgOQqQqSKQQU9V8xmi1QlgHqQQ6DDBvRUVCDirs+EzGDGOQTCATgtYTnbCVLgsVgRE0T1QE0qHCFAht2z6dLvJQs3Lo2FQoDxWNUiBhaP4eRgwNkI+dAjVOA/kUrIDwf3CG8NfNOE0eiFotSuo+rBiq8tD9oY4Qzc6YJw99hl1wzpQvD7ef2M8QgnOGJfJw+EltQc+oX2yn907QB22WZcvlUpd143dqQu+8pCJZuGE4xCuPXJqqcs5sNpsI93Rmzym1k4Npk+oD1SH3/a3LOK/JpUBpWfqNySxWzCfNCUITuDG5dtuphrUJ1myeIE9bIsPiKrfqTai5WZxbhtNphYx6GEIHihyGFTI69lje/rxajdh0s0msZ0zYxyPLhYCb1CyHm9Qsd2H37Y3lugVwL9kNh8Ot8cha6fUNQ8nuXi5z9/ExsAO4zQrb/ev1yrCB7lGyQzgYDGuxq1toDN/JGvN+HyWNHKB7zEoK+PX11e12G431erGYzwmytAWU56fkMHY5JJnDRR2eZji3AwtIcrEV8Cojat/BdQ7XOwGV1e1hDjGGjXbdArm8uJZtCH5MbcctVX8A1WpqumJHwckAAAAASUVORK5CYII=");
            background-size: 28px 28px;
            animation: image-loading-rotate 1s linear infinite !important;
        }

        .imt-image-status span {
            color: var(--bg-2, #fff) !important;
            font-size: 14px !important;
            line-height: 14px !important;
            font-weight: 500 !important;
            font-family: "PingFang SC", Arial, sans-serif !important;
        }

        @keyframes image-loading-rotate {
            from {
                transform: rotate(360deg);
            }

            to {
                transform: rotate(0deg);
            }
        }
    </style>
    <style data-id="immersive-translate-default-injected-css">
        :root {
            --immersive-translate-theme-underline-borderColor: #72ece9;
            --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
            --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
            --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
            --immersive-translate-theme-highlight-backgroundColor: #ffff00;
            --immersive-translate-theme-dashed-borderColor: #59c1bd;
            --immersive-translate-theme-blockquote-borderColor: #cc3355;
            --immersive-translate-theme-thinDashed-borderColor: #ff374f;
            --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
            --immersive-translate-theme-dashedBorder-borderRadius: 0;
            --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
            --immersive-translate-theme-solidBorder-borderRadius: 0;
            --immersive-translate-theme-dotted-borderColor: #94a3b8;
            --immersive-translate-theme-wavy-borderColor: #72ece9;
            --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
            --immersive-translate-theme-grey-textColor: #2f4f4f;
            --immersive-translate-theme-marker-backgroundColor: #fbda41;
            --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
            --immersive-translate-theme-marker2-backgroundColor: #ffff00;
            --immersive-translate-theme-background-backgroundColor: #dbafaf;
            --immersive-translate-theme-background-backgroundColor-rgb: 219, 175, 175;
            --immersive-translate-theme-background-backgroundOpacity: 12;
            --immersive-translate-theme-opacity-opacity: 10;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pre-whitespace {
            white-space: pre-wrap !important;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container {
            position: absolute;
            background-color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
                sans-serif;
            top: 0;
            width: 600px;
            height: 100%;
            z-index: 2;
            line-height: 1.3;
            font-size: 16px;
        }

        [imt-state="dual"] .immersive-translate-target-wrapper[dir="rtl"] {
            text-align: right;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
            color: rgb(0, 0, 0);
            white-space: normal;
            position: absolute;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
            color: inherit;
            white-space: inherit;
            position: unset;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper &gt;

        br {
            display: none;
        }

        [imt-state="translation"] .immersive-translate-target-translation-block-wrapper {
            margin: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper {
            margin: 8px 0 !important;
            display: inline-block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            display: block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            margin-top: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pdf-block-wrapper {
            margin: 0 !important;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-grey-inner {
            color: var(--immersive-translate-theme-grey-textColor);
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-underline-inner {
            border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeUnderline-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDashed-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
            text-decoration-style: dashed !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-thinDashed-inner {
            border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dotted-inner {
            background-image: linear-gradient(to right,
                    var(--immersive-translate-theme-dotted-borderColor) 30%,
                    rgba(255, 255, 255, 0) 0%);
            background-position: bottom;
            background-size: 5px 1px;
            background-repeat: repeat-x;
            padding-bottom: 3px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDotted-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
            text-decoration-style: dotted !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-wavy-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
            text-decoration-style: wavy !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dashed-inner {
            background: linear-gradient(to right,
                    var(--immersive-translate-theme-dashed-borderColor) 0%,
                    var(--immersive-translate-theme-dashed-borderColor) 50%,
                    transparent 50%,
                    transparent 100%) repeat-x left bottom;
            background-size: 8px 2px;
            padding-bottom: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            content: "";
            display: block;
            max-width: 80px;
            width: 10%;
            border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            padding-top: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
            content: "";
            border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            max-height: 16px;
            height: 16px;
            padding-left: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-highlight-inner {
            background: var(--immersive-translate-theme-highlight-backgroundColor);
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-marker {
            line-height: 1.5em;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker2-inner {
            font-weight: bold;
            text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
                16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
                2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
                -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker-inner {
            /* TODO: add more texture */
            background: linear-gradient(to right,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-weakening {
            opacity: 0.618 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-italic {
            font-style: italic !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-bold {
            font-weight: bold !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-paper {
            margin: 8px 0;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            padding: 16px 32px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-blockquote {
            border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
            padding-left: 12px !important;
            margin-top: 4px;
            margin-bottom: 4px;
            padding-top: 4px;
            padding-bottom: 4px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        /* opacity theme start */

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,
        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: none !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        /* opacity theme end */

        /* background theme start */
        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-background {
            margin: 8px 0;
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            border-radius: 4px;
            box-shadow: unset !important;
            padding: 12px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-background-inner {
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            padding-left: 6px;
            padding-right: 6px;
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper .immersive-translate-target-translation-theme-background-inner {
            background: unset;
            padding-left: unset;
            padding-right: unset;
        }

        /* background theme end */

        /* vertical css , please remain it in the last one. */
        .immersive-translate-target-translation-vertical-block-wrapper {
            margin: 0px 8px !important;
        }

        .immersive-translate-text {
            font-size: 15px !important;
        }

        .immersive-translate-error-toast {
            position: fixed;
            top: 5%;
            z-index: 99999999;
            left: 0;
            right: 0;
            margin: auto;
            max-width: 300px;
            padding: 16px;
            border-radius: 12px;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }

        @media all and (min-width: 750px) {
            .immersive-translate-error-toast {
                max-width: 400px;
            }
        }

        .immersive-translate-clickable-button {
            cursor: pointer;
        }

        .immersive-translate-help-button {
            cursor: pointer;
        }

        .immersive-translate-loading-text:before {
            content: "...";
        }

        /* dark mode for loading */

        @media only screen and (prefers-color-scheme: dark) {
            .immersive-translate-loading {
                border: 2px rgba(255, 255, 255, 0.25) solid !important;
                border-top: 2px rgba(255, 255, 255, 1) solid !important;
            }
        }

        .immersive-translate-error-wrapper {
            position: relative;
            display: inline-flex;
            padding: 6px;
            margin: 0 12px;
            white-space: nowrap;
            font-size: 0.9em;
        }

        [lang="zh-CN"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        [lang="zh-TW"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        .immersive-translate-tooltip {
            position: relative;
            display: inline-flex;
            /* little indicater to indicate it's hoverable */
        }

        .immersive-translate-tooltip-content {
            /* here's the magic */
            position: absolute;
            z-index: 100000000000;

            left: 50%;
            bottom: 0;
            transform: translate(-50%, 110%);
            line-height: 1;
            /* and add a small left margin */

            /* basic styles */
            width: max-content;
            max-width: 250px;
            word-wrap: break-word;
            white-space: pre-line;
            padding: 10px;
            border-radius: 10px;
            background: #000c;
            color: #fff;
            text-align: center;
            font-size: 14px;
            display: none;
            /* hide by default */
        }

        .immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip-content-table {
            left: unset !important;
            bottom: unset !important;
            transform: translate(-10%, 50%) !important;
        }

        .immersive-translate-tooltip:hover:before {
            display: inline-block;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--bg-2, #fff);
            font-size: 14px;
        }
    </style>
    <style data-id="immersive-translate-user-custom-style">
        :root {

            .immersive-translate-target-inner {
                font-family: inherit;
            }


            .immersive-translate-target-inner {
                font-family: inherit;
            }
        }
    </style>
    <style data-id="immersive-translate-dynamic-injected-css">
        .immersive-translate-target-wrapper[dir='rtl'] {
            text-align: right;
        }

        .immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {
            display: block;
        }

        .immersive-translate-target-wrapper {
            word-break: break-word;
            user-select: text;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper[dir='rtl'] {
            display: inline-block;
        }

        [dir='rtl'] .immersive-translate-target-wrapper:not([dir]) {
            text-align: left;
        }

        [imt-state=dual] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            display: block;
        }

        [imt-trans-position=before] .immersive-translate-target-translation-block-wrapper {
            display: block !important;
        }

        [imt-state][data-immersive-translate_rtl] .immersive-translate-target-wrapper {
            display: block !important;
        }
    </style>
</head>

<body epub:type="bodymatter" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
    <section aria-labelledby="c12_1" epub:type="chapter" role="doc-chapter"
        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
        <header data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <h1 id="c12_1" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1"><span aria-label="307" epub:type="pagebreak" id="Page_307"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span><span id="c12"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span><span
                    class="chapterNumber"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">12</span><br /><span
                    class="chapterTitle"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Reflection, Metadata, and
                    Source Generators</span>
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">12 反射、元数据和源生成器</font>
                    </font>
                </font>
            </h1>
        </header>
        <section aria-label="chapter opening" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <span id="c12-sec-0001" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <aside data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                <div class="top hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <hr />
                </div>
                <section class="feature3" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <h3 data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">WHAT'S IN THIS CHAPTER?<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章包含什么内容？</font>
                            </font>
                        </font>
                    </h3>
                    <ul class="check2" id="c12-list-0001"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <li id="c12-li-0001" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">Using custom attributes<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">使用自定义属性</font>
                                </font>
                            </font>
                        </li>
                        <li id="c12-li-0002" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">Inspecting the metadata at runtime using reflection
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">使用反射在运行时检查元数据</font>
                                </font>
                            </font>
                        </li>
                        <li id="c12-li-0003" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">Working with the dynamic type<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">与动态类型一起工作</font>
                                </font>
                            </font>
                        </li>
                        <li id="c12-li-0004" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">Creating dynamic objects with <code
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">使用 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                                        创建动态对象</font>
                                </font>
                            </font>
                        </li>
                        <li id="c12-li-0005" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">Compiling code with source generators<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">使用源生成器编译代码</font>
                                </font>
                            </font>
                        </li>
                    </ul>
                    <div class="bottom hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <hr />
                    </div>
                </section>
            </aside>
            <aside data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                <div class="top hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <hr />
                </div>
                <section class="feature3" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span
                        id="c12-fea-0001" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h3 id="head-2-104" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">CODE DOWNLOADS FOR THIS CHAPTER<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章代码下载</font>
                            </font>
                        </font>
                    </h3>
                    <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span
                            id="c12-sec-0002"
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                        <p id="c12-para-0003" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">The source code for this chapter is available on the
                            book page at <code
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><a href="http://www.wiley.com">www.wiley.com</a></code>.
                            Click the Downloads link. The code can also be found at <code
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                            in the directory <code
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">1_CS/ReflectionAndSourceGenerators</code>.
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的源代码可在书籍页面 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><a href="http://www.wiley.com">www.wiley.com</a></code>
                                        上找到。点击下载链接。代码也可以在目录 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">1_CS/ReflectionAndSourceGenerators</code>
                                        中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                                        找到。</font>
                                </font>
                            </font>
                        </p>
                        <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">The code for this chapter is divided into the
                            following major examples:<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的代码分为以下主要示例：</font>
                                </font>
                            </font>
                        </p>
                        <ul class="check" id="c12-list-0002"
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <li id="c12-li-0006" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                data-immersive-translate-paragraph="1">LookupWhatsNew<font
                                    class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                    </font>
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">查找新功能</font>
                                    </font>
                                </font>
                            </li>
                            <li id="c12-li-0007" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                data-immersive-translate-paragraph="1">TypeView</li>
                            <li id="c12-li-0008" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                data-immersive-translate-paragraph="1">VectorClass</li>
                            <li id="c12-li-0009" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                data-immersive-translate-paragraph="1">WhatsNewAttributes</li>
                            <li id="c12-li-0010" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                data-immersive-translate-paragraph="1">Dynamic</li>
                            <li id="c12-li-0011" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                data-immersive-translate-paragraph="1">DynamicFileReader</li>
                            <li id="c12-li-0012" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                data-immersive-translate-paragraph="1">CodeGenerationSample</li>
                        </ul>
                        <p id="c12-para-0005" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">All the sample projects have nullable reference types
                            enabled.<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">所有示例项目都已启用可空引用类型。</font>
                                </font>
                            </font>
                        </p>
                    </section>
                    <div class="bottom hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <hr />
                    </div>
                </section>
            </aside>
        </section> <span aria-label="308" epub:type="pagebreak" id="Page_308" role="doc-pagebreak"
            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
        <section aria-labelledby="head-2-105" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <span id="c12-sec-0003" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <h2 id="head-2-105" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">INSPECTING CODE AT RUNTIME AND DYNAMIC PROGRAMMING<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在运行时检查代码和动态编程</font>
                    </font>
                </font>
            </h2>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">This chapter focuses on custom attributes, reflection, dynamic
                programming, and source code generation during the build process with C# 9 source generators. Custom
                attributes are mechanisms that enable you to associate custom metadata with program elements. This
                metadata is created at compile time and embedded in an assembly. <i
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Reflection</i> is a generic
                term that describes the capability to inspect and manipulate program elements at runtime. For example,
                reflection allows you to do the following:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章重点介绍自定义属性、反射、动态编程以及使用 C# 9
                            源生成器在构建过程中生成源代码。自定义属性是使您能够将自定义元数据与程序元素相关联的机制。这些元数据在编译时创建，并嵌入到程序集中。反射是一个通用术语，描述了在运行时检查和操作程序元素的能力。例如，反射允许您执行以下操作：
                        </font>
                    </font>
                </font>
            </p>
            <ul class="check" id="c12-list-0003" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                <li id="c12-li-0013" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Enumerate the members of a type<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">枚举类型的成员</font>
                        </font>
                    </font>
                </li>
                <li id="c12-li-0014" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Instantiate a new object<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">实例化一个新对象</font>
                        </font>
                    </font>
                </li>
                <li id="c12-li-0015" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Execute the members of an object<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">执行对象成员</font>
                        </font>
                    </font>
                </li>
                <li id="c12-li-0016" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Find out information about a type<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">查询类型信息</font>
                        </font>
                    </font>
                </li>
                <li id="c12-li-0017" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Find out information about an assembly<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">查询程序集信息</font>
                        </font>
                    </font>
                </li>
                <li id="c12-li-0018" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Inspect the custom attributes applied to a type<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">检查应用于类型的自定义属性</font>
                        </font>
                    </font>
                </li>
                <li id="c12-li-0019" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Create and compile a new assembly<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">创建并编译一个新的程序集</font>
                        </font>
                    </font>
                </li>
            </ul>
            <p id="c12-para-0007" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">This list represents a great deal of functionality and
                encompasses some of the most powerful and complex capabilities provided by .NET. Because one chapter
                does not have the space to cover all the capabilities of reflection, I focus on those elements that you
                are likely to use most frequently.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">这个列表代表了许多功能，并涵盖了.NET
                            提供的一些最强大和最复杂的能力。由于一个章节没有足够的空间来涵盖反射的所有能力，因此我专注于那些你可能会最频繁使用的元素。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0008" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">To demonstrate custom attributes and reflection, in this chapter,
                you first develop an example based on a company that regularly ships upgrades of its software and wants
                to have details about these upgrades documented automatically. In the example, you define custom
                attributes that indicate the date when program elements were last modified and what changes were made.
                You then use reflection to develop an application that looks for these attributes in an assembly and can
                automatically display all the details about what upgrades have been made to the software since a given
                date.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            为了演示自定义属性和反射，在本章中，你首先基于一个经常发送其软件升级的公司开发一个示例，该公司希望自动记录这些升级的详细信息。在示例中，你定义了自定义属性，这些属性指示程序元素最后一次修改的日期以及所做的更改。然后，你使用反射来开发一个应用程序，该应用程序在程序集中查找这些属性，并可以自动显示自给定日期以来对软件所做的所有升级的详细信息。
                        </font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0009" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">Another example in this chapter considers an application that
                reads from or writes to a database and uses custom attributes as a way to mark which classes and
                properties correspond to which database tables and columns. By reading these attributes from the
                assembly at runtime, the program can automatically retrieve or write data to the appropriate location in
                the database without requiring specific logic for each table or column.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            本章中的另一个例子考虑了一个从数据库读取或写入的应用程序，它使用自定义属性作为标记哪些类和属性对应于哪些数据库表和列的方式。通过在运行时从程序集读取这些属性，程序可以自动从数据库的适当位置检索或写入数据，而无需为每个表或列编写特定逻辑。
                        </font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0010" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">The second aspect of this chapter is dynamic programming, which
                has been a part of the C# language since version 4 when the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> type was
                added. Although C# is a statically typed language, the additions for dynamic programming give the C#
                language capabilities for calling script functions from within C#.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章的第二个方面是动态编程，它自 C#语言 4.0 版本引入 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                            类型时已成为语言的一部分。尽管 C#是一种静态类型语言，但动态编程的添加为 C#语言提供了从 C#内部调用脚本函数的能力。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0011" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">In this chapter, you look at the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> type and the
                rules for using it. You also see what an implementation of <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicObject</code> looks
                like and how you can use it. <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>, which
                is an implementation of <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicObject</code>, is also
                covered.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在本章中，你将了解 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                            类型及其使用规则。你还将看到 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicObject</code>
                            的实现方式以及如何使用它。作为 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicObject</code>
                            的实现， <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            也进行了介绍。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0012" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">The third big aspect of this chapter is a C# 9 enhancement—source
                generators. With source generators, code can be created while you start the build process. The source
                code you write can be enhanced, and you can also use other data sources to create C# source code. In
                this chapter, you'll see source generators checking attributes. This results in generating code that's
                available during compile time instead of using reflection during runtime.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章的第三个重要方面是 C# 9
                            的增强——源生成器。通过源生成器，可以在启动构建过程时创建代码。你可以增强编写的源代码，还可以使用其他数据源来创建
                            C#源代码。在本章中，你会看到源生成器检查属性。这会导致在编译时生成代码，而不是在运行时使用反射。</font>
                    </font>
                </font>
            </p>
        </section>
        <section aria-labelledby="head-2-106" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <span id="c12-sec-0004" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <h2 id="head-2-106" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">CUSTOM ATTRIBUTES<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">自定义特性</font>
                    </font>
                </font>
            </h2>
            <p id="c12-para-0013" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">You have already seen in this book how you can define attributes
                on various items within your program. These attributes have been defined by Microsoft as part of .NET,
                and many of them receive special support from the C# compiler. This means that for those particular
                attributes, the compiler can customize the compilation process in specific ways—for example, laying out
                a struct in memory according to the details in the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StructLayout</code>
                attributes.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            你已经在本书中看到，如何在程序中的各种项目上定义属性。这些属性由微软作为.NET 的一部分定义，其中许多属性得到了
                            C#编译器的特殊支持。这意味着对于这些特定的属性，编译器可以以特定方式定制编译过程——例如，根据 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StructLayout</code>
                            属性中的详细信息在内存中布局结构体。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0014" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1"><span aria-label="309" epub:type="pagebreak" id="Page_309"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>.NET also enables you
                to define attributes. By default, custom attributes don't have any effect on the compilation process
                because the compiler has no intrinsic awareness of them (later you'll see source generators where custom
                attributes can have an effect on the compilation process). These attributes are emitted as metadata in
                the compiled assembly when they are applied to program elements.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">.NET
                            还允许你定义特性。默认情况下，自定义特性对编译过程没有任何影响，因为编译器没有内在的感知能力（稍后你将看到源生成器，其中自定义特性可以对编译过程产生影响）。当这些特性应用于程序元素时，它们会作为元数据在编译的程序集中发出。
                        </font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0015" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">By itself, this metadata might be useful for documentation
                purposes, but what makes attributes really powerful is that by using reflection, your code can read this
                metadata and use it to make decisions at runtime. This means that the custom attributes that you define
                can directly affect how your code runs. For example, custom attributes can be used to enable declarative
                code access security checks for custom permission classes, to associate information with program
                elements that can then be used by testing tools, or when developing extensible frameworks that allow the
                loading of plug-ins or modules.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            仅凭这些元数据本身可能对文档编写有用，但使属性真正强大的是，通过使用反射，你的代码可以读取这些元数据，并使用它们在运行时做出决策。这意味着你定义的自定义属性可以直接影响代码的运行方式。例如，自定义属性可用于为自定义权限类启用声明性代码访问安全检查，将信息与程序元素相关联，然后这些信息可以被测试工具使用，或在开发可扩展框架时允许加载插件或模块。
                        </font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0005"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-234" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Writing Custom Attributes <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">编写自定义属性</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">To understand how to write custom attributes, it is useful to
                    know what the compiler does when it encounters an element in your code that has a custom attribute
                    applied to it. Suppose that you have a C# property declaration that looks like this:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                要了解如何编写自定义属性，了解编译器在遇到代码中具有自定义属性的应用元素时所做的操作是有用的。假设你有一个如下所示的 C#属性声明：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0001"><code>[FieldName("SocialSecurityNumber")]</code>
<code>public string SocialSecurityNumber</code>
<code>{</code>
<code>  get {</code>
<code>    //…</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">When the C# compiler recognizes that this property has an
                    attribute applied to it (<code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>), it
                    first appends the string <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code> to this
                    name, forming the combined name <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldNameAttribute</code>.
                    The compiler then searches all the namespaces in its search path (those namespaces that have been
                    mentioned in a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">using</code> directive)
                    for a class with the specified name. Note that if you mark an item with an attribute whose name
                    already ends in the string <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>, the
                    compiler does not add the string to the name a second time; it leaves the attribute name unchanged.
                    Therefore, the preceding code is equivalent to this:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当 C#编译器识别到这个属性有一个属性应用在其上（ <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                                ）时，它首先将字符串 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                                添加到此名称，形成组合名称 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldNameAttribute</code>
                                。然后，编译器在其搜索路径中的所有命名空间（在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">using</code>
                                指令中提到的那些命名空间）中搜索具有指定名称的类。请注意，如果你用名称以字符串 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                                结尾的属性标记一个项目，编译器不会将字符串再次添加到名称中；它保持属性名称不变。因此，前面的代码等效于这个：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0002"><code>[FieldNameAttribute("SocialSecurityNumber")]</code>
<code>public string SocialSecurityNumber</code>
<code>{</code>
<code>  get {</code>
<code>    //…</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The compiler expects to find a class with this name, and it
                    expects this class to be derived directly or indirectly from <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Attribute</code>.
                    The compiler also expects that this class contains information governing the use of the attribute.
                    In particular, the attribute class needs to specify the following:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">编译器期望找到具有此名称的类，并期望这个类直接或间接地派生自
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Attribute</code>
                                。编译器还期望这个类包含控制属性使用的详细信息。特别是，属性类需要指定以下内容：</font>
                        </font>
                    </font>
                </p>
                <ul class="check" id="c12-list-0004"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <li id="c12-li-0020" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The types of program elements to which the attribute can
                        be applied (classes, structs, properties, methods, and so on)<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">该属性可应用于哪些程序元素类型（类、结构、属性、方法等）
                                </font>
                            </font>
                        </font>
                    </li>
                    <li id="c12-li-0021" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Whether it is legal for the attribute to be applied more
                        than once to the same program element<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">将属性多次应用于同一程序元素是否合法</font>
                            </font>
                        </font>
                    </li>
                    <li id="c12-li-0022" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Whether the attribute, when applied to a class or
                        interface, is inherited by derived classes and interfaces<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">当该属性应用于类或接口时，是否会被派生类和接口继承
                                </font>
                            </font>
                        </font>
                    </li>
                    <li id="c12-li-0023" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The mandatory and optional parameters the attribute takes
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">该属性所包含的必填和选填参数</font>
                            </font>
                        </font>
                    </li>
                </ul>
                <p id="c12-para-0019" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">If the compiler cannot find a corresponding attribute class
                    or if it finds one but the way that you have used that attribute does not match the information in
                    the attribute class, the compiler raises a compilation error. For example, if the attribute class
                    indicates that the attribute can be applied only to classes, but you have applied it to a struct
                    definition, a compilation error occurs.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                如果编译器找不到对应的属性类，或者找到后你使用该属性的方式与属性类中的信息不匹配，编译器会抛出编译错误。例如，如果属性类表明该属性只能应用于类，但你将其应用于结构体定义，就会发生编译错误。
                            </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Continuing with the example, assume that you have defined the
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                    attribute like this:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">继续以该示例为例，假设你这样定义了 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                                属性：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0003"><code>[AttributeUsage(AttributeTargets.Property,</code>
<code>  AllowMultiple=false, Inherited=false)]<span aria-label="310" epub:type="pagebreak" id="Page_310" role="doc-pagebreak"></span></code>
<code>public class FieldNameAttribute: Attribute</code>
<code>{</code>
<code>  private string _name;</code>
<code>  public FieldNameAttribute(string name) =&gt; _name = name;</code>
<code>}</code></pre>
                <p id="c12-para-0021" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The following sections discuss each element of this
                    definition.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">以下部分将讨论此定义的每个元素。</font>
                        </font>
                    </font>
                </p>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0006"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-39" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Specifying the AttributeUsage Attribute<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">指定 AttributeUsage 属性</font>
                            </font>
                        </font>
                    </h4>
                    <p id="c12-para-0022" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The first thing to note is that the attribute class is
                        marked with an attribute—the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.AttributeUsage</code>
                        attribute. This is an attribute defined by Microsoft for which the C# compiler provides special
                        support. The primary purpose of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeUsage</code>
                        is to identify the types of program elements to which your custom attribute can be applied. This
                        information is provided by the first parameter of the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeUsage</code>
                        attribute. This parameter is mandatory, and it is of an enumerated type, <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeTargets</code>.
                        In the previous example, you have indicated that the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                        attribute can be applied only to properties, which is fine, because that is exactly what you
                        have applied it to in the earlier code fragment. The <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeTargets</code>
                        enum type defines members to apply attributes on the assembly, classes, constructors, fields,
                        events, methods, interfaces, structs, return values, and more.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">需要注意的是，属性类使用了属性—— <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.AttributeUsage</code>
                                    属性。这是由 Microsoft 定义的，C#编译器为其提供特殊支持的属性。 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeUsage</code>
                                    的主要目的是标识你的自定义属性可以应用到的程序元素类型。这些信息由 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeUsage</code>
                                    属性的第一个参数提供。该参数是必需的，它是一个枚举类型—— <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeTargets</code>
                                    。在之前的示例中，你已经指定 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                                    属性只能应用于属性，这是可以的，因为你确实在之前的代码片段中应用了它。 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeTargets</code>
                                    枚举类型定义了应用于程序集、类、构造函数、字段、事件、方法、接口、结构、返回值等的属性成员。</font>
                            </font>
                        </font>
                    </p>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Note that when applying the attribute to a program
                        element, you place the attribute in square brackets immediately before the element. However, two
                        values in the preceding list do not correspond to any program element: <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code> and
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Module</code>. An
                        attribute can be applied to an assembly or a module as a whole, rather than to an element in
                        your code; in this case the attribute can be placed anywhere in your source code, but it must be
                        prefixed with the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">assembly</code> or
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">module</code>
                        keyword:<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">
                                    注意，当将属性应用于程序元素时，您需要将属性放在元素前面的方括号中。然而，在前面列表中的两个值与任何程序元素都不对应： <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Module</code>
                                    。属性可以作为一个整体应用于程序集或模块，而不是代码中的元素；在这种情况下，属性可以放在源代码的任何位置，但必须以 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">assembly</code>
                                    或 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">module</code>
                                    关键字为前缀：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0004"><code>[assembly:SomeAssemblyAttribute(Parameters)]</code>
<code>[module:SomeAssemblyAttribute(Parameters)]</code></pre>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">When indicating the valid target elements of a custom
                        attribute, you can combine these values using the bitwise <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">OR</code> operator.
                        For example, if you want to indicate that your <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                        attribute can be applied to both properties and fields, you use the following:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">当指定自定义属性的有效目标元素时，您可以使用位运算符
                                    <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">OR</code>
                                    组合这些值。例如，如果您想表示您的 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                                    属性可以应用于属性和字段，您使用以下方式：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0005"><code>[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field,</code>
<code>  AllowMultiple=false, Inherited=false)]</code>
<code>public class FieldNameAttribute: Attribute</code></pre>
                    <p id="c12-para-0025" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">You can also use <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeTargets.All</code>
                        to indicate that your attribute can be applied to all types of program elements. The <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeUsage</code>
                        attribute also contains two other parameters: <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AllowMultiple</code>
                        and <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Inherited</code>.
                        These are specified using the syntax of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">&lt;ParameterName&gt;=&lt;ParameterValue&gt;</code>
                        instead of simply specifying the values for these parameters. These parameters are optional—you
                        can omit them.<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">您也可以使用 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeTargets.All</code>
                                    来表示您的属性可以应用于所有类型的程序元素。 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeUsage</code>
                                    属性还包含另外两个参数： <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AllowMultiple</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Inherited</code>
                                    。这些参数使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">&lt;ParameterName&gt;=&lt;ParameterValue&gt;</code>
                                    语法指定，而不是简单地指定这些参数的值。这些参数是可选的——您可以省略它们。</font>
                            </font>
                        </font>
                    </p>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AllowMultiple</code>
                        parameter indicates whether an attribute can be applied more than once to the same item. The
                        fact that it is set to <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">false</code>
                        indicates that the compiler should raise an error if it sees something like this:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AllowMultiple</code>
                                    参数表示一个属性是否可以多次应用于同一个项。它被设置为 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">false</code>
                                    表示如果编译器看到类似的情况，应该引发错误：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0006"><code>[FieldName("SocialSecurityNumber")]</code>
<code>[FieldName("NationalInsuranceNumber")]</code>
<code>public string SocialSecurityNumber</code>
<code>{</code>
<code>  //…</code></pre>
                    <p id="c12-para-0027" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">If the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Inherited</code>
                        parameter is set to <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">true</code>, an
                        attribute applied to a class or interface is also automatically applied to all derived classes
                        or interfaces. If the attribute is applied to a method or property, it automatically applies to
                        any overrides of that method or property, and so on.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">如果 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Inherited</code>
                                    参数设置为 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">true</code>
                                    ，则应用于类或接口的属性会自动应用于所有派生类或接口。如果属性应用于方法或属性，则会自动应用于该方法或属性的所有重写，依此类推。</font>
                            </font>
                        </font>
                    </p>
                </section> <span aria-label="311" epub:type="pagebreak" id="Page_311" role="doc-pagebreak"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0007"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-40" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Specifying Attribute Parameters<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">指定属性参数</font>
                            </font>
                        </font>
                    </h4>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">This section demonstrates how you can specify the
                        parameters that your custom attribute takes. When the compiler encounters a statement such as
                        the following, it examines the parameters passed into the attribute—which is a string—and looks
                        for a constructor for the attribute that takes exactly those parameters:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">
                                    本节演示了如何指定自定义属性所接受的参数。当编译器遇到如下语句时，它会检查传递到属性中的参数（这是一个字符串），并查找接受完全这些参数的属性构造函数：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0007"><code>[FieldName("SocialSecurityNumber")]</code>
<code>public string SocialSecurityNumber</code>
<code>{</code>
<code>  //…</code></pre>
                    <p id="c12-para-0029" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">If the compiler finds an appropriate constructor, it
                        emits the specified metadata to the assembly. If the compiler does not find an appropriate
                        constructor, a compilation error occurs. As discussed later in this chapter, reflection involves
                        reading metadata (attributes) from assemblies and instantiating the attribute classes they
                        represent. Because of this, the compiler must ensure that an appropriate constructor exists that
                        allows the runtime instantiation of the specified attribute.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">如果编译器找到合适的构造函数，它会将指定的元数据 emit
                                    到程序集。如果编译器找不到合适的构造函数，就会发生编译错误。正如本章后面讨论的，反射涉及从程序集中读取元数据（属性）并实例化它们所代表的属性类。由于这个原因，编译器必须确保存在一个合适的构造函数，以允许运行时实例化指定的属性。
                                </font>
                            </font>
                        </font>
                    </p>
                    <p id="c12-para-0030" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">In the example, you have supplied just one constructor
                        for <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldNameAttribute</code>,
                        and this constructor takes one string parameter. Therefore, when applying the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                        attribute to a property, you must supply one string as a parameter, as shown in the preceding
                        code.<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">在示例中，你只为 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldNameAttribute</code>
                                    提供了一个构造函数，并且这个构造函数接受一个字符串参数。因此，当将 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldName</code>
                                    属性应用于属性时，你必须提供一个字符串作为参数，如前面的代码所示。</font>
                            </font>
                        </font>
                    </p>
                    <p id="c12-para-0031" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">To allow a choice of what types of parameters should be
                        supplied with an attribute, you can provide different constructor overloads, although normal
                        practice is to supply just one constructor and use properties to define any other optional
                        parameters, as explained next.<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">
                                    为了允许选择应该与属性一起提供的参数类型，你可以提供不同的构造函数重载，尽管通常的做法是只提供一个构造函数，并使用属性来定义任何其他可选参数，如下面解释的。
                                </font>
                            </font>
                        </font>
                    </p>
                </section>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0008"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-41" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Specifying Optional Attribute Parameters<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">指定可选属性参数</font>
                            </font>
                        </font>
                    </h4>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">As demonstrated with the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeUsage</code>
                        attribute, an alternative syntax enables optional parameters to be added to an attribute. This
                        syntax involves specifying the names and values of the optional parameters. It works through
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">public</code>
                        properties or fields in the attribute class. For example, suppose that you modify the definition
                        of the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SocialSecurityNumber</code>
                        property as follows:<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">如 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AttributeUsage</code>
                                    属性所示，另一种语法允许向属性中添加可选参数。这种语法涉及指定可选参数的名称和值。它通过属性类中的 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">public</code>
                                    属性或字段工作。例如，假设你按如下方式修改 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SocialSecurityNumber</code>
                                    属性的定义：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0008"><code>[FieldName("SocialSecurityNumber", Comment="This is the primary key field")]</code>
<code>public string SocialSecurityNumber { get; set; }</code>
<code>{</code>
<code>  //…</code></pre>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">In this case, the compiler recognizes the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">&lt;ParameterName&gt;=&lt;ParameterValue&gt;</code>
                        syntax of the second parameter and does not attempt to match this parameter to a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldNameAttribute</code>
                        constructor. Instead, it looks for a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">public</code>
                        property or field (although public fields are not considered good programming practice, so
                        normally you will work with properties) of that name that it can use to set the value of this
                        parameter. If you want the previous code to work, you have to add some code to <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldNameAttribute</code>
                        :<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">在这种情况下，编译器识别出第二个参数的 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">&lt;ParameterName&gt;=&lt;ParameterValue&gt;</code>
                                    语法，并尝试将此参数与 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldNameAttribute</code>
                                    构造函数进行匹配。相反，它会查找一个同名的 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">public</code>
                                    属性或字段（尽管公共字段不被认为是良好的编程实践，因此通常你会使用属性）来设置该参数的值。如果你希望之前的代码能够工作，你必须在 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldNameAttribute</code>
                                    中添加一些代码：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0009"><code>[AttributeUsage(AttributeTargets.Property,</code>
<code>  AllowMultiple=false, Inherited=false)]</code>
<code>public class FieldNameAttribute : Attribute</code>
<code>{</code>
<code>  public string Comment { get; set; }</code>
<code>  private string _fieldName;</code>
<code>  public FieldNameAttribute(string fieldName)</code>
<code>  {</code>
<code>    _fieldName = fieldName;</code>
<code>  }</code>
<code>  //…</code>
<code>}</code></pre>
                </section>
            </section> <span aria-label="312" epub:type="pagebreak" id="Page_312" role="doc-pagebreak"
                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0009"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-235" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Custom Attribute Example: WhatsNewAttributes <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">自定义属性示例：WhatsNewAttributes</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">In this section, you start developing the example mentioned
                    at the beginning of the chapter. <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                    provides for an attribute that indicates when a program element was last modified. This is a more
                    ambitious code example than many of the others in that it consists of three separate projects:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在这一节中，你开始开发本章开头提到的示例。 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                提供了一个属性，用于指示程序元素最后一次被修改的时间。这个代码示例比本章中的许多其他示例更雄心勃勃，因为它由三个独立的项目组成：</font>
                        </font>
                    </font>
                </p>
                <ul class="check" id="c12-list-0005"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <li id="c12-li-0024" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">
                        <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                        —This library contains the definitions of the attribute classes <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                        and <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNewAttribute</code>.
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                    —这个库包含了属性类 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNewAttribute</code>
                                    的定义。</font>
                            </font>
                        </font>
                    </li>
                    <li id="c12-li-0025" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                        —This library makes use of the custom attributes. Types and members are annotated with these
                        attributes.<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                                    —这个库使用了自定义属性。类型和成员被这些属性标注。</font>
                            </font>
                        </font>
                    </li>
                    <li id="c12-li-0026" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">
                        <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LookUpWhatsNew</code>
                        —This executable reads the attributes with reflection.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LookUpWhatsNew</code>
                                    —这个可执行程序通过反射读取属性。</font>
                            </font>
                        </font>
                    </li>
                </ul>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0010"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-42" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The WhatsNewAttributes Library<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">《Immersive Translate》</font>
                            </font>
                        </font>
                    </h4>
                    <p id="c12-para-0035" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">This section starts with the core <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                        .NET library. The source code is contained in the file <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes.cs</code>,
                        which is located in the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                        project of the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                        solution in the example code for this chapter.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本节从核心 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                    .NET 库开始。源代码包含在文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes.cs</code>
                                    中，该文件位于本章示例代码的 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                    解决方案中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                    项目。</font>
                            </font>
                        </font>
                    </p>
                    <p id="c12-para-0036" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes.cs</code>
                        file defines two attribute classes, <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                        and <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNewAttribute</code>.
                        You use the attribute <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                        to mark when an item was last modified. It takes two mandatory parameters (parameters that are
                        passed to the constructor): the date of the modification and a string containing a description
                        of the changes. One optional parameter named <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Issues</code> (for
                        which a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">public</code>
                        property exists) can be used to describe any outstanding issues for the item.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes.cs</code>
                                    文件定义了两个属性类， <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNewAttribute</code>
                                    。您使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                    属性来标记项目最后一次修改的时间。它需要两个必填参数（传递给构造函数的参数）：修改日期和一个包含变更描述的字符串。还可以使用一个名为 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Issues</code>
                                    的可选参数（存在一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">public</code>
                                    属性）来描述项目任何未解决的问题。</font>
                            </font>
                        </font>
                    </p>
                    <p id="c12-para-0037" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">In practice, you would probably want this attribute to
                        apply to anything. To keep the code simple, its usage is limited here to classes, methods, and
                        constructors. You allow it to be applied more than once to the same item (<code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AllowMultiple=true</code>)
                        because an item might be modified more than once, and each modification has to be marked with a
                        separate attribute instance.<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">
                                    实际上，您可能希望这个属性适用于任何内容。为保持代码简洁，这里将其使用范围限制在类、方法和构造函数上。您允许它多次应用于同一项目（ <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AllowMultiple=true</code>
                                    ，因为项目可能被多次修改，每次修改都需要用单独的属性实例来标记。</font>
                            </font>
                        </font>
                    </p>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">
                        <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNew</code>
                        is a smaller class representing an attribute that doesn't take any parameters. The purpose of
                        this assembly attribute is to mark an assembly for which you are maintaining documentation via
                        the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>.
                        This way, the program that examines this assembly later knows that the assembly it is reading is
                        one on which you are actually using your automated documentation process. Here is the complete
                        source code for this part of the example (code file <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamlpes/WhatsNewAttributes/WhatsNewAttributes.cs</code>):
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNew</code>
                                    是一个较小的类，代表一个不接收任何参数的属性。此程序集属性的目的是标记一个程序集，你通过 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                    维护该程序集的文档。这样，后来检查此程序集的程序就知道它正在读取的程序集是你实际使用自动化文档过程的程序集。以下是此示例部分的完整源代码（代码文件 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamlpes/WhatsNewAttributes/WhatsNewAttributes.cs</code>
                                    ）：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0010"><code><b>[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method |</b>   </code>
<code>  <b>AttributeTargets.Constructor | AttributeTargets.Property, AllowMultiple=true, </b></code>
<code>  <b>Inherited=false)]</b></code>
<code>public class LastModifiedAttribute: <b>Attribute</b></code>
<code>{</code>
<code>  private readonly DateTime _dateModified;</code>
<code>  private readonly string _changes;</code>
<code>  public LastModifiedAttribute(string dateModified, string changes)</code>
<code>  {</code>
<code>    _dateModified = DateTime.Parse(dateModified);</code>
<code>    _changes = changes;</code>
<code>  }</code>
<code> </code>
<code>  public DateTime DateModified =&gt; _dateModified;</code>
<code> </code>
<code>  public string Changes =&gt; _changes;</code>
<code> </code>
<code>  public string Issues { get; set; }</code>
<code>}</code>
<code> <span aria-label="313" epub:type="pagebreak" id="Page_313" role="doc-pagebreak"></span></code>
<code><b>[AttributeUsage(AttributeTargets.Assembly)]</b></code>
<code>public class SupportsWhatsNewAttribute: <b>Attribute</b></code>
<code>{</code>
<code>}</code></pre>
                    <p id="c12-para-0039" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Based on what has been discussed, this code should be
                        fairly clear. Notice, however, that the properties <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DateModified</code>
                        and <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Changes</code>
                        are read-only. Using the expression syntax, the compiler creates <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">get</code> accessors.
                        There is no need for <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">set</code> accessors
                        because you are requiring these parameters to be set in the constructor as mandatory parameters.
                        You need the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">get</code> accessors
                        so that you can read the values of these attributes.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">根据讨论的内容，这段代码应该相当清晰。然而，请注意属性
                                    <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DateModified</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Changes</code>
                                    是只读的。使用表达式语法，编译器会创建 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">get</code>
                                    访问器。不需要 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">set</code>
                                    访问器，因为你要求这些参数在构造函数中作为必需参数设置。你需要 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">get</code>
                                    访问器，以便可以读取这些属性的值。</font>
                            </font>
                        </font>
                    </p>
                </section>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0011"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-43" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The VectorClass Library<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                            <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">向量类库</font>
                            </font>
                        </font>
                    </h4>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                        .NET library references the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                        library. After adding the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">using</code>
                        directives, the global assembly attribute marks the assembly to support the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNew</code>
                        attributes (code file <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/VectorClass/Vector.cs</code>):
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                                    .NET 库引用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                    库。添加 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">using</code>
                                    指令后，全局程序集属性标记了程序集以支持 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNew</code>
                                    属性（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/VectorClass/Vector.cs</code>
                                    ）：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0011"><code>[assembly: SupportsWhatsNew]</code></pre>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Now for the code for the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Vector</code> class.
                        Some <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModified</code>
                        attributes are added to the class to mark changes:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">现在为 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Vector</code>
                                    类编写代码。向类中添加了一些 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModified</code>
                                    属性来标记变更：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0012"><code>[LastModified("2020/12/19", "updated for C# 9 and .NET 5")]</code>
<code>[LastModified("2017/7/19", "updated for C# 7 and .NET Core 2")]</code>
<code>[LastModified("2015/6/6", "updated for C# 6 and .NET Core")]</code>
<code>[LastModified("2010/12/14", "IEnumerable interface implemented: " +</code>
<code>  "Vector can be treated as a collection")]</code>
<code>[LastModified("2010/2/10", "IFormattable interface implemented " +</code>
<code>  "Vector accepts N and VE format specifiers")]</code>
<code>public class Vector : IFormattable, IEnumerable&lt;double&gt;</code>
<code>{</code>
<code>  [LastModified("2020/12/19", "changed to use deconstruction syntax")]</code>
<code>  public Vector(double x, double y, double z) =&gt; (X, Y, Z) = (x, y, z);</code>
<code> </code>
<code>  [LastModified("2017/7/19", "Reduced the number of code lines")]</code>
<code>  public Vector(Vector vector)</code>
<code>    : this (vector.X, vector.Y, vector.Z { }</code>
<code> </code>
<code>  public double X { get; }</code>
<code>  public double Y { get; }</code>
<code>  public double Z { get; }</code>
<code> </code>
<code>  //…</code>
<code>}</code>
<code> </code></pre>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">You also mark the contained <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorEnumerator</code>
                        class:<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">你也标记了包含的 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorEnumerator</code>
                                    类：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0013"><code>[LastModified("2015/6/6",</code>
<code>  "Changed to implement the generic interface IEnumerator&lt;T&gt;")]</code>
<code>[LastModified("2010/2/14",</code>
<code>  "Class created as part of collection support for Vector")]</code>
<code>private class VectorEnumerator : IEnumerator&lt;double&gt;</code>
<code>{</code></pre>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The version number for the library is defined in the
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">csproj</code>
                        project file (project file <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass/VectorClass.csproj</code>):
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">库的版本号定义在 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">csproj</code>
                                    项目文件（项目文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass/VectorClass.csproj</code>
                                    ）中：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0014"><code>&lt;PropertyGroup&gt;</code>
<code>  &lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;<span aria-label="314" epub:type="pagebreak" id="Page_314" role="doc-pagebreak"></span></code>
<code>  &lt;Nullable&gt;enable&lt;/Nullable&gt;</code>
<code>  <b>&lt;Version&gt;5.2.0&lt;/Version&gt;</b></code>
<code>&lt;/PropertyGroup&gt;</code></pre>
                    <p id="c12-para-0044" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">That's as far as you can get with this example for now.
                        You are unable to run anything yet because all you have are two libraries. After taking a look
                        at reflection in the next section, you will develop the final part of the example, in which you
                        look up and display these attributes.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">
                                    目前这个示例能做到这里。因为你只有两个库，所以还不能运行任何东西。在下一节中查看反射后，你将开发示例的最后一部分，其中你将查找并显示这些属性。</font>
                            </font>
                        </font>
                    </p>
                </section>
            </section>
        </section>
        <section aria-labelledby="head-2-107" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <span id="c12-sec-0012" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <h2 id="head-2-107" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">USING REFLECTION<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用反射</font>
                    </font>
                </font>
            </h2>
            <p id="c12-para-0045" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">In this section, you take a closer look at the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Type</code> class,
                which enables you to access information concerning the definition of any data type. You also look at the
                <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection.Assembly</code>
                class, which you can use to access information about an assembly or to load that assembly into your
                program. Finally, you combine the code in this section with the code in the previous section to complete
                the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                example.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在本节中，你将更详细地了解 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Type</code>
                            类，该类使你能够访问有关任何数据类型定义的信息。你还将了解 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection.Assembly</code>
                            类，该类可用于访问有关程序集的信息或将程序集加载到你的程序中。最后，你将本节中的代码与上一节的代码结合起来，完成 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                            示例。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0013"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-236" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The System.Type Class <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">System.Type 类</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">So far, you have used the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> class only to
                    hold the reference to a type as follows:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">到目前为止，你仅使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                类来存储类型的引用，如下所示：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0015"><code>Type t = typeof(double);</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Although previously referred to as a class, <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> is an
                    abstract base class. Whenever you instantiate a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> object, you
                    are actually instantiating a class derived from <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>. <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> has one
                    derived class corresponding to each actual data type, though in general the derived classes simply
                    provide different overloads of the various <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> methods and
                    properties that return the correct data for the corresponding data type. They do not typically add
                    new methods or properties. In general, there are three common ways to obtain a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> reference
                    that refers to any given type.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">虽然之前被称为一个类， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                是一个抽象基类。每当你实例化一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                对象时，你实际上是在实例化一个从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                派生的类。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                有一个与每个实际数据类型对应的派生类，尽管通常派生类只是提供各种 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                方法和属性的不同重载，这些方法和属性返回对应数据类型的正确数据。它们通常不会添加新的方法或属性。一般来说，有三种常见的方法来获取一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                引用，该引用指向任何给定类型。</font>
                        </font>
                    </font>
                </p>
                <ul class="check" id="c12-list-0006"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <li id="c12-li-0027" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">You can use the C# <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">typeof</code>
                        operator as shown in the preceding code. This operator takes the name of the type (not in
                        quotation marks, however) as a parameter.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">你可以使用 C# 的 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">typeof</code>
                                    运算符，如前文代码所示。这个运算符以类型的名称（但不是带引号）作为参数。</font>
                            </font>
                        </font>
                    </li>
                    <li id="c12-li-0028" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">You can use the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                        method, which all classes inherit from <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Object</code>
                        :
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">你可以使用 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                                    方法，这是所有类从 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Object</code>
                                    继承的：</font>
                            </font>
                        </font>
                        <pre id="c12-code-0016"><code>double d = 10;</code>
<code>Type t = d.GetType();</code></pre>
                        <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1">
                            <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                            is called against a variable, rather than taking the name of a type. Note, however, that the
                            <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                            object returned is still associated with only that data type. It does not contain any
                            information that relates to that instance of the type. The <code
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                            method can be useful if you have a reference to an object but you are not sure what class
                            that object is actually an instance of.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1"> <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                                        是针对一个变量调用，而不是以类型的名称作为参数。然而，请注意，返回的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                        对象仍然只与该数据类型相关联。它不包含任何与该类型实例相关的信息。如果你有一个对象的引用，但不确定该对象实际上是哪个类的实例，那么 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                                        方法会很有用。</font>
                                </font>
                            </font>
                        </p>
                    </li>
                    <li id="c12-li-0029" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">You can call the static method of the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> class,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                        :
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">你可以调用 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                    类的静态方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                                    ：</font>
                            </font>
                        </font>
                        <pre id="c12-code-0017"><code>Type t = Type.GetType("System.Double");</code></pre>
                    </li>
                </ul>
                <p id="c12-para-0049" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> is really
                    the gateway to much of the reflection functionality. It implements a huge number of methods and
                    properties—far too many to provide a comprehensive list here. However, the following sections should
                    give you a good idea of the kinds of things you can do with the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> class. Note
                    that the available properties are all read-only; you use <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> to find out
                    about the data type—you cannot use it to make any modifications to the type!<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                实际上是许多反射功能的大门。它实现了大量方法和属性——太多以至于无法在此提供详尽列表。然而，接下来的几节将为你展示使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                类可以完成的各种操作。请注意，所有可用的属性都是只读的；你使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                来了解数据类型——你不能用它来对类型进行任何修改！</font>
                        </font>
                    </font>
                </p> <span aria-label="315" epub:type="pagebreak" id="Page_315" role="doc-pagebreak"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0014"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-44" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Type Properties<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                            <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">类型属性</font>
                            </font>
                        </font>
                    </h4>
                    <p id="c12-para-0050" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">You can divide the properties implemented by <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> into
                        three categories. First, a number of properties retrieve the strings containing various names
                        associated with the class, as shown in the following table:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">你可以将 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                    实现的属性分为三类。首先，一些属性会检索包含与类相关的各种名称的字符串，如下表所示：</font>
                            </font>
                        </font>
                    </p>
                    <table border="1" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <thead data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <th class="left bgcolor2" scope="col">PROPERTY</th>
                                <th class="left bgcolor2" scope="col">RETURNS</th>
                            </tr>
                        </thead>
                        <tbody data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Name</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                    data-immersive-translate-paragraph="1">The name of the data type<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">数据类型的名称</font>
                                        </font>
                                    </font>
                                </td>
                            </tr>
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FullName</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                    data-immersive-translate-paragraph="1">The fully qualified name of the data type
                                    (including the namespace name)<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">
                                                数据类型的完全限定名称（包括命名空间名称）</font>
                                        </font>
                                    </font>
                                </td>
                            </tr>
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Namespace</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                    data-immersive-translate-paragraph="1">The name of the namespace in which the data
                                    type is defined<font class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">数据类型定义的命名空间的名称
                                            </font>
                                        </font>
                                    </font>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p id="c12-para-0052" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Second, it is possible to retrieve references to further
                        type objects that represent related classes, as shown in the following table:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">其次，可以检索到表示相关类的其他类型对象的引用，如下表所示：
                                </font>
                            </font>
                        </font>
                    </p>
                    <table border="1" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <thead data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <th class="left bgcolor2" scope="col">PROPERTY</th>
                                <th class="left bgcolor2" scope="col"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                    data-immersive-translate-paragraph="1">RETURNS TYPE REFERENCE CORRESPONDING TO<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">返回对应类型引用</font>
                                        </font>
                                    </font>
                                </th>
                            </tr>
                        </thead>
                        <tbody data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">BaseType</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                    data-immersive-translate-paragraph="1">The immediate base type of this type.<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">此类型的直接基类型。</font>
                                        </font>
                                    </font>
                                </td>
                            </tr>
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">UnderlyingSystemType</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                    data-immersive-translate-paragraph="1">The type to which this type maps in the .NET
                                    runtime (recall that certain .NET base types actually map to specific predefined
                                    types recognized by IL). This member is only available in the full Framework.<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">此类型在.NET
                                                运行时映射到的类型（回想一下某些.NET 基类型实际上映射到由 IL 识别的特定预定义类型）。此成员仅在完整框架中可用。</font>
                                        </font>
                                    </font>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">A number of Boolean properties indicate whether this type
                        is, for example, a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">class</code>, an
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">enum</code>, and so
                        on. These properties include <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsAbstract</code>,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsArray</code>,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsClass</code>,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsEnum</code>,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsInterface</code>,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsPointer</code>,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsPrimitive</code>
                        (one of the predefined primitive data types), <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsPublic</code>,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsSealed</code>,
                        and <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsValueType</code>.
                        The following example uses a primitive data type:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">一些布尔属性指示此类型是否为 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">class</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">enum</code>
                                    等。这些属性包括 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsAbstract</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsArray</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsClass</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsEnum</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsInterface</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsPointer</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsPrimitive</code>
                                    （预定义的基本数据类型之一）、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsPublic</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsSealed</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsValueType</code>
                                    。以下示例使用基本数据类型：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0018"><code>Type intType = typeof(int);</code>
<code>Console.WriteLine(intType.IsAbstract); // writes false</code>
<code>Console.WriteLine(intType.IsClass); // writes false</code>
<code>Console.WriteLine(intType.IsEnum); // writes false</code>
<code>Console.WriteLine(intType.IsPrimitive); // writes true</code>
<code>Console.WriteLine(intType.IsValueType); // writes true</code></pre>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">This example uses the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Vector</code> class:
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">这个示例使用了 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Vector</code>
                                    类：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0019"><code>Type vecType = typeof(Vector);</code>
<code>Console.WriteLine(vecType.IsAbstract); // writes false</code>
<code>Console.WriteLine(vecType.IsClass); // writes true</code>
<code>Console.WriteLine(vecType.IsEnum); // writes false</code>
<code>Console.WriteLine(vecType.IsPrimitive); // writes false</code>
<code>Console.WriteLine(vecType.IsValueType); // writes false</code></pre>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Finally, you can also retrieve a reference to the
                        assembly in which the type is defined. This is returned as a reference to an instance of the
                        <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection.Assembly</code>
                        class, which is examined shortly:<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">最后，您还可以获取定义该类型的程序集的引用。这作为
                                    <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection.Assembly</code>
                                    类的实例引用返回，稍后将对其进行检查：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0020"><code>Type t = typeof (Vector);</code>
<code>Assembly? containingAssembly = Assembly.GetAssembly(t);</code></pre>
                </section> <span aria-label="316" epub:type="pagebreak" id="Page_316" role="doc-pagebreak"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0015"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-45" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Methods<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                            <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">方法</font>
                            </font>
                        </font>
                    </h4>
                    <p id="c12-para-0057" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Most of the methods of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Type</code>
                        are used to obtain details about the members of the corresponding data type—the constructors,
                        properties, methods, events, and so on. Quite a large number of methods exist, but they all
                        follow the same pattern. For example, two methods retrieve details about the methods of the data
                        type: <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code> and
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>.
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code>
                        returns a reference to a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection.MethodInfo</code>
                        object, which contains details about a method. <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                        returns an array of such references. As the names suggest, the difference is that <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                        returns details about all the methods, whereas <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code>
                        returns details about just one method with a specified parameter list. Both methods have
                        overloads that take an extra parameter, a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">BindingFlags</code>
                        enumerated value that indicates which members should be returned—for example, whether to return
                        public members, instance members, static members, and so on. If you add binding flags, you need
                        to include one of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Instance</code> or
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Static</code> and
                        one of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Private</code> or
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Public</code>.
                        Otherwise, you don't get anything.<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Type</code>
                                    的大多数方法用于获取相应数据类型成员的详细信息——构造函数、属性、方法、事件等。存在大量方法，但它们都遵循相同的模式。例如，有两个方法用于获取数据类型方法的详细信息：
                                    <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                                    。 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code>
                                    返回一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection.MethodInfo</code>
                                    对象的引用，该对象包含有关方法的详细信息。 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                                    返回一个此类引用的数组。正如名称所暗示的，区别在于 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                                    返回所有方法的详细信息，而 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code>
                                    返回具有指定参数列表的一个方法的详细信息。这两种方法都有重载版本，可以接受一个额外的参数，即 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">BindingFlags</code>
                                    枚举值，该值指示应返回哪些成员——例如，是否返回公共成员、实例成员、静态成员等。如果您添加了绑定标志，则需要包含 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Instance</code>
                                    或 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Static</code>
                                    中的一个以及 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Private</code>
                                    或 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Public</code>
                                    中的一个。否则，您将一无所获。</font>
                            </font>
                        </font>
                    </p>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">For example, the simplest overload of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                        takes no parameters and returns details about all the public methods of the data type:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">例如， <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                                    的最简单重载不接受任何参数，并返回有关该数据类型所有公共方法的详细信息：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0021"><code>Type t = typeof(double);</code>
<code>foreach (MethodInfo nextMethod in t.GetMethods())</code>
<code>{</code>
<code>  Console.WriteLine(nextMethod.Name);</code>
<code>}</code></pre>
                    <p id="c12-para-0059" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The member methods of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> that
                        follow the same pattern are shown in the following table. Note that plural names return an
                        array.<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                    中遵循相同模式的成员方法如下表所示。请注意，复数名称返回一个数组。</font>
                            </font>
                        </font>
                    </p>
                    <table border="1" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <thead data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <th class="left bgcolor2" scope="col"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                    data-immersive-translate-paragraph="1">TYPE OF OBJECT RETURNED<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">返回的对象类型</font>
                                        </font>
                                    </font>
                                </th>
                                <th class="left bgcolor2" scope="col"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                    data-immersive-translate-paragraph="1">METHOD(S)<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">
                                              </font>
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">方法</font>
                                        </font>
                                    </font>
                                </th>
                            </tr>
                        </thead>
                        <tbody data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ConstructorInfo</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetConstructor</code>,
                                    <code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetConstructors</code>
                                </td>
                            </tr>
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">EventInfo</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetEvent</code>,
                                    <code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetEvents</code>
                                </td>
                            </tr>
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldInfo</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetField</code>,
                                    <code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetFields</code>
                                </td>
                            </tr>
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MemberInfo</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMember</code>,
                                    <code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMembers</code>,
                                    <code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetDefaultMembers</code>
                                </td>
                            </tr>
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code>,
                                    <code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                                </td>
                            </tr>
                            <tr data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">PropertyInfo</code>
                                </td>
                                <td class="left bgcolor3"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetProperty</code>,
                                    <code
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetProperties</code>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p id="c12-para-0061" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMember</code> and
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMembers</code>
                        methods return details about any or all members of the data type, regardless of whether these
                        members are constructors, properties, methods, and so on.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMember</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMembers</code>
                                    方法返回有关数据类型的任何或所有成员的详细信息，无论这些成员是构造函数、属性、方法等。</font>
                            </font>
                        </font>
                    </p>
                </section>
            </section>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0016"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-237" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The TypeView Example <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">TypeView 示例</font>
                        </font>
                    </font>
                </h3>
                <p id="c12-para-0062" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">This section demonstrates some of the features of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> class with a
                    short example, <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code>, which
                    you can use to list the members of a data type. The example demonstrates how to use <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code> for a
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">double</code>
                    ; however, you can swap this type with any other data type just by changing one line of the code in
                    the example.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">本节通过一个简短的示例 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code>
                                ，演示了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                类的一些功能，你可以使用该示例来列出数据类型的成员。该示例展示了如何使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code>
                                为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">double</code>
                                进行操作；但是，你只需更改示例中的一行代码，就可以将此类型替换为任何其他数据类型。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The result of running the application is this output to the
                    console:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行应用程序的结果是控制台输出此内容：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0022"><code>Analysis of type Double</code>
<code>Type Name: Double</code>
<code>Full Name: System.Double</code>
<code>Namespace: System</code>
<code>Base Type: ValueType</code>
<code> <span aria-label="317" epub:type="pagebreak" id="Page_317" role="doc-pagebreak"></span></code>
<code>public methods</code>
<code>IsFinite IsInfinity IsNaN IsNegative IsNegativeInfinity IsNormal IsPositiveInfinity </code>
<code>IsSubnormal CompareTo Equals op_Equality op_Inequality op_LessThan op_GreaterThan </code>
<code>op_LessThanOrEqual op_GreaterThanOrEqual GetHashCode ToString TryFormat Parse TryParse </code>
<code>GetTypeCode GetType</code>
<code> </code>
<code>public fields</code>
<code>MinValue MaxValue Epsilon NegativeInfinity PositiveInfinity NaN</code></pre>
                <p id="c12-para-0064" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The console displays the name, full name, and namespace of
                    the data type as well as the name of the base type. Next, it simply iterates through all the public
                    instance members of the data type, displaying for each member the declaring type, the type of member
                    (method, field, and so on), and the name of the member. The <i
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">declaring type</i> is the
                    name of the class that actually declares the type member (for example, <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Double</code> if
                    it is defined or overridden in <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Double</code>, or
                    the name of the relevant base type if the member is simply inherited from a base class).<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                控制台显示数据类型的名称、完整名称和命名空间，以及基本类型的名称。接下来，它简单地遍历数据类型的所有公共实例成员，为每个成员显示声明类型、成员类型（方法、字段等）和成员名称。声明类型是实际声明类型成员的类名称（例如，如果在
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Double</code>
                                中定义或重写则为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Double</code>
                                ，或者如果成员仅从基类继承，则为相关基类型的名称）。</font>
                        </font>
                    </font>
                </p>
                <p id="c12-para-0065" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code> does
                    not display signatures of methods because you are retrieving details about all public instance
                    members through <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MemberInfo</code>
                    objects, and information about parameters is not available through a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MemberInfo</code> object.
                    To retrieve that information, you would need references to <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code> and
                    other more specific objects, which means that you would need to obtain details about each type of
                    member separately.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code>
                                不显示方法的签名，因为你通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MemberInfo</code>
                                对象检索所有公共实例成员的详细信息，并且参数信息无法通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MemberInfo</code>
                                对象获取。要检索这些信息，你需要 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code>
                                和其他更具体的对象的引用，这意味着你需要分别获取每种类型成员的详细信息。</font>
                        </font>
                    </font>
                </p>
                <p id="c12-para-0066" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The sample code for <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code> makes use
                    of these namespaces besides the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System</code> namespace:
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Collections.Generic</code>,
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Linq</code>,
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection</code>,
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Text</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code>
                                的示例代码除了使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System</code>
                                命名空间外，还使用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Collections.Generic</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Linq</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Text</code>
                                这些命名空间。</font>
                        </font>
                    </font>
                </p>
                <p id="c12-para-0067" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code>
                    displays details about all public instance members, but doubles only define fields and methods. The
                    main program is defined with top-level statements. It uses a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StringBuilder</code>
                    instance called <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">OutputText</code> to
                    build the text to be displayed.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeView</code>
                                显示所有公共实例成员的详细信息，但 doubles 仅定义字段和方法。主程序通过顶层语句定义。它使用一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StringBuilder</code>
                                实例 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">OutputText</code>
                                来构建要显示的文本。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Using the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">typeof</code> statement,
                    a <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> object is
                    retrieved, and this is passed to the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AnalyzeType</code>
                    method. Finally, the output is written to the console (code file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/TypeView/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">typeof</code>
                                语句，获取 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                对象，并将其传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AnalyzeType</code>
                                方法。最后，将输出写入控制台（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/TypeView/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0023"><code>StringBuilder OutputText = new();</code>
<code> </code>
<code>// modify this line to retrieve details of any other data type</code>
<code>Type t = typeof(double);</code>
<code>AnalyzeType(t);</code>
<code>Console.WriteLine($"Analysis of type {t.Name}");</code>
<code>Console.WriteLine(OutputText.ToString());</code>
<code>Console.ReadLine();</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">You implement the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AnalyzeType</code> method
                    by calling various properties and methods of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> object to get
                    the information you need concerning the type names. Instead of invoking the methods <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetConstructors</code>,
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>, and
                    so on, you could invoke the method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMembers</code>, which
                    returns all the members of the type. The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ShowMembers</code> local
                    function makes use of LINQ to select the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Name</code> property of
                    the member (this is common with all member types) and to remove overloaded members using the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Distinct</code> method.
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AddToOutput</code> is a
                    helper method to write the text to the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StringBuilder</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">您通过调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                对象的多个属性和方法来实 plement <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AnalyzeType</code>
                                方法，以获取有关类型名称的信息。您可以选择调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMembers</code>
                                方法，而不是调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetConstructors</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethods</code>
                                等方法，该方法返回类型的所有成员。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ShowMembers</code>
                                局部函数使用 LINQ 选择成员的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Name</code>
                                属性（这对于所有成员类型都很常见），并使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Distinct</code>
                                方法移除重载成员。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AddToOutput</code>
                                是一个辅助方法，用于将文本写入 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StringBuilder</code>
                                ：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0024"><code>void AnalyzeType(Type t)</code>
<code>{</code>
<code>  TypeInfo typeInfo = t.GetTypeInfo();</code>
<code>  AddToOutput($"Type Name: {t.Name}");</code>
<code>  AddToOutput($"Full Name: {t.FullName}");</code>
<code>  AddToOutput($"Namespace: {t.Namespace}");</code>
<code>   Type? tBase = typeInfo.BaseType;</code>
<code> </code>
<code>  if (tBase != null)</code>
<code>  {</code>
<code>    AddToOutput($"Base Type: {tBase.Name}");</code>
<code>  }</code>
<code> <span aria-label="318" epub:type="pagebreak" id="Page_318" role="doc-pagebreak"></span></code>
<code>  ShowMembers("constructors", t.GetConstructors());</code>
<code>  ShowMembers("methods", t.GetMethods());</code>
<code>  ShowMembers("properties", t.GetProperties());</code>
<code>  ShowMembers("fields", t.GetFields());</code>
<code>  ShowMembers("events", t.GetEvents());</code>
<code> </code>
<code>  void ShowMembers(string title, IList&lt;MemberInfo&gt; members)</code>
<code>  {</code>
<code>    if (members.Count == 0) return;</code>
<code>    AddToOutput($"\npublic {title}:");</code>
<code>    var names = members.Select(m =&gt; m.Name).Distinct();</code>
<code>    AddToOutput(string.Join(" ", names));</code>
<code>  }</code>
<code> </code>
<code>  void AddToOutput(string Text) =&gt;</code>
<code>    OutputText.Append($"{Text}{Environment.NewLine}");</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0017"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-238" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The Assembly Class <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">程序集类</font>
                        </font>
                    </font>
                </h3>
                <p id="c12-para-0070" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code> class is
                    defined in the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection</code>
                    namespace and provides access to the metadata for a given assembly. It also contains methods that
                    enable you to load and even execute an assembly—assuming that the assembly is an executable. As with
                    the <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> class,
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code>
                    contains too many methods and properties to cover here, so this section is confined to covering
                    those methods and properties that you need to get started and that you use to complete the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                    example.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code>
                                类定义在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection</code>
                                命名空间中，并提供对给定程序集的元数据的访问。它还包含方法，使您能够加载甚至执行程序集——假设程序集是可执行的。与 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                类一样， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code>
                                包含太多方法和属性，无法在此全部涵盖，因此本节仅涵盖您开始使用以及完成 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                示例所需的方法和属性。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">To analyze the code of the current assembly, you can invoke
                    the method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.GetExecutingAssembly</code>.
                    For code defined in other assemblies, you need to load the corresponding assembly into the running
                    process. You can do this with either the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">static</code> members
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.Load</code> or
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.LoadFrom</code>.
                    The difference between these methods is that <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Load</code> takes the
                    name of the assembly, and the runtime searches in a variety of locations in an attempt to locate the
                    assembly. These locations include the local directory and the global assembly cache. <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LoadFrom</code> takes the
                    full path name of an assembly and does not attempt to find the assembly in any other location:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要分析当前程序集的代码，可以调用方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.GetExecutingAssembly</code>
                                。对于定义在其他程序集中的代码，需要将相应的程序集加载到正在运行的过程中。你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">static</code>
                                成员 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.Load</code>
                                或 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.LoadFrom</code>
                                来完成这个操作。这些方法的区别在于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Load</code>
                                接收程序集的名称，而运行时会在多种位置搜索以尝试定位程序集。这些位置包括本地目录和全局程序集缓存。而 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LoadFrom</code>
                                接收程序集的完整路径名，并且不会尝试在其他任何位置查找程序集：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0025"><code>Assembly assembly1 = Assembly.Load("SomeAssembly");</code>
<code>Assembly assembly2 = Assembly.LoadFrom</code>
<code>  (@"C:\My Projects\Software\SomeOtherAssembly");</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">A number of other overloads of both methods exist, which
                    supply additional security information. After you have loaded an assembly, you can use various
                    properties on it to find out, for example, its full name:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                这两种方法都有许多其他重载版本，它们提供额外的安全信息。加载程序集后，你可以使用它上面的各种属性来获取信息，例如它的完整名称：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0026"><code>string name = assembly1.FullName;</code></pre>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0018"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-46" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Getting Details About Types Defined in an Assembly<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">获取程序集中定义的类型的信息</font>
                            </font>
                        </font>
                    </h4>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">One nice feature of the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code> class
                        is that it enables you to obtain details about all the types that are defined in the
                        corresponding assembly. You simply call the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.GetTypes</code>
                        method, which returns an array of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Type</code>
                        references containing details about all the types. You can then manipulate these <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                        references as explained in the previous section:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code>
                                    类的一个很不错的特性是它允许你获取对应程序集中定义的所有类型的详细信息。你只需调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.GetTypes</code>
                                    方法，该方法会返回一个包含所有类型详细信息的 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Type</code>
                                    引用数组。然后你可以像前一节解释的那样操作这些 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                    引用：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0027"><code>Type[] types = theAssembly.GetTypes();</code>
<code>foreach(Type definedType in types)</code>
<code>{</code>
<code>  DoSomethingWith(definedType);</code>
<code>}</code></pre>
                </section> <span aria-label="319" epub:type="pagebreak" id="Page_319" role="doc-pagebreak"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0019"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                    <h4 id="head-4-47" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Getting Details About Custom Attributes<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">获取自定义属性的详细信息</font>
                            </font>
                        </font>
                    </h4>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">The methods you use to find out which custom attributes
                        are defined on an assembly or type depend on the type of object to which the attribute is
                        attached. If you want to find out what custom attributes are attached to an assembly as a whole,
                        you need to call a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">static</code> method
                        of the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                        class, <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>,
                        passing in a reference to the assembly:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">
                                    你用来查询某个程序集或类型上定义了哪些自定义属性的方法取决于属性所附加的对象类型。如果你想要查询自定义属性整体附加到程序集的情况，你需要调用 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">static</code>
                                    类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>
                                    方法，传入程序集的引用：</font>
                            </font>
                        </font>
                    </p>
                    <aside data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <div class="top hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <hr />
                        </div>
                        <section class="feature2"
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <p id="c12-para-0075" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                                data-immersive-translate-paragraph="1"><b
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">NOTE</b> <i
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">You might
                                    have wondered why, when you defined custom attributes, you had to go to all the
                                    trouble of actually writing classes for them. The custom attributes genuinely exist
                                    as objects, and when an assembly is loaded, you can read in these attribute objects,
                                    examine their properties, and call their methods.</i>
                                <font class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">注意
                                            你可能曾疑惑，在定义自定义属性时，为什么必须费事地实际为它们编写类。自定义属性确实作为对象存在，当程序集被加载时，你可以读取这些属性对象，检查它们的属性，并调用它们的方法。
                                        </font>
                                    </font>
                                </font>
                            </p>
                            <div class="bottom hr"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                                <hr />
                            </div>
                        </section>
                    </aside>
                    <pre id="c12-code-0028"><code>Attribute[] definedAttributes = Attribute.GetCustomAttributes(assembly1);</code>
<code>// assembly1 is an Assembly object</code></pre>
                    <p id="c12-para-0076" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">
                        <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>,
                        which is used to get assembly attributes, has a few overloads. If you call it without specifying
                        any parameters other than an assembly reference, it simply returns all the custom attributes
                        defined for that assembly. You can also call <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>
                        by specifying a second parameter, which is a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> object
                        that indicates the attribute class in which you are interested. In this case, <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>
                        returns an array consisting of all the attributes present that are of the specified type.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">用于获取程序集属性的 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>
                                    方法有几个重载版本。如果你只传入程序集引用而不指定其他参数，它将简单地返回该程序集定义的所有自定义属性。你也可以通过指定第二个参数来调用 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>
                                    ，该参数是一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                    对象，用于指示你感兴趣的属性类。在这种情况下， <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>
                                    将返回一个数组，其中包含所有指定类型的属性。</font>
                            </font>
                        </font>
                    </p>
                    <p id="c12-para-0077" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">Note that all attributes are retrieved as plain <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                        references. If you want to call any of the methods or properties you defined for your custom
                        attributes, you need to cast these references explicitly to the relevant custom attribute
                        classes. You can obtain details about custom attributes that are attached to a given data type
                        by calling another overload of <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.GetCustomAttributes</code>,
                        this time passing a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> reference
                        that describes the type for which you want to retrieve any attached attributes. To obtain
                        attributes that are attached to methods, constructors, fields, and so on, however, you need to
                        call a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>
                        method that is a member of one of the classes <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code>,
                        <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ConstructorInfo</code>,
                        <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldInfo</code>,
                        and so on.<font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">请注意，所有属性都作为普通的 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                                    引用被检索。如果你想要调用你为自定义属性定义的任何方法或属性，你需要将这些引用显式地转换为相应的自定义属性类。你可以通过调用另一个重载的 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.GetCustomAttributes</code>
                                    来获取有关附加到给定数据类型的自定义属性的详细信息，这次传递一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                    引用，该引用描述了你想要检索任何附加属性的类型。然而，要获取附加到方法、构造函数、字段等上的属性，你需要调用 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ConstructorInfo</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FieldInfo</code>
                                    等类中的一个成员的 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttributes</code>
                                    方法。</font>
                            </font>
                        </font>
                    </p>
                    <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1">If you expect only a single attribute of a given type,
                        you can call the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttribute</code>
                        method instead, which returns a single <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                        object. You use <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttribute</code>
                        in the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                        example to find out whether the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNew</code>
                        attribute is present in the assembly. To do this, you call <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttribute</code>,
                        passing in a reference to the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                        assembly and the type of the <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNewAttribute</code>
                        attribute. If this attribute is present, you get an <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                        instance. If no instances of it are defined in the assembly, you get <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">null</code>. If two
                        or more instances are found, <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttribute</code>
                        throws a <code
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection.AmbiguousMatchException</code>.
                        This is what that call would look like:<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">如果你只期望获取给定类型的单个属性，可以调用 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttribute</code>
                                    方法，该方法会返回一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                                    对象。在 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                    示例中，你使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttribute</code>
                                    来判断 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNew</code>
                                    属性是否存在于程序集中。为此，你调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttribute</code>
                                    ，传入对 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                    程序集的引用以及 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNewAttribute</code>
                                    属性的类型。如果该属性存在，你会得到一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                                    实例。如果程序集中未定义该属性的实例，你会得到 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">null</code>
                                    。如果找到两个或多个实例， <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCustomAttribute</code>
                                    会抛出 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection.AmbiguousMatchException</code>
                                    异常。这个调用看起来是这样的：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c12-code-0029"><code>Attribute supportsAttribute =</code>
<code>  Attribute.GetCustomAttributes(assembly1, typeof(SupportsWhatsNewAttribute));</code></pre>
                </section>
            </section>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0021"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-239" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Completing the WhatsNewAttributes Example <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">完成 WhatsNewAttributes 示例 </font>
                        </font>
                    </font>
                </h3>
                <p id="c12-para-0079" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">You now have enough information to complete the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                    example by writing the source code for the final assembly in the sample—the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LookUpWhatsNew</code>
                    assembly. This part of the application is a console application. However, it needs to reference the
                    other assemblies of <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                    and <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在你有了足够的信息，可以通过编写示例中最终程序集的源代码来完成
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                示例——即 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LookUpWhatsNew</code>
                                程序集。该应用程序的这一部分是一个控制台应用程序。但是，它需要引用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WhatsNewAttributes</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                                的其他程序集。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Program</code> class
                    contains the main program entry point as well as the other methods. All the methods you define are
                    in this class, which also has two static fields—
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">outputText</code>,
                    which contains the text as you build it in preparation for writing it to the console window, and
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">backDateTo</code>,
                    which stores the date you have selected. All modifications made since this date will be displayed.
                    Normally, you would display a dialog inviting the user <span aria-label="320" epub:type="pagebreak"
                        id="Page_320" role="doc-pagebreak"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>to pick this date,
                    but for this example, you don't want to get sidetracked into that kind of code. For this reason,
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">backDateTo</code> is
                    hard-coded to a value of 2019/2/1. You can easily change this date when you download the code (code
                    file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/LookupWhatsNew/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Program</code>
                                类包含主程序入口点以及其他方法。你定义的所有方法都在这个类中，它还包含两个静态字段—— <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">outputText</code>
                                ，用于存储你在构建过程中准备写入控制台窗口的文本，以及 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">backDateTo</code>
                                ，用于存储你选择的日期。自该日期以来的所有修改都将被显示。通常，你会显示一个对话框邀请用户选择此日期，但在这个示例中，你不想偏离那种代码。因此， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">backDateTo</code>
                                被硬编码为一个值 2019/2/1。当你下载代码时（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/LookupWhatsNew/Program.cs</code>
                                ）时，可以轻松地更改此日期：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0030"><code>StringBuilder outputText = new(1000);</code>
<code>DateTime backDateTo = new(2019, 2, 1);</code>
<code> </code>
<code>Assembly theAssembly = Assembly.Load(new AssemblyName("VectorClass"));</code>
<code>Attribute? supportsAttribute = theAssembly.GetCustomAttribute(</code>
<code>  typeof(SupportsWhatsNewAttribute));</code>
<code> </code>
<code>AddToOutput($"Assembly: {theAssembly.FullName}");</code>
<code>if (supportsAttribute is null)</code>
<code>{</code>
<code>  Console.WriteLine("This assembly does not support WhatsNew attributes");</code>
<code>  return;</code>
<code>}</code>
<code>else</code>
<code>{</code>
<code>  AddToOutput("Defined Types:");</code>
<code>}</code>
<code> </code>
<code>IEnumerable&lt;Type&gt; types = theAssembly.ExportedTypes;</code>
<code>foreach(Type definedType in types)</code>
<code>{</code>
<code>  DisplayTypeInfo(definedType);</code>
<code>}</code>
<code> </code>
<code>Console.WriteLine($"What's New since {backDateTo:D}");</code>
<code>Console.WriteLine(outputText.ToString());</code>
<code>Console.ReadLine();</code>
<code> </code>
<code>//…</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">With the top-level statements, first the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                    assembly is loaded. If the assembly is not annotated with the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNew</code>
                    attribute, the program exits. Assuming that all is well, you use the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.ExportedTypes</code>
                    property to get a collection of all the types defined in this assembly and then loop through them.
                    For each one, you call a method, <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DisplayTypeInfo</code>,
                    which adds the relevant text, including details regarding any instances of <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>,
                    to the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">outputText</code> field.
                    Finally, you show the complete text to the console. The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DisplayTypeInfo</code>
                    method looks like this (code file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/LookupWhatsNew/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用顶层语句，首先加载 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                                程序集。如果程序集没有使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SupportsWhatsNew</code>
                                属性进行注释，程序将退出。假设一切顺利，你使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly.ExportedTypes</code>
                                属性获取此程序集中定义的所有类型的集合，然后遍历它们。对于每一个类型，你调用一个方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DisplayTypeInfo</code>
                                ，该方法将相关文本（包括有关任何 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                实例的详细信息）添加到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">outputText</code>
                                字段中。最后，你向控制台显示完整文本。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DisplayTypeInfo</code>
                                方法如下所示（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/LookupWhatsNew/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0031"><code>void DisplayTypeInfo(Type type)</code>
<code>{</code>
<code>  // make sure we only pick out classes</code>
<code>  if (!type.GetTypeInfo().IsClass)</code>
<code>  {</code>
<code>    return;</code>
<code>  }</code>
<code> </code>
<code>  AddToOutput($"{Environment.NewLine}class {type.Name}");</code>
<code> </code>
<code>  IEnumerable&lt;LastModifiedAttribute&gt; lastModifiedAttributes = </code>
<code>    type.GetTypeInfo().GetCustomAttributes()</code>
<code>    .OfType&lt;LastModifiedAttribute&gt;()</code>
<code>    .Where(a =&gt; a.DateModified&gt;= backDateTo).ToArray();</code>
<code> <span aria-label="321" epub:type="pagebreak" id="Page_321" role="doc-pagebreak"></span></code>
<code>  if (lastModifiedAttributes.Count() == 0)</code>
<code>  {</code>
<code>    AddToOutput($"\tNo changes to the class {type.Name}" +</code>
<code>      $"{Environment.NewLine}");</code>
<code>  }</code>
<code>  else</code>
<code>  {</code>
<code>    foreach (LastModifiedAttribute attribute in lastModifiedAttributes)</code>
<code>    {</code>
<code>      WriteAttributeInfo(attribute);</code>
<code>    }</code>
<code>  }</code>
<code> </code>
<code>  AddToOutput("changes to methods of this class:");</code>
<code> </code>
<code>  foreach (MethodInfo method in</code>
<code>    type.GetTypeInfo().DeclaredMembers.OfType&lt;MethodInfo&gt;())</code>
<code>  {</code>
<code>    IEnumerable&lt;LastModifiedAttribute&gt; attributesToMethods =</code>
<code>      method.GetCustomAttributes().OfType&lt;LastModifiedAttribute&gt;()</code>
<code>        .Where(a =&gt; a.DateModified&gt;= backDateTo).ToArray();</code>
<code> </code>
<code>    if (attributesToMethods.Count()&gt; 0)</code>
<code>    {</code>
<code>      AddToOutput($"{method.ReturnType} {method.Name}()");</code>
<code>      foreach (Attribute attribute in attributesToMethods)</code>
<code>      {</code>
<code>        WriteAttributeInfo(attribute);</code>
<code>      }</code>
<code>    }</code>
<code>  }</code>
<code>}</code></pre>
                <p id="c12-para-0082" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Notice that the first thing you do in this method is check
                    whether the <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                    reference you have been passed actually represents a class. Because, to keep things simple, you have
                    specified that the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModified</code>
                    attribute can be applied only to classes or member methods, you would be wasting time by doing any
                    processing if the item is not a class (it could be a class, delegate, or enum).<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">注意，在这个方法中，你首先需要检查传递给你的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                引用是否确实代表一个类。因为为了保持简单，你指定 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModified</code>
                                属性只能应用于类或成员方法，如果该项不是类（它可能是类、委托或枚举），那么进行任何处理都会浪费时间。</font>
                        </font>
                    </font>
                </p>
                <p id="c12-para-0083" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Next, you use the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">type.GetTypeInfo().GetCustomAttributes()</code>
                    method to determine whether this class has any <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                    instances attached to it. If so, you add their details to the output text, using a helper method,
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WriteAttributeInfo</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">接下来，你使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">type.GetTypeInfo().GetCustomAttributes()</code>
                                方法来确定这个类是否有关联的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                实例。如果是，你将它们的详细信息添加到输出文本中，使用辅助方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WriteAttributeInfo</code>
                                。</font>
                        </font>
                    </font>
                </p>
                <p id="c12-para-0084" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Finally, you use the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DeclaredMembers</code>
                    property of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeInfo</code> type to
                    iterate through all the member methods of this data type and then do the same with each method as
                    you did for the class—check whether it has any <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                    instances attached to it; if so, you display them using <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WriteAttributeInfo</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">最后，你使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TypeInfo</code>
                                类型的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DeclaredMembers</code>
                                属性来遍历该数据类型的所有成员方法，然后对每个方法都像对类做的那样——检查它是否有关联的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                实例；如果是，你使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WriteAttributeInfo</code>
                                显示它们。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The next bit of code shows the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WriteAttributeInfo</code>
                    method, which is responsible for determining what text to display for a given <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                    instance. Note that this method is passed an <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                    reference, so it needs to cast this to a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                    reference first. After it has done that, it uses the properties that you originally defined for this
                    attribute to retrieve its parameters. It confirms that the date of the attribute is sufficiently
                    recent before actually adding it to the text for display (code file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/LookupWhatsNew/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">接下来的代码展示了 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">WriteAttributeInfo</code>
                                方法，该方法负责确定给定 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                实例应显示的文本。请注意，此方法接收一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Attribute</code>
                                引用，因此它需要首先将其转换为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastModifiedAttribute</code>
                                引用。完成转换后，它使用您最初为此属性定义的属性来检索其参数。在将其添加到显示文本之前，它会确认该属性的日期足够新（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ReflectionSamples/LookupWhatsNew/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0032"><code>void WriteAttributeInfo(Attribute attribute)</code>
<code>{</code>
<code>  if (attribute is LastModifiedAttribute lastModifiedAttribute)</code>
<code>  {<span aria-label="322" epub:type="pagebreak" id="Page_322" role="doc-pagebreak"></span></code>
<code>    AddToOutput($"\tmodified: {lastModifiedAttribute.DateModified:D}: " +</code>
<code>      $"{lastModifiedAttribute.Changes}");</code>
<code> </code>
<code>    if (lastModifiedAttribute.Issues != null)</code>
<code>    {</code>
<code>      AddToOutput($"\tOutstanding issues: {lastModifiedAttribute.Issues}");</code>
<code>    }</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Finally, here is the helper <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AddToOutput</code>
                    method:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">最后，这是辅助 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AddToOutput</code>
                                方法：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0033"><code>static void AddToOutput(string text) =&gt;</code>
<code>  outputText.Append($"{Environment.NewLine}{text}");</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Running this code produces the results shown here:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行此代码将产生此处显示的结果：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0034"><code>What's New since Friday, February 1, 2019</code>
<code> </code>
<code>Assembly: VectorClass, Version=5.2.0.0, Culture=neutral, PublicKeyToken=null</code>
<code>Defined Types:</code>
<code> </code>
<code>class Vector</code>
<code>        modified: Sunday, February 28, 2021: changed the LastModified dates</code>
<code>        modified: Saturday, December 19, 2020: updated for C# 9 and .NET 5</code>
<code>changes to methods of this class:</code>
<code>System.Boolean Equals()</code>
<code>        modified: Sunday, February 28, 2021: changed for nullability</code>
<code>System.String ToString()</code>
<code>        modified: Saturday, December 19, 2020: changed to use switch expression</code>
<code>        modified: Saturday, December 19, 2020: changed with nullability annotations</code></pre>
                <p id="c12-para-0088" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Note that when you list the types defined in the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                    assembly, you actually pick up two classes: <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Vector</code> and the
                    embedded <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorEnumerator</code>
                    class. In addition, note that because the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">backDateTo</code> date of
                    2019/2/1 is hard-coded in this example, you actually pick up the attributes that are dated
                    2020/12/19 and 2021/2/28 but not those dated earlier.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">请注意，当您列出 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorClass</code>
                                程序集中定义的类型时，实际上会获取两个类： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Vector</code>
                                和嵌入的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">VectorEnumerator</code>
                                类。此外，请注意，由于示例中 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">backDateTo</code>
                                日期 2019/2/1 是硬编码的，因此实际上会获取 2020/12/19 和 2021/2/28 日期的属性，但不会获取更早日期的属性。</font>
                        </font>
                    </font>
                </p>
            </section>
        </section>
        <section aria-labelledby="head-2-108" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <span id="c12-sec-0022" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <h2 id="head-2-108" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">USING DYNAMIC LANGUAGE EXTENSIONS FOR REFLECTION<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用动态语言扩展进行反射</font>
                    </font>
                </font>
            </h2>
            <p id="c12-para-0089" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">Until now, you've used reflection for reading metadata. You can
                also use reflection to create instances dynamically from types that aren't known at compile time. The
                next sample shows creating an instance of the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code> class
                without the compiler knowing of this type at compile time. The assembly <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CalculatorLib</code> is
                loaded dynamically without adding a reference. During runtime, the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code> object is
                instantiated, and a method is called. After you know how to use the Reflection API, you'll do the same
                using the C# <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                keyword.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            到目前为止，你一直使用反射来读取元数据。你也可以使用反射来动态创建在编译时未知类型的实例。下一个示例展示了在编译时编译器不知道 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                            类的情况下创建该类的实例。动态加载程序集 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CalculatorLib</code>
                            ，而无需添加引用。在运行时，实例化 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                            对象，并调用一个方法。当你学会如何使用 Reflection API 后，你将使用 C#的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                            关键字完成同样的操作。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0023"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-240" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Creating the Calculator Library <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">创建计算器库</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The library that is loaded is a simple .NET library
                    containing the type <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code> with
                    implementations of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code> and <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Subtract</code> methods.
                    Because the methods are really simple, they are implemented using the expression syntax (code file
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamlpes/CalculatorLib/Calculator.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">加载的库是一个简单的.NET 库，其中包含类型 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                                以及 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Subtract</code>
                                方法的实现。由于方法非常简单，它们使用表达式语法实现（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamlpes/CalculatorLib/Calculator.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0035"><code>public class Calculator</code>
<code>{</code>
<code>  public double Add(double x, double y) =&gt; x + y;</code>
<code>  public double Subtract(double x, double y) =&gt; x - y;</code>
<code>}</code></pre>
                <p id="c12-para-0091" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1"><span aria-label="323" epub:type="pagebreak" id="Page_323"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>After you compile
                    the library, copy the generated DLL to the folder <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">c:/addins</code>. The
                    client application doesn't add a fixed dependency to this library; it loads the file dynamically.
                    Using the .NET CLI you can specify the output path with the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">--output</code> option:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">编译完库后，将生成的 DLL 复制到 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">c:/addins</code>
                                文件夹。客户端应用程序不对此库添加固定依赖；它动态加载该文件。使用.NET CLI，你可以通过 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">--output</code>
                                选项指定输出路径：</font>
                        </font>
                    </font>
                </p>
                <p id="c12-para-0092" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">&gt; dotnet build --output c:/addins</code>.
                </p>
            </section>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0024"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-241" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Instantiating a Type Dynamically <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">动态实例化类型</font>
                        </font>
                    </font>
                </h3>
                <p id="c12-para-0093" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">For using reflection to create the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                    instance dynamically, create a console project with the name <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ClientApp</code>.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要使用反射动态创建 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                                实例，创建一个名为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ClientApp</code>
                                的控制台项目。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The constant <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CalculatorTypeName</code>
                    defines the name of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code> type,
                    including the namespace. The start of the application requires a command-line argument with the path
                    to the library and then invokes the methods <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">UsingReflection</code>
                    and <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">UsingReflectionWithDynamic</code>,
                    two variants doing reflection (code file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/ClientApp/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">常量 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CalculatorTypeName</code>
                                定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                                类型的名称，包括命名空间。应用程序启动时需要一个命令行参数，指定库的路径，然后调用方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">UsingReflection</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">UsingReflectionWithDynamic</code>
                                ，这两个变体执行反射（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/ClientApp/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0036"><code>  <b>const string CalculatorTypeName = "CalculatorLib.Calculator";</b></code>
<code> </code>
<code>  if (args.Length != 1)</code>
<code>  {</code>
<code>    ShowUsage();</code>
<code>    return;</code>
<code>  }</code>
<code>  <b>UsingReflection(args[0]);</b></code>
<code>  <b>UsingReflectionWithDynamic(args[0]);</b></code>
<code> </code>
<code>  void ShowUsage()</code>
<code>  {</code>
<code>    Console.WriteLine($"Usage: {nameof(ClientApp)} path");</code>
<code>    Console.WriteLine();</code>
<code>    Console.WriteLine("Copy CalculatorLib.dll to an addin directory");</code>
<code>    Console.WriteLine("and pass the absolute path of this directory " +</code>
<code>      "when starting the application to load the library");</code>
<code>  }</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Before using reflection to invoke a method, you need to
                    instantiate the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code> type.
                    The method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCalculator</code>
                    loads the assembly dynamically using the method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LoadFile</code> of the
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code> class
                    and creates an instance of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code> type
                    with the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CreateInstance</code>
                    method:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在使用反射调用方法之前，你需要实例化 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                                类型。方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCalculator</code>
                                使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code>
                                类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LoadFile</code>
                                方法动态加载程序集，并通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CreateInstance</code>
                                方法创建 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                                类型的实例：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0037"><code>object? GetCalculator(string addinPath)</code>
<code>{</code>
<code>  <b>Assembly assembly = Assembly.LoadFile(addinPath);</b></code>
<code>  <b>return assembly.CreateInstance(CalculatorTypeName);</b></code>
<code>}</code></pre>
                <p id="c12-para-0096" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The sample code for the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ClientApp</code> makes
                    use of these namespaces: <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection</code>
                    and <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CSharp.RuntimeBinder</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ClientApp</code>
                                的示例代码使用了这些命名空间： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Reflection</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CSharp.RuntimeBinder</code>
                                。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0025"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-242" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Invoking a Member with the Reflection API <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用反射 API 调用成员</font>
                        </font>
                    </font>
                </h3>
                <p id="c12-para-0097" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The Reflection API is used to invoke the method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code> of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                    instance. First, the calculator instance is retrieved with the helper method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCalculator</code>. If
                    you would like to add a reference to the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CalculatorLib</code>, you
                    could use <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">new Calculator</code> to
                    create an instance. But here it's not that easy.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">反射 API 用于调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Calculator</code>
                                实例的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code>
                                方法。首先，使用辅助方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCalculator</code>
                                获取计算器实例。如果你想要添加对 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CalculatorLib</code>
                                的引用，可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">new Calculator</code>
                                创建实例。但这里并不那么简单。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Invoking the method using reflection has the advantage that
                    the type does not need to be available at compile time. You could add it at a later time just by
                    copying the library in the specified directory. To invoke the member using reflection, the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> object of the
                    instance is retrieved using <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                    —a method of the base class <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Object</code>. With the
                    help of the extension method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code>, a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code> object
                    for the method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code> is accessed.
                    <span aria-label="324" epub:type="pagebreak" id="Page_324" role="doc-pagebreak"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code> defines
                    the <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Invoke</code>
                    method to call the method using any number of parameters. The first parameter of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Invoke</code> method
                    needs the instance of the type where the member is invoked. The second parameter is of type <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">object[]</code> to pass
                    all the parameters needed by the invocation. You're passing the values of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">x</code> and <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">y</code> variables here
                    (code file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/ClientApp/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                使用反射调用方法的优势在于类型不需要在编译时可用。你可以在稍后通过将库复制到指定目录中来添加它。要使用反射调用成员，使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetType</code>
                                —这是基类 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Object</code>
                                的方法来检索实例的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                对象。借助扩展方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetMethod</code>
                                ，可以访问方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code> 的
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code>
                                对象。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">MethodInfo</code>
                                定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Invoke</code>
                                方法，该方法使用任意数量的参数来调用方法。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Invoke</code>
                                方法的第一个参数需要类型实例，其中调用了成员。第二个参数是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">object[]</code>
                                类型，用于传递调用所需的全部参数。这里传递了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">x</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">y</code>
                                变量的值（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/ClientApp/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0038"><code>void UsingReflection(string addinPath)</code>
<code>{</code>
<code>  double x = 3;</code>
<code>  double y = 4;</code>
<code>  object calc = GetCalculator(addinPath) </code>
<code>    ?? throw new InvalidOperationException("GetCalculator returned null");</code>
<code> </code>
<code>  <b>object? result = calc.GetType().GetMethod("Add")</b></code>
<code>    <b>?.Invoke(calc, new object[] { x, y })</b> </code>
<code>    <b>?? throw new InvalidOperationException("Add method not found");</b></code>
<code>  Console.WriteLine($"the result of {x} and {y} is {result}");</code>
<code>}</code></pre>
                <p id="c12-para-0099" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">When you run the program, the calculator is invoked and
                    writes the result to the console. Using the reflection APIs to get the type, get a method, call the
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Invoke</code> method,
                    and pass an object array to pass arguments requires some work. Let's take a look at how you can do
                    this using the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> keyword.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行程序时，计算器被调用并将结果写入控制台。使用反射 API
                                获取类型、获取方法、调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Invoke</code>
                                方法以及传递对象数组来传递参数需要一些工作。让我们看看如何使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                                关键字来完成这些操作。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0026"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-243" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Invoking a Member with the Dynamic Type <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用动态类型调用成员</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">When you use reflection with the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> keyword,
                    the object that is returned from the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCalculator</code>
                    method is assigned to a variable of a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> type. The
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCalculator</code>
                    method doesn't change; it still returns an object. The result is returned to a variable that is of
                    type <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>.
                    With this, the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code> method is
                    invoked, and two double values are passed to it (code file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/ClientApp/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你使用带 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                                关键字的反射时，从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCalculator</code>
                                方法返回的对象被赋值给一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                                类型的变量。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetCalculator</code>
                                方法不会改变，它仍然返回一个对象。结果被返回到一个类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                                的变量中。通过这种方式， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code>
                                方法被调用，并传递给它两个双精度值（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/ClientApp/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0039"><code>void UsingReflectionWithDynamic(string addinPath)</code>
<code>{</code>
<code>  double x = 3;</code>
<code>  double y = 4;</code>
<code>  dynamic calc = GetCalculator(addinPath) </code>
<code>    ?? throw new InvalidOperationException("GetCalculator returned null");</code>
<code>  double result = calc.Add(x, y);</code>
<code>  Console.WriteLine($"the result of {x} and {y} is {result}");</code>
<code> </code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The syntax is really simple; it looks like calling a method
                    with strongly typed access. However, there's no IntelliSense, so it's easy to make typos. There's
                    also no compile-time check. The compiler runs fine when you invoke the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Multiply</code> method.
                    Just remember that you only defined <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code> and <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Subtract</code> methods
                    with the calculator.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                语法非常简单；它看起来像是在调用一个强类型访问的方法。然而，没有智能感知，因此容易输入错误。也没有编译时检查。当你调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Multiply</code>
                                方法时，编译器运行正常。只需记住你只定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Add</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Subtract</code>
                                方法在计算器中。</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0040"><code>try</code>
<code>{</code>
<code>  result = calc.Multiply(x, y);</code>
<code>}</code>
<code>catch (RuntimeBinderException ex)</code>
<code>{</code>
<code>  Console.WriteLine(ex);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1"><span aria-label="325" epub:type="pagebreak" id="Page_325"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>When you run the
                    application and invoke the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Multiply</code> method,
                    you get a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">RuntimeBinderException</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你运行应用程序并调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Multiply</code>
                                方法时，你会得到一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">RuntimeBinderException</code>
                                ：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0041"><code>Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 'CalculatorLib.Calculator' </code>
<code>   does not contain a definition for 'Multiply'</code>
<code>   at CallSite.Target(Closure , CallSite , Object , Double , Double )</code>
<code>   at System.Dynamic.UpdateDelegates.UpdateAndExecute3[T0,T1,T2,TRet](CallSite </code>
<code>   site, T0 arg0, T1 arg1, T2 arg2)</code>
<code>   at ClientApp.Program.UsingReflectionWithDynamic(String addinPath) in… </code></pre>
                <p id="c12-para-0103" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Using the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> type also
                    has more overhead compared to accessing objects in a strongly typed manner. Therefore, the keyword
                    is useful only in some specific scenarios such as reflection. You don't have a compiler check
                    invoking the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">InvokeMember</code>
                    method of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                    ; instead, a string is passed for the name of the member. Using the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> type,
                    which has a simpler syntax, has a big advantage compared to using the Reflection API in such
                    scenarios.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                                类型与以强类型方式访问对象相比，也有更多的开销。因此，该关键字仅在特定场景（如反射）中有用。你没有编译器检查调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">InvokeMember</code>
                                方法的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code>
                                ；相反，传递一个字符串作为成员的名称。使用具有更简单语法的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                                类型，与在这种场景中使用反射 API 相比，具有很大的优势。</font>
                        </font>
                    </font>
                </p>
                <p id="c12-para-0104" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> type can
                    also be used with COM integration and scripting environments as shown after discussing the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> keyword
                    more in detail.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                                类型也可以与 COM 集成和脚本环境一起使用，正如在更详细地讨论 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                                关键字之后所示。</font>
                        </font>
                    </font>
                </p>
            </section>
        </section>
        <section aria-labelledby="head-2-109" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <span id="c12-sec-0027" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <h2 id="head-2-109" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">EXPANDOOBJECT</h2>
            <p id="c12-para-0105" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">What if you want to create your own dynamic object? You can
                implement the interface <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IDynamicMetaObjectProvider</code>.
                A class that's already implementing this interface is the base class <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicObject</code>. This
                class defines virtual methods that you can override. For example, <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TrySetMember</code> is a
                method you can override to set a property. <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TryInvokeMember</code> is a
                method you can override to invoke a method. An easier option is to use the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code> class.
                This class implements the interface <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IDynamicMetaObjectProvider</code>
                and is ready to use without the need to derive from <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>. Indeed,
                you cannot derive from <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code> because
                this class is <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">sealed</code>.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">如果你想要创建自己的动态对象呢？你可以实现接口 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IDynamicMetaObjectProvider</code>
                            。一个已经实现这个接口的类是基类 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicObject</code>
                            。这个类定义了你可以重写的虚拟方法。例如， <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TrySetMember</code>
                            是一个你可以重写的方法，用来设置属性。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">TryInvokeMember</code>
                            是一个你可以重写的方法，用来调用方法。一个更简单的选项是使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            类。这个类实现了接口 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IDynamicMetaObjectProvider</code>
                            ，并且无需从 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            派生即可使用。确实，你不能从 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            派生，因为这个类是 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">sealed</code> 。
                        </font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0106" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">You can create a variable of type <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> and assign an
                <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code> to it.
                All the properties you set with this dynamic variable and all the methods you invoke get added to a
                dictionary within the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code> and are
                available as soon as you invoke them.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">你可以创建一个 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code>
                            类型的变量，并将其赋值为 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            。所有你用这个动态变量设置的属性以及所有你调用的方法都会被添加到 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            内的字典中，并且一旦调用它们就会立即可用。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">With the next code snippet, an <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code> is
                instantiated and assigned to a variable of type dynamic. Because it's a dynamic, the compiler doesn't
                verify the members you invoke, such as setting properties (<code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FirstName</code> and <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastName</code>) and
                assigning a delegate to the name <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetNextDay</code>, which
                turns into a method with a <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DateTime</code> parameter and
                a string return. It's also possible to create a deeper hierarchy. The <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Friends</code> property is
                created, and a list of <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Person</code> objects is
                assigned to it (code file <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/DynamicSample/Program.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在下一个代码片段中，一个 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            被实例化并分配给一个动态类型的变量。由于它是动态的，编译器不会验证你调用的成员，例如设置属性（ <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">FirstName</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">LastName</code>
                            ）以及将委托分配给名称 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetNextDay</code>
                            ，它变成了一个带有一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DateTime</code>
                            参数和字符串返回值的函数。还可以创建更深层次的结构。创建了一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Friends</code>
                            属性，并将其分配了一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Person</code>
                            对象的列表（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/DynamicSample/Program.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c12-code-0042"><code>void UseExpando()</code>
<code>{</code>
<code>  dynamic expObj = new ExpandoObject();</code>
<code>  expObj.FirstName = "Daffy";</code>
<code>  expObj.LastName = "Duck";</code>
<code>  Console.WriteLine($"{expObj.FirstName} {expObj.LastName}");</code>
<code> </code>
<code>  expObj.GetNextDay = new Func&lt;DateTime, string&gt;(day =&gt; day.AddDays(1).ToString("d"));</code>
<code> </code>
<code>  Console.WriteLine($"next day: {expObj.GetNextDay(new DateTime(2021, 1, 3))}");</code>
<code> </code>
<code>  expObj.Friends = new List&lt;Person&gt;();</code>
<code>  expObj.Friends.Add(new Person() { FirstName = "Bob", LastName = "Jones" });</code>
<code>  expObj.Friends.Add(new Person() { FirstName = "Robert", LastName = "Jones" });</code>
<code>  expObj.Friends.Add(new Person() { FirstName = "Bobby", LastName = "Jones" });</code>
<code> <span aria-label="326" epub:type="pagebreak" id="Page_326" role="doc-pagebreak"></span></code>
<code>  foreach (dynamic friend in expObj.Friends)</code>
<code>  {</code>
<code>    Console.WriteLine($"{friend.FirstName} {friend.LastName}");</code>
<code>  }</code>
<code>}</code></pre>
            <p id="c12-para-0108" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">The following is another example of using <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> and <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>. Assume
                that the requirement is to develop a general-purpose comma-separated values (CSV) file parsing tool. You
                won't know from one execution to another what data will be in the file, only that the values will be
                comma-separated and the first line will contain the field names.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">以下是用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dynamic</code> 和
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            的另一个示例。假设需求是开发一个通用的逗号分隔值（CSV）文件解析工具。你无法从一次执行到下一次知道文件中会有什么数据，只知道值是逗号分隔的，并且第一行包含字段名。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">First, open the file and read in the stream. You can use a simple
                helper method to do this (code file <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/DynamicFileReader/DynamicFileHelper.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">首先，打开文件并读取流。你可以使用一个简单的辅助方法来完成这个操作（代码文件
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/DynamicFileReader/DynamicFileHelper.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c12-code-0043"><code>public static class DynamicFileHelper</code>
<code>{</code>
<code>  //…</code>
<code>  private static StreamReader? OpenFile(string fileName)</code>
<code>  {</code>
<code>    if (File.Exists(fileName))</code>
<code>    {</code>
<code>      return new StreamReader(fileName);</code>
<code>    }</code>
<code>    return null;</code>
<code>  }</code>
<code>}</code></pre>
            <p id="c12-para-0110" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">This just opens the file and creates a new <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StreamReader</code> to read
                the file contents.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">这只是打开文件并创建一个新的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StreamReader</code>
                            来读取文件内容。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">Now you want to get the field names, which you can do easily by
                reading in the first line from the file and using the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Split</code> function to
                create a string array of field names:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">现在你想获取字段名，这可以通过读取文件的第一行并使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Split</code>
                            函数来轻松创建一个包含字段名的字符串数组：</font>
                    </font>
                </font>
            </p>
            <pre
                id="c12-code-0044"><code><b>string[] headerLine = reader.ReadLine()?.Split(',').Select(s =&gt; Trim()).ToArray();</b></code></pre>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">Next is the interesting part. You read in the next line from the
                file, create a string array just like you did with the field names, and start creating your dynamic
                objects. Here's what the code looks like (code file <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/DynamicFileReader/DynamicFileHelper.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            接下来是有趣的部分。你读取文件的下一条行，像处理字段名那样创建一个字符串数组，并开始创建你的动态对象。以下是代码的样子（代码文件 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/DynamicFileReader/DynamicFileHelper.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c12-code-0045"><code>public static class DynamicFileHelper</code>
<code>{</code>
<code>  public static IEnumerable&lt;dynamic&gt; ParseFile(string fileName)</code>
<code>  {</code>
<code>    List&lt;dynamic&gt; retList = new();</code>
<code>    using StreamReader? reader = OpenFile(fileName);</code>
<code>    if (reader != null)</code>
<code>    {</code>
<code>      string[] headerLine = reader.ReadLine()?.Split(',').Select(</code>
<code>        s =&gt; s.Trim()).ToArray() </code>
<code>        ?? throw new InvalidOperationException("reader.ReadLine returned null");</code>
<code>      while (reader.Peek()&gt; 0)</code>
<code>      {</code>
<code>        string[] dataLine = reader.ReadLine()?.Split(',') </code>
<code>          ?? throw new InvalidOperationException("reader.Readline returned null");</code>
<code>        dynamic dynamicEntity = new ExpandoObject();</code>
<code>        for (int i = 0; i &lt; headerLine.Length; i++)</code>
<code>        {</code>
<code>          ((IDictionary&lt;string, object&gt;)dynamicEntity).Add(headerLine[i], dataLine[i]);</code>
<code>        }<span aria-label="327" epub:type="pagebreak" id="Page_327" role="doc-pagebreak"></span></code>
<code>        retList.Add(dynamicEntity);</code>
<code>      }</code>
<code>    }</code>
<code>    return retList;</code>
<code>  }</code>
<code>  //…</code>
<code>}</code></pre>
            <p id="c12-para-0113" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">After you have the string array of field names and data elements,
                you create a new <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code> and add
                the data to it. Notice that you cast the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code> to a
                <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Dictionary</code> object.
                You use the field name as the key and the data as the value. Then you can add the new object to the
                <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">retList</code> object you
                created and return it to the code that called the method.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在获取了包含字段名的字符串数组和数据元素后，你创建一个新的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            并将其添加数据。注意你将 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ExpandoObject</code>
                            转换为 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Dictionary</code>
                            对象。你使用字段名作为键，数据作为值。然后你可以将新的对象添加到你创建的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">retList</code>
                            对象中并返回给调用该方法的代码。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0114" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">This is nice because you have a section of code that can handle
                any data you give it. The only requirements in this case are ensuring that the field names are the first
                line and that everything is comma-separated. This concept could be expanded to other file types or even
                to a <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DataReader</code>.
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            这很好，因为你有一个可以处理任何数据的代码段。在这种情况下，唯一的要求是确保字段名是第一行，并且所有内容都是用逗号分隔的。这个概念可以扩展到其他文件类型，甚至可以扩展到 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DataReader</code>
                            。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">The file <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">EmployeeList.tx</code>
                t available in the download contains the following CSV data:<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">文件 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">EmployeeList.tx</code>
                            在下载中包含以下 CSV 数据：</font>
                    </font>
                </font>
            </p>
            <pre id="c12-code-0046"><code>FirstName, LastName, City, State</code>
<code>Mario Andretti, Nazareth, Pennsylvania</code>
<code>Carlos, Reutemann, Santa Fe, Argentine</code>
<code>Sebastian, Vettel, Thurgovia, Switzerland</code></pre>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">This file is read in the following code in <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Program.cs</code> (code file
                <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/DynamicFileReader/Program.cs</code>)
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">这个文件在以下代码中的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Program.cs</code>
                            (代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">DynamicSamples/DynamicFileReader/Program.cs</code>
                            ) 被读取</font>
                    </font>
                </font>
            </p>
            <pre id="c12-code-0047"><code>var employeeList = DynamicFileHelper.ParseFile("EmployeeList.txt");</code>
<code>foreach (var employee in employeeList)</code>
<code>{</code>
<code>  Console.WriteLine($"{employee.FirstName} {employee.LastName} lives in " +</code>
<code>    $"{employee.City}, {employee.State}.");</code>
<code>}</code>
<code>Console.ReadLine();</code></pre>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">and results in this output to the console:<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">并且结果输出到控制台：</font>
                    </font>
                </font>
            </p>
            <pre id="c12-code-0048"><code>Mario Andretti lives in Nazareth, Pennsylvania.</code>
<code>Carlos Reutemann lives in Santa Fe, Argentine.</code>
<code>Sebastian Vettel lives in Thurgovia, Switzerland.</code></pre>
        </section>
        <section aria-labelledby="head-2-110" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <span id="c12-sec-0028" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <h2 id="head-2-110" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">SOURCE GENERATORS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">源生成器</font>
                    </font>
                </font>
            </h2>
            <p id="c12-para-0118" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">A great extension of C# 9 is the new component <i
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">source generator</i>. This is
                not a C# syntax enhancement but an enhancement of the compilation process. During the compilation, C#
                source code can be generated and added to the project.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">C# 9 的一个伟大扩展是新组件源生成器。这不是 C#
                            语法增强，而是编译过程的增强。在编译期间，C# 源代码可以被生成并添加到项目中。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0119" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">In this chapter, you've read about adding metadata to source code
                using attributes. Some of the attributes are known by the compiler, others are used by developer tools
                such as Visual Studio, and others are read during runtime—for example, from libraries. In this chapter,
                you've read about using reflection to read information dynamically.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            在本章中，你学习了如何使用属性向源代码添加元数据。有些属性由编译器识别，有些属性由开发者工具（如 Visual
                            Studio）使用，还有些属性在运行时读取——例如从库中读取。在本章中，你学习了如何使用反射动态读取信息。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">Using reflection has some disadvantages, though. It takes extra
                overhead during runtime and also has issues with trimming code during the compilation process. As
                reflection is done during runtime, the compiler might trim methods and classes that are required with
                dynamic invocations. When using trimming of assemblies, you might need to configure methods and classes
                that should not be trimmed because of reflection.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            尽管使用反射有一些缺点。它在运行时会增加额外的开销，并且在编译过程中对代码进行修剪时也存在问题。由于反射是在运行时执行的，编译器可能会修剪那些在动态调用中所需的类和方法。在使用程序集修剪时，你可能需要配置那些由于反射而不应被修剪的方法和类。
                        </font>
                    </font>
                </font><span aria-label="328" epub:type="pagebreak" id="Page_328" role="doc-pagebreak"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span></p>
            <aside data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                <div class="top hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <p id="c12-para-0121" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">NOTE</b> <i
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><a href="c01.xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Chapter 1</a>,
                            “.NET Applications and Tools,” covered configuring trimming of </i><i
                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">applications.</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意 第 1 章“.NET
                                    应用程序和工具”介绍了如何配置应用程序的修剪。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <hr />
                    </div>
                </section>
            </aside>
            <p id="c12-para-0122" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">Instead of using reflection during runtime, you can use a source
                generator, which can read attributes during compile time and, because of the attributes, generate code
                that's also compiled during build time. The need for reflection can be reduced.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            你可以选择在运行时使用源生成器，而不是使用反射。源生成器可以在编译时读取属性，并且由于这些属性，它还可以在构建时生成代码。这样，对反射的需求就可以减少。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0123" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">Attributes might not be the only source for source generators. A
                source generator can also use other sources, such as JSON or other files, to generate code.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">属性可能不是源生成器的唯一来源。源生成器还可以使用其他来源，例如 JSON
                            或其他文件，来生成代码。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0030"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-244" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Hello, World Source Generator <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Hello, World 源生成器</font>
                        </font>
                    </font>
                </h3>
                <p id="c12-para-0124" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Let's start with the foundation of source generators—a simple
                    generator that creates a method with a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">HelloWorld</code> class
                    and a <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Hello</code>
                    method. This method will be invoked from a .NET console application.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">让我们从源生成器的基础开始——一个简单的生成器，它创建一个带有
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">HelloWorld</code>
                                类和一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Hello</code>
                                方法的类。这个方法将从 .NET 控制台应用程序中调用。</font>
                        </font>
                    </font>
                </p>
                <p id="c12-para-0125" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">To implement a source generator, you need to create a .NET
                    library. For the source generator to work with Visual Studio 2019, it needs to be a .NET Standard
                    2.0 library. The NuGet package <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CodeAnalysis</code>
                    needs to be added. To add support to use the C# compiler in the later sample, the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CodeAnalysis.CSharp.Workspaces</code>
                    package needs to be added as well. The namespaces <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CodeAnalysis</code>,
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CodeAnalysis.Text</code>,
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Collections.Generic</code>,
                    and <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Text</code>
                    are used.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要实现一个源生成器，你需要创建一个 .NET 库。为了让源生成器与
                                Visual Studio 2019 一起工作，它需要是一个 .NET Standard 2.0 库。需要添加 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CodeAnalysis</code>
                                NuGet 包。为了在后续示例中支持使用 C# 编译器，还需要添加 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CodeAnalysis.CSharp.Workspaces</code>
                                包。使用命名空间 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CodeAnalysis</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Microsoft.CodeAnalysis.Text</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Collections.Generic</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">System.Text</code>
                                。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">A source generator class needs to implement the interface
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ISourceGenerator</code>
                    and have the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Generator</code>
                    attribute applied (source file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/CodeGenerationSample/HelloWorldGenerator.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">一个源生成器类需要实现接口 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ISourceGenerator</code>
                                并应用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Generator</code>
                                属性（源文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/CodeGenerationSample/HelloWorldGenerator.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0049"><code><b>[Generator]</b></code>
<code>public class HelloWorldGenerator : <b>ISourceGenerator</b></code>
<code>{</code>
<code>  //…</code>
<code>}</code>
<code>   </code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The interface <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ISourceGenerator</code>
                    defines the methods <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Initialize</code> and
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Execute</code>. <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Initialize</code> is
                    invoked before the code generation starts. The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Execute</code> method
                    then does the main job of the generator. With the first sample, an implementation of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Initialize</code> method
                    is not required:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">接口 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ISourceGenerator</code>
                                定义了方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Initialize</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Execute</code>
                                。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Initialize</code>
                                在代码生成开始前被调用。然后 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Execute</code>
                                方法执行生成器的主要工作。在第一个示例中，不需要实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Initialize</code>
                                方法：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0050"><code>public void Initialize(GeneratorInitializationContext context)</code>
<code>{</code>
<code>  // No initialization required</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">With the implementation of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Execute</code> method, a
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StringBuilder</code> is
                    initialized with a string containing the start of the source code: the namespace <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CodeGenerationSample</code>,
                    the class <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">HelloWorld</code>, and
                    the <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Hello</code>
                    methods are generated. The method, class, and namespace are not closed yet because in the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Hello</code> method, code
                    will be added that's using the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GeneratorExecutionContext</code>
                    parameter:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过实现 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Execute</code>
                                方法，一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">StringBuilder</code>
                                被初始化，其中包含源代码的开始部分：命名空间 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CodeGenerationSample</code>
                                、类 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">HelloWorld</code>
                                以及生成的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Hello</code>
                                方法。方法、类和命名空间尚未关闭，因为在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Hello</code>
                                方法中，将添加使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GeneratorExecutionContext</code>
                                参数的代码：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0051"><code>public void Execute(GeneratorExecutionContext context)</code>
<code>{</code>
<code>  <b>StringBuilder sourceBuilder</b> = new(@"</code>
<code>using System;</code>
<code>namespace CodeGenerationSample</code>
<code>{</code>
<code>  public static class HelloWorld<span aria-label="329" epub:type="pagebreak" id="Page_329" role="doc-pagebreak"></span></code>
<code>  {</code>
<code>    public static void Hello() </code>
<code>    {</code>
<code>      Console.WriteLine(""Hello from generated code!"");</code>
<code>      Console.WriteLine(""The following source files existed in the compilation:"");</code>
<code>");</code>
<code>  //…       </code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GeneratorExecutionContext</code>
                    is used to access syntax trees from the compilation. Here, the code where the source generator is
                    used can be accessed to modify or extend it. With the first source code generator, just the file
                    path of all the source files that are part of the compilation is written to the console:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GeneratorExecutionContext</code>
                                用于访问编译的语法树。在这里，可以访问使用源生成器的代码来修改或扩展它。在第一个源代码生成器中，仅将属于编译的所有源文件的所有文件路径写入控制台：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0052"><code>public void Execute(<b>GeneratorExecutionContext context</b>)</code>
<code>{</code>
<code>  //…</code>
<code>  IEnumerable&lt;SyntaxTree&gt; syntaxTrees = context.Compilation.SyntaxTrees;</code>
<code> </code>
<code>  foreach (SyntaxTree tree in syntaxTrees)</code>
<code>  {</code>
<code>    sourceBuilder.AppendLine($@"Console.WriteLine(@""source file: {tree.FilePath}"");");                </code>
<code>  }</code>
<code> </code>
<code>  sourceBuilder.Append(@"</code>
<code>    }</code>
<code>  }</code>
<code>}");</code>
<code> </code>
<code>  context.AddSource("helloWorld", SourceText.From(sourceBuilder.ToString(), </code>
<code>    Encoding.UTF8));</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">For using a source generator in a project, you need to add
                    the <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Analyzer</code>
                    element and reference the library (project configuration file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/SampleApp/SampleApp.csproj</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在一个项目中使用源生成器，你需要添加 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Analyzer</code>
                                元素并引用库（项目配置文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/SampleApp/SampleApp.csproj</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0053"><code>&lt;Project Sdk="Microsoft.NET.Sdk"&gt;</code>
<code> </code>
<code>  &lt;PropertyGroup&gt;</code>
<code>    &lt;OutputType&gt;Exe&lt;/OutputType&gt;</code>
<code>    &lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;</code>
<code>    &lt;Nullable&gt;enable&lt;/Nullable&gt;</code>
<code>  &lt;/PropertyGroup&gt;</code>
<code> </code>
<code>  <b>&lt;ItemGroup&gt;</b></code>
<code>    <b>&lt;Analyzer Include="</b>c:\sourcegenerators\CodeGenerationSample.dll<b>" /&gt;</b></code>
<code>  <b>&lt;/ItemGroup&gt;</b></code>
<code> </code>
<code>&lt;/Project&gt;</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">With this in place, you can add code to invoke the static
                    <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Hello</code> method of
                    the <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">HelloWorld</code>
                    class (code file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SampleApp/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这样设置后，你可以在代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SampleApp/Program.cs</code>
                                中添加代码来调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">HelloWorld</code>
                                类的静态 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Hello</code>
                                方法：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0054"><code>using System;</code>
<code>using SampleApp;</code>
<code> </code>
<code>CodeGenerationSample.HelloWorld.Hello();</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1"><span aria-label="330" epub:type="pagebreak" id="Page_330"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>Running the
                    application shows the hello message as well as the source code files that are available with the
                    build within the source code generator. The directory names will differ on your system:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行应用程序会显示 hello
                                消息，以及源代码生成器中与构建一起提供的源代码文件。目录名称在你的系统上会有所不同：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0055"><code>Hello from generated code!</code>
<code>The following source files existed in the compilation:</code>
<code>source file: C:\SampleApp\HelloControl.cs</code>
<code>source file: C:\SampleApp\Program.cs</code>
<code>source file: C:\SampleApp\obj\Debug\net5.0\.NETCoreApp,Version=v5.0.AssemblyAttributes.cs</code>
<code>source file: C:\CodeGenerationSample\SampleApp\obj\Debug\net5.0\SampleApp.AssemblyInfo.cs</code></pre>
            </section>
            <section data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><span id="c12-sec-0031"
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
                <h3 id="head-3-245" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Source Generators Using Partial Methods <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用部分方法的源生成器</font>
                        </font>
                    </font>
                </h3>
                <p id="c12-para-0133" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Let's get into a more advanced scenario where a partial
                    method is used from a source generator. With C# 9, the syntax for partial methods has been enhanced.
                    As a reminder, the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">partial</code> modifier
                    with a class allows having the class to span multiple files. The compiler combines the partial
                    classes from multiple files with the same name to one class. Before C# 9, partial methods had to be
                    declared with the return type <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">void</code>. A partial
                    method didn't need to have any implementation. Code generators often created partial methods, which
                    have been invoked by the generated code. With your part of the implementation, you could then define
                    an implementation of the partial method that's invoked by the generated code. With C# 9, partial
                    methods can return a type. This partial method needs to have a private access modifier, and an
                    implementation is required as well.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">让我们进入一个更高级的场景，其中从源生成器中使用了部分方法。在 C#
                                9 中，部分方法的语法得到了增强。作为提醒，使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">partial</code>
                                修饰符与类一起使用，可以使类跨越多个文件。编译器会将具有相同名称的多个文件中的部分类组合成一个类。在 C# 9 之前，部分方法必须声明为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">void</code>
                                返回类型。部分方法不需要有任何实现。代码生成器经常创建部分方法，这些方法由生成的代码调用。然后，你可以定义一个部分方法的实现，该实现由生成的代码调用。在 C# 9
                                中，部分方法可以返回一个类型。这个部分方法需要有私有访问修饰符，并且也需要有实现。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1"><a href="c05.xhtml"
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Chapter 5</a>, “Operators
                    and Casts,” discusses that implementing equality for class types requires some boilerplate code:
                    overriding the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">object.Equals</code>
                    method, implementing the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IEquality&lt;T&gt;</code>
                    interface, and implementing the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">==</code> and <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">!=</code> operators. When
                    you use code generators, the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Book</code> class has the
                    attribute <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ImplementEquatable</code>
                    applied and implements the partial method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsTheSame</code> to
                    compare for the values (code file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/SampleApp/Book.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                第五章，“运算符和类型转换”，讨论了为类类型实现相等性需要一些样板代码：重写 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">object.Equals</code>
                                方法，实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IEquality&lt;T&gt;</code>
                                接口，以及实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">==</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">!=</code>
                                运算符。当你使用代码生成器时， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Book</code>
                                类会应用属性 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ImplementEquatable</code>
                                并实现部分方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IsTheSame</code>
                                来比较值（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/SampleApp/Book.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0056"><code>using CodeGenerationSample;</code>
<code> </code>
<code>namespace SampleApp</code>
<code>{</code>
<code>  <b>[ImplementEquatable]</b></code>
<code>  public partial class Book</code>
<code>  {</code>
<code>    public Book(string title, string publisher)</code>
<code>    {</code>
<code>      Title = title;</code>
<code>      Publisher = publisher;</code>
<code>    }</code>
<code>    public string Title { get; }</code>
<code>    public string Publisher { get; }</code>
<code> </code>
<code>    <b>private static partial bool IsTheSame(Book? left, Book? right) =&gt;</b></code>
<code>      <b>left?.Title == right?.Title &amp;&amp; left?.Publisher == right?.Publisher;</b></code>
<code> </code>
<code>    public override int GetHashCode() =&gt;</code>
<code>       Title.GetHashCode() ^ Publisher.GetHashCode();</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ImplementEquatable</code>
                    attribute that's used by the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Book</code> class is one
                    part of the source code that's generated from the source generator. The member field <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">attributeText</code>
                    contains the complete content for the attribute. The following code will be injected (code file
                    <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/CodeGenerationSample/EquatableGenerator.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Book</code>
                                类使用的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ImplementEquatable</code>
                                属性是源代码生成器生成的源代码的一部分。成员字段 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">attributeText</code>
                                包含属性的全部内容。以下代码将被注入（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/CodeGenerationSample/EquatableGenerator.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0057"><span aria-label="331" epub:type="pagebreak" id="Page_331" role="doc-pagebreak"></span>
<code>private const string attributeText = @"</code>
<code>using System;</code>
<code>namespace CodeGenerationSample</code>
<code>{</code>
<code>  [AttributeUsage(AttributeTargets.Class, Inherited = false, AllowMultiple = false)]</code>
<code>  sealed class ImplementEquatableAttribute : Attribute</code>
<code>  {</code>
<code>    public ImplementEquatableAttribute() { }</code>
<code>  }</code>
<code>}</code>
<code>";</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The new source generator <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">EquatableGenerator</code>
                    implements the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Initialize</code> method
                    to register the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SyntaxReceiver</code>
                    type for syntax notifications. <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">RegisterForSyntaxNotifications</code>
                    is a method of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GeneratorInitializationContext</code>
                    that requires a <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SyntaxReceiverCreator</code>
                    delegate as a parameter. This delegate just specifies that an object implementing <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ISyntaxReceiver</code>
                    needs to be returned:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">新的源生成器 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">EquatableGenerator</code>
                                实现了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Initialize</code>
                                方法来注册 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SyntaxReceiver</code>
                                类型以接收语法通知。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">RegisterForSyntaxNotifications</code>
                                是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GeneratorInitializationContext</code>
                                的一个方法，它需要一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SyntaxReceiverCreator</code>
                                委托作为参数。这个委托指定了实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ISyntaxReceiver</code>
                                的对象需要被返回：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0058"><code>[Generator]</code>
<code>public class EquatableGenerator : ISourceGenerator</code>
<code>{</code>
<code>  <b>public void Initialize(GeneratorInitializationContext context)</b></code>
<code>  <b>{</b></code>
<code>    <b>context.RegisterForSyntaxNotifications(() =&gt; new SyntaxReceiver());</b></code>
<code>  <b>}</b></code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SyntaxReceiver</code>
                    class implements this interface with the implementation of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">OnVisitSyntaxNode</code>
                    method. As the compiler visits the user's source code, this method is invoked for every syntax node.
                    If the syntax node is a class with at least one attribute, it is added to the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CandidateClasses</code>
                    collection. These classes might be expanded with an implementation for equality, as shown here:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SyntaxReceiver</code>
                                类通过实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">OnVisitSyntaxNode</code>
                                方法来使用这个接口。当编译器访问用户的源代码时，这个方法会对每个语法节点被调用。如果语法节点是一个至少包含一个属性的课程，它会被添加到 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">CandidateClasses</code>
                                集合中。这些类可能会通过实现等价性来扩展，如下所示：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0059"><code>internal class SyntaxReceiver : ISyntaxReceiver</code>
<code>{</code>
<code>  public List&lt;ClassDeclarationSyntax&gt; CandidateClasses { get; } = new();</code>
<code> </code>
<code>  public void <b>OnVisitSyntaxNode</b>(SyntaxNode syntaxNode)</code>
<code>  {</code>
<code>    if (syntaxNode is <b>ClassDeclarationSyntax</b> classDeclarationSyntax</code>
<code>      &amp;&amp; classDeclarationSyntax.AttributeLists.Count&gt; 0)</code>
<code>    {</code>
<code>      CandidateClasses.Add(classDeclarationSyntax);</code>
<code>    }</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">With the implementation of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Execute</code> method,
                    the source code for the attribute is retrieved from the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">attributeText</code>
                    variable and passed to the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GeneratorExecutionContext</code>
                    with the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AddSource</code> method.
                    To retrieve the syntax tree and get the symbol for comparison with the user source code, the
                    compilation of this attribute is retrieved:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过实现 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Execute</code>
                                方法，属性的源代码从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">attributeText</code>
                                变量中获取，并通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">AddSource</code>
                                方法传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GeneratorExecutionContext</code>
                                。为了获取语法树并与用户源代码进行比较，这个属性的编译被获取：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0060"><code>public void Execute(GeneratorExecutionContext context)</code>
<code>{</code>
<code>  <b>context.AddSource("ImplementEquatableAttribute", SourceText.From(attributeText,</b> </code>
<code>    <b>Encoding.UTF8));</b></code>
<code> <span aria-label="332" epub:type="pagebreak" id="Page_332" role="doc-pagebreak"></span></code>
<code>  if (!(context.SyntaxReceiver is SyntaxReceiver syntaxReceiver)) </code>
<code>    return;</code>
<code> </code>
<code>  CSharpParseOptions? options = (context.Compilation as CSharpCompilation)?.</code>
<code>    SyntaxTrees[0].Options as CSharpParseOptions;</code>
<code>  Compilation compilation = context.Compilation.AddSyntaxTrees(</code>
<code>    CSharpSyntaxTree.ParseText(SourceText.From(attributeText, Encoding.UTF8), options));</code>
<code> </code>
<code>  <b>INamedTypeSymbol? attributeSymbol = compilation.GetTypeByMetadataName(</b></code>
<code>    <b>"CodeGenerationSample.ImplementEquatableAttribute");</b></code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Next, each candidate class stored within the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SyntaxReceiver</code> is
                    verified if it has the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ImplementEquatableAttribute</code>
                    applied. If a class has this attribute, the typed symbol is added to the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">typedSymbols</code>
                    collection. After the iteration of the candidates, the remaining candidates are iterated to add the
                    source code for every one of these types. The source code is coming from the helper method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetClassSource</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">接下来，验证存储在 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SyntaxReceiver</code>
                                中的每个候选类是否应用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ImplementEquatableAttribute</code>
                                。如果一个类有这个属性，则类型的符号会被添加到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">typedSymbols</code>
                                集合中。在候选类的迭代完成后，会迭代剩余的候选类，为这些类型中的每一个添加源代码。源代码来自辅助方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetClassSource</code>
                                ：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0061"><code>public void Execute(GeneratorExecutionContext context)</code>
<code>{</code>
<code>  //…</code>
<code> </code>
<code>  List&lt;ITypeSymbol&gt; typeSymbols = new();</code>
<code>  foreach <b>(ClassDeclarationSyntax @class in syntaxReceiver.CandidateClasses)</b></code>
<code>  {</code>
<code>    SemanticModel model = compilation.GetSemanticModel(@class.SyntaxTree);</code>
<code> </code>
<code>    <b>INamedTypeSymbol? typeSymbol = model.GetDeclaredSymbol(@class);</b></code>
<code>    if (typeSymbol!.GetAttributes().Any(attr =&gt; </code>
<code>      attr.AttributeClass!.Equals(attributeSymbol, SymbolEqualityComparer.Default)))</code>
<code>    {</code>
<code>      typeSymbols.Add(typeSymbol);</code>
<code>    }</code>
<code>  }</code>
<code> </code>
<code>  foreach (INamedTypeSymbol typeSymbol in typeSymbols)</code>
<code>  {</code>
<code>    string classSource = GetClassSource(typeSymbol);</code>
<code>    <b>context.AddSource</b>(typeSymbol.Name, <b>SourceText.From(classSource, Encoding.UTF8)</b>);</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">The helper method <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetClassSources</code>
                    receives the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ITypesSymbol</code> as a
                    parameter to use the namespace name and the class name with the generated code. The implementation
                    of the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IEquatable</code>
                    interface and the operator overloads are returned:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">辅助方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">GetClassSources</code>
                                接收 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">ITypesSymbol</code>
                                作为参数，用于在生成的代码中使用命名空间名称和类名。返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IEquatable</code>
                                接口的实现和运算符重载：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0062"><code>private string GetClassSource(<b>ITypeSymbol typeSymbol</b>)</code>
<code>{</code>
<code>  string namespaceName = <b>typeSymbol.ContainingNamespace.ToDisplayString();</b></code>
<code> </code>
<code>  StringBuilder source = new($@"</code>
<code>using System;</code>
<code> <span aria-label="333" epub:type="pagebreak" id="Page_333" role="doc-pagebreak"></span></code>
<code>namespace {namespaceName}</code>
<code>{{</code>
<code>  public partial class {<b>typeSymbol.Name</b>} : IEquatable&lt;{typeSymbol.Name}&gt;</code>
<code>  {{</code>
<code>    private static partial bool IsTheSame(</code>
<code>      {typeSymbol.Name}? left, {typeSymbol.Name}? right);</code>
<code> </code>
<code>    public override bool Equals(object? obj) =&gt; this == obj as {typeSymbol.Name};</code>
<code> </code>
<code>    public bool Equals({typeSymbol.Name}? other) =&gt; this == other;</code>
<code> </code>
<code>    public static bool operator==({typeSymbol.Name}? left, {typeSymbol.Name}? right) </code>
<code>      =&gt; IsTheSame(left, right);</code>
<code> </code>
<code>    public static bool operator!=({typeSymbol.Name}? left, {typeSymbol.Name}? right) </code>
<code>      =&gt; !(left == right);</code>
<code> </code>
<code>  }}</code>
<code>}}</code>
<code>");</code>
<code>  return source.ToString();</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">With the source generator, two <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Book</code> objects can
                    now be instantiated and compared using the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">==</code> operator (code
                    file <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/SampleApp/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用源生成器，现在可以通过 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">==</code>
                                操作符（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">SourceGenerator/SampleApp/Program.cs</code>
                                ）实例化两个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Book</code>
                                对象并进行比较：</font>
                        </font>
                    </font>
                </p>
                <pre id="c12-code-0063"><code>Book b1 = new("Professional C#", "Wrox Press");</code>
<code>Book b2 = new("Professional C#", "Wrox Press");</code>
<code>if (b1 == b2)</code>
<code>{</code>
<code>  Console.WriteLine("the same book");</code>
<code>}</code></pre>
                <p id="c12-para-0142" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Instead of implementing the operators and the <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IEquatable</code>
                    interface every time equality is needed, you can now use a code generator. Many more scenarios are
                    possible. You can create classes from CSV files and automatically implement interfaces such as <code
                        data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">INotifyPropertyChanged</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">不再需要每次需要相等性时都实现操作符和 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IEquatable</code>
                                接口，现在可以使用代码生成器。许多更多场景成为可能。你可以从 CSV 文件创建类，并自动实现 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">INotifyPropertyChanged</code>
                                等接口。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                    data-immersive-translate-paragraph="1">Future versions of .NET will reduce reflection code during
                    runtime. With ASP.NET Core, controllers are dynamically searched for at the startup of the
                    application. This increases the startup time. If code is instead generated, there's no need to do
                    this at runtime, and the application can start up faster.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">.NET 的未来版本将在运行时减少反射代码。在 ASP.NET
                                Core 中，控制器在应用程序启动时动态搜索。这增加了启动时间。如果代码是生成的，则无需在运行时进行此操作，应用程序可以更快地启动。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                    <div class="top hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                        <p id="c12-para-0144" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">NOTE</b> <i
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">In this chapter,
                                with the source generator, it was just possible to have a focus </i><i
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">on the special
                                features of the source generator. Now you might be interested in more information on
                                accessing the different parts of the syntax tree in more detail. Source </i><i
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">generators are
                                based on the .NET Compiler Platform (Roslyn). A complete book could be written about
                                this. Check the Microsoft documentation on the .NET Compiler Platform SDK at </i><code
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><a href="https://docs.microsoft.com/dotnet/csharp/roslyn-sdk/">https://docs.microsoft.com/dotnet/csharp/roslyn-sdk/</a></code><i
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意
                                        在本章中，使用源生成器，我们只是专注于源生成器的特殊功能。现在你可能对更详细地访问语法树的不同部分感兴趣。源生成器基于 .NET
                                        编译器平台（Roslyn）。可以写一本完整的书来介绍这个。请查阅 Microsoft 文档中关于 .NET 编译器平台 SDK 的 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"><a href="https://docs.microsoft.com/dotnet/csharp/roslyn-sdk/">https://docs.microsoft.com/dotnet/csharp/roslyn-sdk/</a></code>
                                        部分。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
        </section> <span aria-label="334" epub:type="pagebreak" id="Page_334" role="doc-pagebreak"
            data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
        <section aria-labelledby="head-2-111" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">
            <span id="c12-sec-0033" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"></span>
            <h2 id="head-2-111" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">SUMMARY<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">摘要</font>
                    </font>
                </font>
            </h2>
            <p id="c12-para-0145" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">This chapter illustrated using the <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> and <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code> classes,
                which are the primary entry points for accessing the extensive capabilities provided by reflection.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章说明了使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Type</code> 和
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">Assembly</code>
                            类，它们是访问反射提供的大量功能的主要入口点。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0146" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">In addition, this chapter demonstrated a specific aspect of
                reflection that you are likely to use more often than any other—the inspection of custom attributes. You
                learned how to define and apply your own custom attributes and how to retrieve information about custom
                attributes at runtime.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            此外，本章还演示了反射的一个特定方面，这个方面你可能比任何其他方面使用得更频繁——自定义属性的检查。你学习了如何定义和应用自己的自定义属性，以及如何在运行时检索自定义属性的信息。
                        </font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0147" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">The second focus of this chapter was working with a new C# 9
                feature: source code generators. With a source generator, you can create source code from different
                sources, and this code is combined with the user's source code. A source generator can also access the
                syntax tree of the user's source code and change this accordingly. With <code
                    data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dotnet build</code>, the
                source generator gets triggered.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章的第二个重点是使用 C# 9
                            的新功能：源代码生成器。使用源代码生成器，你可以从不同来源创建源代码，并且这些代码会与用户的源代码合并。源代码生成器还可以访问用户源代码的语法树并相应地修改它。使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">dotnet build</code>
                            ，源代码生成器会被触发。</font>
                    </font>
                </font>
            </p>
            <p id="c12-para-0148" data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18"
                data-immersive-translate-paragraph="1">The next chapter gives details on freeing resources with the
                <code data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IDisposable</code>
                interface, releasing native resources, and working with unsafe C# code.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">下一章将详细介绍使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="fdba0951-a3d4-4ac8-8d48-e64d1e941e18">IDisposable</code>
                            接口释放资源、释放原生资源以及处理不安全的 C# 代码。</font>
                    </font>
                </font>
            </p>
        </section>
    </section>
</body>
<div id="immersive-translate-popup" style="all: initial"></div>

</html>