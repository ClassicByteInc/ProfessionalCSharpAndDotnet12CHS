<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops"
    xmlns:svg="http://www.w3.org/2000/svg" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en"
    imt-state="dual" imt-trans-position="after">

<head>
    <title>6 数组 --- 6 Arrays</title>
    <link href="WileyTemplate_v5.5.css" rel="stylesheet" type="text/css" />
    <meta content="urn:uuid:e0000000-0000-0000-0000-000006715209" name="Adept.expected.resource" />
    <style data-id="immersive-translate-input-injected-css">
        .immersive-translate-input {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            z-index: 2147483647;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .immersive-translate-attach-loading::after {
            content: " ";

            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;

            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-2000%, -50%);
            z-index: 100;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .immersive-translate-input-loading {
            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;
        }

        @keyframes immersiveTranslateShadowRolling {
            0% {
                box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            12% {
                box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            25% {
                box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            36% {
                box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color),
                    100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
            }

            50% {
                box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color),
                    110px 0 var(--loading-color), 100px 0 var(--loading-color);
            }

            62% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color),
                    120px 0 var(--loading-color), 110px 0 var(--loading-color);
            }

            75% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    130px 0 var(--loading-color), 120px 0 var(--loading-color);
            }

            87% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
            }

            100% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
            }
        }

        .immersive-translate-toast {
            display: flex;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            right: 0;
            top: 1%;
            width: fit-content;
            padding: 12px 20px;
            margin: auto;
            overflow: auto;
            background: #fef6f9;
            box-shadow: 0px 4px 10px 0px rgba(0, 10, 30, 0.06);
            font-size: 15px;
            border-radius: 8px;
            color: #333;
        }

        .immersive-translate-toast-content {
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .immersive-translate-toast-hidden {
            margin: 0 20px 0 72px;
            text-decoration: underline;
            cursor: pointer;
        }

        .immersive-translate-toast-close {
            color: #666666;
            font-size: 20px;
            font-weight: bold;
            padding: 0 10px;
            cursor: pointer;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-toast {
                top: 0;
                padding: 12px 0px 0 10px;
            }

            .immersive-translate-toast-content {
                flex-direction: column;
                text-align: center;
            }

            .immersive-translate-toast-hidden {
                margin: 10px auto;
            }
        }

        .immersive-translate-modal {
            display: none;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
            font-size: 15px;
        }

        .immersive-translate-modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 40px 24px 24px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 80%;
            max-width: 270px;
            font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
                "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
                "Segoe UI Symbol", "Noto Color Emoji";
            position: relative;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-content {
                margin: 50% auto !important;
            }
        }

        .immersive-translate-modal .immersive-translate-modal-content-in-input {
            max-width: 500px;
        }

        .immersive-translate-modal-content-in-input .immersive-translate-modal-body {
            text-align: left;
            max-height: unset;
        }

        .immersive-translate-modal-title {
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            color: #333333;
        }

        .immersive-translate-modal-body {
            text-align: center;
            font-size: 14px;
            font-weight: 400;
            color: #333333;
            word-break: break-all;
            margin-top: 24px;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-body {
                max-height: 250px;
                overflow-y: auto;
            }
        }

        .immersive-translate-close {
            color: #666666;
            position: absolute;
            right: 16px;
            top: 16px;
            font-size: 20px;
            font-weight: bold;
        }

        .immersive-translate-close:hover,
        .immersive-translate-close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .immersive-translate-modal-footer {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 24px;
        }

        .immersive-translate-btn {
            width: fit-content;
            color: #fff;
            background-color: #ea4c89;
            border: none;
            font-size: 16px;
            margin: 0 8px;
            padding: 9px 30px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .immersive-translate-btn:hover {
            background-color: #f082ac;
        }

        .immersive-translate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .immersive-translate-btn:disabled:hover {
            background-color: #ea4c89;
        }

        .immersive-translate-cancel-btn {
            /* gray color */
            background-color: rgb(89, 107, 120);
        }

        .immersive-translate-cancel-btn:hover {
            background-color: hsl(205, 20%, 32%);
        }

        .immersive-translate-action-btn {
            background-color: transparent;
            color: #ea4c89;
            border: 1px solid #ea4c89;
        }

        .immersive-translate-btn svg {
            margin-right: 5px;
        }

        .immersive-translate-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #007bff;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-primary-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #ea4c89;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-modal input[type="radio"] {
            margin: 0 6px;
            cursor: pointer;
        }

        .immersive-translate-modal label {
            cursor: pointer;
        }

        .immersive-translate-close-action {
            position: absolute;
            top: 2px;
            right: 0px;
            cursor: pointer;
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5) !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            border-radius: 16px !important;
        }

        .imt-image-status img,
        .imt-image-status svg,
        .imt-img-loading {
            width: 28px !important;
            height: 28px !important;
            margin: 0 0 8px 0 !important;
            min-height: 28px !important;
            min-width: 28px !important;
            position: relative !important;
        }

        .imt-img-loading {
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAtFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////oK74hAAAAPHRSTlMABBMIDyQXHwyBfFdDMSw+OjXCb+5RG51IvV/k0rOqlGRM6KKMhdvNyZBz9MaupmxpWyj437iYd/yJVNZeuUC7AAACt0lEQVRIx53T2XKiUBCA4QYOiyCbiAsuuGBcYtxiYtT3f6/pbqoYHVFO5r+iivpo6DpAWYpqeoFfr9f90DsYAuRSWkFnPO50OgR9PwiCUFcl2GEcx+N/YBh6pvKaefHlUgZd1zVe0NbYcQjGBfzrPE8Xz8aF+71D8gG6DHFPpc4a7xFiCDuhaWgKgGIJQ3d5IMGDrpS4S5KgpIm+en9f6PlAhKby4JwEIxlYJV9h5k5nee9GoxHJ2IDSNB0dwdad1NAxDJ/uXDHYmebdk4PdbkS58CIVHdYSUHTYYRWOJblWSyu2lmy3KNFVJNBhxcuGW4YBVCbYGRZwIooipHsNqjM4FbgOQqQqSKQQU9V8xmi1QlgHqQQ6DDBvRUVCDirs+EzGDGOQTCATgtYTnbCVLgsVgRE0T1QE0qHCFAht2z6dLvJQs3Lo2FQoDxWNUiBhaP4eRgwNkI+dAjVOA/kUrIDwf3CG8NfNOE0eiFotSuo+rBiq8tD9oY4Qzc6YJw99hl1wzpQvD7ef2M8QgnOGJfJw+EltQc+oX2yn907QB22WZcvlUpd143dqQu+8pCJZuGE4xCuPXJqqcs5sNpsI93Rmzym1k4Npk+oD1SH3/a3LOK/JpUBpWfqNySxWzCfNCUITuDG5dtuphrUJ1myeIE9bIsPiKrfqTai5WZxbhtNphYx6GEIHihyGFTI69lje/rxajdh0s0msZ0zYxyPLhYCb1CyHm9Qsd2H37Y3lugVwL9kNh8Ot8cha6fUNQ8nuXi5z9/ExsAO4zQrb/ev1yrCB7lGyQzgYDGuxq1toDN/JGvN+HyWNHKB7zEoK+PX11e12G431erGYzwmytAWU56fkMHY5JJnDRR2eZji3AwtIcrEV8Cojat/BdQ7XOwGV1e1hDjGGjXbdArm8uJZtCH5MbcctVX8A1WpqumJHwckAAAAASUVORK5CYII=");
            background-size: 28px 28px;
            animation: image-loading-rotate 1s linear infinite !important;
        }

        .imt-image-status span {
            color: var(--bg-2, #fff) !important;
            font-size: 14px !important;
            line-height: 14px !important;
            font-weight: 500 !important;
            font-family: "PingFang SC", Arial, sans-serif !important;
        }

        @keyframes image-loading-rotate {
            from {
                transform: rotate(360deg);
            }

            to {
                transform: rotate(0deg);
            }
        }
    </style>
    <style data-id="immersive-translate-default-injected-css">
        :root {
            --immersive-translate-theme-underline-borderColor: #72ece9;
            --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
            --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
            --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
            --immersive-translate-theme-highlight-backgroundColor: #ffff00;
            --immersive-translate-theme-dashed-borderColor: #59c1bd;
            --immersive-translate-theme-blockquote-borderColor: #cc3355;
            --immersive-translate-theme-thinDashed-borderColor: #ff374f;
            --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
            --immersive-translate-theme-dashedBorder-borderRadius: 0;
            --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
            --immersive-translate-theme-solidBorder-borderRadius: 0;
            --immersive-translate-theme-dotted-borderColor: #94a3b8;
            --immersive-translate-theme-wavy-borderColor: #72ece9;
            --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
            --immersive-translate-theme-grey-textColor: #2f4f4f;
            --immersive-translate-theme-marker-backgroundColor: #fbda41;
            --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
            --immersive-translate-theme-marker2-backgroundColor: #ffff00;
            --immersive-translate-theme-background-backgroundColor: #dbafaf;
            --immersive-translate-theme-background-backgroundColor-rgb: 219, 175, 175;
            --immersive-translate-theme-background-backgroundOpacity: 12;
            --immersive-translate-theme-opacity-opacity: 10;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pre-whitespace {
            white-space: pre-wrap !important;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container {
            position: absolute;
            background-color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
                sans-serif;
            top: 0;
            width: 600px;
            height: 100%;
            z-index: 2;
            line-height: 1.3;
            font-size: 16px;
        }

        [imt-state="dual"] .immersive-translate-target-wrapper[dir="rtl"] {
            text-align: right;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
            color: rgb(0, 0, 0);
            white-space: normal;
            position: absolute;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
            color: inherit;
            white-space: inherit;
            position: unset;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper &gt;

        br {
            display: none;
        }

        [imt-state="translation"] .immersive-translate-target-translation-block-wrapper {
            margin: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper {
            margin: 8px 0 !important;
            display: inline-block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            display: block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            margin-top: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pdf-block-wrapper {
            margin: 0 !important;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-grey-inner {
            color: var(--immersive-translate-theme-grey-textColor);
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-underline-inner {
            border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeUnderline-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDashed-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
            text-decoration-style: dashed !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-thinDashed-inner {
            border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dotted-inner {
            background-image: linear-gradient(to right,
                    var(--immersive-translate-theme-dotted-borderColor) 30%,
                    rgba(255, 255, 255, 0) 0%);
            background-position: bottom;
            background-size: 5px 1px;
            background-repeat: repeat-x;
            padding-bottom: 3px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDotted-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
            text-decoration-style: dotted !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-wavy-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
            text-decoration-style: wavy !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dashed-inner {
            background: linear-gradient(to right,
                    var(--immersive-translate-theme-dashed-borderColor) 0%,
                    var(--immersive-translate-theme-dashed-borderColor) 50%,
                    transparent 50%,
                    transparent 100%) repeat-x left bottom;
            background-size: 8px 2px;
            padding-bottom: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            content: "";
            display: block;
            max-width: 80px;
            width: 10%;
            border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            padding-top: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
            content: "";
            border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            max-height: 16px;
            height: 16px;
            padding-left: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-highlight-inner {
            background: var(--immersive-translate-theme-highlight-backgroundColor);
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-marker {
            line-height: 1.5em;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker2-inner {
            font-weight: bold;
            text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
                16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
                2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
                -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker-inner {
            /* TODO: add more texture */
            background: linear-gradient(to right,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-weakening {
            opacity: 0.618 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-italic {
            font-style: italic !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-bold {
            font-weight: bold !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-paper {
            margin: 8px 0;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            padding: 16px 32px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-blockquote {
            border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
            padding-left: 12px !important;
            margin-top: 4px;
            margin-bottom: 4px;
            padding-top: 4px;
            padding-bottom: 4px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        /* opacity theme start */

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,
        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: none !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        /* opacity theme end */

        /* background theme start */
        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-background {
            margin: 8px 0;
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            border-radius: 4px;
            box-shadow: unset !important;
            padding: 12px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-background-inner {
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            padding-left: 6px;
            padding-right: 6px;
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper .immersive-translate-target-translation-theme-background-inner {
            background: unset;
            padding-left: unset;
            padding-right: unset;
        }

        /* background theme end */

        /* vertical css , please remain it in the last one. */
        .immersive-translate-target-translation-vertical-block-wrapper {
            margin: 0px 8px !important;
        }

        .immersive-translate-text {
            font-size: 15px !important;
        }

        .immersive-translate-error-toast {
            position: fixed;
            top: 5%;
            z-index: 99999999;
            left: 0;
            right: 0;
            margin: auto;
            max-width: 300px;
            padding: 16px;
            border-radius: 12px;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }

        @media all and (min-width: 750px) {
            .immersive-translate-error-toast {
                max-width: 400px;
            }
        }

        .immersive-translate-clickable-button {
            cursor: pointer;
        }

        .immersive-translate-help-button {
            cursor: pointer;
        }

        .immersive-translate-loading-text:before {
            content: "...";
        }

        /* dark mode for loading */

        @media only screen and (prefers-color-scheme: dark) {
            .immersive-translate-loading {
                border: 2px rgba(255, 255, 255, 0.25) solid !important;
                border-top: 2px rgba(255, 255, 255, 1) solid !important;
            }
        }

        .immersive-translate-error-wrapper {
            position: relative;
            display: inline-flex;
            padding: 6px;
            margin: 0 12px;
            white-space: nowrap;
            font-size: 0.9em;
        }

        [lang="zh-CN"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        [lang="zh-TW"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        .immersive-translate-tooltip {
            position: relative;
            display: inline-flex;
            /* little indicater to indicate it's hoverable */
        }

        .immersive-translate-tooltip-content {
            /* here's the magic */
            position: absolute;
            z-index: 100000000000;

            left: 50%;
            bottom: 0;
            transform: translate(-50%, 110%);
            line-height: 1;
            /* and add a small left margin */

            /* basic styles */
            width: max-content;
            max-width: 250px;
            word-wrap: break-word;
            white-space: pre-line;
            padding: 10px;
            border-radius: 10px;
            background: #000c;
            color: #fff;
            text-align: center;
            font-size: 14px;
            display: none;
            /* hide by default */
        }

        .immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip-content-table {
            left: unset !important;
            bottom: unset !important;
            transform: translate(-10%, 50%) !important;
        }

        .immersive-translate-tooltip:hover:before {
            display: inline-block;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--bg-2, #fff);
            font-size: 14px;
        }
    </style>
    <style data-id="immersive-translate-user-custom-style">
        :root {

            .immersive-translate-target-inner {
                font-family: inherit;
            }


            .immersive-translate-target-inner {
                font-family: inherit;
            }
        }
    </style>
    <style data-id="immersive-translate-dynamic-injected-css">
        .immersive-translate-target-wrapper[dir='rtl'] {
            text-align: right;
        }

        .immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {
            display: block;
        }

        .immersive-translate-target-wrapper {
            word-break: break-word;
            user-select: text;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper[dir='rtl'] {
            display: inline-block;
        }

        [dir='rtl'] .immersive-translate-target-wrapper:not([dir]) {
            text-align: left;
        }

        [imt-state=dual] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            display: block;
        }

        [imt-trans-position=before] .immersive-translate-target-translation-block-wrapper {
            display: block !important;
        }

        [imt-state][data-immersive-translate_rtl] .immersive-translate-target-wrapper {
            display: block !important;
        }
    </style>
</head>

<body epub:type="bodymatter" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
    <section aria-labelledby="c06_1" epub:type="chapter" role="doc-chapter"
        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
        <header data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <h1 id="c06_1" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1"><span aria-label="153" epub:type="pagebreak" id="Page_153"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span><span id="c06"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span><span
                    class="chapterNumber"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">6</span><br /><span
                    class="chapterTitle"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Arrays</span>
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">6 数组</font>
                    </font>
                </font>
            </h1>
        </header>
        <section aria-label="chapter opening" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0001" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <hr />
                </div>
                <section class="feature3" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <h3 data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1">WHAT'S IN THIS CHAPTER?<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章内容</font>
                            </font>
                        </font>
                    </h3>
                    <ul class="check2" id="c06-list-0001"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <li id="c06-li-0001" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Simple arrays<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">简单数组</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0002" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Multidimensional arrays<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">多维数组</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0003" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Jagged arrays<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">参差不齐的数组</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0004" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">The <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                            class<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1"> <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                                        类</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0005" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Arrays as parameters<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">数组作为参数</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0006" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Enumerators<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">枚举器</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0007" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Spans<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">跨度</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0008" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Indices and ranges<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">索引和范围</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0009" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Array pools<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">数组池</font>
                                </font>
                            </font>
                        </li>
                        <li id="c06-li-0010" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">Bit arrays<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">位数组</font>
                                </font>
                            </font>
                        </li>
                    </ul>
                    <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                </section>
            </aside>
            <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <hr />
                </div>
                <section class="feature3" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span
                        id="c06-fea-0001" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                    <h3 id="head-2-50" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1">CODE DOWNLOADS FOR THIS CHAPTER<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章代码下载</font>
                            </font>
                        </font>
                    </h3>
                    <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span
                            id="c06-sec-0003"
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                        <p id="c06-para-0003" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">The source code for this chapter is available on the
                            book page at <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a href="http://www.wiley.com">www.wiley.com</a></code>.
                            Click the Downloads link. The code can also be found at <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                            in the directory <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">1_CS/Arrays</code>.
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的源代码可在第 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a href="http://www.wiley.com">www.wiley.com</a></code>
                                        页的书籍页面上找到。点击下载链接。代码也可以在第 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                                        处的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">1_CS/Arrays</code>
                                        目录中找到。</font>
                                </font>
                            </font>
                        </p>
                        <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">The code for this chapter is divided into the
                            following major examples:<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的代码分为以下主要示例：</font>
                                </font>
                            </font>
                        </p>
                        <ul class="check" id="c06-list-0002"
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <li id="c06-li-0011" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                data-immersive-translate-paragraph="1">SimpleArrays</li>
                            <li id="c06-li-0012" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                data-immersive-translate-paragraph="1">SortingSample</li>
                            <li id="c06-li-0014" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                data-immersive-translate-paragraph="1">YieldSample</li>
                            <li id="c06-li-0015" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                data-immersive-translate-paragraph="1">SpanSample</li>
                            <li id="c06-li-0016" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                data-immersive-translate-paragraph="1"><span aria-label="154" epub:type="pagebreak"
                                    id="Page_154" role="doc-pagebreak"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>IndicesAndRanges
                            </li>
                            <li id="c06-li-0017" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                data-immersive-translate-paragraph="1">ArrayPoolSample</li>
                            <li id="c06-li-0018" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                data-immersive-translate-paragraph="1">BitArraySample</li>
                        </ul>
                        <p id="c06-para-0005" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1">All the projects have nullable reference types
                            enabled.<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">所有项目都启用了可空引用类型。 </font>
                                </font>
                            </font>
                        </p>
                    </section>
                    <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                </section>
            </aside>
        </section>
        <section aria-labelledby="head-2-51" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0004" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-51" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">MULTIPLE OBJECTS OF THE SAME TYPE<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">同类型的多个对象 </font>
                    </font>
                </font>
            </h2>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">If you need to work with multiple objects of the same type, you
                can use collections (see <a href="c08.xhtml"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter 8</a>, “Collections”)
                and arrays. C# has a special notation to declare, initialize, and use arrays. Behind the scenes, the
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class comes
                into play, which offers several methods to sort and filter the elements inside the array. Using an
                enumerator, you can iterate through all the elements of the array.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">如果你需要处理同类型的多个对象，可以使用集合（参见第 8
                            章“集合”）和数组。C#有一种特殊的语法来声明、初始化和使用数组。在底层， <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                            类发挥作用，它提供了多种方法来排序和过滤数组中的元素。使用枚举器，你可以遍历数组中的所有元素。</font>
                    </font>
                </font>
            </p>
            <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <p id="c06-para-0007" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">For using multiple
                            objects of different types, you can combine them using classes, structs, records, and
                            tuples, which are covered in <a href="c03.xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter
                                3</a>.</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">
                                    注意：若需使用不同类型的多个对象，可通过类、结构体、记录和元组将它们组合，这些内容在第三章中介绍。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                </section>
            </aside>
        </section>
        <section aria-labelledby="head-2-52" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0006" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-52" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">SIMPLE ARRAYS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">简单数组</font>
                    </font>
                </font>
            </h2>
            <p id="c06-para-0008" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">If you need to use multiple objects of the same type, you can use
                an array. An <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">array</i> is a
                data structure that contains a number of elements of the same type.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            若需使用同类型的多个对象，可以使用数组。数组是一种包含相同类型元素的数据结构。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0007"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-139" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Array Declaration and Initialization <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">数组的声明和初始化</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">An array is declared by defining the type of elements inside
                    the array, followed by empty brackets and a variable name. For example, an array containing integer
                    elements is declared like this:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                数组是通过定义数组内元素的类型，然后跟空括号和一个变量名来声明的。例如，包含整型元素的数组声明如下：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0001"><code>int[] myArray;</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">After declaring an array, memory must be allocated to hold
                    all the elements of the array. An array is a reference type, so memory on the heap must be
                    allocated. You do this by initializing the variable of the array using the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">new</code> operator, with
                    the type and the number of elements inside the array. Here, you specify the size of the array:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                声明数组后，必须为其所有元素分配内存。数组是引用类型，因此必须在堆上分配内存。您通过使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">new</code>
                                运算符初始化数组变量，并指定数组的类型和元素数量来完成这一点。在这里，您指定了数组的大小：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0002"><code>myArray = new int[4];</code></pre>
                <p id="c06-para-0011" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">With this declaration and initialization, the variable <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">myArray</code> references
                    four integer values that are allocated on the managed heap (see <a href="#c06-fig-0001"
                        id="R_c06-fig-0001"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Figure 6-1</a>).<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过这种声明和初始化，变量 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">myArray</code>
                                引用了在托管堆上分配的四个整数值（见图 6-1）。</font>
                        </font>
                    </font>
                </p>
                <figure data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <img
                        alt="Schematic illustration of the relationship between stack and managed heap." class="center"
                        src="images/c06f001.png" />
                    <figcaption data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span
                                class="figureLabel"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a
                                    href="#R_c06-fig-0001" id="c06-fig-0001" role="doc-backlink"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><b
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                        data-immersive-translate-paragraph="1">FIGURE 6-1<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 6-1</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0013" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">An array cannot
                                be resized after its size is specified without copying all the elements. If you don't
                                know how many elements should be in the array in advance, you can use a collection (see
                                <a href="c08.xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter
                                    8</a>).</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">
                                        注意：数组的大小指定后不能直接调整大小，除非复制所有元素。如果您事先不知道数组中应该有多少元素，可以使用集合（见第 8 章）。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1"><span aria-label="155" epub:type="pagebreak" id="Page_155"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>Instead of using a
                    separate line to declare and initialize an array, you can use a single line:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">不用单独一行来声明和初始化数组，你可以用一行：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0003"><code>int[] myArray = new int[4];</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">You can also assign values to every array element using an
                    array initializer. The following code samples all declare an array with the same content but with
                    less code for you to write. The compiler can count the number of elements in the array by itself,
                    which is why the array size is left out with the second line. The compiler also can map the values
                    defined in the initializer list to the type used on the left side, so you also can remove the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">new</code> operator left
                    of the initializer. The code generated from the compiler is always the same:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                你也可以使用数组初始化器为每个数组元素赋值。以下代码示例都声明了一个内容相同的数组，但减少了你需要编写的代码量。编译器可以自己计算数组中的元素数量，这就是为什么第二行省略了数组大小。编译器还可以将初始化列表中定义的值映射到左侧使用的类型，因此你也可以移除初始化器左侧的
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">new</code>
                                运算符。编译器生成的代码始终相同：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0004"><code>int[] myArray1 = new int[4] {4, 7, 11, 2};</code>
<code>int[] myArray2 = new int[] {4, 7, 11, 2};</code>
<code>int[] myArray3 = {4, 7, 11, 2};</code></pre>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0009"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-140" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Accessing Array Elements <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">访问数组元素</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0016" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">After an array is declared and initialized, you can access
                    the array elements using an indexer. Arrays support only indexers that have parameters of type <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">数组声明和初始化后，可以使用索引器访问数组元素。数组仅支持参数类型为
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                的索引器。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">With the indexer, you pass the element number to access the
                    array. The indexer always starts with a value of 0 for the first element. Therefore, the highest
                    number you can pass to the indexer is the number of elements minus one because the index starts at
                    zero. In the following example, the array <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">myArray</code> is
                    declared and initialized with four integer values. The elements can be accessed with indexer values
                    0, 1, 2, and 3.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用索引器时，你需要传入元素编号来访问数组。索引器始终从 0
                                开始为第一个元素赋值。因此，你可以传入的最高编号是元素数量减一，因为索引从 0 开始。在以下示例中，声明并初始化了一个包含四个整数值的数组 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">myArray</code>
                                。你可以使用索引器值 0、1、2 和 3 来访问这些元素。</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0005"><code>int[] myArray = new int[] {4, 7, 11, 2};</code>
<code>int v1 = myArray[0]; // read first element</code>
<code>int v2 = myArray[1]; // read second element</code>
<code>myArray[3] = 44; // change fourth element</code></pre>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0019" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">If you use a
                                wrong indexer value that is bigger than the length of the array, an exception of type
                            </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndexOutOfRangeException</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> is thrown.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意
                                        如果你使用一个大于数组长度的错误索引器值，将抛出类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndexOutOfRangeException</code>
                                        的异常。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">If you don't know the number of elements in the array, you
                    can use the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code> property,
                    as shown in this <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code> statement:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果你不知道数组中的元素数量，可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code>
                                属性，如这个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code>
                                语句所示：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0006"><code>for (int i = 0; i &lt; myArray.Length; i++)</code>
<code>{</code>
<code>  Console.WriteLine(myArray[i]);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Instead of using a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code> statement to
                    iterate through all the elements of the array, you can also use the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">与其使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code>
                                语句遍历数组的所有元素，你也可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0007"><code>foreach (var val in myArray)</code>
<code>{</code>
<code>  Console.WriteLine(val);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span aria-label="156"
                        epub:type="pagebreak" id="Page_156" role="doc-pagebreak"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span></p>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0023" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">The </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> statement makes
                                use of the </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> and </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> interfaces and
                                traverses through the array from the first index to the last. This is discussed in
                                detail later in this chapter.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                        语句使用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                                        和 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                        接口，并从第一个索引遍历到最后一个索引。这将在本章后面详细讨论。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0012"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-141" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Using Reference Types <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用引用类型</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">In addition to being able to declare arrays of predefined
                    types, you also can declare arrays of custom types. Let's start with the following <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> record
                    using positional record syntax to declare the <i
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">init-only setter</i>
                    properties <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code> and
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code> (code
                    file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Person.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                除了能够声明预定义类型的数组外，您还可以声明自定义类型的数组。让我们从以下使用位置记录语法声明 init-only setter 属性 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                记录（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Person.cs</code>
                                ）开始：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0008"><code>public record Person(string FirstName, string LastName);</code>
<code> </code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Declaring an array of two <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> elements is
                    similar to declaring an array of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">声明一个包含两个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                元素的数组与声明一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                数组类似：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0009"><code>Person[] myPersons = new Person[2];</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">However, be aware that if the elements in the array are
                    reference types, memory must be allocated for every array element. If you use an item in the array
                    for which no memory was allocated, a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NullReferenceException</code>
                    is thrown.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                然而，请注意，如果数组中的元素是指针类型，必须为每个数组元素分配内存。如果你使用数组中的一个未分配内存的元素，会抛出 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NullReferenceException</code>
                                错误。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0027" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">For information
                                about errors and exceptions, see <a href="c10.xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter
                                    10</a>, “Errors and </i><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Exceptions.”</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 关于错误和异常的信息，请参阅第 10
                                        章“错误和异常”。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">You can allocate every element of the array by using an
                    indexer starting from 0. When you create the second object, you make use of C# 9 <i
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">target-typed new</i> as
                    the type (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你可以通过从 0
                                开始使用索引器为数组的每个元素分配内存。当你创建第二个对象时，你使用了 C# 9 的目标类型新作为类型（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0010"><code>myPersons[0] = new Person("Ayrton", "Senna");</code>
<code>myPersons[1] = new("Michael", "Schumacher");</code></pre>
                <p id="c06-para-0029" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1"><a href="#c06-fig-0002" id="R_c06-fig-0002"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Figure 6-2</a> shows the
                    objects in the managed heap with the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> array.
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">myPersons</code> is a
                    variable that is stored on the stack. This variable references an array of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> elements
                    that is stored on the managed heap. This array has enough space for two references. Every item in
                    the array references a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> object that
                    is also stored in the managed heap.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">图 6-2 显示了在托管堆中与 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                数组相关的对象。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">myPersons</code>
                                是一个存储在栈上的变量。该变量引用一个存储在托管堆中的包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                个元素的数组。这个数组有足够的空间存放两个引用。数组中的每一项都引用一个存储在托管堆中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                对象。</font>
                        </font>
                    </font>
                </p>
                <figure data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <img
                        alt="Schematic illustration of the relationship between stack and managed heap." class="center"
                        src="images/c06f002.png" />
                    <figcaption data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span
                                class="figureLabel"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a
                                    href="#R_c06-fig-0002" id="c06-fig-0002" role="doc-backlink"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><b
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                        data-immersive-translate-paragraph="1">FIGURE 6-2<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 6-2</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">As with the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> type, you can
                    use an array initializer with custom types:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">和 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                类型一样，你可以使用自定义类型的数组初始化器：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0011"><code>Person[] myPersons2 =</code>
<code>{</code>
<code>  new("Ayrton", "Senna"),</code>
<code>  new("Michael", "Schumacher")</code>
<code>};</code></pre>
            </section>
        </section> <span aria-label="157" epub:type="pagebreak" id="Page_157" role="doc-pagebreak"
            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
        <section aria-labelledby="head-2-53" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0014" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-53" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">MULTIDIMENSIONAL ARRAYS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">多维数组</font>
                    </font>
                </font>
            </h2>
            <p id="c06-para-0031" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Ordinary arrays (also known as <i
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">one-dimensional arrays</i>)
                are indexed by a single integer. A multidimensional array is indexed by two or more integers.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">普通数组（也称为一维数组）由一个整数索引。多维数组由两个或多个整数索引。
                        </font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0032" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1"><a href="#c06-fig-0003" id="R_c06-fig-0003"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Figure 6-3</a> shows the
                mathematical notation for a two-dimensional array that has three rows and three columns. The first row
                has the values 1, 2, and 3, and the third row has the values 7, 8, and 9.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">图 6-3 显示了具有三行三列的二维数组的数学符号表示。第一行有值 1、2
                            和 3，第三行有值 7、8 和 9。</font>
                    </font>
                </font>
            </p>
            <figure data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <img
                    alt="Schematic illustration of a multidimensional array." class="center" src="images/c06f003.png" />
                <figcaption data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span class="figureLabel"
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a
                                href="#R_c06-fig-0003" id="c06-fig-0003" role="doc-backlink"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><b
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                    data-immersive-translate-paragraph="1">FIGURE 6-3<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">
                                              </font>
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">图 6-3</font>
                                        </font>
                                    </font></b></a></span></p>
                </figcaption>
            </figure>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">To declare this two-dimensional array with C#, you put a comma
                inside the brackets. The array is initialized by specifying the size of every dimension (also known as
                <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">rank</i>). Then the array
                elements can be accessed by using two integers with the indexer (code file <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Program.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">要在
                            C#中声明这个二维数组，你需要在括号内放入一个逗号。通过指定每个维度的尺寸（也称为秩）来初始化数组。然后可以使用两个整数通过索引器访问数组元素（代码文件 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Program.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0012"><code>int[,] twodim = new int[3, 3];</code>
<code>twodim[0, 0] = 1;</code>
<code>twodim[0, 1] = 2;</code>
<code>twodim[0, 2] = 3;</code>
<code>twodim[1, 0] = 4;</code>
<code>twodim[1, 1] = 5;</code>
<code>twodim[1, 2] = 6;</code>
<code>twodim[2, 0] = 7;</code>
<code>twodim[2, 1] = 8;</code>
<code>twodim[2, 2] = 9;</code></pre>
            <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <p id="c06-para-0035" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">After declaring an
                            array, you cannot change the rank.</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意：声明数组后，你不能改变其秩。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                </section>
            </aside>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">You can also initialize the two-dimensional array by using an
                array indexer if you know the values for the elements in advance. To initialize the array, one outer
                curly bracket is used, and every row is initialized by using curly brackets inside the outer curly
                brackets:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            你也可以使用数组索引器来初始化二维数组，如果你提前知道元素值的话。要初始化数组，使用一个外层大括号，并用内层大括号初始化每一行：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0013"><code>int[,] twodim = {</code>
<code>  {1, 2, 3},</code>
<code>  {4, 5, 6},</code>
<code>  {7, 8, 9}</code>
<code>};</code></pre>
            <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <p id="c06-para-0038" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">When using an array
                            initializer, you must initialize every element of the array. It is not possible to defer the
                            initialization of some values until later.</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意
                                    当使用数组初始化器时，你必须初始化数组中的每个元素。不可能将某些值的初始化推迟到以后。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                </section>
            </aside>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">By using two commas inside the brackets, you can declare a
                three-dimensional array by placing initializers for two-dimensional arrays inside brackets separated by
                commas:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            通过在括号内使用两个逗号，你可以通过在用逗号分隔的括号内放置二维数组的初始化器来声明一个三维数组：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0014"><code>int[,,] threedim = {</code>
<code>  { { 1, 2 }, { 3, 4 } },</code>
<code>  { { 5, 6 }, { 7, 8 } },</code>
<code>  { { 9, 10 }, { 11, 12 } }</code>
<code>};</code>
<code>Console.WriteLine(threedim[0, 1, 1]);</code></pre>
            <p id="c06-para-0040" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Using a <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> loop, you can
                iterate through all the items of a multidimensional array.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                            循环，你可以遍历多维数组的所有项。</font>
                    </font>
                </font>
            </p>
        </section> <span aria-label="158" epub:type="pagebreak" id="Page_158" role="doc-pagebreak"
            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
        <section aria-labelledby="head-2-54" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0017" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-54" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">JAGGED ARRAYS</h2>
            <p id="c06-para-0041" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">A two-dimensional array has a rectangular size (for example, 3 ×
                3 elements). A jagged array provides more flexibility in sizing the array. With a jagged array, every
                row can have a different size.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">二维数组具有矩形大小（例如，3×3
                            个元素）。锯齿形数组在调整数组大小时提供了更大的灵活性。在锯齿形数组中，每一行可以有不同的尺寸。</font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0042" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1"><a href="#c06-fig-0004" id="R_c06-fig-0004"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Figure 6-4</a> contrasts a
                two-dimensional array that has 3 × 3 elements with a jagged array. The jagged array shown contains three
                rows: the first row contains two elements, the second row contains six elements, and the third row
                contains three elements.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">图 6-4 对比了一个包含 3×3
                            个元素的二维数组和一个锯齿形数组。显示的锯齿形数组包含三行：第一行包含两个元素，第二行包含六个元素，第三行包含三个元素。</font>
                    </font>
                </font>
            </p>
            <figure data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <img
                    alt="Schematic illustration of two-dimensional array and jagged array." class="center"
                    src="images/c06f004.png" />
                <figcaption data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span class="figureLabel"
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a
                                href="#R_c06-fig-0004" id="c06-fig-0004" role="doc-backlink"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><b
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                    data-immersive-translate-paragraph="1">FIGURE 6-4<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">
                                              </font>
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">图 6-4</font>
                                        </font>
                                    </font></b></a></span></p>
                </figcaption>
            </figure>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">A jagged array is declared by placing one pair of opening and
                closing brackets after another. To initialize the jagged array, in the following code snippet an array
                initializer is used. The first array is initialized by items of arrays. Each of these items again is
                initialized with its own array initializer (code file <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Program.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            一个锯齿形数组是通过在另一个对之后放置一对开括号和闭括号来声明的。为了初始化锯齿形数组，在以下代码片段中使用了数组初始化器。第一个数组通过数组的项进行初始化。这些项中的每一个再次使用自己的数组初始化器进行初始化（代码文件
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Program.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0015"><code>int[][] jagged =</code>
<code>{</code>
<code>  new[] { 1, 2 },</code>
<code>  new[] { 3, 4, 5, 6, 7, 8 },</code>
<code>  new[] { 9, 10, 11 }</code>
<code>};</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">You can iterate through all the elements of a jagged array with
                nested <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code> loops. In
                the outer <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code> loop,
                every row is iterated, and the inner <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code> loop iterates
                through every element inside a row:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">你可以使用嵌套的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code>
                            层循环遍历所有 jagged 数组的元素。在外部 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code>
                            层循环中，遍历每一行，内部 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code>
                            层循环遍历行内的每个元素：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0016"><code>for (int row = 0; row &lt; jagged.Length; row++)</code>
<code>{</code>
<code>  for (int element = 0; element &lt; jagged[row].Length; element++)</code>
<code>  {</code>
<code>    Console.WriteLine($"row: {row}, element: {element}, " +</code>
<code>      $"value: {jagged[row][element]}");</code>
<code>  }</code>
<code>}</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">The output of the iteration displays the rows and every element
                within the rows:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">迭代输出的结果显示了行以及行内的每个元素：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0017"><code>row: 0, element: 0, value: 1</code>
<code>row: 0, element: 1, value: 2</code>
<code>row: 1, element: 0, value: 3</code>
<code>row: 1, element: 1, value: 4</code>
<code>row: 1, element: 2, value: 5</code>
<code>row: 1, element: 3, value: 6</code>
<code>row: 1, element: 4, value: 7</code>
<code>row: 1, element: 5, value: 8</code>
<code>row: 2, element: 0, value: 9</code>
<code>row: 2, element: 1, value: 10</code>
<code>row: 2, element: 2, value: 11</code></pre>
        </section> <span aria-label="159" epub:type="pagebreak" id="Page_159" role="doc-pagebreak"
            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
        <section aria-labelledby="head-2-55" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0018" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-55" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">ARRAY CLASS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">数组类</font>
                    </font>
                </font>
            </h2>
            <p id="c06-para-0046" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Declaring an array with brackets is a C# notation using the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class. Using the
                C# syntax behind the scenes creates a new class that derives from the abstract base class <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>. This makes it
                possible to use methods and properties that are defined with the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class with every
                C# array. For example, you've already used the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code> property or
                iterated through the array by using the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement. By
                doing this, you are using the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code> method
                of the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class.
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用方括号声明数组是 C#的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                            类的一种表示法。在幕后，使用 C#语法会创建一个继承自抽象基类 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                            的新类。这使得每个 C#数组都可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                            类中定义的方法和属性。例如，你已经使用过 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code>
                            属性，或者通过使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                            语句遍历过数组。通过这种方式，你实际上是在使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> 类的
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                            方法。</font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0047" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Other properties implemented by the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class are <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LongLength</code>, for arrays
                in which the number of items doesn't fit within an integer, and <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Rank</code>, to get the
                number of dimensions.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1"> <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                            类实现的其它属性有 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LongLength</code>
                            ，用于不适用于整数大小的数组，以及 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Rank</code>
                            ，用于获取维度的数量。</font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0048" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Let's take a look at other members of the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class by getting
                into various features.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">让我们通过查看各种特性来了解 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                            类的其他成员。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0019"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-142" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Creating Arrays <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">创建数组</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0049" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class is
                    abstract, so you cannot create an array by using a constructor. However, instead of using the C#
                    syntax to create array instances, it is also possible to create arrays by using the static <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CreateInstance</code>
                    method. This is extremely useful if you don't know the type of elements in advance because the type
                    can be passed to the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CreateInstance</code>
                    method as a <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Type</code>
                    object.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                                类是抽象的，因此你不能使用构造函数来创建数组。但是，除了使用 C#语法来创建数组实例外，还可以使用静态 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CreateInstance</code>
                                方法来创建数组。如果你事先不知道元素类型，这将非常有用，因为类型可以作为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Type</code>
                                对象传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CreateInstance</code>
                                方法。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The following example shows how to create an array of type
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> with a size
                    of <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">5</code>. The first
                    argument of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CreateInstance</code>
                    method requires the type of the elements, and the second argument defines the size. You can set
                    values with the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SetValue</code> method
                    and read values with the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetValue</code> method
                    (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">以下示例展示了如何创建一个类型为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                、大小为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">5</code> 的数组。
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CreateInstance</code>
                                方法的第一个参数需要元素类型，第二个参数定义大小。你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SetValue</code>
                                方法设置值，并使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetValue</code>
                                方法读取值（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArrays/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0018"><code>Array intArray1 = Array.CreateInstance(typeof(int), 5);</code>
<code>for (int i = 0; i &lt; 5; i++)</code>
<code>{</code>
<code>  intArray1.SetValue(3 * i, i);</code>
<code>}</code>
<code> </code>
<code>for (int i = 0; i &lt; 5; i++)</code>
<code>{</code>
<code>  Console.WriteLine(intArray1.GetValue(i));</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">You can also cast the created array to an array declared as
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int[]</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">您也可以将创建的数组转换为以 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int[]</code>
                                声明的数组：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0019"><code>int[] intArray2 = (int[])intArray1;</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CreateInstance</code>
                    method has many overloads to create multidimensional arrays and to create arrays that are not 0
                    based. The following example creates a two-dimensional array with 2 × 3 elements. The first
                    dimension is 1 based; the second dimension is 10 based:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CreateInstance</code>
                                方法具有许多重载，用于创建多维数组以及创建非 0 基数的数组。以下示例创建了一个具有 2 × 3 个元素的二维数组。第一维是 1 基数的；第二维是 10 基数的：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0020"><code>int[] lengths = { 2, 3 };</code>
<code>int[] lowerBounds = { 1, 10 };</code>
<code>Array racers = Array.CreateInstance(typeof(Person), lengths, lowerBounds);</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Setting the elements of the array, the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SetValue</code> method
                    accepts indices for every dimension:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">设置数组元素时， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SetValue</code>
                                方法接受每个维度的索引：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0021"><code>racers.SetValue(new Person("Alain", "Prost"), 1, 10);</code>
<code>racers.SetValue(new Person("Emerson", "Fittipaldi", 1, 11);</code>
<code>racers.SetValue(new Person("Ayrton", "Senna"), 1, 12);</code>
<code>racers.SetValue(new Person("Michael", "Schumacher"), 2, 10);</code>
<code>racers.SetValue(new Person("Fernando", "Alonso"), 2, 11);</code>
<code>racers.SetValue(new Person("Jenson", "Button"), 2, 12);</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1"><span aria-label="160" epub:type="pagebreak" id="Page_160"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>Although the array
                    is not 0 based, you can assign it to a variable with the normal C# notation. You just have to take
                    care not to cross the array boundaries:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">尽管数组不是从 0 开始，但你可以用普通的
                                C#语法将其赋值给一个变量。你只需要注意不要超出数组的边界：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0022"><code>Person[,] racers2 = (Person[,])racers;</code>
<code>Person first = racers2[1, 10];</code>
<code>Person last = racers2[2, 12];</code></pre>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0020"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-143" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Copying Arrays <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">复制数组</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0055" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Because arrays are reference types, assigning an array
                    variable to another variable just gives you two variables referencing the same array. For copying
                    arrays, the array implements the interface <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ICloneable</code>. The
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code> method
                    that is defined with this interface creates a shallow copy of the array.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                由于数组是引用类型，将一个数组变量赋值给另一个变量只是给你两个引用同一个数组的变量。要复制数组，数组实现了接口 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ICloneable</code>
                                。该接口定义的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code>
                                方法创建数组的浅拷贝。</font>
                        </font>
                    </font>
                </p>
                <p id="c06-para-0056" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">If the elements of the array are value types, as in the
                    following code segment, all values are copied (see <a href="#c06-fig-0005" id="R_c06-fig-0005"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Figure 6-5</a>):<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果数组的元素是值类型，如以下代码片段所示，所有值都会被复制（见图
                                6-5）：</font>
                        </font>
                    </font>
                </p>
                <figure data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <img
                        alt="Schematic illustration of the process of copying arrays." class="center"
                        src="images/c06f005.png" />
                    <figcaption data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span
                                class="figureLabel"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a
                                    href="#R_c06-fig-0005" id="c06-fig-0005" role="doc-backlink"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><b
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                        data-immersive-translate-paragraph="1">FIGURE 6-5<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 6-5</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
                <pre id="c06-code-0023"><code>int[] intArray1 = {1, 2};</code>
<code>int[] intArray2 = (int[])intArray1.Clone();</code> </pre>
                <p id="c06-para-0057" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">If the array contains reference types, only the references
                    are copied, not the elements. <a href="#c06-fig-0006" id="R_c06-fig-0006"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Figure 6-6</a> shows the
                    variables <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatles</code> and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatlesClone</code>,
                    where <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatlesClone</code> is
                    created by calling the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code> method from
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatles</code>. The
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> objects
                    that are referenced are the same for <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatles</code> and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatlesClone</code>. If
                    you change a property of an element of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatlesClone</code>, you
                    change the same object of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatles</code> (code file
                    <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArray/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果数组包含引用类型，则仅复制引用，不复制元素。图 6-6
                                显示了变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatles</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatlesClone</code>
                                ，其中 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatlesClone</code>
                                是通过从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatles</code>
                                调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code>
                                方法创建的。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatles</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatlesClone</code>
                                引用的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                对象是相同的。如果你更改 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatlesClone</code>
                                的某个元素的属性，你更改的是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">beatles</code>
                                的同一个对象（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SimpleArray/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <figure data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <img
                        alt="Schematic illustration of the process of copying arrays." class="center"
                        src="images/c06f006.png" />
                    <figcaption data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span
                                class="figureLabel"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a
                                    href="#R_c06-fig-0006" id="c06-fig-0006" role="doc-backlink"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><b
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                        data-immersive-translate-paragraph="1">FIGURE 6-6<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 6-6</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
                <pre id="c06-code-0024"><code>Person[] beatles = {</code>
<code>  new("John", "Lennon"),</code>
<code>  new("Paul", "McCartney")</code>
<code>};</code>
<code>Person[] beatlesClone = (Person[])beatles.Clone();</code> </pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Instead of using the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code> method, you
                    can use the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array.Copy</code> method,
                    which also creates a shallow copy. However, there's one important difference between <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code> and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Copy</code>
                    : <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code> creates
                    a new array; with <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Copy</code> you have to
                    pass an existing array with the same rank and enough elements.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">不要使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code>
                                方法，可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array.Copy</code>
                                方法，它也会创建一个浅拷贝。但是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Copy</code>
                                之间有一个重要区别： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clone</code>
                                创建一个新数组；使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Copy</code>
                                时，你必须传递一个具有相同秩且元素足够多的现有数组。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0059" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">If you need a
                                deep copy of an array containing reference types, you have to iterate the array and
                                create new objects.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意
                                        如果你需要一个包含引用类型的数组的深拷贝，你必须遍历数组并创建新对象。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0022"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-144" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Sorting <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">排序</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0060" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class uses
                    the Quicksort algorithm to sort the elements in the array. The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Sort</code> method
                    requires the interface <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code> to be
                    implemented by the elements in the array. Simple types such as <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">System.String</code> and
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">System.Int32</code>
                    implement <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>, so
                    you can sort elements containing these types.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                                类使用快速排序算法对数组中的元素进行排序。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Sort</code>
                                方法要求数组中的元素实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>
                                接口。简单类型如 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">System.String</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">System.Int32</code>
                                实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>
                                ，因此你可以对包含这些类型的元素进行排序。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">With the sample program, the array <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">names</code> contains
                    elements of type <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">string</code>, and this
                    array can be sorted (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过示例程序，数组 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">names</code>
                                包含类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">string</code>
                                的元素，并且这个数组可以进行排序（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0025"><code>string[] names = {</code>
<code>  "Lady Gaga",</code>
<code>  "Shakira",<span aria-label="161" epub:type="pagebreak" id="Page_161" role="doc-pagebreak"></span></code>
<code>  "Beyonce",</code>
<code>  "Ava Max"</code>
<code>};</code>
<code>Array.Sort(names);</code>
<code>foreach (var name in names)</code>
<code>{</code>
<code>  Console.WriteLine(name);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The output of the application shows the sorted result of the
                    array:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">应用程序的输出显示了数组的排序结果：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0026"><code>Ava Max</code>
<code>Beyonce</code>
<code>Lady Gaga</code>
<code>Shakira</code></pre>
                <p id="c06-para-0063" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">If you are using custom classes with the array, you must
                    implement the interface <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>. This
                    interface defines just one method, <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CompareTo</code>, which
                    must return 0 if the objects to compare are equal; a value smaller than 0 if the instance should go
                    before the object from the parameter; and a value larger than 0 if the instance should go after the
                    object from the parameter.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果你在使用数组时使用自定义类，你必须实现接口 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>
                                。这个接口定义了唯一一个方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CompareTo</code>
                                ，该方法必须返回 0 如果待比较的对象相等；返回一个小于 0 的值如果实例应该排在参数对象之前；返回一个大于 0 的值如果实例应该排在参数对象之后。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Change the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> record to
                    implement the interface <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable&lt;Person&gt;</code>.
                    The comparison is first done on the value of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code> by using
                    the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Compare</code>
                    method of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">String</code> class. If
                    the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code> has
                    the same value, the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code> is
                    compared (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/Person.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">将 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                记录改为实现接口 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable&lt;Person&gt;</code>
                                。首先通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">String</code>
                                类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Compare</code>
                                方法根据 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code>
                                的值进行比较。如果 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code>
                                的值相同，则比较 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/Person.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0027"><code>public record Person(string FirstName, string LastName) : IComparable&lt;Person&gt;</code>
<code>{</code>
<code>  public int CompareTo(Person? other)</code>
<code>  {</code>
<code>    if (other == null) return 1;</code>
<code>    int result = string.Compare(this.LastName, other.LastName);</code>
<code>    if (result == 0)</code>
<code>    {</code>
<code>      result = string.Compare(this.FirstName, other.FirstName);</code>
<code>    }</code>
<code>    return result;</code>
<code>  }</code>
<code>  //…</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Now it is possible to sort an array of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> objects by
                    the last name (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在可以通过姓氏对 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                对象数组进行排序（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0028"><code>Person[] persons = {</code>
<code>  new("Damon", "Hill"),</code>
<code>  new("Niki", "Lauda"),</code>
<code>  new("Ayrton", "Senna"),</code>
<code>  new("Graham", "Hill")</code>
<code>};</code>
<code> </code>
<code>Array.Sort(persons);</code>
<code>foreach (var p in persons)</code>
<code>{</code>
<code>  Console.WriteLine(p);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Using <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array.Sort</code> with
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> objects,
                    the output returns the names sorted by last name:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array.Sort</code>
                                与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                对象，输出将按姓氏排序：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0029"><code>Damon Hill</code>
<code>Graham Hill</code>
<code>Niki Lauda</code>
<code>Ayrton Senna</code></pre>
                <p id="c06-para-0067" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1"><span aria-label="162" epub:type="pagebreak" id="Page_162"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>If the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> object
                    should be sorted differently than the implementation within the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> class, a
                    comparer type can implement the interface <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparer&lt;T&gt;</code>.
                    This interface specifies the method <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Compare</code>, which
                    defines two arguments that should be compared. The return value is similar to the result of the
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CompareTo</code> method
                    that's defined with the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>
                    interface.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                对象需要与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                类中的实现方式不同进行排序，一个比较器类型可以实现接口 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparer&lt;T&gt;</code>
                                。该接口指定了方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Compare</code>
                                ，该方法定义了两个需要比较的参数。返回值类似于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CompareTo</code>
                                接口中定义的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>
                                方法的返回结果。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">With the sample code, the class <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonComparer</code>
                    implements the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparer&lt;Person&gt;</code>
                    interface to sort <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code> objects
                    either by <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code> or by
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code>. The
                    enumeration <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonCompareType</code>
                    defines the different sorting options that are available with <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonComparer</code>
                    : <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code> and
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code>. How
                    the compare should be done is defined with the constructor of the class <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonComparer</code>,
                    where a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonCompareType</code>
                    value is set. The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Compare</code> method is
                    implemented with a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">switch</code> statement
                    to compare either by <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code> or by
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code> (code
                    file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/PersonComparer.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在示例代码中， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonComparer</code>
                                类实现了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparer&lt;Person&gt;</code>
                                接口，用于按 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code>
                                或 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code>
                                对 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Person</code>
                                对象进行排序。枚举 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonCompareType</code>
                                定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonComparer</code>
                                可用的不同排序选项： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code>
                                。如何进行比较是通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonComparer</code>
                                类的构造函数中设置的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonCompareType</code>
                                值来定义的。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Compare</code>
                                方法使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">switch</code>
                                语句实现，用于按 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">LastName</code>
                                或 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">FirstName</code>
                                进行比较（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/PersonComparer.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0030"><code>public enum PersonCompareType</code>
<code>{</code>
<code>  FirstName,</code>
<code>  LastName</code>
<code>}</code>
<code> </code>
<code>public class PersonComparer : IComparer&lt;Person&gt;</code>
<code>{</code>
<code>  private PersonCompareType _compareType;</code>
<code>  public PersonComparer(PersonCompareType compareType) =&gt;</code>
<code>    _compareType = compareType;</code>
<code> </code>
<code>  public int Compare(Person? x, Person? y)</code>
<code>  {</code>
<code>    if (x is null &amp;&amp; y is null) return 0;</code>
<code>    if (x is null) return 1;</code>
<code>    if (y is null) return -1;</code>
<code> </code>
<code>    return _compareType switch</code>
<code>    {</code>
<code>      PersonCompareType.FirstName =&gt; x.FirstName.CompareTo(y.FirstName),</code>
<code>      PersonCompareType.LastName =&gt; x.LastName.CompareTo(y.LastName),</code>
<code>      _ =&gt; throw new ArgumentException("unexpected compare type")</code>
<code>    };</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Now you can pass a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonComparer</code>
                    object to the second argument of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array.Sort</code> method.
                    Here, the people are sorted by first name (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在你可以将一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">PersonComparer</code>
                                对象传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array.Sort</code>
                                方法的第二个参数。在这里，人们是按名字排序的（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SortingSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0031"><code>Array.Sort(persons, new PersonComparer(PersonCompareType.FirstName));</code>
<code>foreach (var p in persons)</code>
<code>{</code>
<code>  Console.WriteLine(p);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">persons</code> array is
                    now sorted by first name:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">persons</code>
                                数组现在按名字排序：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0032"><code>Ayrton Senna</code>
<code>Damon Hill</code>
<code>Graham Hill</code>
<code>Niki Lauda</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span aria-label="163"
                        epub:type="pagebreak" id="Page_163" role="doc-pagebreak"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span></p>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0072" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">The </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> class also
                                offers </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Sort</code> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> methods that
                                require a delegate as an argument. With this argument, you can pass a method to do the
                                comparison of two objects rather than relying on the </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> or </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparer</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> interfaces. <a
                                    href="c07.xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter
                                    7</a>, “Delegates, Lambdas, and Events,” discusses how to use delegates.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 The <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                                        类还提供了 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Sort</code>
                                        方法，这些方法需要一个委托作为参数。通过这个参数，你可以传递一个方法来比较两个对象，而不是依赖 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>
                                        或 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparer</code>
                                        接口。第 7 章“委托、Lambda 表达式和事件”讨论了如何使用委托。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
        </section>
        <section aria-labelledby="head-2-56" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0024" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-56" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">ARRAYS AS PARAMETERS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">数组作为参数</font>
                    </font>
                </font>
            </h2>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Arrays can be passed as parameters to methods and returned from
                methods. To return an array, you just have to declare the array as the return type, as shown with the
                following method <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetPersons</code>
                :<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            数组可以作为参数传递给方法，也可以从方法返回。要返回一个数组，你只需要将数组声明为返回类型，如下面的方法 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetPersons</code>
                            所示：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0033"><code>static Person[] GetPersons() =&gt;</code>
<code>  new Person[] {</code>
<code>    new Person("Damon", "Hill"),</code>
<code>    new Person("Niki", "Lauda"),</code>
<code>    new Person("Ayrton", "Senna"),</code>
<code>    new Person("Graham", "Hill")</code>
<code>  };</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">When passing arrays to a method, the array is declared with the
                parameter, as shown with the method <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">DisplayPersons</code>
                :<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">当将数组传递给方法时，数组在参数中声明，如下面的方法 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">DisplayPersons</code>
                            所示：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0034"><code>static void DisplayPersons(Person[] persons)</code>
<code>{</code>
<code>  //…</code>
<code>}</code></pre>
        </section>
        <section aria-labelledby="head-2-57" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0025" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-57" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">ENUMERATORS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">枚举器</font>
                    </font>
                </font>
            </h2>
            <p id="c06-para-0075" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">By using the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement, you
                can iterate elements of a collection (see <a href="c08.xhtml"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter 8</a>) without
                needing to know the number of elements inside the collection. The <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement uses
                an enumerator. <a href="#c06-fig-0007" id="R_c06-fig-0007"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Figure 6-7</a> shows the
                relationship between the client invoking the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> method and the
                collection. The array or collection implements the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code> interface
                with the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code> method.
                The <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                method returns an enumerator implementing the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code> interface.
                The interface <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code> is then
                used by the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                statement to iterate through the collection.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">通过使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                            语句，您可以迭代集合中的元素（参见第 8 章），而无需知道集合中元素的数量。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                            语句使用枚举器。图 6-7 显示了调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                            方法的客户端与集合之间的关系。数组或集合通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                            方法实现了 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                            接口。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                            方法返回一个实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                            接口的枚举器。然后 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                            接口被 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                            语句用来遍历集合。</font>
                    </font>
                </font>
            </p> <span aria-label="164" epub:type="pagebreak" id="Page_164" role="doc-pagebreak"
                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <figure data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <img
                    alt="Schematic illustration of the relationship between client, enumerator and collection."
                    class="center" src="images/c06f007.png" />
                <figcaption data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span class="figureLabel"
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a
                                href="#R_c06-fig-0007" id="c06-fig-0007" role="doc-backlink"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><b
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                    data-immersive-translate-paragraph="1">FIGURE 6-7<font
                                        class="notranslate immersive-translate-target-wrapper"
                                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">
                                              </font>
                                        <font
                                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                            data-immersive-translate-translation-element-mark="1">
                                            <font
                                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                data-immersive-translate-translation-element-mark="1">图 6-7</font>
                                        </font>
                                    </font></b></a></span></p>
                </figcaption>
            </figure>
            <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <p id="c06-para-0077" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">The </i><code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code><i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> method is defined
                            with the interface </i><code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code><i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">. The </i><code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code><i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> statement doesn't
                            really need this interface implemented in the collection class. It's enough to have a method
                            with the name </i><code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code><i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> that returns an
                            object implementing the </i><code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code><i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> interface.</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                    方法是通过接口 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                                    定义的。 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                    语句并不需要集合类实现这个接口。只要有一个名为 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                    的方法返回实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                    接口的对象就足够了。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                </section>
            </aside>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0027"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-145" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">IEnumerator Interface<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">枚举器接口 </font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0078" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement
                    uses the methods and properties of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                    interface to iterate all elements in a collection. For this, <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                    defines the property <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Current</code> to return
                    the element where the cursor is positioned and defines the method <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MoveNext</code> to move
                    to the next element of the collection. <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MoveNext</code> returns
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code> if there's
                    an element and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code> if no more
                    elements are available.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                接口的方法和属性来遍历集合中的所有元素。为此， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                定义了属性 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Current</code>
                                来返回光标所在位置的元素，并定义了方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MoveNext</code>
                                来移动到集合的下一个元素。如果存在元素， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MoveNext</code>
                                返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code>
                                ，如果没有更多元素，则返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code>
                                。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The generic version of the interface <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator&lt;T&gt;</code>
                    derives from the interface <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IDisposable</code> and
                    thus defines a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Dispose</code> method to
                    clean up resources allocated by the enumerator.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">接口 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator&lt;T&gt;</code>
                                的泛型版本继承自接口 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IDisposable</code>
                                ，因此定义了一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Dispose</code>
                                方法来清理枚举器分配的资源。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0080" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">The </i>
                            <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> interface also
                                defines the </i>
                            <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Reset</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> method for COM
                                interoperability. Many .NET enumerators implement this by throwing an exception of type
                            </i>
                            <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NotSupportedException</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                        接口还定义了用于 COM 互操作的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Reset</code>
                                        方法。许多 .NET 枚举器通过抛出类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NotSupportedException</code>
                                        的异常来实现此方法。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0029"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-146" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">foreach Statement <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">foreach 语句</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The C# <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement
                    is not resolved to a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement
                    in the IL code. Instead, the C# compiler converts the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement
                    to methods and properties of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                    interface. Here's a simple <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement
                    to iterate all elements in the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">persons</code> array and
                    display them person by person:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">C# 的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句在 IL 代码中不会解析为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句。相反，C# 编译器将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句转换为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                接口的方法和属性。这里有一个简单的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句，用于遍历 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">persons</code>
                                数组中的所有元素，并逐个显示它们：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0035"><code>foreach (var p in persons)</code>
<code>{</code>
<code>  Console.WriteLine(p);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement
                    is resolved to the following code fragment. First, the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                    method is invoked to get an enumerator for the array. Inside a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">while</code> loop, as
                    long as <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MoveNext</code>
                    returns <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code>,
                    the elements of the array are accessed using the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Current</code> property:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句解析为以下代码片段。首先，调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                方法以获取数组的枚举器。在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">while</code>
                                循环内部，只要 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MoveNext</code>
                                返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code>
                                ，就使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Current</code>
                                属性访问数组的元素：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0036"><code>IEnumerator&lt;Person&gt; enumerator = persons.GetEnumerator();</code>
<code>while (enumerator.MoveNext())</code>
<code>{</code>
<code>  Person p = enumerator.Current;</code>
<code>  Console.WriteLine(p);</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0030"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-147" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">yield Statement <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">yield 语句</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0083" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Using the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> statement,
                    it's easy to use the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code> and
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                    interfaces—the compiler converts the code to use the members of these interfaces. To create classes
                    implementing these interfaces, the compiler offers the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield</code> statement.
                    When you use <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code> and
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield break</code>, the
                    compiler generates a state machine to iterate through a collection implementing the members of these
                    interfaces. <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                    returns one element of a collection and moves the position to the next element; <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield break</code> stops
                    the iteration. The iteration also ends when the method is completed, so a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield break</code> is
                    only needed to stop earlier.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句，可以轻松使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                接口——编译器将代码转换为使用这些接口的成员。要创建实现这些接口的类，编译器提供了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield</code>
                                语句。当你使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield break</code>
                                时，编译器会生成一个状态机来遍历实现这些接口成员的集合。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                                返回集合中的一个元素并将位置移动到下一个元素； <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield break</code>
                                停止迭代。当方法完成时，迭代也会结束，因此只需要 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield break</code>
                                来提前停止。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1"><span aria-label="165" epub:type="pagebreak" id="Page_165"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>The next example
                    shows the implementation of a simple collection using the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                    statement. The class <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">HelloCollection</code>
                    contains the method <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>. The
                    implementation of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                    method contains two <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                    statements where the strings <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Hello</code> and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">World</code> are returned
                    (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">YieldSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">下一个示例展示了使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                                语句实现一个简单集合。类 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">HelloCollection</code>
                                包含方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                方法的实现包含两个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                                语句，其中返回字符串 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Hello</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">World</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">YieldSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0037"><code>class HelloCollection</code>
<code>{</code>
<code>  public IEnumerator&lt;string&gt; GetEnumerator()</code>
<code>  {</code>
<code>    yield return "Hello";</code>
<code>    yield return "World";</code>
<code>  }</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0086" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">A method or
                                property that contains </i>yield<i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> statements is
                                also known as an iterator block. An iterator block must be declared to return an </i>
                            <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> or </i>
                            <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> interface or the
                                generic versions of these interfaces. This block may contain multiple </i>
                            <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> or </i>
                            <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield break</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> statements; a
                            </i>
                            <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">return</code>
                            <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> statement is not
                                allowed.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意：包含 yield
                                        语句的方法或属性也称为迭代器块。迭代器块必须声明为返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                        或 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                                        接口或这些接口的泛型版本。该块可以包含多个 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                                        或 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield break</code>
                                        语句；不允许使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">return</code>
                                        语句。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Now it is possible to iterate through the collection using a
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                    statement:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                语句遍历集合：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0038"><code>public void HelloWorld()</code>
<code>{</code>
<code>  HelloCollection helloCollection = new();</code>
<code>  foreach (string s in helloCollection)</code>
<code>  {</code>
<code>    Console.WriteLine(s);</code>
<code>  }</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0089" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Remember that the
                            </i> <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <code
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <i>yield</i> </code>
                            </i> <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> statement
                                produces an enumerator and not just a list filled with items. This enumerator is invoked
                                by the </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> statement. As
                                each item is accessed from the </i> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">, the enumerator
                                is accessed. This makes it possible to iterate through huge amounts of data without
                                reading all the data into memory in one turn.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意： <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> <i>yield</i> </code>
                                        语句生成的是一个枚举器，而不仅仅是填充了项的列表。这个枚举器由 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                        语句调用。当从 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                        访问每个项时，就会访问枚举器。这使得能够遍历大量数据，而无需一次性将所有数据读入内存。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
                <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0033"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                    <h4 id="head-4-32" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1">Different Ways to Iterate Through Collections<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">遍历集合的不同方法</font>
                            </font>
                        </font>
                    </h4>
                    <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1">In a slightly larger and more realistic way than the
                        Hello World example, you can use the <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                        statement to iterate through a collection in different ways. The class <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MusicTitles</code>
                        enables iterating the titles in a default way with the <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                        method, in reverse order with the <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Reverse</code>
                        method, and through a subset with the <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Subset</code> method
                        (code file <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">YieldSample/MusicTitles.cs</code>):
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">与 Hello World
                                    示例相比，在稍微更大和更现实的方式中，你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield return</code>
                                    语句以不同的方式遍历集合。类 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MusicTitles</code>
                                    通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                    方法以默认方式遍历标题，通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Reverse</code>
                                    方法以逆序遍历，通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Subset</code>
                                    方法遍历子集（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">YieldSample/MusicTitles.cs</code>
                                    ）：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c06-code-0039"><code>public class MusicTitles</code>
<code>{</code>
<code>  string[] names = {"Tubular Bells", "Hergest Ridge", "Ommadawn", "Platinum"};</code>
<code> </code>
<code>  public IEnumerator&lt;string&gt; GetEnumerator()</code>
<code>  {</code>
<code>    for (int i = 0; i &lt; 4; i++)<span aria-label="166" epub:type="pagebreak" id="Page_166" role="doc-pagebreak"></span></code>
<code>    {</code>
<code>      yield return names[i];</code>
<code>    }</code>
<code>  }</code>
<code> </code>
<code>  public IEnumerable&lt;string&gt; Reverse()</code>
<code>  {</code>
<code>    for (int i = 3; i&gt;= 0; i--)</code>
<code>    {</code>
<code>      yield return names[i];</code>
<code>    }</code>
<code>  }</code>
<code> </code>
<code>  public IEnumerable&lt;string&gt; Subset(int index, int length)</code>
<code>  {</code>
<code>    for (int i = index; i &lt; index + length; i++)</code>
<code>    {</code>
<code>      yield return names[i];</code>
<code>    }</code>
<code>  }</code>
<code>}</code></pre>
                    <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                        <section class="feature2"
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <p id="c06-para-0092" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                                data-immersive-translate-paragraph="1"><b
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">The default
                                    iteration supported by a class is the </i> <code
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> method, which
                                    is defined to return </i> <code
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">. Named
                                    iterations return </i> <code
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                                <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">.</i>
                                <font class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">注意 类默认支持的迭代是 <code
                                                xmlns="http://www.w3.org/1999/xhtml"
                                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                            方法，该方法定义返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                                            。命名迭代返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                                            。</font>
                                    </font>
                                </font>
                            </p>
                            <div class="bottom hr"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                                <hr />
                            </div>
                        </section>
                    </aside>
                    <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1">The client code to iterate through the string array first
                        uses the <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                        method, which you don't have to write in your code because it is used by default with the
                        implementation of the <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                        statement. Then the titles are iterated in reverse, and finally a subset is iterated by passing
                        the index and number of items to iterate to the <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Subset</code> method
                        (code file <code
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">YieldSample/Program.cs</code>):
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">客户端代码遍历字符串数组时，首先使用 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetEnumerator</code>
                                    方法，你不需要在代码中编写它，因为 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">foreach</code>
                                    语句的实现默认会使用它。然后反向遍历标题，最后通过向 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Subset</code>
                                    方法传递索引和要遍历的项目数量来遍历子集（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">YieldSample/Program.cs</code>
                                    ）：</font>
                            </font>
                        </font>
                    </p>
                    <pre id="c06-code-0040"><code>MusicTitles titles = new();</code>
<code>foreach (var title in titles)</code>
<code>{</code>
<code>  Console.WriteLine(title);</code>
<code>}</code>
<code>Console.WriteLine();</code>
<code> </code>
<code>Console.WriteLine("reverse");</code>
<code>foreach (var title in titles.Reverse())</code>
<code>{</code>
<code>  Console.WriteLine(title);</code>
<code>}</code>
<code>Console.WriteLine();</code>
<code> </code>
<code>Console.WriteLine("subset");</code>
<code>foreach (var title in titles.Subset(2, 2))</code>
<code>{</code>
<code>  Console.WriteLine(title);</code>
<code>}</code></pre>
                </section>
            </section>
        </section> <span aria-label="167" epub:type="pagebreak" id="Page_167" role="doc-pagebreak"
            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
        <section aria-labelledby="head-2-58" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0035" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-58" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">USING SPAN WITH ARRAYS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用 SPAN 与数组</font>
                    </font>
                </font>
            </h2>
            <p id="c06-para-0094" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">For a fast way to access managed or unmanaged continuous memory,
                you can use the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> struct.
                One example where <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> can be
                used is an array; the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> struct
                holds continuous memory behind the scenes. Another example of a use for <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> is a
                long string.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">要快速访问托管或非托管连续内存，你可以使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            结构体。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            可以使用的一个例子是数组； <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            结构体在后台持有连续内存。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            的另一个使用例子是长字符串。</font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0095" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Using <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>, you can
                directly access array elements. The elements of the array are not copied, but they can be used directly,
                which is faster than a copy.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            ，你可以直接访问数组元素。数组元素不会被复制，但可以直接使用，这比复制更快。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">In the following code snippet, first a simple <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> array is created
                and initialized. A <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;int&gt;</code> object
                is created, invoking the constructor and passing the array to the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;int&gt;</code>. The
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> type
                offers an indexer, and thus the elements of the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> can be
                accessed using this indexer. Here, the second element is changed to the value <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">11</code>. Because the array
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">arr1</code> is referenced
                from the span, the second element of the array is changed by changing the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> element.
                Finally, the span is returned from this method because it is used within top-level statements to pass it
                on to the next methods that follow (code file <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SpanSample/Program.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在以下代码片段中，首先创建并初始化了一个简单的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                            数组。创建了一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;int&gt;</code>
                            对象，调用其构造函数并将数组传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;int&gt;</code>
                            。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            类型提供了一个索引器，因此可以使用该索引器访问 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            的元素。这里将第二个元素更改为值 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">11</code> 。由于数组
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">arr1</code> 从
                            span 引用，通过更改 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            元素会改变数组的第二个元素。最后，该方法返回 span ，因为它在顶层语句中使用，用于传递给后续的下一个方法（代码文件 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SpanSample/Program.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0041"><code>Span&lt;int&gt; IntroSpans()</code>
<code>{</code>
<code>  int[] arr1 = { 1, 4, 5, 11, 13, 18 };</code>
<code>  <b>Span&lt;int&gt; span1 = new(arr1);</b></code>
<code>  <b>span1[1] = 11;</b></code>
<code>  Console.WriteLine($"arr1[1] is changed via span1[1]: {arr1[1]}");</code>
<code>  return span1;</code>
<code>}</code></pre>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0036"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-148" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Creating Slices <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">创建切片</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0097" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">A powerful feature of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> is
                    that you can use it to access parts, or <i
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">slices</i>, of an array.
                    By using the slices, the array elements are not copied; they're directly accessed from the span.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                的一个强大功能是你可以使用它来访问数组的部分，或切片。通过使用切片，数组元素不会被复制；它们直接从 span 访问。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The following code snippet shows two ways to create slices.
                    With the first one, a constructor overload is used to pass the start and length of the array that
                    should be used. With the variable <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span3</code> that
                    references this newly created <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;int&gt;</code>,
                    it's only possible to access three elements of the array <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">arr2</code>, starting
                    with the fourth element. Another overload of the constructor exists where you can pass just the
                    start of the slice. With this overload, the remains of the array are taken until the end. You can
                    also create a slice from a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                    object, invoking the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Slice</code> method.
                    Similar overloads exist here. With the variable <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code>, the
                    previously created <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code> is used to
                    create a slice with four elements starting with the third element of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code> (code file
                    <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SpanSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                以下代码片段展示了两种创建切片的方法。在第一种方法中，使用了构造函数重载来传递应使用的数组的起始位置和长度。通过引用这个新创建的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;int&gt;</code>
                                的变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span3</code>
                                ，只能访问数组 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">arr2</code>
                                的三个元素，从第四个元素开始。构造函数还存在另一个重载版本，可以只传递切片的起始位置。使用这个重载版本，会获取数组剩余部分直到末尾。你也可以从一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                对象创建切片，调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Slice</code>
                                方法。这里也存在类似的重载。使用变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code>
                                ，利用先前创建的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code>
                                来创建一个从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code>
                                的第三个元素开始的、包含四个元素的切片（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SpanSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0042"><code>private static Span&lt;int&gt; CreateSlices(Span&lt;int&gt; span1)</code>
<code>{</code>
<code>  Console.WriteLine(nameof(CreateSlices));</code>
<code>  int[] arr2 = { 3, 5, 7, 9, 11, 13, 15 };</code>
<code>  Span&lt;int&gt; span2 = new(arr2);</code>
<code>  <b>Span&lt;int&gt; span3 = new(arr2, start: 3, length: 3);</b></code>
<code>  <b>Span&lt;int&gt; span4 = span1.Slice(start: 2, length: 4);</b></code>
<code> </code>
<code>  DisplaySpan("content of span3", span3);</code>
<code>  DisplaySpan("content of span4", span4);</code>
<code>  Console.WriteLine();</code>
<code>  return span2;</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1"><span aria-label="168" epub:type="pagebreak" id="Page_168"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>You use the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">DisplaySpan</code> method
                    to display the contents of a span. The following code snippet makes use of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan</code>. You
                    can use this span type if you don't need to change the content that the span references, which is
                    the case in the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">DisplaySpan</code>
                    method. <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                    is discussed later in this chapter in more detail:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">您使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">DisplaySpan</code>
                                方法来显示 span 的内容。以下代码片段使用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan</code>
                                。如果您不需要更改 span 所引用的内容，可以使用这种 span 类型，这适用于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">DisplaySpan</code>
                                方法。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                                将在本章后面更详细地讨论：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0043"><code>private static void DisplaySpan(string title, ReadOnlySpan&lt;int&gt; span)</code>
<code>{</code>
<code>  Console.WriteLine(title);</code>
<code>  for (int i = 0; i &lt; span.Length; i++)</code>
<code>  {</code>
<code>    Console.Write($"{span[i]}.");</code>
<code>  }</code>
<code>  Console.WriteLine();</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">When you run the application, the content of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span3</code> and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code> is shown—a
                    subset of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">arr2</code> and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">arr1</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当您运行应用程序时，显示 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span3</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code>
                                的内容—— <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">arr2</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">arr1</code>
                                的子集：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0044"><code>content of span3</code>
<code>9.11.13.</code>
<code>content of span4</code>
<code>6.8.10.12.</code></pre>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0102" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> is safe from
                                crossing the boundaries. If you're creating spans that exceed the contained array
                                length, an exception of type </i><code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArgumentOutOfRangeException</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> is thrown. Read
                                <a href="c10.xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter
                                    10</a> for more information on exception handling.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                        不会跨越边界。如果您创建的 span 超出了包含数组的长度，将抛出类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArgumentOutOfRangeException</code>
                                        的异常。有关异常处理的更多信息，请阅读第 10 章。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0038"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-149" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Changing Values Using Spans <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 Span 修改值</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0103" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">You've seen how to directly change elements of the array that
                    are referenced by the span using the indexer of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                    type. There are more options as shown in the following code snippet.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你已经看到如何使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                类型的索引器直接更改由 span 引用的数组元素。以下代码片段展示了更多选项。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">You can invoke the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clear</code> method,
                    which fills a span containing <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> types with
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">0</code>
                    ; you can invoke the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Fill</code> method to
                    fill the span with the value passed to the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Fill</code> method; and
                    you can copy a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> to
                    another <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>.
                    With the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CopyTo</code>
                    method, if the destination span is not large enough, an exception of type <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArgumentException</code>
                    is thrown. You can avoid this outcome by using the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">TryCopyTo</code> method.
                    This method doesn't throw an exception if the destination span is not large enough; instead, it
                    returns <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code> as
                    being not successful with the copy (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SpanSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你可以调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clear</code>
                                方法，该方法用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">0</code> 填充包含
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                类型的 span；你可以调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Fill</code>
                                方法用传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Fill</code>
                                方法的值填充 span；你可以将一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                复制到另一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CopyTo</code>
                                方法时，如果目标 span 的大小不够，会抛出类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArgumentException</code>
                                的异常。你可以通过使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">TryCopyTo</code>
                                方法来避免这种情况。如果目标 span 的大小不够，该方法不会抛出异常，而是返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code>
                                表示复制未成功（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SpanSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0045"><code>private static void ChangeValues(Span&lt;int&gt; span1, Span&lt;int&gt; span2)</code>
<code>{</code>
<code>  Console.WriteLine(nameof(ChangeValues));</code>
<code>  Span&lt;int&gt; span4 = span1.Slice(start: 4);</code>
<code>  <b>span4.Clear();</b></code>
<code>  DisplaySpan("content of span1", span1);</code>
<code>  Span&lt;int&gt; span5 = span2.Slice(start: 3, length: 3);</code>
<code>  <b>span5.Fill(42);</b></code>
<code>  DisplaySpan("content of span2", span2);</code>
<code>  <b>span5.CopyTo(span1);</b></code>
<code>  DisplaySpan("content of span1", span1);</code>
<code> <span aria-label="169" epub:type="pagebreak" id="Page_169" role="doc-pagebreak"></span></code>
<code>  if (!<b>span1.TryCopyTo(span4)</b>)</code>
<code>  {</code>
<code>    Console.WriteLine("Couldn't copy span1 to span4 because span4 is " +</code>
<code>      "too small");</code>
<code>    Console.WriteLine($"length of span4: {span4.Length}, length of " + </code>
<code>      $"span1: {span1.Length}");</code>
<code>  }</code>
<code>  Console.WriteLine();</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">When you run the application, you can see the content of
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code> where the
                    last two numbers have been cleared using <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code>, the content
                    of <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span2</code> where
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span5</code> was used
                    to fill the value <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">42</code> with three
                    elements, and again the content of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code> where the
                    first three numbers have been copied over from <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span5</code>. Copying
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code> to <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code> was not
                    successful because <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code> has just a
                    length of 4, whereas <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code> has a length
                    of 6:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你运行应用程序时，你可以看到 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code>
                                的内容，其中最后两个数字已使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code>
                                清除， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span2</code>
                                的内容，其中使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span5</code>
                                用三个元素填充了值 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">42</code>
                                ，以及再次看到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code>
                                的内容，其中前三个数字已从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span5</code>
                                复制过来。将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code>
                                复制到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code>
                                不成功，因为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span4</code>
                                的长度仅为 4，而 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">span1</code>
                                的长度为 6：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0046"><code>content of span1</code>
<code>2.11.6.8.0.0.</code>
<code>content of span2</code>
<code>3.5.7.42.42.42.15.</code>
<code>content of span1</code>
<code>42.42.42.8.0.0.</code>
<code>Couldn't copy span1 to span4 because span4 is too small</code>
<code>length of span4: 2, length of span1: 6</code></pre>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0039"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-150" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">ReadOnly Spans<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">只读跨度</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0106" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">If you need only read-access to an array segment, you can use
                    <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                    as was already shown in the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">DisplaySpan</code>
                    method. With <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>,
                    the indexer is read-only, and this type doesn't offer <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clear</code> and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Fill</code> methods. You
                    can, however, invoke the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CopyTo</code> method to
                    copy the content of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                    to a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果你只需要对数组的某个片段进行只读访问，你可以像之前在 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">DisplaySpan</code>
                                方法中所示的那样使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                                。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                                时，索引器是只读的，这种类型不提供 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Clear</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Fill</code>
                                方法。不过，你可以调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">CopyTo</code>
                                方法将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                                的内容复制到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The following code snippet creates <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">readOnlySpan1</code> from
                    an array with the constructor of <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>.
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">readOnlySpan2</code>
                    and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">readOnlySpan3</code> are
                    created by direct assignments from <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;int&gt;</code>
                    and <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int[]</code>.
                    Implicit cast operators are available with <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                    (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SpanSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">下面的代码片段展示了如何使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                                构造函数从数组创建 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">readOnlySpan1</code>
                                。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">readOnlySpan2</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">readOnlySpan3</code>
                                是通过直接从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;int&gt;</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int[]</code>
                                赋值创建的。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ReadOnlySpan&lt;T&gt;</code>
                                提供了隐式转换运算符（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SpanSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0047"><code>void ReadonlySpan(Span&lt;int&gt; span1)</code>
<code>{</code>
<code>  Console.WriteLine(nameof(ReadonlySpan));</code>
<code>  int[] arr = span1.ToArray();</code>
<code>  <b>ReadOnlySpan&lt;int&gt; readOnlySpan1 = new(arr);</b></code>
<code>  DisplaySpan("readOnlySpan1", readOnlySpan1);</code>
<code> </code>
<code>  ReadOnlySpan&lt;int&gt; readOnlySpan2 = span1;</code>
<code>  DisplaySpan("readOnlySpan2", readOnlySpan2);</code>
<code>  <b>ReadOnlySpan&lt;int&gt; readOnlySpan3 = arr;</b></code>
<code>  DisplaySpan("readOnlySpan3", readOnlySpan3);</code>
<code>  Console.WriteLine();</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0109" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">How to implement
                                implicit cast operators is discussed in <a href="c05.xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter
                                    5</a>, “Operators and Casts.” Read more information on spans in <a href="c13.xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter
                                    13</a>, “Managed and Unmanaged Memory.”</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意
                                        如何实现隐式转换运算符在第五章“运算符和类型转换”中讨论。有关跨度的更多信息，请参阅第十三章“托管和非托管内存”。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span aria-label="170"
                        epub:type="pagebreak" id="Page_170" role="doc-pagebreak"
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span></p>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0110" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Previous editions
                                of this book demonstrated the use of </i><code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArraySegment&lt;T&gt;</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">. Although
                            </i><code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArraySegment&lt;T&gt;</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> is still
                                available, it has some shortcomings, and you can use the more flexible </i><code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> as a
                                replacement. In case you're already using </i><code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArraySegment&lt;T&gt;</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">, you can keep
                                the code and interact with spans. The constructor of </i><code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> also allows
                                passing an </i><code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArraySegment&lt;T&gt;</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> to create a
                            </i><code
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code><i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> instance.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意：本书之前的版本展示了 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArraySegment&lt;T&gt;</code>
                                        的使用。虽然 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArraySegment&lt;T&gt;</code>
                                        仍然可用，但它存在一些缺点，你可以使用更灵活的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                        作为替代。如果你已经在使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArraySegment&lt;T&gt;</code>
                                        ，可以保留代码并与之交互。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                        的构造函数也允许传递一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArraySegment&lt;T&gt;</code>
                                        来创建一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                                        实例。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
        </section>
        <section aria-labelledby="head-2-59" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0042" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-59" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">INDICES AND RANGES<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">索引和范围</font>
                    </font>
                </font>
            </h2>
            <p id="c06-para-0111" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Starting with C# 8, indices and ranges based on the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> and <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code> types were
                included, along with the range and hat operators. Using the hat operator, you can access elements
                counting from the end.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">从 C# 8 开始，基于 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> 和
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code>
                            类型的索引和范围被引入，同时还包括了范围和帽子运算符。使用帽子运算符，你可以从末尾开始计数访问元素。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0043"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-151" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Indices and the Hat Operator <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">索引和帽子运算符</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Let's start with the following array, which consists of nine
                    integer values (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">让我们从一个包含九个整数值的数组开始（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0048"><code>int[] data = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The traditional way to access the first and last elements of
                    this array is to use the indexer implemented with the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class, pass
                    an integer value for the nth element starting with 0 for the first element, and use the length minus
                    1 for the last element:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">传统上访问该数组的第一个和最后一个元素的方法是使用以 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code>
                                类实现的索引器，为第 n 个元素传递整数值，从 0 开始为第一个元素，并使用长度减 1 为最后一个元素：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0049"><code>int first1 = data[0];</code>
<code>int last1 = data[data.Length - 1];</code>
<code>Console.WriteLine($"first: {first1}, last: {last1}");</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">With the hat operator (<code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^)</code>, you can use
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^1</code> to access the
                    last element, and the calculation based on the length is no longer necessary:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用帽子运算符（ <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^)</code>
                                ），你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^1</code>
                                来访问最后一个元素，而基于长度的计算不再必要：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0050"><code>int last2 = data[^1];</code>
<code>Console.WriteLine(last2);</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Behind the scenes, the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> struct type
                    is used. An implicit cast from <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> to <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> is
                    implemented, so you can assign <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> values to the
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> type.
                    Using the hat operator, the compiler creates an <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> that
                    initializes the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IsFromEnd</code> property
                    to <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code>. Passing
                    the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> to an
                    indexer, the compiler converts the value to an <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>. If the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> starts from
                    the end, calculation is done with either a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code> or a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Count</code> property
                    (depending on what property is available):<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在幕后，使用的是 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                结构类型。实现了从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> 到
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                的隐式转换，因此你可以将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                值赋给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                类型。使用帽子运算符，编译器创建一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                ，它将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IsFromEnd</code>
                                属性初始化为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code>
                                。将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                传递给索引器，编译器将值转换为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                。如果 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                从末尾开始，计算将使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code>
                                或 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Count</code>
                                属性（取决于哪个属性可用）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0051"><code>Index firstIndex = 0;</code>
<code>Index lastIndex = ^1;</code>
<code>int first3 = data[firstIndex];</code>
<code>int last3 = data[lastIndex];</code>
<code>Console.WriteLine($"first: {first3}, last: {last3}");</code></pre>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0044"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-152" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Ranges <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">范围</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">To access a range of the array, the range operator (<code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code>) can be used
                    with the underlying <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code> type. In the
                    sample code, the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ShowRange</code> method
                    is implemented to display the values of an array with a string output (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要访问数组的某个范围，可以使用范围运算符（ <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code>
                                ）与底层 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code>
                                类型结合。在示例代码中，实现了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ShowRange</code>
                                方法来以字符串形式输出数组的值（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0052"><span aria-label="171" epub:type="pagebreak" id="Page_171" role="doc-pagebreak"></span>
<code>void ShowRange(string title, int[] data)</code>
<code>{</code>
<code>  Console.WriteLine(title);</code>
<code>  Console.WriteLine(string.Join(" ", data));</code>
<code>  Console.WriteLine();</code>
<code>}</code></pre>
                <p id="c06-para-0117" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">By invoking this method with different values passed using
                    the range operator, you can see the various forms of ranges. A range is defined with <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code> embedded with
                    an <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> on the
                    left and an <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> on the
                    right. Starting with <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code> and omitting
                    the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> from
                    the left side just starts from the beginning. Omitting the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> from the
                    right side, the range goes up to the end. Using <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code> with the array
                    just returns the complete array.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                通过使用范围运算符传递不同的值来调用此方法，你可以看到各种范围形式。范围由 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code>
                                嵌入，左侧为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                ，右侧为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                。从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code>
                                开始并省略左侧的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                ，则从开头开始。省略右侧的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                ，范围会到末尾。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code>
                                与数组结合，只会返回完整数组。</font>
                        </font>
                    </font>
                </p>
                <p id="c06-para-0118" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> on the left
                    side specifies an inclusive value, whereas the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> on the right
                    side is exclusive. With the end of the range, you need to specify the element following the last
                    element you want to access. When the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> type was
                    used before, you've seen that <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^1</code> references the
                    last value of the collection. When using the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> on the right
                    side of a range, you must specify <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^0</code> to address the
                    element after the last element (remember the right side of the range is exclusive).<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">左侧的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                指定一个包含值，而右侧的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                是排他的。对于范围的末尾，你需要指定你想要访问的最后一个元素之后的元素。之前使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                类型时，你看到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^1</code>
                                引用了集合的最后一个值。当在范围的右侧使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                时，你必须指定 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^0</code>
                                来引用最后一个元素之后的元素（记住范围的右侧是排他的）。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">With the code sample, a full range is used (<code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code>), the first
                    three elements are passed with <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">0..3</code>
                    ; the fourth to the sixth elements are passed with <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">3..6</code>
                    ; and counting from the end, the last three elements are passed with <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^3..^0</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过代码示例，使用完整范围（ <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">..</code>
                                ），前三个元素通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">0..3</code>
                                传递；第四到第六个元素通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">3..6</code>
                                传递；从末尾开始数，最后三个元素通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">^3..^0</code>
                                传递：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0053"><code>ShowRange("full range", data[..]);</code>
<code>ShowRange("first three", data[0..3]);</code>
<code>ShowRange("fourth to sixth", data[3..6]);</code>
<code>ShowRange("last three", data[^3..^0]);</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Behind the scenes, the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code> struct type
                    is used, and you can assign ranges to variables:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在幕后，使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code>
                                结构体类型，你可以将范围赋值给变量：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0054"><code>Range fullRange = ..;</code>
<code>Range firstThree = 0..3;</code>
<code>Range fourthToSixth = 3..6;</code>
<code>Range lastThree = ^3..^0;</code></pre>
                <p id="c06-para-0121" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code> type
                    specifies a constructor that passes two <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code> values for
                    the start and the end, <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">End</code> and <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Start</code> properties
                    that return an <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>, and a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetOffsetAndLength</code>
                    method that returns a tuple consisting of the offset and length of a range.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code>
                                类型指定了一个构造函数，该构造函数传递两个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                值作为起始和结束， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">End</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Start</code>
                                属性返回一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Index</code>
                                ，以及一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetOffsetAndLength</code>
                                方法返回一个包含范围偏移量和长度的元组。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0045"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-153" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Efficiently Changing Array Content <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">高效更改数组内容</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0122" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Using a range of an array, the array elements are copied.
                    Changing values within the range, the original values of the array do not change. However, as
                    described in the section “Using Span with Arrays,” a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code> allows
                    accessing a slice of an array directly. The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code> type also
                    supports indices and ranges, and you can change the content of an array by accessing a range of the
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code> type.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                使用数组的范围，数组元素会被复制。在范围内更改值，数组原始值不会改变。然而，正如“使用 Span 与数组”一节所述， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code>
                                允许直接访问数组的切片。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code>
                                类型也支持索引和范围，你可以通过访问 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code>
                                类型的范围来更改数组内容。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The following code snippet demonstrates accessing a slice of
                    an array and changing the first element of the slice; the original value of the array didn't change
                    because a copy was done. In the code lines that follow, a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code> is created to
                    access the array using the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">AsSpan</code> method.
                    With this <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code>,
                    the range operator is used, which in turn invokes the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Slice</code> method of
                    the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code>.
                    Changing values from this slice, the array is directly accessed and changed using an indexer on the
                    slice (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                以下代码片段展示了如何访问数组的切片并更改切片的第一个元素；由于进行了复制，数组的原始值没有改变。在接下来的代码行中，使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">AsSpan</code>
                                方法创建了一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code>
                                来访问数组。通过这个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code>
                                ，使用范围运算符，进而调用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span</code> 的
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Slice</code>
                                方法。从这个切片更改值时，使用切片上的索引器直接访问并更改数组（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0055"><code>var slice1 = data[3..5];</code>
<code>slice1[0] = 42;</code>
<code>Console.WriteLine($"value in array didn't change: {data[3]}, " + </code>
<code>  $"value from slice: {slice1[0]}");</code>
<code> <span aria-label="172" epub:type="pagebreak" id="Page_172" role="doc-pagebreak"></span></code>
<code>var sliceToSpan = data.AsSpan()[3..5];</code>
<code>sliceToSpan[0] = 42;</code>
<code>Console.WriteLine($"value in array: {data[3]}, value from slice: {sliceToSpan[0]}");</code></pre>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0046"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-154" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Indices and Ranges with Custom Collections <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">自定义集合中的索引和范围</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">To support indices and ranges with custom collections, not a
                    lot of work is required. To support the hat operator, the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MyCollection</code> class
                    implements an indexer and the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code> property.
                    To support ranges, you can either create a method that receives a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code> type or—a
                    simpler way—create a method with the name <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Slice</code> that has two
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> parameters
                    and can have the return type you need. The compiler converts the range to calculate the start and
                    length (code file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/MyCollection.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要支持自定义集合的索引和范围，不需要太多工作。要支持帽子运算符，
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">MyCollection</code>
                                类实现了一个索引器和一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code>
                                属性。要支持范围，你可以创建一个接收 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Range</code>
                                类型的方法，或者——一个更简单的方法——创建一个名为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Slice</code>
                                的方法，该方法有两个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                参数，并可以返回你需要的类型。编译器将范围转换为计算起始位置和长度（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/MyCollection.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0056"><code>using System;</code>
<code>using System.Linq;</code>
<code> </code>
<code>public class MyCollection</code>
<code>{</code>
<code>  private int[] _array = Enumerable.Range(1, 100).ToArray();</code>
<code> </code>
<code>  public int Length =&gt; _array.Length;</code>
<code> </code>
<code>  public int this[int index]</code>
<code>  {</code>
<code>    get =&gt; _array[index];</code>
<code>    set =&gt; _array[index] = value;</code>
<code>  }</code>
<code> </code>
<code>  public int[] Slice(int start, int length)</code>
<code>  {</code>
<code>    var slice = new int[length];</code>
<code>    Array.Copy(_array, start, slice, 0, length);</code>
<code>    return slice;</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The collection is initialized. With just the few lines that
                    have been implemented, the hat operator can be used with the indexer, and with the range operator,
                    the compiler converts this to invoke the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Slice</code> method (code
                    file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                集合已初始化。仅通过实现这几行代码，帽运算符就可以与索引器一起使用，并且通过范围运算符，编译器将将其转换为调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Slice</code>
                                方法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IndicesAndRanges/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0057"><code>MyCollection coll = new();</code>
<code>int n = coll[^20];</code>
<code>Console.WriteLine($"Item from the collection: {n}");</code>
<code>ShowRange("Using custom collection", coll[45..^40]);</code></pre>
            </section>
        </section>
        <section aria-labelledby="head-2-60" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0047" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-60" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">ARRAY POOLS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">数组池</font>
                    </font>
                </font>
            </h2>
            <p id="c06-para-0126" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">If you have an application where a lot of arrays are created and
                destroyed, the garbage collector has some work to do. To reduce the work of the garbage collector, you
                can use array pools with the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool</code> class (from
                the namespace <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">System.Buffers</code>). <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool</code> manages a
                pool of arrays. Arrays can be rented from and returned to the pool. Memory is managed from the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool</code> itself.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            如果你有一个大量创建和销毁数组的程序，垃圾收集器将有一些工作要做。为了减少垃圾收集器的工作量，你可以使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool</code>
                            类（来自命名空间 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">System.Buffers</code>
                            ）的数组池。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool</code>
                            管理一个数组池。可以从池中租用和归还数组。内存是从 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool</code>
                            本身进行管理的。</font>
                    </font>
                </font>
            </p> <span aria-label="173" epub:type="pagebreak" id="Page_173" role="doc-pagebreak"
                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0048"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-155" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Creating the Array Pool <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">创建数组池</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">You can create an <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool&lt;T&gt;</code>
                    by invoking the static <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Create</code> method. For
                    efficiency, the array pool manages memory in multiple buckets for arrays of similar sizes. With the
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Create</code> method,
                    you can define the maximum array length and the number of arrays within a bucket before another
                    bucket is required:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你可以通过调用静态 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Create</code>
                                方法来创建一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool&lt;T&gt;</code>
                                。为了提高效率，数组池会为大小相似的数组管理多个内存桶。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Create</code>
                                方法，你可以定义一个桶中允许的最大数组长度和数组数量，直到需要另一个桶：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0058"><code>ArrayPool&lt;int&gt; customPool = ArrayPool&lt;int&gt;.Create(</code>
<code>  maxArrayLength: 40000, maxArraysPerBucket: 10);</code></pre>
                <p id="c06-para-0128" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The default for the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">maxArrayLength</code> is
                    1024 × 1024 bytes, and the default for <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">maxArraysPerBucket</code>
                    is 50. The array pool uses multiple buckets for faster access to arrays when many arrays are used.
                    Arrays of similar sizes are kept in the same bucket as long as possible, and the maximum number of
                    arrays is not reached.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">maxArrayLength</code>
                                的默认值是 1024 × 1024 字节， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">maxArraysPerBucket</code>
                                的默认值是 50。当使用大量数组时，数组池会使用多个内存桶来加快数组访问速度。只要最大数量没有达到，大小相似的数组会尽可能长时间地保持在同一个桶中。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">You can also use a predefined shared pool by accessing the
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Shared</code> property
                    of the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool&lt;T&gt;</code>
                    class:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">您也可以通过访问 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool&lt;T&gt;</code>
                                类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Shared</code>
                                属性来使用预定义的共享池：</font>
                        </font>
                    </font>
                </p>
                <pre
                    id="c06-code-0059"><code>ArrayPool&lt;int&gt; sharedPool = ArrayPool&lt;int&gt;.Shared;</code></pre>
            </section>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0049"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-156" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Renting Memory from the Pool <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">从池中租用内存</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Requesting memory from the pool happens by invoking the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Rent</code> method. The
                    <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Rent</code> method
                    accepts the minimum array length that should be requested. If memory is already available in the
                    pool, it is returned. If it is not available, memory is allocated for the pool and returned
                    afterward. In the following code snippet, an array of 1024, 2048, 3096, and so on elements is
                    requested in a <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code> loop (code
                    file <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPoolSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">从池中请求内存是通过调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Rent</code>
                                方法完成的。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Rent</code>
                                方法接受应请求的最小数组长度。如果池中已有内存，则直接返回。如果没有可用内存，则会为池分配内存，然后再返回。在以下代码片段中，通过 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">for</code>
                                循环（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPoolSample/Program.cs</code>
                                ）请求了 1024、2048、3096 等元素的数组：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0060"><code>private static void UseSharedPool()</code>
<code>{</code>
<code>  for (int i = 0; i &lt; 10; i++)</code>
<code>  {</code>
<code>    int arrayLength = (i + 1) &lt;&lt; 10;</code>
<code>    <b>int[] arr = ArrayPool&lt;int&gt;.Shared.Rent(arrayLength);</b></code>
<code>    Console.WriteLine($"requested an array of {arrayLength} " +</code>
<code>      $"and received {arr.Length}");</code>
<code>    //…</code>
<code>  }</code>
<code>}</code></pre>
                <p id="c06-para-0131" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Rent</code> method
                    returns an array with at least the requested number of elements. The array returned could have more
                    memory available. The shared pool keeps arrays with at least 16 elements. The element count of the
                    managed arrays always doubles—for example, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192
                    elements, and so on.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Rent</code>
                                方法返回一个至少包含请求元素数量的数组。返回的数组可能包含更多可用内存。共享池保留至少包含 16
                                个元素的数组。管理数组的元素数量总是成倍增加——例如，16、32、64、128、256、512、1024、2048、4096、8192 个元素，等等。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">When you run the application, you can see that larger arrays
                    are returned if the requested array size doesn't fit the arrays managed by the pool:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                当你运行应用程序时，你会发现如果请求的数组大小不适合池管理的数组，则会返回更大的数组：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0061"><code>requested an array of 1024 and received 1024</code>
<code>requested an array of 2048 and received 2048</code>
<code>requested an array of 3072 and received 4096</code>
<code>requested an array of 4096 and received 4096</code>
<code>requested an array of 5120 and received 8192</code>
<code>requested an array of 6144 and received 8192</code>
<code>requested an array of 7168 and received 8192</code>
<code>requested an array of 8192 and received 8192</code>
<code>requested an array of 9216 and received 16384</code>
<code>requested an array of 10240 and received 16384</code></pre>
            </section> <span aria-label="174" epub:type="pagebreak" id="Page_174" role="doc-pagebreak"
                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <section data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><span id="c06-sec-0050"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
                <h3 id="head-3-157" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">Returning Memory to the Pool <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">归还内存到池中</font>
                        </font>
                    </font>
                </h3>
                <p id="c06-para-0133" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">After you no longer need the array, you can return it to the
                    pool. After the array is returned, you can later reuse it by renting it again.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                当你不再需要数组时，可以将其归还到池中。数组归还后，稍后可以通过再次租用它来重用。 </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                    data-immersive-translate-paragraph="1">You return the array to the pool by invoking the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Return</code> method of
                    the array pool and passing the array to the <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Return</code> method.
                    With an optional parameter, you can specify whether the array should be cleared before it is
                    returned to the pool. Without clearing it, the next one renting an array from the pool could read
                    the data. By clearing the data, you avoid this, but you need more CPU time (code file: <code
                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPoolSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过调用数组池的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Return</code>
                                方法并将数组传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Return</code>
                                方法，你可以将数组归还到池中。通过可选参数，你可以指定在将数组归还到池之前是否应该清除它。不清除数据时，下一个从池中租用数组的租用者可能会读取数据。通过清除数据，你可以避免这种情况，但这需要更多的
                                CPU 时间（代码文件： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPoolSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c06-code-0062"><code>ArrayPool&lt;int&gt;.Shared.Return(arr, clearArray: true);</code></pre>
                <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <p id="c06-para-0136" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Information about
                                the garbage collector and how to get information about memory addresses is in <a
                                    href="c13.xhtml"
                                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter
                                    13</a>.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 关于垃圾收集器以及如何获取内存地址的信息在第
                                        13 章。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
        </section>
        <section aria-labelledby="head-2-61" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0052" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-61" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">BITARRAY</h2>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">If you need to work with an array of bits, you can use the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code> type (from
                the namespace <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">System.Collections</code>).
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code> is a
                reference type that contains an array of <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                s, where for every 32 bits a new integer is used. <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code> defines <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Count</code> and <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code> properties, an
                indexer, a <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SetAll</code>
                method to set all the bits according to the parameters passed, a <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Not</code> method to inverse
                the bits, as well as <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">And</code>, <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Or</code>, and <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Xor</code> methods for binary
                AND, binary OR, and exclusive OR.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">如果你需要处理一个比特数组，可以使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                            类型（来自 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">System.Collections</code>
                            命名空间）。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                            是一个引用类型，它包含一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code> 数组，每
                            32 位比特使用一个新的整数。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                            定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Count</code> 和
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Length</code>
                            属性、一个索引器、一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SetAll</code>
                            方法用于根据传入的参数设置所有比特、一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Not</code>
                            方法用于反转比特，以及 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">And</code> 、
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Or</code> 和 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Xor</code>
                            方法用于二进制与、二进制或和异或。</font>
                    </font>
                </font>
            </p>
            <aside data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                <div class="top hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                    <p id="c06-para-0138" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">NOTE</b> <i
                            data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"><a href="c05.xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Chapter 5</a>
                            covers bitwise operators that can be used with number types such as </i>
                        <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">byte</code>
                        <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">, </i>
                        <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">short</code>
                        <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">, </i>
                        <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                        <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">, and </i>
                        <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">long</code>
                        <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">. The </i>
                        <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                        <i data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"> class has similar
                            functionality but can be used with a different number of bits than the C# types.</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意：第 5 章介绍了可用于 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">byte</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">short</code>
                                    、 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">int</code>
                                    和 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">long</code>
                                    等数值类型的位运算符。 <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                                    类具有类似的功能，但可以用于比 C# 类型不同的比特数。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
                        <hr />
                    </div>
                </section>
            </aside>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">With the code sample, the extension method <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetBitsFormat</code> iterates
                through a <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                and writes <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">1</code> or
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">0</code> to a <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">StringBuilder</code>,
                depending on whether the bit is set. For better readability, a separator character is added every four
                bits (code file <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArraySample/BitArrayExtensions.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在代码示例中，扩展方法 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">GetBitsFormat</code>
                            遍历一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                            并根据比特是否设置将 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">1</code> 或 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">0</code> 写入 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">StringBuilder</code>
                            。为了提高可读性，每四位比特添加一个分隔字符（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArraySample/BitArrayExtensions.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0063"><code>public static class BitArrayExtensions</code>
<code>{</code>
<code>  public static string GetBitsFormat(this BitArray bits)</code>
<code>  {</code>
<code>    StringBuilder sb = new();</code>
<code>    for (int i = bits.Length - 1; i&gt;= 0; i--)</code>
<code>    {</code>
<code>      sb.Append(bits[i] ? 1 : 0);</code>
<code>      if (i != 0 &amp;&amp; i % 4 == 0)</code>
<code>      {</code>
<code>        sb.Append("_");</code>
<code>      }</code>
<code>    }</code>
<code>    return sb.ToString();</code>
<code>  }</code>
<code>}</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1"><span aria-label="175" epub:type="pagebreak" id="Page_175"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>The following example
                demonstrates the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code> class
                creating a bit array with nine bits, indexed from 0 to 8. The <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SetAll</code> method sets all
                nine bits to <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code>.
                Then the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Set</code> method
                changes bit <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">1</code> to
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code>. Instead of
                the <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Set</code> method, you
                can also use an indexer, as shown with index <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">5</code> and <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">7</code> (code file <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArraySample/Program.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">以下示例展示了 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                            类创建一个包含九位的位数组，索引从 0 到 8。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">SetAll</code>
                            方法将所有九位设置为 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code> 。然后
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Set</code> 方法将第 4
                            位改为 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code> 。除了
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Set</code>
                            方法，你也可以使用索引器，如示例中的索引 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">5</code> 和 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">7</code> （代码文件
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArraySample/Program.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0064"><code>BitArray bits1 = new(9);</code>
<code>bits1.SetAll(true);</code>
<code>bits1.Set(1, false);</code>
<code>bits1[5] = false;</code>
<code>bits1[7] = false;</code>
<code>Console.Write("initialized: ");</code>
<code>Console.WriteLine(bits1.GetBitsFormat());</code>
<code>Console.WriteLine();</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">This is the displayed result of the initialized bits:<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">这是初始化位显示的结果：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0065"><code>initialized: 1_0101_1101</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">The <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Not</code> method generates
                the inverse of the bits of the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                :<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1"> <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Not</code> 方法生成
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                            的位取反：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0066"><code>Console.WriteLine($"NOT {bits1.FormatString()}");</code>
<code>bits1.Not();</code>
<code>Console.WriteLine($" =  {bits1.FormatString()}");</code>
<code>Console.WriteLine();</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">The result of <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Not</code> is all bits
                inverted. If the bit were <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code>, it is <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code>
                ; and if it were <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code>, it is <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code>
                :<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1"> <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Not</code>
                            的结果是所有位取反。如果位是 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code> ，它就是
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code>
                            ；如果位是 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">false</code> ，它就是
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">true</code> ：
                        </font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0067"><code>NOT 1_0101_1101</code>
<code> =  0_1010_0010</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">In the following example, a new <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code> is created.
                With the constructor, the variable <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits1</code> is used to
                initialize the array, so the new array has the same values. Then the values for bits 0, 1, and 4 are set
                to different values. Before the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Or</code> method is used, the
                bit arrays <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits1</code> and
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits2</code> are displayed.
                The <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Or</code> method
                changes the values of <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits1</code>
                :<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在以下示例中，创建了一个新的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">BitArray</code>
                            。使用构造函数，变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits1</code>
                            用于初始化数组，因此新数组具有相同的值。然后将位 0、1 和 4 的值设置为不同的值。在使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Or</code>
                            方法之前，显示位数组 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits1</code> 和
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits2</code> 。
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Or</code> 方法更改
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits1</code> 的值：
                        </font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0068"><code>BitArray bits2 = new(bits1);</code>
<code>bits2[0] = true;</code>
<code>bits2[1] = false;</code>
<code>bits2[4] = true;</code>
<code>Console.WriteLine($"   {bits1.FormatString()}");</code>
<code>Console.WriteLine($"OR {bits2.FormatString()}");</code>
<code>bits1.Or(bits2);</code>
<code>Console.WriteLine($"=  {bits1.FormatString()}");</code>
<code>Console.WriteLine();</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">With the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Or</code> method, the set
                bits are taken from both input arrays. In the result, the bit is set if it was set with either the first
                or the second array:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Or</code>
                            方法时，从两个输入数组中获取置位的位。在结果中，如果位在第一个或第二个数组中被置位，则该位会被置位：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0069"><code>   0_1010_0010</code>
<code>OR 0_1011_0001</code>
<code>=  0_1011_0011</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Next, the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">And</code> method is used to
                operate on <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits2</code> and
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits1</code>
                :<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">接下来，使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">And</code> 方法对
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits2</code> 和
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">bits1</code>
                            进行操作：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0070"><code>Console.WriteLine($"    {bits2.FormatString()}");</code>
<code>Console.WriteLine($"AND {bits1.FormatString()}");</code>
<code>bits2.And(bits1);</code>
<code>Console.WriteLine($"=   {bits2.FormatString()}");</code>
<code>Console.WriteLine();</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1"><span aria-label="176" epub:type="pagebreak" id="Page_176"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>The result of the
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">And</code> method only sets
                the bits where the bit was set in both input arrays:<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1"> <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">And</code>
                            方法的结果只在输入数组中同时置位的位上置位：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0071"><code>    0_1011_0001</code>
<code>AND 0_1011_0011</code>
<code>=   0_1011_0001</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">Finally, the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Xor</code> method is used for
                an exclusive <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">OR</code>
                :<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">最后，使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Xor</code>
                            方法进行一个排他性的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">OR</code> ：
                        </font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0072"><code>Console.WriteLine($"    {bits1.FormatString()} ");</code>
<code>Console.WriteLine($"XOR {bits2.FormatString()}");</code>
<code>bits1.Xor(bits2);</code>
<code>Console.WriteLine($"=   {bits1.FormatString()}");</code>
<code>Console.ReadLine();</code></pre>
            <p data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">With the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Xor</code> method, the
                resultant bit is set only if the bit was set either in the first or second input, but not both:<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Xor</code>
                            方法时，结果位仅当位在第一个或第二个输入中设置，但不在两者都设置时才设置：</font>
                    </font>
                </font>
            </p>
            <pre id="c06-code-0073"><code>    0_1011_0011</code>
<code>XOR 0_1011_0001</code>
<code>=   0_0000_0010</code></pre>
        </section>
        <section aria-labelledby="head-2-62" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">
            <span id="c06-sec-0054" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"></span>
            <h2 id="head-2-62" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">SUMMARY<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">摘要</font>
                    </font>
                </font>
            </h2>
            <p id="c06-para-0150" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">This chapter covered how to use the C# notation to create and use
                simple, multidimensional, and jagged arrays. The <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> class is used
                behind the scenes of C# arrays, enabling you to invoke properties and methods of this class with array
                variables.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章介绍了如何使用 C# 符号来创建和使用简单、多维和锯齿形数组。
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Array</code> 类在
                            C# 数组的幕后使用，使您能够使用数组变量调用该类的属性和方法。</font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0151" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">You saw how to sort elements in the array by using the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code> and <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparer</code> interfaces;
                and you learned how to create and use enumerators, the interfaces <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code> and <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>, and the
                <code data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield</code> statement.
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">您看到了如何使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparable</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IComparer</code>
                            接口对数组中的元素进行排序；还学习了如何创建和使用枚举器、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerable</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">IEnumerator</code>
                            接口以及 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">yield</code> 语句。
                        </font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0152" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">With the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code> type,
                you saw efficient ways to access a slice of the array. You also saw range and index enhancements with
                C#.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">Span&lt;T&gt;</code>
                            类型，您看到了高效访问数组切片的方法。您还看到了 C# 中的范围和索引增强功能。</font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0153" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">The last sections of this chapter showed you how to efficiently
                use arrays with the <code
                    data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool</code>, as well as
                how to use the BitArray type to deal with an array of bits.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章的最后几节向你展示了如何使用 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6">ArrayPool</code>
                            高效地操作数组，以及如何使用 BitArray 类型处理位数组。</font>
                    </font>
                </font>
            </p>
            <p id="c06-para-0154" data-immersive-translate-walked="a1188e3c-d5b5-4d9c-ba93-390beddd3fe6"
                data-immersive-translate-paragraph="1">The next chapter gets into details of more important features of
                C#: delegates, lambdas, and events.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">下一章将详细讲解 C#中更重要的特性：委托、Lambda 表达式和事件。
                        </font>
                    </font>
                </font>
            </p>
        </section>
    </section>
</body>
<div id="immersive-translate-popup" style="all: initial"></div>

</html>