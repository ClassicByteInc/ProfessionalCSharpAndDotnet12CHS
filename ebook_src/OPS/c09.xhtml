<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops"
    xmlns:svg="http://www.w3.org/2000/svg" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en"
    imt-state="dual" imt-trans-position="after">

<head>
    <title>9 语言集成查询 --- 9 Language Integrated Query</title>
    <link href="WileyTemplate_v5.5.css" rel="stylesheet" type="text/css" />
    <meta content="urn:uuid:e0000000-0000-0000-0000-000006715209" name="Adept.expected.resource" />
    <style data-id="immersive-translate-input-injected-css">
        .immersive-translate-input {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            z-index: 2147483647;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .immersive-translate-attach-loading::after {
            content: " ";

            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;

            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-2000%, -50%);
            z-index: 100;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .immersive-translate-input-loading {
            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;
        }

        @keyframes immersiveTranslateShadowRolling {
            0% {
                box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            12% {
                box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            25% {
                box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            36% {
                box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color),
                    100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
            }

            50% {
                box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color),
                    110px 0 var(--loading-color), 100px 0 var(--loading-color);
            }

            62% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color),
                    120px 0 var(--loading-color), 110px 0 var(--loading-color);
            }

            75% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    130px 0 var(--loading-color), 120px 0 var(--loading-color);
            }

            87% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
            }

            100% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
            }
        }

        .immersive-translate-toast {
            display: flex;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            right: 0;
            top: 1%;
            width: fit-content;
            padding: 12px 20px;
            margin: auto;
            overflow: auto;
            background: #fef6f9;
            box-shadow: 0px 4px 10px 0px rgba(0, 10, 30, 0.06);
            font-size: 15px;
            border-radius: 8px;
            color: #333;
        }

        .immersive-translate-toast-content {
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .immersive-translate-toast-hidden {
            margin: 0 20px 0 72px;
            text-decoration: underline;
            cursor: pointer;
        }

        .immersive-translate-toast-close {
            color: #666666;
            font-size: 20px;
            font-weight: bold;
            padding: 0 10px;
            cursor: pointer;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-toast {
                top: 0;
                padding: 12px 0px 0 10px;
            }

            .immersive-translate-toast-content {
                flex-direction: column;
                text-align: center;
            }

            .immersive-translate-toast-hidden {
                margin: 10px auto;
            }
        }

        .immersive-translate-modal {
            display: none;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
            font-size: 15px;
        }

        .immersive-translate-modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 40px 24px 24px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 80%;
            max-width: 270px;
            font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
                "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
                "Segoe UI Symbol", "Noto Color Emoji";
            position: relative;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-content {
                margin: 50% auto !important;
            }
        }

        .immersive-translate-modal .immersive-translate-modal-content-in-input {
            max-width: 500px;
        }

        .immersive-translate-modal-content-in-input .immersive-translate-modal-body {
            text-align: left;
            max-height: unset;
        }

        .immersive-translate-modal-title {
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            color: #333333;
        }

        .immersive-translate-modal-body {
            text-align: center;
            font-size: 14px;
            font-weight: 400;
            color: #333333;
            word-break: break-all;
            margin-top: 24px;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-body {
                max-height: 250px;
                overflow-y: auto;
            }
        }

        .immersive-translate-close {
            color: #666666;
            position: absolute;
            right: 16px;
            top: 16px;
            font-size: 20px;
            font-weight: bold;
        }

        .immersive-translate-close:hover,
        .immersive-translate-close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .immersive-translate-modal-footer {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 24px;
        }

        .immersive-translate-btn {
            width: fit-content;
            color: #fff;
            background-color: #ea4c89;
            border: none;
            font-size: 16px;
            margin: 0 8px;
            padding: 9px 30px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .immersive-translate-btn:hover {
            background-color: #f082ac;
        }

        .immersive-translate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .immersive-translate-btn:disabled:hover {
            background-color: #ea4c89;
        }

        .immersive-translate-cancel-btn {
            /* gray color */
            background-color: rgb(89, 107, 120);
        }

        .immersive-translate-cancel-btn:hover {
            background-color: hsl(205, 20%, 32%);
        }

        .immersive-translate-action-btn {
            background-color: transparent;
            color: #ea4c89;
            border: 1px solid #ea4c89;
        }

        .immersive-translate-btn svg {
            margin-right: 5px;
        }

        .immersive-translate-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #007bff;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-primary-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #ea4c89;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-modal input[type="radio"] {
            margin: 0 6px;
            cursor: pointer;
        }

        .immersive-translate-modal label {
            cursor: pointer;
        }

        .immersive-translate-close-action {
            position: absolute;
            top: 2px;
            right: 0px;
            cursor: pointer;
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5) !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            border-radius: 16px !important;
        }

        .imt-image-status img,
        .imt-image-status svg,
        .imt-img-loading {
            width: 28px !important;
            height: 28px !important;
            margin: 0 0 8px 0 !important;
            min-height: 28px !important;
            min-width: 28px !important;
            position: relative !important;
        }

        .imt-img-loading {
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAtFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////oK74hAAAAPHRSTlMABBMIDyQXHwyBfFdDMSw+OjXCb+5RG51IvV/k0rOqlGRM6KKMhdvNyZBz9MaupmxpWyj437iYd/yJVNZeuUC7AAACt0lEQVRIx53T2XKiUBCA4QYOiyCbiAsuuGBcYtxiYtT3f6/pbqoYHVFO5r+iivpo6DpAWYpqeoFfr9f90DsYAuRSWkFnPO50OgR9PwiCUFcl2GEcx+N/YBh6pvKaefHlUgZd1zVe0NbYcQjGBfzrPE8Xz8aF+71D8gG6DHFPpc4a7xFiCDuhaWgKgGIJQ3d5IMGDrpS4S5KgpIm+en9f6PlAhKby4JwEIxlYJV9h5k5nee9GoxHJ2IDSNB0dwdad1NAxDJ/uXDHYmebdk4PdbkS58CIVHdYSUHTYYRWOJblWSyu2lmy3KNFVJNBhxcuGW4YBVCbYGRZwIooipHsNqjM4FbgOQqQqSKQQU9V8xmi1QlgHqQQ6DDBvRUVCDirs+EzGDGOQTCATgtYTnbCVLgsVgRE0T1QE0qHCFAht2z6dLvJQs3Lo2FQoDxWNUiBhaP4eRgwNkI+dAjVOA/kUrIDwf3CG8NfNOE0eiFotSuo+rBiq8tD9oY4Qzc6YJw99hl1wzpQvD7ef2M8QgnOGJfJw+EltQc+oX2yn907QB22WZcvlUpd143dqQu+8pCJZuGE4xCuPXJqqcs5sNpsI93Rmzym1k4Npk+oD1SH3/a3LOK/JpUBpWfqNySxWzCfNCUITuDG5dtuphrUJ1myeIE9bIsPiKrfqTai5WZxbhtNphYx6GEIHihyGFTI69lje/rxajdh0s0msZ0zYxyPLhYCb1CyHm9Qsd2H37Y3lugVwL9kNh8Ot8cha6fUNQ8nuXi5z9/ExsAO4zQrb/ev1yrCB7lGyQzgYDGuxq1toDN/JGvN+HyWNHKB7zEoK+PX11e12G431erGYzwmytAWU56fkMHY5JJnDRR2eZji3AwtIcrEV8Cojat/BdQ7XOwGV1e1hDjGGjXbdArm8uJZtCH5MbcctVX8A1WpqumJHwckAAAAASUVORK5CYII=");
            background-size: 28px 28px;
            animation: image-loading-rotate 1s linear infinite !important;
        }

        .imt-image-status span {
            color: var(--bg-2, #fff) !important;
            font-size: 14px !important;
            line-height: 14px !important;
            font-weight: 500 !important;
            font-family: "PingFang SC", Arial, sans-serif !important;
        }

        @keyframes image-loading-rotate {
            from {
                transform: rotate(360deg);
            }

            to {
                transform: rotate(0deg);
            }
        }
    </style>
    <style data-id="immersive-translate-default-injected-css">
        :root {
            --immersive-translate-theme-underline-borderColor: #72ece9;
            --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
            --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
            --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
            --immersive-translate-theme-highlight-backgroundColor: #ffff00;
            --immersive-translate-theme-dashed-borderColor: #59c1bd;
            --immersive-translate-theme-blockquote-borderColor: #cc3355;
            --immersive-translate-theme-thinDashed-borderColor: #ff374f;
            --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
            --immersive-translate-theme-dashedBorder-borderRadius: 0;
            --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
            --immersive-translate-theme-solidBorder-borderRadius: 0;
            --immersive-translate-theme-dotted-borderColor: #94a3b8;
            --immersive-translate-theme-wavy-borderColor: #72ece9;
            --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
            --immersive-translate-theme-grey-textColor: #2f4f4f;
            --immersive-translate-theme-marker-backgroundColor: #fbda41;
            --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
            --immersive-translate-theme-marker2-backgroundColor: #ffff00;
            --immersive-translate-theme-background-backgroundColor: #dbafaf;
            --immersive-translate-theme-background-backgroundColor-rgb: 219, 175, 175;
            --immersive-translate-theme-background-backgroundOpacity: 12;
            --immersive-translate-theme-opacity-opacity: 10;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pre-whitespace {
            white-space: pre-wrap !important;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container {
            position: absolute;
            background-color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
                sans-serif;
            top: 0;
            width: 600px;
            height: 100%;
            z-index: 2;
            line-height: 1.3;
            font-size: 16px;
        }

        [imt-state="dual"] .immersive-translate-target-wrapper[dir="rtl"] {
            text-align: right;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
            color: rgb(0, 0, 0);
            white-space: normal;
            position: absolute;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
            color: inherit;
            white-space: inherit;
            position: unset;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper &gt;

        br {
            display: none;
        }

        [imt-state="translation"] .immersive-translate-target-translation-block-wrapper {
            margin: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper {
            margin: 8px 0 !important;
            display: inline-block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            display: block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            margin-top: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pdf-block-wrapper {
            margin: 0 !important;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-grey-inner {
            color: var(--immersive-translate-theme-grey-textColor);
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-underline-inner {
            border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeUnderline-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDashed-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
            text-decoration-style: dashed !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-thinDashed-inner {
            border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dotted-inner {
            background-image: linear-gradient(to right,
                    var(--immersive-translate-theme-dotted-borderColor) 30%,
                    rgba(255, 255, 255, 0) 0%);
            background-position: bottom;
            background-size: 5px 1px;
            background-repeat: repeat-x;
            padding-bottom: 3px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDotted-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
            text-decoration-style: dotted !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-wavy-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
            text-decoration-style: wavy !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dashed-inner {
            background: linear-gradient(to right,
                    var(--immersive-translate-theme-dashed-borderColor) 0%,
                    var(--immersive-translate-theme-dashed-borderColor) 50%,
                    transparent 50%,
                    transparent 100%) repeat-x left bottom;
            background-size: 8px 2px;
            padding-bottom: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            content: "";
            display: block;
            max-width: 80px;
            width: 10%;
            border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            padding-top: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
            content: "";
            border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            max-height: 16px;
            height: 16px;
            padding-left: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-highlight-inner {
            background: var(--immersive-translate-theme-highlight-backgroundColor);
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-marker {
            line-height: 1.5em;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker2-inner {
            font-weight: bold;
            text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
                16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
                2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
                -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker-inner {
            /* TODO: add more texture */
            background: linear-gradient(to right,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-weakening {
            opacity: 0.618 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-italic {
            font-style: italic !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-bold {
            font-weight: bold !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-paper {
            margin: 8px 0;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            padding: 16px 32px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-blockquote {
            border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
            padding-left: 12px !important;
            margin-top: 4px;
            margin-bottom: 4px;
            padding-top: 4px;
            padding-bottom: 4px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        /* opacity theme start */

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,
        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: none !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        /* opacity theme end */

        /* background theme start */
        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-background {
            margin: 8px 0;
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            border-radius: 4px;
            box-shadow: unset !important;
            padding: 12px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-background-inner {
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            padding-left: 6px;
            padding-right: 6px;
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper .immersive-translate-target-translation-theme-background-inner {
            background: unset;
            padding-left: unset;
            padding-right: unset;
        }

        /* background theme end */

        /* vertical css , please remain it in the last one. */
        .immersive-translate-target-translation-vertical-block-wrapper {
            margin: 0px 8px !important;
        }

        .immersive-translate-text {
            font-size: 15px !important;
        }

        .immersive-translate-error-toast {
            position: fixed;
            top: 5%;
            z-index: 99999999;
            left: 0;
            right: 0;
            margin: auto;
            max-width: 300px;
            padding: 16px;
            border-radius: 12px;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }

        @media all and (min-width: 750px) {
            .immersive-translate-error-toast {
                max-width: 400px;
            }
        }

        .immersive-translate-clickable-button {
            cursor: pointer;
        }

        .immersive-translate-help-button {
            cursor: pointer;
        }

        .immersive-translate-loading-text:before {
            content: "...";
        }

        /* dark mode for loading */

        @media only screen and (prefers-color-scheme: dark) {
            .immersive-translate-loading {
                border: 2px rgba(255, 255, 255, 0.25) solid !important;
                border-top: 2px rgba(255, 255, 255, 1) solid !important;
            }
        }

        .immersive-translate-error-wrapper {
            position: relative;
            display: inline-flex;
            padding: 6px;
            margin: 0 12px;
            white-space: nowrap;
            font-size: 0.9em;
        }

        [lang="zh-CN"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        [lang="zh-TW"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        .immersive-translate-tooltip {
            position: relative;
            display: inline-flex;
            /* little indicater to indicate it's hoverable */
        }

        .immersive-translate-tooltip-content {
            /* here's the magic */
            position: absolute;
            z-index: 100000000000;

            left: 50%;
            bottom: 0;
            transform: translate(-50%, 110%);
            line-height: 1;
            /* and add a small left margin */

            /* basic styles */
            width: max-content;
            max-width: 250px;
            word-wrap: break-word;
            white-space: pre-line;
            padding: 10px;
            border-radius: 10px;
            background: #000c;
            color: #fff;
            text-align: center;
            font-size: 14px;
            display: none;
            /* hide by default */
        }

        .immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip-content-table {
            left: unset !important;
            bottom: unset !important;
            transform: translate(-10%, 50%) !important;
        }

        .immersive-translate-tooltip:hover:before {
            display: inline-block;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--bg-2, #fff);
            font-size: 14px;
        }
    </style>
    <style data-id="immersive-translate-user-custom-style">
        :root {

            .immersive-translate-target-inner {
                font-family: inherit;
            }


            .immersive-translate-target-inner {
                font-family: inherit;
            }
        }
    </style>
    <style data-id="immersive-translate-dynamic-injected-css">
        .immersive-translate-target-wrapper[dir='rtl'] {
            text-align: right;
        }

        .immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {
            display: block;
        }

        .immersive-translate-target-wrapper {
            word-break: break-word;
            user-select: text;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper[dir='rtl'] {
            display: inline-block;
        }

        [dir='rtl'] .immersive-translate-target-wrapper:not([dir]) {
            text-align: left;
        }

        [imt-state=dual] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            display: block;
        }

        [imt-trans-position=before] .immersive-translate-target-translation-block-wrapper {
            display: block !important;
        }

        [imt-state][data-immersive-translate_rtl] .immersive-translate-target-wrapper {
            display: block !important;
        }
    </style>
</head>

<body epub:type="bodymatter" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
    <section aria-labelledby="c09_1" epub:type="chapter" role="doc-chapter"
        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
        <header data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
            <h1 id="c09_1" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1"><span aria-label="226" epub:type="pagebreak" id="Page_226"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span><span id="c09"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span><span
                    class="chapterNumber"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">9</span><br /><span
                    class="chapterTitle" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Language
                    Integrated Query</span>
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">9 语言集成查询</font>
                    </font>
                </font>
            </h1>
        </header>
        <section aria-label="chapter opening" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
            <span id="c09-sec-0001" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
            <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <hr />
                </div>
                <section class="feature3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <h3 data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                        data-immersive-translate-paragraph="1">WHAT'S IN THIS CHAPTER?<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章内容</font>
                            </font>
                        </font>
                    </h3>
                    <ul class="check2" id="c09-list-0001"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <li id="c09-li-0001" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">Working with traditional queries across objects using
                            List<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">使用 List 在对象间处理传统查询</font>
                                </font>
                            </font>
                        </li>
                        <li id="c09-li-0002" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">Using extension methods<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">使用扩展方法</font>
                                </font>
                            </font>
                        </li>
                        <li id="c09-li-0003" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">Getting to know LINQ query operators<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">了解 LINQ 查询运算符</font>
                                </font>
                            </font>
                        </li>
                        <li id="c09-li-0004" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">Working with Parallel LINQ<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">处理并行 LINQ</font>
                                </font>
                            </font>
                        </li>
                        <li id="c09-li-0005" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">Working with expression trees<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">处理表达式树</font>
                                </font>
                            </font>
                        </li>
                    </ul>
                    <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                </section>
            </aside>
            <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <hr />
                </div>
                <section aria-labelledby="head-2-81" class="feature3"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-fea-0001"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                    <h3 id="head-2-81" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                        data-immersive-translate-paragraph="1">CODE DOWNLOADS FOR THIS CHAPTER<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章代码下载</font>
                            </font>
                        </font>
                    </h3>
                    <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span
                            id="c09-sec-0002"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                        <p id="c09-para-0003" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">The source code for this chapter is available on the
                            book page at <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><a href="http://www.wiley.com">www.wiley.com</a></code>.
                            Click the Downloads link. The code can also be found at <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                            in the directory <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">1_CS/LINQ</code>.
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的源代码可在第 0
                                        页的书籍页面上找到。点击下载链接。代码也可以在第 1 页的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">1_CS/LINQ</code>
                                        目录中找到。</font>
                                </font>
                            </font>
                        </p>
                        <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">The code for this chapter is divided into the
                            following major examples:<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的代码分为以下主要示例：</font>
                                </font>
                            </font>
                        </p>
                        <ul class="check" id="c09-list-0201"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <li id="c09-li-1005" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                                data-immersive-translate-paragraph="1">LINQIntro<font
                                    class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                    </font>
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">LINQ 简介</font>
                                    </font>
                                </font>
                            </li>
                            <li id="c09-li-1006" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                                data-immersive-translate-paragraph="1">EnumerableSample<font
                                    class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                    </font>
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">可枚举样本</font>
                                    </font>
                                </font>
                            </li>
                            <li id="c09-li-1007" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                                data-immersive-translate-paragraph="1">ParallelLINQ<font
                                    class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                    </font>
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">并行 LINQ</font>
                                    </font>
                                </font>
                            </li>
                            <li id="c09-li-1008" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                                data-immersive-translate-paragraph="1">ExpressionTrees<font
                                    class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                    </font>
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">表达式树</font>
                                    </font>
                                </font>
                            </li>
                        </ul>
                        <p id="c09-para-0009" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">All the sample projects have nullable reference types
                            configured.<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">所有示例项目都已配置可空引用类型。</font>
                                </font>
                            </font>
                        </p>
                    </section>
                    <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                </section>
            </aside>
        </section> <span aria-label="227" epub:type="pagebreak" id="Page_227" role="doc-pagebreak"
            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
        <section aria-labelledby="head-2-82" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
            <span id="c09-sec-0003" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
            <h2 id="head-2-82" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">LINQ OVERVIEW<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">LINQ 概述</font>
                    </font>
                </font>
            </h2>
            <p id="c09-para-0010" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Language Integrated Query (LINQ) integrates query syntax inside
                the C# programming language, making it possible to access different data sources with the same syntax.
                LINQ accomplishes this by offering an abstraction layer.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">语言集成查询（LINQ）将查询语法集成在 C#
                            编程语言中，使其能够使用相同的语法访问不同的数据源。LINQ 通过提供抽象层来实现这一点。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">This chapter describes the core principles of LINQ and the
                language extensions for C# that make the C# LINQ query possible.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章介绍了 LINQ 的核心原则以及使 C# LINQ 查询可能的 C#
                            语言扩展。</font>
                    </font>
                </font>
            </p>
            <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <p id="c09-para-0012" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">For details about
                            using LINQ across a database, read <a href="c21.xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Chapter 21</a>,
                            “Entity Framework Core.”</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意 关于在数据库中使用 LINQ 的详细信息，请阅读第
                                    21 章“Entity Framework Core”。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                </section>
            </aside>
            <p id="c09-para-0013" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">This chapter starts with a simple LINQ query before diving into
                the full potential of LINQ. The C# language offers an integrated query language that is converted to
                method calls. This section shows you what the conversion looks like so you can use all the possibilities
                of LINQ.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章从简单的 LINQ 查询开始，然后深入探讨 LINQ
                            的全部潜力。C#语言提供了一个集成查询语言，该语言会被转换为方法调用。本节将展示这种转换的形式，以便您能够使用 LINQ 的所有可能性。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0005"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-187" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Lists and Entities <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">列表和实体</font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0014" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The LINQ queries in this chapter are performed on a
                    collection containing Formula 1 champions from 1950 to 2020. This data needs to be prepared with
                    classes and lists within a .NET 5.0 library.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">本章中的 LINQ 查询是在一个包含 1950 年至 2020 年
                                F1 冠军的集合上执行的。这些数据需要在.NET 5.0 库中的类和列表中准备。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">For the entities, the record type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> is defined
                    (as shown in the following code snippet). <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> defines
                    several properties and an overloaded <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToString</code> method to
                    display a racer in a string format. This class implements the interface <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IFormattable</code> to
                    support different variants of format strings, and the interface <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IComparable&lt;Racer&gt;</code>,
                    which can be used to sort a list of racers based on the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code>. For more
                    advanced queries, the class <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> contains not
                    only single-value properties such as <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstName</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Wins Country</code>, and
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Starts</code>, but also
                    properties that contain a collection, such as <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Years</code>. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Years</code> property
                    lists all the years of the championship title. Some racers have won more than one title. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code> property is
                    used to list all the cars used by the driver during the title years (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Racer.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">对于实体，定义了记录类型 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                （如下面的代码片段所示）。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                定义了多个属性和一个重载的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToString</code>
                                方法，用于以字符串格式显示赛车手。该类实现了接口 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IFormattable</code>
                                以支持不同格式的字符串，以及接口 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IComparable&lt;Racer&gt;</code>
                                ，可用于根据 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code>
                                对赛车手列表进行排序。对于更高级的查询，类 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                不仅包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstName</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Wins Country</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Starts</code>
                                等单值属性，还包含包含集合的属性，如 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Years</code>
                                。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Years</code>
                                属性列出了所有冠军赛季的年份。有些赛车手赢得了多个冠军。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code>
                                属性用于列出赛车手在冠军赛季期间使用的所有赛车（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Racer.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0001"><code>public record Racer(string FirstName, string LastName, string Country, </code>
<code>  int Starts, int Wins, IEnumerable&lt;int&gt; Years, IEnumerable&lt;string&gt; Cars) : </code>
<code>  IComparable&lt;Racer&gt;, IFormattable</code>
<code>{</code>
<code>  public Racer(string FirstName, string LastName, string Country, </code>
<code>    int Starts, int Wins)</code>
<code>    : this(FirstName, LastName, Country, Starts, Wins, new int[] { }, </code>
<code>      new string[] { })</code>
<code>  { }</code>
<code> </code>
<code>  public override string ToString() =&gt; $"{FirstName} {LastName}";</code>
<code> </code>
<code>  public int CompareTo(Racer? other) =&gt; LastName.CompareTo(other?.LastName);</code>
<code> </code>
<code>  public string ToString(string format) =&gt; ToString(format, null);</code>
<code> </code>
<code>  public string ToString(string? format, IFormatProvider? formatProvider) =&gt;</code>
<code>    format switch</code>
<code>    {</code>
<code>      null =&gt; ToString(),</code>
<code>      "N" =&gt; ToString(),</code>
<code>      "F" =&gt; FirstName,<span aria-label="228" epub:type="pagebreak" id="Page_228" role="doc-pagebreak"></span></code>
<code>      "L" =&gt; LastName,</code>
<code>      "C" =&gt; Country,</code>
<code>      "S" =&gt; Starts.ToString(),</code>
<code>      "W" =&gt; Wins.ToString(),</code>
<code>      "A" =&gt; $"{FirstName} {LastName}, country: {Country}, starts: {Starts}, </code>
<code>        wins: {Wins}",</code>
<code>      _ =&gt; throw new FormatException($"Format {format} not supported")</code>
<code>    };        </code>
<code>  }</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0017" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">With the Formula
                                1 racing series, in every calendar year, a driver championship </i> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">and a constructor
                                championship take place. With the driver championship, the best </i> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">driver is world
                                champion. With the constructor championship, the best team wins the award. See </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><a href="https://www.formula1.com">https://www.formula1.com</a></code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> for details,
                                current standings, and an archive </i> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">going back to
                                1950.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意：在 F1
                                        赛车系列中，每年的日历年度都会举行一个赛车手锦标赛和一个制造商锦标赛。在赛车手锦标赛中，最优秀的赛车手成为世界冠军。在制造商锦标赛中，最优秀的团队获得奖项。有关详细信息、当前排名和追溯到
                                        1950 年的存档，请参阅 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><a href="https://www.formula1.com">https://www.formula1.com</a></code>
                                        。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">A second entity class is <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Team</code>. This class
                    just contains the team name and an array of years for constructor championships (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Team.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">第二个实体类是 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Team</code>
                                。这个类只包含队伍名称和一个 Constructors Championships 年份数组（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Team.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0002"><code>public record Team</code>
<code>{</code>
<code>  public Team(string name, params int[] years)</code>
<code>  {</code>
<code>    Name = name;</code>
<code>    Years = years != null ? new List&lt;int&gt;(years) : new List&lt;int&gt;();</code>
<code>  }</code>
<code>  public string Name { get; }</code>
<code>  public IEnumerable&lt;int&gt; Years { get; }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The class <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Formula1</code> returns a
                    list of racers in the method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampions</code>. The
                    list is filled with all Formula 1 champions from the years 1950 to 2020 with the method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">InitializeRacers</code>
                    (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Formula1.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">类 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Formula1</code>
                                在方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampions</code>
                                中返回一组赛车手。该方法使用方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">InitializeRacers</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Formula1.cs</code>
                                ）填充该列表，其中包含 1950 年至 2020 年的所有 F1 冠军：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0003"><code>public static class Formula1</code>
<code>{</code>
<code>  private static List&lt;Racer&gt; s_racers;</code>
<code>  public static IList&lt;Racer&gt; GetChampions() =&gt; s_racers ??= InitalizeRacers();</code>
<code> </code>
<code>  private static List&lt;Racer&gt; InitializeRacers =&gt; new()</code>
<code>  {</code>
<code>    new ("Nino", "Farina", "Italy", 33, 5, new int[] { 1950 }, </code>
<code>      new string[] { "Alfa Romeo" }),</code>
<code>    new ("Alberto", "Ascari", "Italy", 32, 10, new int[] { 1952, 1953 }, </code>
<code>      new string[] { "Ferrari" }),</code>
<code>    new ("Juan Manuel", "Fangio", "Argentina", 51, 24,</code>
<code>      new int[] { 1951, 1954, 1955, 1956, 1957 },</code>
<code>      new string[] { "Alfa Romeo", "Maserati", "Mercedes", "Ferrari" }),</code>
<code>    new ("Mike", "Hawthorn", "UK", 45, 3, new int[] { 1958 }, </code>
<code>      new string[] { "Ferrari" }),</code>
<code>    new ("Phil", "Hill", "USA", 48, 3, new int[] { 1961 },</code>
<code>      new string[] { "Ferrari" }),</code>
<code>    new ("John", "Surtees", "UK", 111, 6, new int[] { 1964 }, <span aria-label="229" epub:type="pagebreak" id="Page_229" role="doc-pagebreak"></span></code>
<code>      new string[] { "Ferrari" }),</code>
<code>    new ("Jim", "Clark", "UK", 72, 25, new int[] { 1963, 1965 }, </code>
<code>      new string[] { "Lotus" }),</code>
<code>    //…</code>
<code>  };</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Where queries are done across multiple lists, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetConstructorChampions</code>
                    method in the following code snippet returns the list of all constructor championships (these
                    championships have been around since 1958):<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当查询涉及多个列表时，以下代码片段中的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetConstructorChampions</code>
                                方法返回所有 Constructors' Championships 的列表（这些锦标赛自 1958 年以来一直存在）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0004"><code>private static List&lt;Team&gt; s_teams;</code>
<code>public static IList&lt;Team&gt; GetConstructorChampions() =&gt; s_teams ??= new()</code>
<code>{</code>
<code>  new ("Vanwall", 1958),</code>
<code>  new ("Cooper", 1959, 1960),</code>
<code>  new ("Ferrari", 1961, 1964, 1975, 1976, 1977, 1979, 1982, 1983, 1999, </code>
<code>      2000, 2001, 2002, 2003, 2004, 2007, 2008),</code>
<code>  new ("BRM", 1962),</code>
<code>  new ("Lotus", 1963, 1965, 1968, 1970, 1972, 1973, 1978),</code>
<code>  new ("Brabham", 1966, 1967),</code>
<code>  new ("Matra", 1969),</code>
<code>  new ("Tyrrell", 1971),</code>
<code>  new ("McLaren", 1974, 1984, 1985, 1988, 1989, 1990, 1991, 1998),</code>
<code>  new ("Williams", 1980, 1981, 1986, 1987, 1992, 1993, 1994, 1996, 1997),</code>
<code>  new ("Benetton", 1995),</code>
<code>  new ("Renault", 2005, 2006),</code>
<code>  new ("Brawn GP", 2009),</code>
<code>  new ("Red Bull Racing", 2010, 2011, 2012, 2013),</code>
<code>  new ("Mercedes", 2014, 2015, 2016, 2017, 2018, 2019, 2020)</code>
<code>};</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0007"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-188" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">LINQ Query <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">LINQ 查询</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Using these prepared lists and objects from the previously
                    created library, you can do a LINQ query—for example, a query to get all world champions from Brazil
                    sorted by the highest number of wins. To accomplish this, you could use methods of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code>
                    class—for example, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FindAll</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sort</code> methods.
                    However, with LINQ there's a simpler syntax (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LINQIntro/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用先前创建的库中的这些准备好的列表和对象，你可以执行 LINQ
                                查询——例如，一个查询来获取所有来自巴西的世界冠军，并按获胜次数排序。为此，你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code>
                                类的成员方法——例如 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FindAll</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sort</code>
                                方法。然而，使用 LINQ 有更简单的语法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LINQIntro/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0005"><code>static void LinqQuery()</code>
<code>{</code>
<code>  <b>var query = from r in Formula1.GetChampions()</b></code>
<code>              <b>where r.Country == "Brazil"</b></code>
<code>              <b>orderby r.Wins descending</b></code>
<code>              <b>select r;</b></code>
<code> </code>
<code>  foreach (Racer r in query)</code>
<code>  {</code>
<code>    Console.WriteLine($"{r:A}");</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The result of this query shows world champions from Brazil
                    ordered by number of wins:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">此查询的结果显示了按获胜次数排序的来自巴西的世界冠军：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0006"><code>Ayrton Senna, country: Brazil, starts: 161, wins: 41</code>
<code>Nelson Piquet, country: Brazil, starts: 204, wins: 23</code>
<code>Emerson Fittipaldi, country: Brazil, starts: 143, wins: 14</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><span aria-label="230" epub:type="pagebreak" id="Page_230"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>The expression
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">表达式</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0007"><code>from r in Formula1.GetChampions()</code>
<code>where r.Country == "Brazil"</code>
<code>orderby r.Wins descending</code>
<code>select r;</code></pre>
                <p id="c09-para-0023" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">is a LINQ query. The clauses <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">descending</code>, and
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code> are
                    predefined keywords in this query.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">是一个 LINQ 查询。子句 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">descending</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code>
                                是此查询中预定义的关键字。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The query expression must begin with a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code> clause and
                    end with a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code> or <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group</code> clause. In
                    between, you can optionally use <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">join</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code>, and
                    additional <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                    clauses.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">查询表达式必须以 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                子句开头并以 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code>
                                或 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group</code>
                                子句结尾。中间可以选用性地使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">join</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code>
                                以及额外的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                子句。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0026" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">The variable </i>
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">query</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> just has the LINQ
                                query assigned to it. The query is not performed by this assignment but rather as soon
                                as the query is accessed using the </i>
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">foreach</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> loop. This is
                                discussed in more detail later in the section “Deferred Query Execution.”</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意变量 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">query</code>
                                        只是被分配了 LINQ 查询。这个赋值并不会执行查询，而是在使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">foreach</code>
                                        循环访问查询时执行。这将在“延迟查询执行”一节中详细讨论。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0009"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-189" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Extension Methods <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">扩展方法</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The compiler converts the LINQ query to method calls. At
                    runtime, extension methods will be invoked. LINQ offers various extension methods for the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                    interface, so you can use the LINQ query across any collection that implements this interface. An
                    extension method is defined as a static method whose first parameter defines the type it extends,
                    and it is declared in a static class.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">编译器将 LINQ
                                查询转换为方法调用。在运行时，将调用扩展方法。LINQ 为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                                接口提供了多种扩展方法，因此你可以将 LINQ 查询用于任何实现该接口的集合。扩展方法被定义为静态类中的静态方法，其第一个参数定义了它扩展的类型。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0028" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Extension methods
                                are covered in <a href="c03.xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Chapter
                                    3</a>, “Classes, Records, Structs, and Tuples.”</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">
                                        注意：扩展方法在第三章“类、记录、结构体和元组”中有所介绍。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">One of the classes that define LINQ extension methods is
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code> in
                    the namespace <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>. You
                    just have to import the namespace to open the scope of the extension methods of this class. A sample
                    implementation of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> extension
                    method is shown in the following code. The first parameter of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method that
                    includes the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">this</code> keyword is of
                    type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>.
                    This enables the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method to be
                    used with every type that implements <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>.
                    A few examples of types that implement this interface are arrays and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code>. The
                    second parameter is a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Func&lt;T, bool&gt;</code>
                    delegate that references a method that returns a Boolean value and requires a parameter of type
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">T</code>. This
                    predicate is invoked within the implementation to examine whether the item from the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                    source should be added into the destination collection. If the method is referenced by the delegate,
                    the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yield return</code>
                    statement returns the item from the source to the destination:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">定义 LINQ 扩展方法的类之一是命名空间 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>
                                中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                                。只需导入该命名空间即可打开此类扩展方法的作用域。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                扩展方法的一个示例实现如下代码所示。包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">this</code>
                                关键字的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                方法的第一个参数是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                                类型。这使得 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                方法能够与任何实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                                的类型一起使用。实现此接口的类型示例包括数组和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code>
                                。第二个参数是一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Func&lt;T, bool&gt;</code>
                                委托，它引用一个返回布尔值的方法，并需要一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">T</code>
                                类型的参数。此谓词在实现中会被调用，以检查是否应将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                                源中的项添加到目标集合中。如果委托引用了该方法，则 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yield return</code>
                                语句会将源中的项返回到目标：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0008"><code>public static IEnumerable&lt;TSource&gt; Where&lt;TSource&gt;(</code>
<code>  this IEnumerable&lt;TSource&gt; source,</code>
<code>  Func&lt;TSource, bool&gt; predicate)</code>
<code>{</code>
<code>  foreach (TSource item in source)</code>
<code>  {</code>
<code>    if (predicate(item))</code>
<code>      yield return item;</code>
<code>  }</code>
<code>}</code></pre>
                <p id="c09-para-0030" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Because <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> is
                    implemented as a generic method, it works with any type that is contained in a collection. Any
                    collection implementing <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                    is supported.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">由于 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                作为泛型方法实现，因此它适用于任何包含在集合中的类型。任何实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                                的集合都受支持。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><span aria-label="231" epub:type="pagebreak" id="Page_231"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>Now it's possible
                    to use the extension methods <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>,
                    and <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> from
                    the class <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>.
                    Because each of these methods returns <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;TSource</code>
                    &gt;, it is possible to invoke one method after the other by using the previous result. With the
                    arguments of the extension methods, anonymous methods that define the implementation for the
                    delegate parameters are used (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LINQIntro/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在可以使用类 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                                中的扩展方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                。因为这些方法都返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;TSource</code>
                                &gt;，所以可以通过使用前一个结果来依次调用这些方法。在扩展方法的参数中，使用匿名方法来定义委托参数的实现（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LINQIntro/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0009"><code>static void ExtensionMethods()</code>
<code>{</code>
<code>  List&lt;Racer&gt; champions = new(Formula1.GetChampions());</code>
<code>  var brazilChampions =</code>
<code>    champions.Where(r =&gt; r.Country == "Brazil")</code>
<code>      .OrderByDescending(r =&gt; r.Wins)</code>
<code>      .Select(r =&gt; r);</code>
<code> </code>
<code>  foreach (Racer r in brazilChampions)</code>
<code>  {</code>
<code>    Console.WriteLine($"{r:A}");</code>
<code>  }</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0011"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-190" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Deferred Query Execution <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">延迟查询执行 </font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0032" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">During runtime, the query expression does not run immediately
                    as it is defined. The query runs only when the items are iterated. The reason is that the extension
                    method shown earlier makes use of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yield return</code>
                    statement to return the elements where the predicate is true. Because the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yield return</code>
                    statement is used, the compiler creates an enumerator and returns the items as soon as they are
                    accessed from the enumeration.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                在运行时，查询表达式并不会立即按定义执行。查询只有在迭代项时才会运行。原因是前面提到的扩展方法使用了 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yield return</code>
                                语句来返回满足谓词的元素。由于使用了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yield return</code>
                                语句，编译器会创建一个枚举器，并在访问枚举项时立即返回这些项。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">This has a very interesting and important effect. In the
                    following example, a collection of <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code> elements is
                    created and filled with first names. Next, a query is defined to get all the names from the
                    collection whose first letter is <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">J</code>. The collection
                    should also be sorted. The iteration does not happen when the query is defined. Instead, the
                    iteration happens with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">foreach</code> statement,
                    where all items are iterated. Only one element of the collection fulfills the requirements of the
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code> expression
                    to start with the letter J: <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Juan</code>. After the
                    iteration is done and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Juan</code> is written to
                    the console, four new names are added to the collection. Then the iteration is done again (code file
                    <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LINQIntro/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这具有非常有趣且重要的效果。在以下示例中，创建了一个包含 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code>
                                元素集合，并用名字填充。接下来，定义了一个查询来获取集合中所有首字母为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">J</code>
                                的名字。该集合也需要排序。迭代不是在定义查询时发生的，而是在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">foreach</code>
                                语句中进行，其中迭代所有项目。集合中只有一个元素满足 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                表达式的首字母为 J 的要求： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Juan</code>
                                。迭代完成后，将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Juan</code>
                                写入控制台，集合中添加了四个新名字。然后再次进行迭代（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LINQIntro/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0010"><code>void DeferredQuery()</code>
<code>{</code>
<code>  List&lt;string&gt; names = new() { "Nino", "Alberto", "Juan", "Mike", "Phil" };</code>
<code>  var namesWithJ = from n in names</code>
<code>                   where n.StartsWith("J")</code>
<code>                   orderby n</code>
<code>                   select n;</code>
<code> </code>
<code>  Console.WriteLine("First iteration");</code>
<code>  foreach (string name in namesWithJ)</code>
<code>  {</code>
<code>    Console.WriteLine(name);</code>
<code>  }</code>
<code>  Console.WriteLine();</code>
<code> </code>
<code>  names.Add("John");</code>
<code>  names.Add("Jim");</code>
<code>  names.Add("Jack");</code>
<code>  names.Add("Denny");</code>
<code>  Console.WriteLine("Second iteration");</code>
<code> <span aria-label="232" epub:type="pagebreak" id="Page_232" role="doc-pagebreak"></span></code>
<code>  foreach (string name in namesWithJ)</code>
<code>  {</code>
<code>    Console.WriteLine(name);</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Because the iteration does not happen when the query is
                    defined, but does happen with every <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">foreach</code>, the
                    output from the application changes:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">因为迭代不是在查询定义时发生，而是在每个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">foreach</code>
                                时发生，所以应用程序的输出会变化：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0011"><code>First iteration</code>
<code>Juan</code>
<code>Second iteration</code>
<code>Jack</code>
<code>Jim</code>
<code>John</code>
<code>Juan</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Of course, you also must be aware that the extension methods
                    are invoked every time the query is used within an iteration. Most of the time, this is very
                    practical because you can detect changes in the source data. However, sometimes this is impractical.
                    You can change this behavior by invoking the extension methods <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToArray</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToList</code>, and the
                    like. In the following example, you can see that <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToList</code> iterates
                    through the collection immediately and returns a collection implementing <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IList&lt;string&gt;</code>.
                    The returned list is then iterated through twice; in between iterations, the data source gets new
                    names:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                当然，你也必须意识到，每次在迭代中使用查询时，扩展方法都会被调用。大多数情况下，这是非常实用的，因为你能够检测到源数据的变化。然而，有时这并不实用。你可以通过调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToArray</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToList</code>
                                等扩展方法来改变这种行为。在以下示例中，你可以看到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToList</code>
                                立即遍历集合并返回一个实现 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IList&lt;string&gt;</code>
                                的集合。然后对这个返回的列表进行两次迭代；在两次迭代之间，数据源获得了新的名称：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0012"><code>List&lt;string&gt; names = new() { "Nino", "Alberto", "Juan", "Mike", "Phil" };</code>
<code>var namesWithJ = (from n in names</code>
<code>                  where n.StartsWith("J")</code>
<code>                  orderby n</code>
<code>                  select n).ToList();</code>
<code> </code>
<code>Console.WriteLine("First iteration");</code>
<code>foreach (string name in namesWithJ)</code>
<code>{</code>
<code>  Console.WriteLine(name);</code>
<code>}</code>
<code>Console.WriteLine();</code>
<code> </code>
<code>names.Add("John");</code>
<code>names.Add("Jim");</code>
<code>names.Add("Jack");</code>
<code>names.Add("Denny");</code>
<code> </code>
<code>Console.WriteLine("Second iteration");</code>
<code>foreach (string name in namesWithJ)</code>
<code>{</code>
<code>  Console.WriteLine(name);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The result indicates that in between the iterations, the
                    output stays the same although the collection values have changed:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">结果表明，在迭代之间，尽管集合值发生了变化，但输出保持不变：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0013"><code>First iteration</code>
<code>Juan</code>
<code>Second iteration</code>
<code>Juan</code></pre>
            </section>
        </section> <span aria-label="233" epub:type="pagebreak" id="Page_233" role="doc-pagebreak"
            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
        <section aria-labelledby="head-2-83" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
            <span id="c09-sec-0012" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
            <h2 id="head-2-83" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">STANDARD QUERY OPERATORS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">标准查询运算符</font>
                    </font>
                </font>
            </h2>
            <p id="c09-para-0037" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>, <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>, and
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> are only a
                few of the query operators defined by LINQ. The LINQ query defines a declarative syntax for the most
                common operators. There are many more query operators available with the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code> class.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1"> <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> 、
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> 只是
                            LINQ 定义的查询运算符中的一部分。LINQ 查询为最常见的运算符定义了一种声明性语法。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                            类还可以访问更多查询运算符。</font>
                    </font>
                </font>
            </p>
            <p id="c09-para-0038" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">The following table lists the standard query operators defined by
                the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                class.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">下表列出了由 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                            类定义的标准查询运算符。</font>
                    </font>
                </font>
            </p>
            <table border="1" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                <thead data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <th class="left bgcolor2" scope="col"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">STANDARD QUERY OPERATORS<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">标准查询运算符</font>
                                </font>
                            </font>
                        </th>
                        <th class="left bgcolor2" scope="col">DESCRIPTION</th>
                    </tr>
                </thead>
                <tbody data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OfType&lt;TResult&gt;</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Filtering
                                operators</i>
                            define a restriction to the elements returned. With the <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                            query operator, you can use a predicate; for example, a lambda expression that returns a
                            bool. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OfType&lt;TResult&gt;</code>
                            filters the elements based on the type and returns only the elements of the type <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TResult</code>.
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">过滤操作符定义了对返回元素的约束。使用 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                        查询操作符，你可以使用一个谓词；例如，一个返回 bool 类型的 lambda 表达式。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OfType&lt;TResult&gt;</code>
                                        根据类型过滤元素，并只返回类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TResult</code>
                                        的元素。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Projection
                                operators</i>
                            are used to transform an object into a new object of a different type. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> and
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                            define a projection to select values of the result based on a selector function.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">投影操作符用于将一个对象转换为不同类型的新对象。
                                        <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                        和 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                                        定义了一个投影，根据选择器函数选择结果中的值。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending ThenByDescending</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Reverse</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sorting
                                operators</i>
                            change the order of elements returned. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code>
                            sorts values in ascending order. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                            sorts values in descending order. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code> and
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenByDescending</code>
                            operators are used for a secondary sort if the first sort gives similar results. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Reverse</code>
                            reverses the elements in the collection.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">排序操作符改变返回元素的顺序。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code>
                                        按升序排序值。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                                        按降序排序值。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code>
                                        和 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenByDescending</code>
                                        操作符用于在第一次排序结果相似时进行次要排序。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Reverse</code>
                                        反转集合中的元素。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join
                                operators</i>
                            are used to combine collections that might not be directly related to each other. With the
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code>
                            operator, you can do a join of two collections based on key selector functions. This is
                            similar to the JOIN you know from SQL. The <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                            operator joins two collections and groups the results.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">连接操作符用于组合可能彼此不直接相关的集合。使用
                                        <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code>
                                        操作符，你可以基于键选择函数对两个集合进行连接。这与你从 SQL 中知道的 JOIN 类似。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                                        操作符连接两个集合并对结果进行分组。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToLookup</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Grouping
                                operators</i>
                            put the data into groups. The <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy</code>
                            operator groups elements with a common key. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToLookup</code>
                            groups the elements by creating a one-to-many dictionary.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">分组运算符将数据分组。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy</code>
                                        运算符按共同键分组元素。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToLookup</code>
                                        通过创建一对多字典对元素进行分组。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Any</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">All</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Contains</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Quantifier
                                operators</i>
                            return a Boolean value if elements of the sequence satisfy a specific condition. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Any</code>, <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">All</code>, and
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Contains</code>
                            are quantifier operators. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Any</code>
                            determines whether any element in the collection satisfies a predicate function. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">All</code>
                            determines whether all elements in the collection satisfy a predicate. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Contains</code>
                            checks whether a specific element is in the collection.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">
                                        量词运算符返回一个布尔值，如果序列中的元素满足特定条件。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Any</code>
                                        、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">All</code>
                                        和 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Contains</code>
                                        是量词运算符。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Any</code>
                                        确定集合中是否有任何元素满足谓词函数。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">All</code>
                                        确定集合中的所有元素是否满足谓词。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Contains</code>
                                        检查特定元素是否在集合中。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TakeWhile</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SkipWhile</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Partitioning
                                operators</i>
                            return a subset of the collection. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code>,
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code>,
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TakeWhile</code>,
                            and <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SkipWhile</code>
                            are partitioning operators. With these, you get a partial result. With <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code>, you
                            have to specify the number of elements to take from the collection. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code>
                            ignores the specified number of elements and takes the rest. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TakeWhile</code>
                            takes the elements as long as a condition is true. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SkipWhile</code>
                            skips the elements as long as the condition is true.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">分区运算符返回集合的子集。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code>
                                        、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code>
                                        、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TakeWhile</code>
                                        和 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SkipWhile</code>
                                        是分区运算符。使用这些运算符，您将得到一个部分结果。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code>
                                        ，您必须指定要从集合中获取的元素数量。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code>
                                        忽略指定的元素数量并获取其余部分。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TakeWhile</code>
                                        只要条件为真就获取元素。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SkipWhile</code>
                                        只要条件为真就跳过元素。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Distinct</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Union</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Except</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Set operators</i>
                            return a collection set. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Distinct</code>
                            removes duplicates from a collection. With the exception of <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Distinct</code>,
                            the other set operators require two collections. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Union</code>
                            returns unique elements that appear in either of the two collections. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>
                            returns elements that appear in both collections. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Except</code>
                            returns elements that appear in just one collection. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code>
                            combines two collections into one.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">集合运算符返回一个集合集。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Distinct</code>
                                        从集合中移除重复项。除了 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Distinct</code>
                                        之外，其他集合运算符需要两个集合。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Union</code>
                                        返回出现在两个集合中任一集合的唯一元素。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>
                                        返回出现在两个集合中的元素。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Except</code>
                                        返回仅出现在一个集合中的元素。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code>
                                        将两个集合合并为一个。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstOrDefault</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Last</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastOrDefault</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ElementAt</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ElementAtOrDefault</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Single</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SingleOrDefault</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Element
                                operators</i>
                            return just one element. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>
                            returns the first element that satisfies a condition. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstOrDefault</code>
                            is similar to <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>, but
                            it returns a default value of the type if the element is not found. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Last</code>
                            returns the last element that satisfies a condition. With <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ElementAt</code>,
                            you specify the position of the element to return. <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Single</code>
                            returns only the one element that satisfies a condition. If more than one element satisfies
                            the condition, an exception is thrown. All the <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">XXOrDefault</code>
                            methods are similar to the methods that start with the same prefix, but they return the
                            default value of the type if the element is not found.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">元素运算符只返回一个元素。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>
                                        返回满足条件的第一个元素。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstOrDefault</code>
                                        类似于 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>
                                        ，但如果未找到元素，则返回类型的默认值。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Last</code>
                                        返回满足条件的最后一个元素。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ElementAt</code>
                                        时，您可以指定要返回的元素的位置。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Single</code>
                                        只返回满足条件的单个元素。如果多个元素满足条件，将抛出异常。所有 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">XXOrDefault</code>
                                        方法都类似于以相同前缀开头的方法，但如果未找到元素，则返回类型的默认值。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Min</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Max</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Aggregate</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1">
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Aggregate
                                operators</i>
                            compute a single value from a collection. With aggregate operators, you can get the sum of
                            all values, the number of all elements, the element with the lowest or highest value, an
                            average number, and so on.<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">
                                        聚合运算符从一个集合中计算出一个单一值。使用聚合运算符，你可以得到所有值的总和、所有元素的数量、值最低或最高的元素、平均数等等。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToArray</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsEnumerable</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToList</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToDictionary</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cast&lt;TResult&gt;</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Conversion
                                operators</i>
                            convert the collection to an array: <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code>,
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IList</code>,
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IDictionary</code>,
                            and so on. The <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cast</code>
                            method casts every item of the collection to the generic argument type.<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">转换运算符将集合转换为数组： <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code>
                                        、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IList</code>
                                        、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IDictionary</code>
                                        等等。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cast</code>
                                        方法将集合中的每个项目转换为泛型参数类型。</font>
                                </font>
                            </font>
                        </td>
                    </tr>
                    <tr data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <td class="left bgcolor3"
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Empty</code>
                            <br data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code> <br
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a" /> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Repeat</code>
                        </td>
                        <td class="left bgcolor3" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Generation</i>
                            operators return a new sequence. The <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Empty</code>
                            operator returns an empty <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code>,
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code>
                            returns <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code>
                            containing a sequence of numbers, and <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Repeat returns IEnumerable</code>
                            with one repeated value.<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">生成运算符返回一个新的序列。 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Empty</code>
                                        运算符返回一个空的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code>
                                        ， <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code>
                                        返回一个包含数字序列的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code>
                                        ， <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Repeat returns IEnumerable</code>
                                        返回一个包含一个重复值的#5#。</font>
                                </font>
                            </font><span aria-label="234" epub:type="pagebreak" id="Page_234" role="doc-pagebreak"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span></td>
                    </tr>
                </tbody>
            </table>
            <p id="c09-para-0086" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">The following sections provide examples demonstrating how to use
                these operators.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">以下几节提供了示例，演示如何使用这些运算符。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0013"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-191" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Filter <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">过滤器</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">This section looks at some examples for a query. This sample
                    application available with the code download offers passing command-line arguments for every
                    different feature shown. With the Debug section in the Properties of Visual Studio, you can
                    configure the command-line arguments as needed to run the different sections of the <span
                        aria-label="235" epub:type="pagebreak" id="Page_235" role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>application. Using
                    the command line with the installed SDK, you can invoke the commands using .NET CLI in this way:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                本节将查看一些查询示例。代码下载中提供的示例应用程序为每个不同的功能提供了传递命令行参数。通过 Visual Studio
                                的属性中的调试部分，您可以配置所需的命令行参数来运行应用程序的不同部分。使用安装的 SDK，您可以通过.NET CLI 以这种方式调用命令：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0014"><code>&gt; dotnet run -- filter simplefilter</code></pre>
                <p id="c09-para-0087" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">which passes the arguments <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">filter simplefilter</code>
                    to the application.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">将参数 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">filter simplefilter</code>
                                传递给应用程序。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">With the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code> clause, you
                    can combine multiple expressions—for example, get only the racers from Brazil and Austria who won
                    more than 15 races. The result type of the expression passed to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code> clause just
                    needs to be of type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">bool</code> (code file
                    <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/FilterSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                子句，您可以组合多个表达式——例如，仅获取来自巴西和奥地利的赢得超过 15 场比赛的车手。传递给 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                子句的表达式的结果类型只需要是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">bool</code>
                                类型（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/FilterSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0015"><code>public static void SimpleFilter()</code>
<code>{</code>
<code>  var racers = from r in Formula1.GetChampions()</code>
<code>               <b>where r.Wins &gt; 15 &amp;&amp;</b> </code>
<code>               <b>(r.Country == "Brazil" || r.Country == "Austria")</b></code>
<code>               select r;</code>
<code> </code>
<code>  foreach (var r in racers)</code>
<code>  {</code>
<code>    Console.WriteLine($"{r:A}");</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Starting the program with this LINQ query (<code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">filter simplefilter</code>)
                    returns Niki Lauda, Nelson Piquet, and Ayrton Senna, as shown here:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用这个 LINQ 查询（ <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">filter simplefilter</code>
                                ）启动程序会返回尼基·拉 uda、尼尔森·皮奎特和艾尔顿·塞纳，如下所示：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0016"><code>Niki Lauda, country: Austria, Starts: 173, Wins: 25</code>
<code>Nelson Piquet, country: Brazil, Starts: 204, Wins: 23</code>
<code>Ayrton Senna, country: Brazil, Starts: 161, Wins: 41</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Not all queries can be done with the LINQ query syntax, and
                    not all extension methods are mapped to LINQ query clauses. Advanced queries require using extension
                    methods. To better understand complex queries with extension methods, it's good to see how simple
                    queries are mapped. The following code uses the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> extension
                    method instead of a LINQ query. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> extension
                    method would return the same object returned by the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method, so
                    it isn't needed here (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/FilterSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">并非所有查询都能使用 LINQ
                                查询语法完成，并非所有扩展方法都映射到 LINQ 查询子句。高级查询需要使用扩展方法。为了更好地理解使用扩展方法的复杂查询，了解简单查询的映射方式会很有帮助。以下代码使用
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                扩展方法代替 LINQ 查询。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                扩展方法会返回与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                方法相同的对象，因此在这里不需要（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/FilterSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0017"><code>public static void FilterWithMethods()</code>
<code>{</code>
<code>  var racers = Formula1.GetChampions()</code>
<code>    <b>.Where(r =&gt; r.Wins &gt; 15 &amp;&amp;</b> </code>
<code>      <b>(r.Country == "Brazil" || r.Country == "Austria"));</b></code>
<code>  <b>//…</b></code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0014"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-192" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Filter with Index <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">按索引筛选</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">One scenario in which you can't use the LINQ query is an
                    overload of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method. With
                    an overload of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method, you
                    can pass a second parameter that is the index. The index is a counter for every result returned from
                    the filter. You can use the index within the expression to do some calculation based on the index.
                    In the following example, the index is used within the code that is called by the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> extension
                    method to return only racers whose last name starts with A if the index is even (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/FilterSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在 LINQ 查询无法使用的场景之一是 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                方法的重载。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                方法的重载，可以传递一个索引作为第二个参数。索引是对筛选返回的每个结果的计数器。你可以在表达式中使用索引进行基于索引的计算。在以下示例中，如果索引是偶数，则索引会在被
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                扩展方法调用的代码中使用，以返回姓氏以 A 开头的赛车手（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/FilterSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0018"><code>public static void FilteringWithIndex()</code>
<code>{</code>
<code>  var racers = Formula1.GetChampions()</code>
<code>    <b>.Where((r, index) =&gt; r.LastName.StartsWith("A") &amp;&amp; index % 2 != 0);</b></code>
<code> <span aria-label="236" epub:type="pagebreak" id="Page_236" role="doc-pagebreak"></span></code>
<code>  foreach (var r in racers)</code>
<code>  {</code>
<code>    Console.WriteLine($"{r:A}");</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The racers with last names beginning with the letter A are
                    Alberto Ascari, Mario Andretti, and Fernando Alonso. Because Mario Andretti is positioned within an
                    index that is odd, he is not in the result:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">以字母 A
                                开头的姓氏的赛车手有阿尔贝托·阿斯卡里、马里奥·安德雷蒂和费尔南多·阿隆索。由于马里奥·安德雷蒂处于一个奇数索引位置，因此不在结果中：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0019"><code>Alberto Ascari, Italy; starts: 32, wins: 13</code>
<code>Fernando Alonso, Spain; starts: 314, wins: 32</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0015"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-193" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Type Filtering <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">类型过滤</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">For filtering based on a type, you can use the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OfType</code> extension
                    method. Here the array data contains both <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">int</code> objects. When
                    you use the extension method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OfType</code>, passing
                    the string class to the generic parameter returns only the strings from the collection (code file
                    <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/FilterSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要进行基于类型的过滤，可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OfType</code>
                                扩展方法。这里的数组数据包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">int</code>
                                对象。当你使用扩展方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OfType</code>
                                时，将字符串类传递给泛型参数，将只返回集合中的字符串（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/FilterSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0020"><code>public static void TypeFilter()</code>
<code>{</code>
<code>  object[] data = { "one", 2, 3, "four", "five", 6 };</code>
<code>  <b>var query = data.OfType&lt;string&gt;();</b></code>
<code> </code>
<code>  foreach (var s in query)</code>
<code>  {</code>
<code>    Console.WriteLine(s);</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">When you run this code, the strings one, four, and five are
                    displayed:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行此代码时，将显示字符串"one"、"four"和"five"：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0021"><code>one</code>
<code>four</code>
<code>five</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0016"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-194" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Compound from <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">复合查询</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">If you need to do a filter based on a member of the object
                    that itself is a sequence, you can use a compound <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> class
                    defines a property <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code>, where <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code> is a string
                    array. For a filter of all racers who were champions with a Ferrari, you can use the LINQ query
                    shown next. The first <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code> clause
                    accesses the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> objects
                    returned from <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Formula1.GetChampions</code>.
                    The second <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                    clause accesses the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code> property of
                    the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> class
                    to return all cars of type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code>. Next the
                    cars are used with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code> clause to
                    filter only the racers who were champions with a Ferrari (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/CompoundFromSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                如果你需要基于对象的一个成员进行过滤，而该成员本身是一个序列，你可以使用复合 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code> 。
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                类定义了一个属性 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code>
                                ，其中 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code>
                                是一个字符串数组。对于过滤所有使用法拉利夺冠的车手，你可以使用下一个 LINQ 查询。第一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                子句访问从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Formula1.GetChampions</code>
                                返回的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                对象。第二个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                子句访问 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code>
                                属性以返回所有类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code>
                                的汽车。然后使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                子句过滤出所有使用法拉利夺冠的车手（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/CompoundFromSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0022"><code>public static void CompoundFrom()</code>
<code>{</code>
<code>  var ferrariDrivers = <b>from r in Formula1.GetChampions()</b></code>
<code>                       <b>from c in r.Cars</b></code>
<code>                       where c == "Ferrari"</code>
<code>                       orderby r.LastName</code>
<code>                       select r.FirstName + " " + r.LastName;</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">If you are curious about the result of this query, following
                    are all Formula 1 champions driving a Ferrari:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果你对查询结果感兴趣，以下是所有驾驶法拉利的 F1 冠军：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0023"><code>Alberto Ascari</code>
<code>Juan Manuel Fangio<span aria-label="237" epub:type="pagebreak" id="Page_237" role="doc-pagebreak"></span></code>
<code>Mike Hawthorn</code>
<code>Phil Hill</code>
<code>Niki Lauda</code>
<code>Kimi Räikkönen</code>
<code>Jody Scheckter</code>
<code>Michael Schumacher</code>
<code>John Surtees</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The C# compiler converts a compound <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code> clause with a
                    LINQ query to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                    extension method. You can use <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code> to
                    iterate a sequence of a sequence. The overload of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code> method
                    that is used with the example is shown here:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">C# 编译器将带有 LINQ 查询的复合 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                子句转换为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                                扩展方法。你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                                来迭代序列的序列。示例中使用的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                                方法的重载如下所示：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0024"><code>public static IEnumerable&lt;TResult&gt; SelectMany&lt;TSource, TCollection, TResult&gt; (</code>
<code>  this IEnumerable&lt;TSource&gt; source,</code>
<code>  Func&lt;TSource,</code>
<code>  IEnumerable&lt;TCollection&gt;&gt; collectionSelector,</code>
<code>  Func&lt;TSource, TCollection, TResult&gt; resultSelector);</code></pre>
                <p id="c09-para-0099" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The first parameter is the implicit parameter that receives
                    the sequence of <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> objects from
                    the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampions</code>
                    method. The second parameter is the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">collectionSelector</code>
                    delegate where the inner sequence is defined. With the lambda expression <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">r =&gt; r.Cars</code>,
                    the collection of cars should be returned. The third parameter is a delegate that is now invoked for
                    every car and receives the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Car</code> objects. The
                    lambda expression creates an anonymous type with a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> and a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Car</code> property. As a
                    result of this <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code> method,
                    the hierarchy of racers and cars is flattened, and a collection of new objects of an anonymous type
                    for every car is returned.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">第一个参数是隐式参数，用于接收来自 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampions</code>
                                方法的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                对象序列。第二个参数是定义内部序列的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">collectionSelector</code>
                                委托。使用 lambda 表达式 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">r =&gt; r.Cars</code>
                                ，应返回汽车集合。第三个参数是一个委托，现在为每辆汽车被调用，并接收 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Car</code>
                                对象。lambda 表达式创建了一个匿名类型，包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Car</code>
                                属性。由于这个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                                方法，赛车和汽车的层次结构被扁平化，并为每辆汽车返回了一个新的匿名类型对象集合。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">This new collection is passed to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method so
                    that only the racers driving a Ferrari are filtered. Finally, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> methods are
                    invoked (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/CompoundFromSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这个新集合被传递给 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                方法，以便仅过滤驾驶法拉利的赛车。最后，调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                方法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/CompoundFromSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0025"><code>public static void CompoundFromWithMethods()</code>
<code>{</code>
<code>  var ferrariDrivers = Formula1.GetChampions()</code>
<code>    <b>.SelectMany(r =&gt; r.Cars, (r, c) =&gt; new { Racer = r, Car = c })</b></code>
<code>    .Where(r =&gt; r.Car == "Ferrari")</code>
<code>    .OrderBy(r =&gt; r.Racer.LastName)</code>
<code>    .Select(r =&gt; $"{r.Racer.FirstName} {r.Racer.LastName}");</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Resolving the generic <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code> method
                    to the types that are used here, the types are resolved as follows. In this case, the source is of
                    type <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>, the
                    filtered collection is a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code> array, and,
                    of course, the name of the anonymous type that is returned is not known and is shown here as <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TResult</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">将泛型 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                                方法解析为这里使用的类型，类型解析如下。在这种情况下，源类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                ，过滤后的集合是一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code>
                                数组，当然，返回的匿名类型的名称是未知的，这里显示为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TResult</code>
                                ：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0026"><code>public static IEnumerable&lt;TResult&gt; SelectMany&lt;Racer, string, TResult&gt; (</code>
<code>  this IEnumerable&lt;Racer&gt; source,</code>
<code>  Func&lt;Racer, IEnumerable&lt;string&gt;&gt; collectionSelector,</code>
<code>  Func&lt;Racer, string, TResult&gt; resultSelector);</code></pre>
                <p id="c09-para-0102" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Because the query was just converted from a LINQ query to
                    extension methods, the result is the same as before.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">由于查询刚刚从 LINQ 查询转换为扩展方法，结果与之前相同。
                            </font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0017"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-195" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Sorting <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">排序</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">To sort a sequence, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code> clause was
                    used already. This section reviews the earlier example, now with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby descending</code>
                    clause. Here the racers are sorted based on the number of wins as specified by the key selector in
                    descending order (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/SortingSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要对序列进行排序，之前已经使用了 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code>
                                子句。本节将回顾之前的示例，现在使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby descending</code>
                                子句。这里根据键选择器指定的获胜次数，以降序对赛跑者进行排序（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/SortingSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0027"><code>public static void SortDescending()</code>
<code>{</code>
<code>  var racers = from r in Formula1.GetChampions()<span aria-label="238" epub:type="pagebreak" id="Page_238" role="doc-pagebreak"></span></code>
<code>               where r.Country == "Brazil"</code>
<code>               <b>orderby r.Wins descending</b></code>
<code>               select r;</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code> clause is
                    resolved to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code> method,
                    and the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby descending</code>
                    clause is resolved to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                    method:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code>
                                子句解析为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code>
                                方法， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby descending</code>
                                子句解析为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                                方法：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0028"><code>public static void SortDescendingWithMethods()</code>
<code>{</code>
<code>  var racers = Formula1.GetChampions()</code>
<code>    .Where(r =&gt; r.Country == "Brazil")</code>
<code>    <b>.OrderByDescending(r =&gt; r.Wins)</b></code>
<code>    .Select(r =&gt; r);</code>
<code>  //…</code>
<code>}</code></pre>
                <p id="c09-para-0105" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                    methods return <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IOrderedEnumerable&lt;TSource&gt;</code>.
                    This interface derives from the interface <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;TSource&gt;</code>
                    but contains an additional method, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CreateOrderedEnumerable&lt;TSource&gt;</code>.
                    This method is used for further ordering of the sequence. If two items are the same based on the key
                    selector, ordering can continue with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenByDescending</code>
                    methods. These methods require an <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IOrderedEnumerable&lt;TSource&gt;</code>
                    to work on but return this interface as well. Therefore, you can add any number of <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenByDescending</code>
                    methods to sort the collection.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                                方法返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IOrderedEnumerable&lt;TSource&gt;</code>
                                。这个接口继承自 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;TSource&gt;</code>
                                接口，但包含一个额外的方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CreateOrderedEnumerable&lt;TSource&gt;</code>
                                。这个方法用于对序列进行进一步排序。如果两个项目根据键选择器相同，可以继续使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenByDescending</code>
                                方法进行排序。这些方法需要 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IOrderedEnumerable&lt;TSource&gt;</code>
                                才能工作，但也会返回这个接口。因此，你可以添加任意数量的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenByDescending</code>
                                方法来对集合进行排序。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">When using the LINQ query, you just add all the different
                    keys (with commas) for sorting to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code> clause. In
                    the next example, the sort of all racers is done first based on country, next on last name, and
                    finally on first name. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code> extension
                    method that is added to the result of the LINQ query is used to return the first 10 results:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在使用 LINQ
                                查询时，你只需将所有用于排序的不同键（用逗号分隔）添加到 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">orderby</code>
                                子句中。在下一个示例中，所有赛手的排序首先基于国家，然后是姓氏，最后是名字。添加到 LINQ 查询结果中的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code>
                                扩展方法用于返回前 10 个结果：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0029"><code>public static void SortMultiple()</code>
<code>{</code>
<code>  var racers = (from r in Formula1.GetChampions()</code>
<code>                <b>orderby r.Country, r.LastName, r.FirstName</b></code>
<code>                select r).Take(10);</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The sorted result is shown here:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">排序结果在此处显示：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0030"><code>Argentina: Fangio, Juan Manuel</code>
<code>Australia: Brabham, Jack</code>
<code>Australia: Jones, Alan</code>
<code>Austria: Lauda, Niki</code>
<code>Austria: Rindt, Jochen</code>
<code>Brazil: Fittipaldi, Emerson</code>
<code>Brazil: Piquet, Nelson</code>
<code>Brazil: Senna, Ayrton</code>
<code>Canada: Villeneuve, Jacques</code>
<code>Finland: Hakkinen, Mika</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Doing the same with extension methods makes use of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code> methods:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用扩展方法进行同样的操作会用到 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderBy</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code>
                                方法：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0031"><code>public static void SortMultipleWithMethods()</code>
<code>{</code>
<code>  var racers = Formula1.GetChampions()</code>
<code>    <b>.OrderBy(r =&gt; r.Country)</b></code>
<code>    <b>.ThenBy(r =&gt; r.LastName)</b><span aria-label="239" epub:type="pagebreak" id="Page_239" role="doc-pagebreak"></span></code>
<code>    <b>.ThenBy(r =&gt; r.FirstName)</b></code>
<code>    .Take(10);</code>
<code>  //…</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0018"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-196" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Grouping <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">分组</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">To group query results based on a key value, you can use the
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group</code> clause.
                    Now the Formula 1 champions should be grouped by country, and the number of champions within a
                    country should be listed. The clause <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group r by r.Country into g</code>
                    groups all the racers based on the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Country</code> property
                    and defines a new identifier <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">g</code> that you can use
                    later to access the group result information. In the following example, the result from the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group</code> clause is
                    ordered based on the extension method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> that is
                    applied on the group result; and if the count is the same, the ordering is done based on the key.
                    This is the country because this was the key used for grouping. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code> clause
                    filters the results based on groups that have at least two items, and the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code> clause
                    creates an anonymous type with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Country</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> properties
                    (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/GroupSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要基于键值对查询结果进行分组，你可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group</code>
                                子句。现在 F1 冠军应该按国家分组，并列出每个国家的冠军数量。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group r by r.Country into g</code>
                                子句基于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Country</code>
                                属性对所有赛车手进行分组，并定义了一个新的标识符 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">g</code>
                                ，你可以稍后使用它来访问分组结果信息。在以下示例中， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group</code>
                                子句的结果基于应用于分组结果的扩展方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                进行排序；如果数量相同，则按键进行排序。这里按键排序，因为这是用于分组的键。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                子句根据至少包含两个项目的组来过滤结果，而 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code>
                                子句创建了一个包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Country</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                属性的匿名类型（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/GroupSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0032"><code>public static void Grouping()</code>
<code>{</code>
<code>  var countries = from r in Formula1.GetChampions()</code>
<code>                  <b>group r by r.Country into g</b></code>
<code>                  orderby g.Count() descending, g.Key</code>
<code>                  where g.Count()&gt;= 2</code>
<code>                  select new </code>
<code>                  {</code>
<code>                    Country = g.Key,</code>
<code>                    Count = g.Count()</code>
<code>                  };</code>
<code> </code>
<code>  foreach (var item in countries)</code>
<code>  {</code>
<code>    Console.WriteLine($"{item.Country, -10} {item.Count}");</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The result displays the collection of objects with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Country</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> properties:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">结果显示了具有 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Country</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                属性的对象集合：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0033"><code>UK 10</code>
<code>Brazil 3</code>
<code>Finland 3</code>
<code>Germany 3</code>
<code>Australia 2</code>
<code>Austria 2</code>
<code>Italy 2</code>
<code>USA 2</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Doing the same with extension methods, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">groupby</code> clause is
                    resolved to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy</code> method.
                    What's interesting with the declaration of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy</code> method is
                    that it returns an enumeration of objects implementing the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IGrouping</code>
                    interface. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IGrouping</code>
                    interface defines the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Key</code> property, so
                    you can access the key of the group after defining the call to this method:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用扩展方法时， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">groupby</code>
                                子句解析为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy</code>
                                方法。关于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy</code>
                                方法的声明有趣之处在于，它返回实现了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IGrouping</code>
                                接口的对象的枚举。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IGrouping</code>
                                接口定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Key</code>
                                属性，因此你可以在定义调用此方法后访问组的键：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0034"><code>public static IEnumerable&lt;IGrouping&lt;TKey, TSource&gt;&gt; GroupBy&lt;TSource, TKey&gt;(</code>
<code>  this IEnumerable&lt;TSource&gt; source, Func&lt;TSource, TKey&gt; keySelector);</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group r by r.Country into g</code>
                    clause is resolved to <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy(r =&gt; r.Country)</code>
                    and returns the group sequence. The group sequence is first ordered by the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                    method, then by the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code> method.
                    Next, the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                    and <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                    methods that you already know are invoked (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/GroupSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">group r by r.Country into g</code>
                                子句解析为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupBy(r =&gt; r.Country)</code>
                                并返回分组序列。分组序列首先按 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                                方法排序，然后按 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ThenBy</code>
                                方法排序。接下来，你已知的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                方法被调用（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/GroupSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0035"><span aria-label="240" epub:type="pagebreak" id="Page_240" role="doc-pagebreak"></span>
<code>public static void GroupingWithMethods()</code>
<code>{</code>
<code>  var countries = Formula1.GetChampions()</code>
<code>    <b>.GroupBy(r =&gt; r.Country)</b></code>
<code>    .OrderByDescending(g =&gt; g.Count())</code>
<code>    .ThenBy(g =&gt; g.Key)</code>
<code>    .Where(g =&gt; g.Count()&gt;= 2)</code>
<code>    .Select(g =&gt; new </code>
<code>    { </code>
<code>      Country = g.Key, </code>
<code>      Count = g.Count()</code>
<code>    });</code>
<code>  //…</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0019"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-197" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Variables Within the LINQ Query <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">LINQ 查询中的变量 </font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">With the LINQ query as it is written for grouping, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> method is
                    called multiple times. You can change this by using the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code> clause. <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code> allows
                    defining variables within the LINQ query (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/GroupSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">对于当前用于分组的 LINQ 查询， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                方法会被多次调用。你可以通过使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code>
                                子句来改变这一点。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code>
                                允许在 LINQ 查询中定义变量（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/GroupSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0036"><code>public static void GroupingWithVariables()</code>
<code>{</code>
<code>  var countries = from r in Formula1.GetChampions()</code>
<code>                  group r by r.Country into g</code>
<code>                  <b>let count = g.Count()</b></code>
<code>                  orderby count descending, g.Key</code>
<code>                  where count&gt;= 2</code>
<code>                  select new</code>
<code>                  {</code>
<code>                    Country = g.Key,</code>
<code>                    Count = count</code>
<code>                  };</code>
<code>  //…</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0115" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Why is it a bad
                                idea to invoke the </i><code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> method multiple
                                times on a LINQ query? Of course, it's always faster to cache the result of a method
                                instead of calling it multiple items. With the implementation of the extension method
                            </i><code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> that's based on
                                the </i><code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> interface, you
                                should also think about how this method can be implemented. With the members of the
                            </i><code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> interface, it's
                                possible to iterate through all the elements and count the number of items in the list.
                                The longer the list is, the longer it takes.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 为什么在 LINQ 查询上多次调用 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                        方法是个坏主意？当然，缓存方法的返回结果总比多次调用它更快。基于 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code>
                                        接口的扩展方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                        的实现中，你也应该考虑如何实现这个方法。通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable</code>
                                        接口的成员，可以遍历所有元素并计算列表中的项目数量。列表越长，所需时间越长。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Using the method syntax, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> method was
                    invoked multiple times as well. To define extra data to pass to the next method (what is really done
                    by the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code>
                    clause), you can use the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> method to
                    create anonymous types. Here, an anonymous type with <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Group</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> properties
                    is created. A collection of items with these properties is passed to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                    method where the sort is based on the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> property of
                    this anonymous type:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用方法语法， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                方法同样被多次调用。为了定义要传递给下一个方法的数据（实际上是由 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code>
                                子句完成的操作），你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                方法来创建匿名类型。这里创建了一个具有 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Group</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                属性的匿名类型。一个具有这些属性的项目集合被传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                                方法，其中排序基于这个匿名类型的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                属性：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0037"><code>public static void GroupingWithAnonymousTypes()</code>
<code>{</code>
<code>  var countries = Formula1.GetChampions()<span aria-label="241" epub:type="pagebreak" id="Page_241" role="doc-pagebreak"></span></code>
<code>    .GroupBy(r =&gt; r.Country)</code>
<code>    <b>.Select(g =&gt; new { Group = g, Count = g.Count() })</b></code>
<code>    .OrderByDescending(g =&gt; g.Count)</code>
<code>    .ThenBy(g =&gt; g.Group.Key)</code>
<code>    .Where(g =&gt; g.Count&gt;= 2)</code>
<code>    .Select(g =&gt; new</code>
<code>    {</code>
<code>      Country = g.Group.Key,</code>
<code>      Count = g.Count</code>
<code>    });</code>
<code>  //…</code>
<code>} </code></pre>
                <p id="c09-para-0117" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Be aware of the number of interim objects created based on
                    the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code> clause
                    or <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                    method. When you query through large lists, the number of objects created that need to be garbage
                    collected later on can have a huge impact on performance.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">注意基于 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code>
                                子句或 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                方法的临时对象数量。当你查询大型列表时，后续需要垃圾回收的对象数量会对性能产生巨大影响。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0021"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-198" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Grouping with Nested Objects <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">嵌套对象分组</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">If the grouped objects should contain nested sequences, you
                    can do that by changing the anonymous type created by the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code> clause.
                    With this example, the returned countries should contain not only the properties for the name of the
                    country and the number of racers, but also a sequence of the names of the racers. This sequence is
                    assigned by using an inner <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                    /
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">in</code> clause
                    assigned to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racers</code> property.
                    The inner <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                    clause is using the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">g</code> group to get all
                    racers from the group, order them by last name, and create a new string based on the first and last
                    name (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/GroupSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果分组对象应包含嵌套序列，可以通过更改由 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code>
                                子句创建的匿名类型来实现。在这个示例中，返回的国家不仅应包含国家名称和赛车手数量的属性，还应包含赛车手名称的序列。这个序列是通过为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racers</code>
                                属性分配内部 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code> /
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">in</code>
                                子句来指定的。内部 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                子句使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">g</code>
                                分组获取所有赛车手，按姓氏排序，并基于名和姓创建新的字符串（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/GroupSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0038"><code>public static void GroupingAndNestedObjects()</code>
<code>{</code>
<code>  var countries = from r in Formula1.GetChampions()</code>
<code>                  group r by r.Country into g</code>
<code>                  let count = g.Count()</code>
<code>                  orderby count descending, g.Key</code>
<code>                  where count&gt;= 2</code>
<code>                  select new</code>
<code>                  {</code>
<code>                    Country = g.Key,</code>
<code>                    Count = count,</code>
<code>                    <b>Racers = from r1 in g</b></code>
<code>                             <b>orderby r1.LastName</b></code>
<code>                             <b>select r1.FirstName + " " + r1.LastName</b></code>
<code>                  };</code>
<code> </code>
<code>  foreach (var item in countries)</code>
<code>  {</code>
<code>    Console.WriteLine($"{item.Country, -10} {item.Count}");</code>
<code>    foreach (var name in item.Racers)</code>
<code>    {</code>
<code>      Console.Write($"{name}; ");</code>
<code>    }</code>
<code>    Console.WriteLine();</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><span aria-label="242" epub:type="pagebreak" id="Page_242"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>Using extension
                    methods, the inner Racer objects are created using the group variable <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">g</code> of type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IGrouping</code> where
                    the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Key</code> property
                    is the key for the grouping—the country in this case—and the items of a group can be accessed using
                    the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Group</code>
                    property:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用扩展方法，内部 Racer 对象是使用类型为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IGrouping</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">g</code>
                                分组变量创建的，其中 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Key</code>
                                属性是分组键——在这个例子中是国家——并且可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Group</code>
                                属性访问分组中的项：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0039"><code>public static void GroupingAndNestedObjectsWithMethods()</code>
<code>{</code>
<code>  var countries = Formula1.GetChampions()</code>
<code>    .GroupBy(r =&gt; r.Country)</code>
<code>    .Select(g =&gt; new</code>
<code>    {</code>
<code>      Group = g,</code>
<code>      Key = g.Key,</code>
<code>      Count = g.Count()</code>
<code>    })</code>
<code>    .OrderByDescending(g =&gt; g.Count)</code>
<code>    .ThenBy(g =&gt; g.Key)</code>
<code>    .Where(g =&gt; g.Count&gt;= 2)</code>
<code>    .Select(g =&gt; new</code>
<code>    {</code>
<code>      Country = g.Key,</code>
<code>      Count = g.Count,</code>
<code>      Racers = g.Group.OrderBy(r =&gt; r.LastName)</code>
<code>        .Select(r =&gt; r.FirstName + " " + r.LastName)</code>
<code>    });</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The output now lists all champions from the selected
                    countries:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">输出现在列出了所选国家的所有冠军：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0040"><code>UK        10</code>
<code>Jenson Button; Jim Clark; Lewis Hamilton; Mike Hawthorn; Graham Hill;</code>
<code>Damon Hill; James Hunt; Nigel Mansell; Jackie Stewart; John Surtees;</code>
<code>Brazil     3</code>
<code>Emerson Fittipaldi; Nelson Piquet; Ayrton Senna;</code>
<code>Finland    3</code>
<code>Mika Hakkinen; Kimi Raikkonen; Keke Rosberg;</code>
<code>Germany    3</code>
<code>Nico Rosberg; Michael Schumacher; Sebastian Vettel;</code>
<code>Australia  2</code>
<code>Jack Brabham; Alan Jones;</code>
<code>Austria    2</code>
<code>Niki Lauda; Jochen Rindt;</code>
<code>Italy      2</code>
<code>Alberto Ascari; Nino Farina;</code>
<code>USA        2</code>
<code>Mario Andretti; Phil Hill;</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0022"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-199" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Inner Join <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">内连接</font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0121" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">You can use the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">join</code> clause to
                    combine two sources based on specific criteria. First, however, let's get two lists that should be
                    joined. With Formula 1, there are drivers and constructor champions. The drivers are returned from
                    the method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampions</code>, and
                    the constructors are returned from the method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetConstructorChampions</code>.
                    It would be interesting to get a list that lists the driver and the constructor champions for each
                    year.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">join</code>
                                子句根据特定条件组合两个数据源。首先，让我们获取两个应该进行连接的列表。使用公式 1，有车手和制造商冠军。车手是从 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampions</code>
                                方法返回的，制造商冠军是从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetConstructorChampions</code>
                                方法返回的。获取一个列出每年车手和制造商冠军的列表会很有趣。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><span aria-label="243" epub:type="pagebreak" id="Page_243"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>To do this, the
                    first two queries for the racers and the teams are defined (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">为此，首先定义了两个查询用于获取车手和车队（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0041"><code>public static void InnerJoin()</code>
<code>{</code>
<code>  var racers = from r in Formula1.GetChampions()</code>
<code>               from y in r.Years</code>
<code>               select new</code>
<code>               {</code>
<code>                 Year = y,</code>
<code>                 Name = r.FirstName + " " + r.LastName</code>
<code>               };</code>
<code> </code>
<code>  var teams = from t in Formula1.GetConstructorChampions()</code>
<code>              from y in t.Years</code>
<code>              select new</code>
<code>              {</code>
<code>                Year = y,</code>
<code>                Name = t.Name</code>
<code>              };</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Using these two queries, a join is done based on the year of
                    the driver champion and the year of the team champion with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">join</code> clause. The
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code> clause
                    defines a new anonymous type containing <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Year</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>, and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Team</code> properties:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用这两个查询，通过 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">join</code>
                                子句根据车手冠军的年份和车队冠军的年份进行连接。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">select</code>
                                子句定义了一个新的匿名类型，包含 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Year</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Team</code>
                                属性：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0042"><code>var racersAndTeams = (from r in racers</code>
<code>                      <b>join t in teams on r.Year equals t.Year</b></code>
<code>                      select new</code>
<code>                      {</code>
<code>                        r.Year,</code>
<code>                        Champion = r.Name,</code>
<code>                        Constructor = t.Name</code>
<code>                      }).Take(10);</code>
<code>Console.WriteLine("Year World Champion\t\t   Constructor Title");</code>
<code> </code>
<code>foreach (var item in racersAndTeams)</code>
<code>{</code>
<code>  Console.WriteLine($"{item.Year}: {item.Champion,-20} {item.Constructor}");</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Of course, you can also combine this to just one LINQ query,
                    but that's a matter of taste:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当然，你也可以将这个组合成一个单一的 LINQ
                                查询，但这完全是个人喜好：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0043"><code>var racersAndTeams =</code>
<code>  (from r in</code>
<code>   from r1 in Formula1.GetChampions()</code>
<code>   from yr in r1.Years</code>
<code>   select new</code>
<code>   {</code>
<code>     Year = yr,</code>
<code>     Name = r1.FirstName + " " + r1.LastName</code>
<code>   }</code>
<code>   <b>join t in</b></code>
<code>     from t1 in Formula1.GetConstructorChampions()</code>
<code>     from yt in t1.Years</code>
<code>     select new<span aria-label="244" epub:type="pagebreak" id="Page_244" role="doc-pagebreak"></span></code>
<code>     {</code>
<code>       Year = yt,</code>
<code>       Name = t1.Name</code>
<code>     }</code>
<code>   <b>on r.Year equals t.Year</b></code>
<code>   orderby t.Year</code>
<code>   select new</code>
<code>   {</code>
<code>     Year = r.Year,</code>
<code>     Racer = r.Name,</code>
<code>     Team = t.Name</code>
<code>   }).Take(10);</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Using extension methods, the racers and teams can be joined
                    by invoking the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code> method,
                    passing the teams with the first argument to join them with the racers, specifying the key selectors
                    for the outer and inner collections, and defining the result selector with the last argument (code
                    file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用扩展方法，可以通过调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code>
                                方法将赛车手和车队连接起来，将车队作为第一个参数传入以与赛车手连接，指定外层和内层集合的键选择器，并使用最后一个参数定义结果选择器（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0044"><code>static void InnerJoinWithMethods()</code>
<code>{</code>
<code>  var racers = Formula1.GetChampions()</code>
<code>    .SelectMany(r =&gt; r.Years, (r1, year) =&gt;</code>
<code>    new</code>
<code>    {</code>
<code>      Year = year,</code>
<code>      Name = $"{r1.FirstName} {r1.LastName}"</code>
<code>    });</code>
<code> </code>
<code>  var teams = Formula1.GetConstructorChampions()</code>
<code>    .SelectMany(t =&gt; t.Years, (t, year) =&gt;</code>
<code>    new</code>
<code>    {</code>
<code>      Year = year,</code>
<code>      Name = t.Name</code>
<code>    });</code>
<code> </code>
<code>  var racersAndTeams = racers.Join(</code>
<code>    teams, </code>
<code>    r =&gt; r.Year, </code>
<code>    t =&gt; t.Year, </code>
<code>    (r, t) =&gt;</code>
<code>      new</code>
<code>      {</code>
<code>        Year = r.Year,</code>
<code>        Champion = r.Name,</code>
<code>        Constructor = t.Name</code>
<code>      }).OrderBy(item =&gt; item.Year).Take(10);</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The output displays data from the anonymous type for the
                    first 10 years in which both a driver and constructor championship took place:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">输出显示在同时举行了司机和制造商锦标赛的前 10
                                年中来自匿名类型的数据：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0045"><code>Year  World Champion   Constructor Title</code>
<code>1958: Mike Hawthorn    Vanwall</code>
<code>1959: Jack Brabham     Cooper</code>
<code>1960: Jack Brabham     Cooper<span aria-label="245" epub:type="pagebreak" id="Page_245" role="doc-pagebreak"></span></code>
<code>1961: Phil Hill        Ferrari</code>
<code>1962: Graham Hill      BRM</code>
<code>1963: Jim Clark        Lotus</code>
<code>1964: John Surtees     Ferrari</code>
<code>1965: Jim Clark        Lotus</code>
<code>1966: Jack Brabham     Brabham</code>
<code>1967: Denny Hulme      Brabham</code></pre>
                <p id="c09-para-0127" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><a href="#c09-fig-0001" id="R_c09-fig-0001"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Figure 9-1</a> shows a
                    graphical presentation of two collections combined with an inner join. Using an inner join, the
                    results are matches with both collections.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">图 9-1
                                展示了两个集合通过内连接组合的图形表示。使用内连接，结果是两个集合的匹配项。</font>
                        </font>
                    </font>
                </p>
                <figure data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> <img
                        alt="Schematic illustration of a Venn diagram representing two collections combined with an inner join."
                        class="center" src="images/c09f001.png" />
                    <figcaption data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span
                                class="figureLabel"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><a
                                    href="#R_c09-fig-0001" id="c09-fig-0001" role="doc-backlink"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><b
                                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                                        data-immersive-translate-paragraph="1">FIGURE 9-1<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 9-1</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0023"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-200" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Left Outer Join <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">左外连接 </font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0128" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The output from the previous join sample started with the
                    year 1958—the first year when both the driver and constructor championships started. The driver
                    championship had started earlier in the year 1950. With an inner join, results are returned only
                    when matching records are found. To get a result with all the years included, you can use a left
                    outer join. A <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">left outer
                        join</i> returns all the elements in the left sequence even when no match is found in the right
                    sequence.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">上一个连接示例的输出以 1958
                                年开始——这是司机和制造商冠军赛同时开始的第一个年份。司机冠军赛在该年的 1950
                                年就开始了。使用内连接，只有找到匹配记录时才会返回结果。要包含所有年份的结果，你可以使用左外连接。左外连接即使在右序列中没有找到匹配项时，也会返回左序列中的所有元素。
                            </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The earlier LINQ query is changed to a left outer join. A
                    left outer join is defined with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">join</code> clause
                    together with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DefaultIfEmpty</code>
                    method. If the left side of the query (the racers) does not have a matching constructor champion,
                    the default value for the right side is defined by the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DefaultIfEmpty</code>
                    method (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">之前的 LINQ 查询被改为左外连接。左外连接通过 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">join</code>
                                子句和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DefaultIfEmpty</code>
                                方法定义。如果查询的左侧（即赛车手）没有匹配的冠军构造函数，右侧的默认值由 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DefaultIfEmpty</code>
                                方法定义（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0046"><code>public static void LeftOuterJoin()</code>
<code>{</code>
<code>  //…</code>
<code>  var racersAndTeams =</code>
<code>    (from r in racers</code>
<code>     <b>join t in teams on r.Year equals t.Year into rt</b></code>
<code>     <b>from t in rt.DefaultIfEmpty()</b></code>
<code>     orderby r.Year</code>
<code>     select new</code>
<code>     {</code>
<code>       Year = r.Year,</code>
<code>       Champion = r.Name,</code>
<code>       Constructor = t == null ? "no constructor championship" : t.Name</code>
<code>     }).Take(10);</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">When you do the same query with the extension methods, you
                    use the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code> method.
                    The first three parameters are similar with <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>. The
                    result of <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code> is
                    different. Instead of a flat list that is returned from the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code> method, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code> returns
                    a list where every matching item of the first list contains a list of matches from the second list.
                    Using the following <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code> method,
                    the list is flattened again. In case no teams are available for a match, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Constructors</code>
                    property is assigned to the default value of the type, which is <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">null</code> with classes.
                    Creating the anonymous type, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Constructor</code>
                    property gets the string “no constructor championship” assigned if the team is <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">null</code> (code file
                    <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你使用扩展方法执行相同的查询时，你使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                                方法。前三个参数与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                                相似。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                                的结果不同。与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Join</code>
                                方法返回的扁平列表不同， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                                返回的列表中，每个匹配项都包含来自第二个列表的匹配项列表。使用以下 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                                方法，列表再次被扁平化。如果某个比赛没有可用的队伍， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Constructors</code>
                                属性会被赋予类型的默认值，对于类来说，这个默认值是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">null</code>
                                。创建匿名类型时，如果队伍是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">null</code> ，
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Constructor</code>
                                属性会被赋予字符串“没有冠军构造函数”（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0047"><code>public static void LeftOuterJoinWithMethods()</code>
<code>{</code>
<code>  //…</code>
<code>  var racersAndTeams =</code>
<code>    <b>racers.GroupJoin(</b></code>
<code>      <b>teams,</b></code>
<code>      <b>r =&gt; r.Year,</b><span aria-label="246" epub:type="pagebreak" id="Page_246" role="doc-pagebreak"></span></code>
<code>      <b>t =&gt; t.Year,</b></code>
<code>      <b>(r, ts) =&gt; new</b></code>
<code>      <b>{</b></code>
<code>        <b>Year = r.Year,</b></code>
<code>        <b>Champion = r.Name,</b></code>
<code>        <b>Constructors = ts</b></code>
<code>      <b>})</b></code>
<code>      <b>.SelectMany(</b></code>
<code>        <b>rt =&gt; rt.Constructors.DefaultIfEmpty(),</b></code>
<code>        <b>(r, t) =&gt; new</b></code>
<code>        <b>{</b></code>
<code>          <b>Year = r.Year,</b></code>
<code>          <b>Champion = r.Champion,</b></code>
<code>          <b>Constructor = t?.Name ?? "no constructor championship"</b></code>
<code>        <b>});</b></code>
<code>  //…</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0132" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Other usages of
                                the </i> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> method are shown
                                in the next section.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意： <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                                        方法的其他用法将在下一节中展示。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">When you run the application with this query, the output
                    starts with the year 1950 as shown here:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你使用这个查询运行应用程序时，输出以 1950 年开头，如下所示：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0048"><code>Year Champion            Constructor Title</code>
<code>1950: Nino Farina        no constructor championship</code>
<code>1951: Juan Manuel Fangio no constructor championship</code>
<code>1952: Alberto Ascari     no constructor championship</code>
<code>1953: Alberto Ascari     no constructor championship</code>
<code>1954: Juan Manuel Fangio no constructor championship</code>
<code>1955: Juan Manuel Fangio no constructor championship</code>
<code>1956: Juan Manuel Fangio no constructor championship</code>
<code>1957: Juan Manuel Fangio no constructor championship</code>
<code>1958: Mike Hawthorn      Vanwall</code>
<code>1959: Jack Brabham       Cooper</code></pre>
                <p id="c09-para-0134" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><a href="#c09-fig-0002" id="R_c09-fig-0002"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Figure 9-2</a> shows a
                    graphical presentation of two collections combined with a left outer join. When you use a left outer
                    join, the results are not just matches with both collections A and B but also include the left
                    collection A.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">图 9-2
                                展示了两个集合通过左外连接结合的图形表示。当你使用左外连接时，结果不仅包括集合 A 和集合 B 的匹配，还包括左边的集合 A。</font>
                        </font>
                    </font>
                </p>
                <figure data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> <img
                        alt="Schematic illustration of a Venn diagram representing two collections combined with a left outer join."
                        class="center" src="images/c09f002.png" />
                    <figcaption data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span
                                class="figureLabel"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><a
                                    href="#R_c09-fig-0002" id="c09-fig-0002" role="doc-backlink"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><b
                                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                                        data-immersive-translate-paragraph="1">FIGURE 9-2<font
                                            class="notranslate immersive-translate-target-wrapper"
                                            data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                            <font class="notranslate"
                                                data-immersive-translate-translation-element-mark="1">  </font>
                                            <font
                                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                                data-immersive-translate-translation-element-mark="1">
                                                <font
                                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                                    data-immersive-translate-translation-element-mark="1">图 9-2</font>
                                            </font>
                                        </font></b></a></span></p>
                    </figcaption>
                </figure>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0025"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-201" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Group Join <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">分组连接</font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0135" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">A left outer join makes use of a group join together with the
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">into</code> clause. It
                    uses partly the same syntax as the group join. The group join just doesn't need the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DefaultIfEmpty</code>
                    method.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">左外连接利用分组连接和 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">into</code>
                                子句。它部分使用与分组连接相同的语法。分组连接不需要 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DefaultIfEmpty</code>
                                方法。</font>
                        </font>
                    </font>
                </p>
                <p id="c09-para-0136" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">With a group join, two independent sequences can be joined,
                    whereby one sequence contains a list of items for one element of the other sequence.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                通过分组连接，可以将两个独立的序列连接起来，其中一个序列包含另一个序列中一个元素的项目列表。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The following example uses two independent sequences. One is
                    the list of champions that you already know from previous examples. The second sequence is a
                    collection of <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Championship</code>
                    types. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Championship</code> type
                    is shown in the next code snippet. This class contains the year of the championship and the racers
                    with the first, second, and third positions of the year with the properties <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Year</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Second</code>, and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Third</code> (code file
                    <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Championship.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                以下示例使用两个独立的序列。一个是您从之前示例中已知的冠军列表。第二个序列是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Championship</code>
                                类型的集合。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Championship</code>
                                类型在下一个代码片段中显示。该类包含锦标赛的年份以及当年第一、第二和第三名的赛车手，具有 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Year</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Second</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Third</code>
                                属性（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Championship.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0049"><code>public record Championship(int Year, string First, string Second, </code>
<code>  string Third);</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><span aria-label="247" epub:type="pagebreak" id="Page_247"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>The collection of
                    championships is returned from the method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampionships</code>
                    as shown in the following code snippet (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Formula1.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">从方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampionships</code>
                                返回冠军集合，如下面的代码片段所示（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DataLib/Formula1.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0050"><code>private static List&lt;Championship&gt; s_championships;</code>
<code>public static IEnumerable&lt;Championship&gt; GetChampionships() =&gt;</code>
<code>  s_championships ??= new()</code>
<code>  {</code>
<code>    new (1950, "Nino Farina", "Juan Manuel Fangio", "Luigi Fagioli"),</code>
<code>    new (1951, "Juan Manuel Fangio", "Alberto Ascari", "Froilan Gonzalez"),</code>
<code>    //…</code>
<code>  };</code></pre>
                <p id="c09-para-0139" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The list of champions should be combined with the list of
                    racers that are found within the first three positions in every year of championships, and for every
                    world champion the results for every year should be displayed.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                冠军名单应与每年锦标赛中前三位找到的车手名单合并，并且对于每一位世界冠军，应显示每年的成绩。 </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Because in the list of championships every item contains
                    three racers, this list needs to be flattened first. One way to do this is by using a compound <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>. As there's
                    no collection available with a property of a single item, but instead the three properties <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Second</code>, and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Third</code> need to be
                    combined and flattened, a new <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code> is
                    created that is filled with information from these properties. For a newly created object, custom
                    classes and anonymous types can be used as you've already seen several times. This time, you’ll
                    create a tuple. Tuples contain members of different types and can be created using tuple literals
                    with parentheses as shown in the following code snippet. Here, the code creates a flat list of
                    tuples containing the year, position in the championship, first name, and last name information from
                    racers (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                因为在锦标赛名单中每一项都包含三位车手，所以这个名单需要先展平。一种方法是通过使用复合 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                。由于没有包含单个项属性的集合可用，而是需要将三个属性 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">First</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Second</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Third</code>
                                组合并展平，因此创建了一个新的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code>
                                ，该 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code>
                                被这些属性的信息填充。对于新创建的对象，可以使用自定义类和匿名类型，正如你已经看到多次一样。这次，你将创建一个元组。元组包含不同类型的成员，可以使用括号作为元组字面量来创建，如下面的代码片段所示。在这里，代码创建了一个包含年份、锦标赛中的位置、车手的首名和姓氏信息的元组扁平列表（代码文件
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0051"><code>static void GroupJoin()</code>
<code>{</code>
<code>  var racers = from cs in Formula1.GetChampionships()</code>
<code>               from r in new List&lt;</code>
<code>                 (int Year, int Position, string FirstName, string LastName)&gt;()</code>
<code>               {</code>
<code>                 (cs.Year, Position: 1, FirstName: cs.First.FirstName(),  </code>
<code>                  LastName: cs.First.LastName()),</code>
<code>                 (cs.Year, Position: 2, FirstName: cs.Second.FirstName(), </code>
<code>                  LastName: cs.Second.LastName()),</code>
<code>                 (cs.Year, Position: 3, FirstName: cs.Third.FirstName(), </code>
<code>                  LastName: cs.Third.LastName())</code>
<code>               }</code>
<code>               select r;</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The extension methods <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstName</code> and
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code> just
                    use the last blank character to split up the string (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/StringExtensions.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">扩展方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstName</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code>
                                只是使用最后一个空白字符来分割字符串（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/StringExtensions.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0052"><code>public static class StringExtensions</code>
<code>{</code>
<code>  public static string FirstName(this string name) =&gt;</code>
<code>    name.Substring(0, name.LastIndexOf(' '));</code>
<code> </code>
<code>  public static string LastName(this string name) =&gt;</code>
<code>    name.Substring(name.LastIndexOf(' ') + 1);</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">With a join clause, the racers from both lists can be
                    combined. <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Formula1.GetChampions</code>
                    returns a list of <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racers</code>, and the
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racers</code> variable
                    returns the list of tuples that contains the year, the result, and the names of racers. It's not
                    enough to compare the items from these two collections by using the last name. Sometimes a racer and
                    his father can be found in the list (for example, Damon Hill and Graham Hill), so it's necessary to
                    compare the items by both <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstName</code> and
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code>. You do
                    this by creating a new tuple type for both lists. Using the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">into</code> clause, <span
                        aria-label="248" epub:type="pagebreak" id="Page_248" role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>the result from
                    the second collection is put into the variable <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yearResults</code>. <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yearResults</code> is
                    created for every racer in the first collection and contains the results of the matching first name
                    and last name from the second collection. Finally, with the LINQ query, a new tuple type is created
                    that contains the needed information (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过连接子句，可以将两个列表中的赛车手合并。 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Formula1.GetChampions</code>
                                返回一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racers</code>
                                列表，而 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racers</code>
                                变量返回包含年份、成绩和赛车手姓名的元组列表。仅通过姓氏比较这两个集合中的项目是不够的。有时列表中会出现赛车手和他的父亲（例如，达蒙·希尔和格雷厄姆·希尔），因此需要同时通过
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">FirstName</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code>
                                比较项目。您可以通过为两个列表创建新的元组类型来实现这一点。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">into</code>
                                子句，将第二个集合的结果放入变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yearResults</code>
                                中。对于第一个集合中的每个赛车手，都会创建一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yearResults</code>
                                并包含从第二个集合中匹配到的名字和姓氏的结果。最后，通过 LINQ 查询，创建一个新的元组类型，其中包含所需信息（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/JoinSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0053"><code>static void GroupJoin()</code>
<code>{</code>
<code>  //…</code>
<code>  var q = (from r in Formula1.GetChampions()</code>
<code>           <b>join r2 in racers on</b></code>
<code>           (</code>
<code>             r.FirstName,</code>
<code>             r.LastName</code>
<code>           )</code>
<code>           <b>equals</b></code>
<code>           (</code>
<code>             r2.FirstName,</code>
<code>             r2.LastName</code>
<code>           )</code>
<code>           <b>into yearResults</b></code>
<code>           select</code>
<code>           (</code>
<code>             r.FirstName,</code>
<code>             r.LastName,</code>
<code>             r.Wins,</code>
<code>             r.Starts,</code>
<code>             Results: yearResults</code>
<code>           ));</code>
<code> </code>
<code>  foreach (var r in q)</code>
<code>  {</code>
<code>    Console.WriteLine($"{r.FirstName} {r.LastName}");</code>
<code>    foreach (var results in r.Results)</code>
<code>    {</code>
<code>      Console.WriteLine($"\t{results.Year} {results.Position}");</code>
<code>    }</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The last results from the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">foreach</code> loop are
                    shown next. Jenson Button has been among the top three for three years—in 2004 as third, 2009 as
                    first, and 2011 as second; Sebastian Vettel was world champion four times, had the second position
                    three times, and the third in 2015; and Nico Rosberg was world champion in 2016 and in the second
                    position two times:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">接下来展示的是 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">foreach</code>
                                循环的最终结果。詹森·巴顿连续三年位居前三——2004 年获得第三名，2009 年获得第一名，2011
                                年获得第二名；塞巴斯蒂安·维特尔四次获得世界冠军，三次获得第二名，2015 年获得第三名；尼科·罗斯伯格在 2016 年获得世界冠军，两次获得第二名：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0054"><code>Jenson Button</code>
<code>        2004 3</code>
<code>        2009 1</code>
<code>        2011 2</code>
<code>Sebastian Vettel</code>
<code>        2009 2</code>
<code>        2010 1</code>
<code>        2011 1</code>
<code>        2012 1</code>
<code>        2013 1</code>
<code>        2015 3</code>
<code>        2017 2</code>
<code>        2018 2<span aria-label="249" epub:type="pagebreak" id="Page_249" role="doc-pagebreak"></span></code>
<code>Nico Rosberg</code>
<code>        2014 2</code>
<code>        2015 2</code>
<code>        2016 1</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Using <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code> with
                    extension methods, the syntax probably looks a bit easier to catch. First, the compound from is done
                    with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code> method.
                    This part is not very different, and tuples are used again. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code> method
                    is invoked by passing the racers with the first parameter to join the champions with the flattened
                    racers, and the match for both collections with the second and third parameters. The fourth
                    parameter receives the racer from the first collection and a collection of the second. These are the
                    results containing the position and the year which are written to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Results</code> tuple
                    member (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用扩展方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                                ，语法可能看起来更容易理解。首先，复合的 from 是通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SelectMany</code>
                                方法完成的。这部分区别不大，再次使用了元组。通过将赛车手作为第一个参数传递来调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GroupJoin</code>
                                方法，以将冠军与展平的赛车手连接起来，并使用第二和第三个参数匹配两个集合。第四个参数接收第一个集合中的赛车手和第二个集合的集合。这些结果包含位置和年份，这些结果写入 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Results</code>
                                元组成员（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0055"><code>static void GroupJoinWithMethods()</code>
<code>{</code>
<code>  var racers = Formula1.GetChampionships()</code>
<code>    .SelectMany(cs =&gt; new List&lt;(int Year, int Position, string FirstName, </code>
<code>       string LastName)&gt;</code>
<code>    {</code>
<code>      (cs.Year, Position: 1, FirstName: cs.First.FirstName(), </code>
<code>        LastName: cs.First.LastName()),</code>
<code>      (cs.Year, Position: 2, FirstName: cs.Second.FirstName(), </code>
<code>        LastName: cs.Second.LastName()),</code>
<code>      (cs.Year, Position: 3, FirstName: cs.Third.FirstName(), </code>
<code>        LastName: cs.Third.LastName())</code>
<code>    });</code>
<code> </code>
<code>  var q = Formula1.GetChampions()</code>
<code>    .GroupJoin(racers,</code>
<code>      r1 =&gt; (r1.FirstName, r1.LastName),</code>
<code>      r2 =&gt; (r2.FirstName, r2.LastName),</code>
<code>      (r1, r2s) =&gt; (r1.FirstName, r1.LastName, r1.Wins, r1.Starts, </code>
<code>        Results: r2s));</code>
<code>  //…</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0026"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-202" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Set Operations <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">集合操作</font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0145" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The extension methods <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Distinct</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Union</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>, and
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Except</code> are <i
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">set</i> operations. The
                    following example creates a sequence of Formula 1 champions driving a Ferrari and another sequence
                    of Formula 1 champions driving a McLaren and then determines whether any driver has been a champion
                    driving both of these cars. Of course, that's where the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>
                    extension method can help.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">扩展方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Distinct</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Union</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Except</code>
                                是集合操作。以下示例创建了一个驾驶法拉利的 F1 冠军序列，以及另一个驾驶麦克拉伦的 F1 冠军序列，然后确定是否有任何车手同时驾驶过这两种车。当然，这就是 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>
                                扩展方法可以提供帮助的地方。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">First, you need to get all champions driving a Ferrari. This
                    uses a simple LINQ query with a compound <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code> to access the
                    property <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code>
                    that's returning a sequence of string objects:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">首先，你需要获取所有驾驶法拉利的冠军。这使用了一个简单的 LINQ
                                查询，通过复合的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                来访问返回字符串对象序列的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cars</code>
                                属性：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0056"><code>var ferrariDrivers = from r in Formula1.GetChampions()</code>
<code>                     from c in r.Cars</code>
<code>                     where c == "Ferrari"</code>
<code>                     orderby r.LastName</code>
<code>                     select r;</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Now the same query with a different parameter of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code> clause is
                    needed to get all McLaren racers. It's not a good idea to write the same query again. Another option
                    is to create a method in which you can pass the parameter <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">car</code>. In case the
                    method wouldn't be needed in other places, you can create a local function. <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racersByCar</code> is the
                    name of a local function that is implemented as a lambda expression containing a LINQ query. The
                    local function <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racersByCar</code> is
                    defined within the scope of the method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SetOperations</code>, and
                    thus it can only be invoked <span aria-label="250" epub:type="pagebreak" id="Page_250"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>within this
                    method. The LINQ <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>
                    extension method is used to get all racers who won the championship with a Ferrari and a McLaren
                    (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在需要用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                子句的不同参数来获取所有 McLaren 赛车。再次编写相同的查询不是个好主意。另一个选项是在方法中传递参数 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">car</code>
                                。如果这个方法在其他地方不需要，你可以创建一个局部函数。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racersByCar</code>
                                是一个局部函数的名称，它被实现为一个包含 LINQ 查询的 lambda 表达式。局部函数 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racersByCar</code>
                                在方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SetOperations</code>
                                的作用域内定义，因此它只能在这个方法内部被调用。LINQ <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Intersect</code>
                                扩展方法用于获取所有赢得过 Ferrari 和 McLaren 冠军的赛车（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0057"><code>static void SetOperations()</code>
<code>{</code>
<code>  IEnumerable&lt;Racer&gt; racersByCar(string car) =&gt;</code>
<code>    from r in Formula1.GetChampions()</code>
<code>    from c in r.Cars</code>
<code>    where c == car</code>
<code>    orderby r.LastName</code>
<code>    select r;</code>
<code> </code>
<code>  Console.WriteLine("World champion with Ferrari and McLaren");</code>
<code>  foreach (var racer in racersByCar("Ferrari").Intersect(racersByCar("McLaren")))</code>
<code>  {</code>
<code>    Console.WriteLine(racer);</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The result is just one racer, Niki Lauda:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">结果是只有一个赛车手，尼基·拉 uda：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0058"><code>World champion with Ferrari and McLaren</code>
<code>Niki Lauda</code></pre>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0150" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">The set
                                operations compare the objects by invoking the </i><code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetHashCode</code><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> and </i><code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Equals</code><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> methods of the
                                entity class. For custom comparisons, you can also pass an object that implements the
                                interface </i><code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEqualityComparer&lt;T&gt;</code><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">. In the
                                preceding example, the </i><code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampions</code><i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> method always
                                returns the same objects, so the default comparison works. If that's not the case, the
                                set methods offer overloads in which a comparison can be defined.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 集合操作通过调用实体类的 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetHashCode</code>
                                        和 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Equals</code>
                                        方法来比较对象。对于自定义比较，你也可以传递一个实现了 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEqualityComparer&lt;T&gt;</code>
                                        接口的对象。在前面示例中， <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GetChampions</code>
                                        方法总是返回相同的对象，所以默认比较有效。如果情况不是这样，集合方法提供了重载版本，其中可以定义比较。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0028"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-203" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Zip </h3>
                <p id="c09-para-0151" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code> method enables
                    you to merge two related sequences into one with a predicate function.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code>
                                方法使你能够使用谓词函数将两个相关序列合并为一个。</font>
                        </font>
                    </font>
                </p>
                <p id="c09-para-0152" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">First, two related sequences are created, both with the same
                    filtering (country Italy) and ordering. For merging, this is important because item 1 from the first
                    collection is merged with item 1 from the second collection, item 2 with item 2, and so on. In case
                    the count of the two sequences is different, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code> stops when the
                    end of the smaller collection is reached.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                首先，创建了两个相关的序列，它们具有相同的过滤（国家为意大利）和排序。对于合并来说，这一点很重要，因为第一个集合中的项目 1 会与第二个集合中的项目 1 合并，项目 2 与项目
                                2 合并，以此类推。如果两个序列的数量不同， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code>
                                会在较小的集合结束时停止。</font>
                        </font>
                    </font>
                </p>
                <p id="c09-para-0153" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The items in the first collection have a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Name</code> property, and
                    the items in the second collection have <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Starts</code> properties.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">第一个集合中的项具有 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Name</code>
                                属性，而第二个集合中的项具有 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LastName</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Starts</code>
                                属性。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Using the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code> method on the
                    collection, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racerNames</code>
                    requires the second collection <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racerNamesAndStarts</code>
                    as the first parameter. The second parameter is of type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Func&lt;TFirst, TSecond, TResult&gt;</code>.
                    This parameter is implemented as a lambda expression and receives the elements of the first
                    collection with the parameter <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">first</code>, and the
                    elements of the second collection with the parameter <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">second</code>. The
                    implementation creates and returns a string containing the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Name</code> property of
                    the first element and the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Starts</code> property of
                    the second element (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在集合上使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Zip</code>
                                方法时， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racerNames</code>
                                需要第二个集合 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">racerNamesAndStarts</code>
                                作为第一个参数。第二个参数的类型是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Func&lt;TFirst, TSecond, TResult&gt;</code>
                                。该参数以 lambda 表达式的形式实现，接收第一个集合的元素作为参数 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">first</code>
                                ，以及第二个集合的元素作为参数 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">second</code>
                                。实现部分创建并返回一个包含第一个元素的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Name</code>
                                属性和第二个元素的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Starts</code>
                                属性的字符串（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0059"><code>static void ZipOperation()</code>
<code>{</code>
<code>  var racerNames = from r in Formula1.GetChampions()</code>
<code>                   where r.Country == "Italy"</code>
<code>                   orderby r.Wins descending<span aria-label="251" epub:type="pagebreak" id="Page_251" role="doc-pagebreak"></span></code>
<code>                   select new</code>
<code>                   {</code>
<code>                     Name = r.FirstName + " " + r.LastName</code>
<code>                   };</code>
<code> </code>
<code>  var racerNamesAndStarts = from r in Formula1.GetChampions()</code>
<code>                            where r.Country == "Italy"</code>
<code>                            orderby r.Wins descending</code>
<code>                            select new</code>
<code>                            {</code>
<code>                              r.LastName,</code>
<code>                              r.Starts</code>
<code>                            };</code>
<code> </code>
<code>  var racers = racerNames<b>.Zip</b>(racerNamesAndStarts,</code>
<code>                (first, second) =&gt; first.Name + ", starts: " + second.Starts);</code>
<code> </code>
<code>  foreach (var r in racers)</code>
<code>  {</code>
<code>    Console.WriteLine(r);</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The result of this merge is shown here:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这个合并的结果显示在这里：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0060"><code>Alberto Ascari, starts: 32</code>
<code>Nino Farina, starts: 33</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0029"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-204" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Partitioning <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">分区</font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0156" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Partitioning operations such as the extension methods <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code> can be used
                    for easy paging—for example, to display just five racers on the first page, and continue with the
                    next five on the following pages.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">分区操作，如扩展方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code>
                                ，可用于轻松分页——例如，在第一页上仅显示五个赛车手，然后在后续页面上继续显示下一个五个赛车手。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">With the LINQ query shown here, the extension methods <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code> are added to
                    the end of the query. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code> method first
                    ignores a number of items calculated based on the page size and the actual page number; the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code> method then
                    takes a number of items based on the page size (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用这里显示的 LINQ 查询，扩展方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code>
                                被添加到查询的末尾。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Skip</code>
                                方法首先忽略基于页面大小和实际页码计算出的若干项；然后 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Take</code>
                                方法根据页面大小获取若干项（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0061"><code>public static void Partitioning()</code>
<code>{</code>
<code>  int pageSize = 5;</code>
<code>  int numberPages = (int)Math.Ceiling(Formula1.GetChampions().Count() /</code>
<code>    (double)pageSize);</code>
<code> </code>
<code>  for (int page = 0; page &lt; numberPages; page++)</code>
<code>  {</code>
<code>    Console.WriteLine($"Page {page}");</code>
<code> </code>
<code>    var racers = (from r in Formula1.GetChampions()</code>
<code>                  orderby r.LastName, r.FirstName</code>
<code>                  select r.FirstName + " " + r.LastName)</code>
<code>                  .<b>Skip</b>(page * pageSize).<b>Take</b>(pageSize);</code>
<code> </code>
<code>    foreach (var name in racers)</code>
<code>    {</code>
<code>      Console.WriteLine(name);<span aria-label="252" epub:type="pagebreak" id="Page_252" role="doc-pagebreak"></span></code>
<code>    }</code>
<code>    Console.WriteLine();</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Here is the output of the first three pages:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">以下是前三页的输出：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0062"><code>Page 0</code>
<code>Fernando Alonso</code>
<code>Mario Andretti</code>
<code>Alberto Ascari</code>
<code>Jack Brabham</code>
<code>Jenson Button</code>
<code> </code>
<code>Page 1</code>
<code>Jim Clark</code>
<code>Juan Manuel Fangio</code>
<code>Nino Farina</code>
<code>Emerson Fittipaldi</code>
<code>Mika Hakkinen</code>
<code> </code>
<code>Page 2</code>
<code>Lewis Hamilton</code>
<code>Mike Hawthorn</code>
<code>Damon Hill</code>
<code>Graham Hill</code>
<code>Phil Hill</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Paging can be extremely useful with Windows or web
                    applications for showing the user only a part of the data.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">分页在 Windows 或 Web
                                应用程序中非常实用，可以仅向用户显示数据的一部分。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0160" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">This paging
                                mechanism has an important behavior: Because the query is done with every page, changing
                                the underlying data affects the results (for example when accessing a database). New
                                objects are shown as paging continues. Depending on your scenario, this can be
                                advantageous to your application. If this behavior is not what you need, you can do the
                                paging not over the original data source but by using a cache that maps to the original
                                data.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">
                                        注意：这种分页机制有一个重要行为：由于每次都是对每一页进行查询，因此更改底层数据会影响结果（例如访问数据库时）。在分页过程中会显示新对象。根据您的场景，这可能对您的应用程序有利。如果这种行为不是您需要的，您可以选择不通过原始数据源进行分页，而是使用一个映射到原始数据的缓存来进行分页。
                                    </font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p id="c09-para-0161" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">With the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TakeWhile</code> and
                    <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SkipWhile</code>
                    extension methods, you can also pass a predicate to retrieve or skip items based on the result of
                    the predicate.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TakeWhile</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">SkipWhile</code>
                                扩展方法，您还可以传递一个谓词，根据谓词的结果来检索或跳过项目。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0031"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-205" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Aggregate Operators <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">聚合运算符</font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0162" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The aggregate operators such as <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Min</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Max</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>, and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Aggregate</code> do not
                    return a sequence; instead they return a single value.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">聚合运算符如 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Min</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Max</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Aggregate</code>
                                不会返回一个序列；相反，它们返回一个单一值。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> extension
                    method returns the number of items in the collection. In the following example, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> method is
                    applied to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Years</code> property of
                    a <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> to
                    filter the racers and return only those who won more than three championships. Because the same
                    count is needed more than once in the same query, a variable <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">numberYears</code> is
                    defined by using the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code> clause (code
                    file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                扩展方法返回集合中的项目数量。在以下示例中， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                方法应用于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Years</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                属性来过滤赛车手，并只返回那些赢得超过三个冠军的人。由于在同一个查询中需要多次使用相同的计数，因此通过使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">let</code>
                                子句定义了一个变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">numberYears</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0063"><code>         static void AggregateCount()</code>
<code>         {</code>
<code>           var query = from r in Formula1.GetChampions()</code>
<code>                       <b>let numberYears = r.Years.Count()</b></code>
<code>                       where numberYears&gt;= 3<span aria-label="253" epub:type="pagebreak" id="Page_253" role="doc-pagebreak"></span></code>
<code>                       orderby numberYears descending, r.LastName</code>
<code>                       select new</code>
<code>                       {</code>
<code>                         Name = r.FirstName + " " + r.LastName,</code>
<code>                         TimesChampion = numberYears</code>
<code>                       };</code>
<code> </code>
<code>           foreach (var r in query)</code>
<code>           {</code>
<code>             Console.WriteLine($"{r.Name} {r.TimesChampion}");</code>
<code>           }</code>
<code>         }</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The result is shown here:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">结果如下所示：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0064"><code>Michael Schumacher 7</code>
<code>Lewis Hamilton 6</code>
<code>Juan Manuel Fangio 5</code>
<code>Alain Prost 4</code>
<code>Sebastian Vettel 4</code>
<code>Jack Brabham 3</code>
<code>Niki Lauda 3</code>
<code>Nelson Piquet 3</code>
<code>Ayrton Senna 3</code>
<code>Jackie Stewart 3</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code> method
                    summarizes all numbers of a sequence and returns the result. In the next example, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code> is used to
                    calculate the sum of all race wins for a country. First the racers are grouped based on country;
                    then, with the new anonymous type created, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Wins</code> property is
                    assigned to the sum of all wins from a single country (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code>
                                方法汇总序列中所有数字并返回结果。在下一个示例中， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code>
                                用于计算一个国家的所有比赛胜利总数。首先根据国家分组赛车手；然后，通过创建新的匿名类型，将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Wins</code>
                                属性分配给单个国家的所有胜利总和（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0065"><code>static void AggregateSum()</code>
<code>{</code>
<code>  var countries = (from c in</code>
<code>                   from r in Formula1.GetChampions()</code>
<code>                   group r by r.Country into c</code>
<code>                   select new</code>
<code>                   {</code>
<code>                     Country = c.Key,</code>
<code>                     Wins = (from r1 in c</code>
<code>                             select r1.Wins)<b>.Sum()</b></code>
<code>                   }</code>
<code>                   orderby c.Wins descending, c.Country</code>
<code>                   select c).Take(5);</code>
<code> </code>
<code>  foreach (var country in countries)</code>
<code>  {</code>
<code>    Console.WriteLine($"{country.Country} {country.Wins}");</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The most successful countries based on the Formula 1 race
                    champions are as follows:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">根据 F1 比赛冠军，最成功的国家如下：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0066"><code>UK 245</code>
<code>Germany 168</code>
<code>Brazil 78</code>
<code>France 51</code>
<code>Finland 46</code></pre>
                <p id="c09-para-0167" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><span aria-label="254" epub:type="pagebreak" id="Page_254"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>The methods <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Min</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Max</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>, and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Aggregate</code> are used
                    in the same way as <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code>. <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Min</code> returns the
                    minimum number of the values in the collection, and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Max</code> returns the
                    maximum number. <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code> calculates
                    the average number. With the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Aggregate</code> method,
                    you can pass a lambda expression that performs an aggregation of all the values.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Min</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Max</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Aggregate</code>
                                的用法与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Count</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Sum</code>
                                相同。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Min</code>
                                返回集合中的最小值， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Max</code>
                                返回最大值。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>
                                计算平均值。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Aggregate</code>
                                方法，你可以传递一个执行所有值聚合的 lambda 表达式。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0032"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-206" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Conversion Operators <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">转换操作符</font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0168" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">In this chapter, you've already seen that query execution is
                    deferred until the items are accessed. Using the query within an iteration, the query is executed.
                    With a conversion operator, the query is executed immediately and the result is returned in an
                    array, a list, or a dictionary.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                在这一章中，你已经看到查询执行被推迟到访问项时。在迭代中使用查询时，查询会被执行。通过转换运算符，查询会立即执行，并以数组、列表或字典的形式返回结果。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">In the next example, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToList</code> extension
                    method is invoked to immediately execute the query and put the result into a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code>
                    (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在下一个示例中，调用了 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToList</code>
                                扩展方法来立即执行查询并将结果放入 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">List&lt;T&gt;</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">EnumerableSample/LinqSamples.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0067"><code>static void ToList()</code>
<code>{</code>
<code>  List&lt;Racer&gt; racers = (from r in Formula1.GetChampions()</code>
<code>                        where r.Starts&gt; 220</code>
<code>                        orderby r.Starts descending</code>
<code>                        select r)<b>.ToList();</b></code>
<code> </code>
<code>  foreach (var racer in racers)</code>
<code>  {</code>
<code>    Console.WriteLine($"{racer} {racer:S}");</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The result of this query shows Jenson Button first:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">此查询的结果首先显示 Jenson Button：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0068"><code>Kimi Räikkönen 323</code>
<code>Fernando Alonso 314</code>
<code>Jenson Button 306</code>
<code>Michael Schumacher 287</code>
<code>Lewis Hamilton 260</code>
<code>Sebastian Vettel 250</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">It's not always that simple to get the returned objects into
                    the list. For example, for fast access from a car to a racer within a collection class, you can use
                    the new class <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Lookup&lt;TKey, TElement&gt;</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                将返回的对象放入列表并不总是那么简单。例如，为了从集合类中的汽车快速访问到赛车，你可以使用新的类 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Lookup&lt;TKey, TElement&gt;</code>
                                。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0172" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">The </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Dictionary&lt;TKey</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">, </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TValue&gt;</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> class supports
                                only a single value for a key. With the class </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Lookup&lt;TKey, TElement&gt;</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> from the
                                namespace </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">, you can have
                                multiple values for a single key. These classes are covered in detail in <a
                                    href="c08.xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Chapter
                                    8</a>, “Collections.”</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Dictionary&lt;TKey</code>
                                        、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TValue&gt;</code>
                                        类只支持键的单个值。使用来自命名空间 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>
                                        的类 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Lookup&lt;TKey, TElement&gt;</code>
                                        ，你可以为单个键有多个值。这些类在第八章“集合”中详细介绍。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">In the following example when you use the compound <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code> query, the
                    sequence of racers and cars is flattened, and an anonymous type with the properties <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Car</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> is created.
                    With the lookup that is returned, the key should be of type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code> referencing
                    the car, and the value should be of type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>. To make
                    this selection, you can pass a key and an element selector to one overload of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToLookup</code> method.
                    The key selector references the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Car</code> property, and
                    the element selector references the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> property:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在以下示例中，当你使用复合 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">from</code>
                                查询时，赛车手和汽车的顺序会被展平，并创建一个具有 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Car</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                属性的匿名类型。通过返回的查找，键应该是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">string</code>
                                类型，引用汽车，值应该是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                类型。为了进行此选择，你可以将键和元素选择器传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ToLookup</code>
                                方法的重载版本。键选择器引用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Car</code>
                                属性，元素选择器引用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                属性：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0069"><code>public static void ToLookup()</code>
<code>{</code>
<code>  var racers = (from r in Formula1.GetChampions()</code>
<code>                from c in r.Cars<span aria-label="255" epub:type="pagebreak" id="Page_255" role="doc-pagebreak"></span></code>
<code>                select new</code>
<code>                {</code>
<code>                  Car = c,</code>
<code>                  Racer = r</code>
<code>                })<b>.ToLookup(cr =&gt; cr.Car, cr =&gt; cr.Racer);</b></code>
<code> </code>
<code>  foreach (var williamsRacer in racers["Williams"])</code>
<code>  {</code>
<code>    Console.WriteLine(williamsRacer);</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The result of all “Williams” champions accessed using the
                    indexer of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Lookup</code> class is
                    shown here:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这里显示了使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Lookup</code>
                                类的索引器访问所有“威廉姆斯”冠军的结果：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0070"><code>Alan Jones</code>
<code>Keke Rosberg</code>
<code>Nelson Piquet</code>
<code>Nigel Mansell</code>
<code>Alain Prost</code>
<code>Damon Hill</code>
<code>Jacques Villeneuve</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">In case you need to use a LINQ query over an untyped
                    collection, such as the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ArrayList</code>, you can
                    use the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cast</code>
                    method. In the following example, an <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ArrayList</code>
                    collection that is based on the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Object</code> type is
                    filled with <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> objects. To
                    make it possible to define a strongly typed query, you can use the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cast</code> method:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果你需要在一个未知的集合上使用 LINQ 查询，例如 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ArrayList</code>
                                ，你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cast</code>
                                方法。在以下示例中，基于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Object</code>
                                类型的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ArrayList</code>
                                集合被填充了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code>
                                对象。为了能够定义强类型查询，你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cast</code>
                                方法：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0071"><code>public static void ConvertWithCast()</code>
<code>{</code>
<code>  var list = new System.Collections.ArrayList(Formula1.GetChampions()</code>
<code>    as System.Collections.ICollection);</code>
<code> </code>
<code>  var query = from r in list<b>.Cast&lt;Racer&gt;()</b></code>
<code>              where r.Country == "USA"</code>
<code>              orderby r.Wins descending</code>
<code>              select r;</code>
<code> </code>
<code>  foreach (var racer in query)</code>
<code>  {</code>
<code>    Console.WriteLine($"{racer:A}");</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The results include the only Formula 1 champion from the
                    United States:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">结果包括美国唯一的 F1 冠军：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0072"><code>Mario Andretti, country: USA, starts: 128, wins: 12</code>
<code>Phil Hill, country: USA, starts: 48, wins: 3</code></pre>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0034"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-207" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Generation Operators <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">生成运算符 </font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0177" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The generation operators <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Empty</code>, and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Repeat</code> are not
                    extension methods but normal static methods that return sequences. With LINQ to Objects, these
                    methods are available with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code> class.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">生成运算符 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Empty</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Repeat</code>
                                不是扩展方法，而是返回序列的普通静态方法。使用 LINQ to Objects 时，这些方法可通过 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                                类访问。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Have you ever needed a range of numbers filled? Nothing is
                    easier than using the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code> method. This
                    method receives the start value with the first parameter and the number of items with the second
                    parameter:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你有没有需要填充一系列数字的时候？使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code>
                                方法非常简单。该方法通过第一个参数接收起始值，通过第二个参数接收项数：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0073"><code>static void GenerateRange()</code>
<code>{<span aria-label="256" epub:type="pagebreak" id="Page_256" role="doc-pagebreak"></span></code>
<code>  var values = <b>Enumerable.Range</b>(1, 20);</code>
<code>  foreach (var item in values)</code>
<code>  {</code>
<code>    Console.Write($"{item} ", item);</code>
<code>  }</code>
<code>  Console.WriteLine();</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0180" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">The </i> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> method does not
                                return a collection filled with the values as defined. </i> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">This method does
                                a deferred query execution similar to the other methods. It returns a </i> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">RangeEnumerator</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> that simply does
                                a </i> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yield return</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> with the values
                                incremented.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Range</code>
                                        方法不会返回一个包含所定义值的集合。此方法执行延迟查询，类似于其他方法。它返回一个 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">RangeEnumerator</code>
                                        ，该 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">RangeEnumerator</code>
                                        仅对值进行 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">yield return</code>
                                        并递增。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Of course, the result now looks like this:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当然，结果现在看起来是这样的：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0074"><code>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">You can combine the result with other extension methods to
                    get a different result—for example, using the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> extension
                    method:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你可以将结果与其他扩展方法结合使用以获得不同的结果——例如，使用
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                扩展方法：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0075"><code>var values = Enumerable.Range(1, 20).Select(n =&gt; n * 3);</code></pre>
                <p id="c09-para-0183" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Empty</code> method
                    returns an iterator that does not return values. This can be used for parameters that require a
                    collection for which you can pass an empty collection.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Empty</code>
                                方法返回一个不返回值的迭代器。这可用于需要集合的参数，你可以传递一个空集合。</font>
                        </font>
                    </font>
                </p>
                <p id="c09-para-0184" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Repeat</code> method
                    returns an iterator that returns the same value a specific number of times.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Repeat</code>
                                方法返回一个迭代器，该迭代器会返回特定次数的相同值。</font>
                        </font>
                    </font>
                </p>
            </section>
        </section>
        <section aria-labelledby="head-2-84" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
            <span id="c09-sec-0036" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
            <h2 id="head-2-84" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">PARALLEL LINQ<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">并行 LINQ</font>
                    </font>
                </font>
            </h2>
            <p id="c09-para-0185" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">The class <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code> in
                the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>
                namespace splits the work of queries across multiple threads that run simultaneously on multiple
                processors. Although the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code> class
                defines extension methods to the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                interface, most extension methods of the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                class are extensions for the class <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelQuery&lt;TSource&gt;</code>.
                One important exception is the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code> method,
                which extends <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;TSource&gt;</code>
                and returns <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelQuery&lt;TSource&gt;</code>,
                so a normal collection class can be queried in a parallel manner.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">类 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                            在命名空间 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>
                            中将查询工作分配到多个线程上，这些线程在多个处理器上同时运行。尽管类 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                            为 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                            接口定义了扩展方法，但 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                            类的大多数扩展方法都是针对类 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelQuery&lt;TSource&gt;</code>
                            的扩展。一个重要的例外是 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code>
                            方法，它扩展了 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;TSource&gt;</code>
                            并返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelQuery&lt;TSource&gt;</code>
                            ，因此普通集合类可以并行查询。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0037"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-208" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Parallel Queries <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">并行查询 </font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">To demonstrate Parallel LINQ (PLINQ), a large collection is
                    needed. With small collections, you don’t see any effect when the collection fits inside the CPU's
                    cache. In the following code, a large <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">int</code> collection is
                    filled with random values (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelLinqSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要演示并行 LINQ
                                (PLINQ)，需要一个大型集合。对于小集合，当集合适合 CPU 缓存时，你不会看到任何效果。在以下代码中，一个大型 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">int</code>
                                集合被填充了随机值（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelLinqSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0076"><code>static IEnumerable&lt;int&gt; SampleData()</code>
<code>{</code>
<code>  const int arraySize = 500_00_000;</code>
<code>  var r = new Random();</code>
<code>  return Enumerable.Range(0, arraySize).Select(x =&gt; r.Next(140)).ToList();</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Now you can use a LINQ query to filter the data, do some
                    calculations, and get an average of the filtered data. The query defines a filter with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code> clause to
                    summarize only the items with values whose natural logarithm <span aria-label="257"
                        epub:type="pagebreak" id="Page_257" role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>is less than four,
                    and then the aggregation function <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code> is
                    invoked. The only difference from the LINQ queries you've seen so far is the call to the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code> method:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在你可以使用 LINQ
                                查询来过滤数据，进行一些计算，并获取过滤数据的平均值。查询使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">where</code>
                                子句定义了一个过滤器，仅总结自然对数小于四的值的项，然后调用了聚合函数 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>
                                。与之前看到的 LINQ 查询的不同之处仅在于对 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code>
                                方法的调用：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0077"><code>static void LinqQuery(IEnumerable&lt;int&gt; data)</code>
<code>{</code>
<code>  var res = (from x in data<b>.AsParallel()</b></code>
<code>             where Math.Log(x) &lt; 4</code>
<code>             select x).Average();</code>
<code>  //…</code>
<code>}</code></pre>
                <p id="c09-para-0188" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Like the LINQ queries shown already, the compiler changes the
                    syntax to invoke the methods <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>, <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>, and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>. <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code> is
                    defined with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                    class to extend the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                    interface, so it can be called with a simple array. <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code> returns
                    <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelQuery&lt;TSource</code>
                    &gt;. Because of the returned type, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method
                    chosen by the compiler is <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable.Where</code>
                    instead of <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable.Where</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">和前面展示的 LINQ 查询一样，编译器将语法转换为调用方法
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>
                                。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code>
                                是通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                                类定义的，以扩展 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IEnumerable&lt;T&gt;</code>
                                接口，因此可以用简单的数组调用。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code>
                                返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelQuery&lt;TSource</code>
                                &gt;。由于返回类型，编译器选择的方法是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable.Where</code>
                                而不是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable.Where</code>
                                。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">In the following code, the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> and <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code> methods
                    are from <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                    as well. In contrast to the implementation of the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code> class,
                    with the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                    class, the query is <i
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">partitioned</i> so that
                    multiple threads can work on the query. The collection can be split into multiple parts whereby
                    different threads work on each part to filter the remaining items. After the partitioned work is
                    completed, <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">merging</i>
                    must occur to get the summary result of all parts:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在以下代码中， <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Average</code>
                                方法也来自 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                                。与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                                类的实现不同，使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelEnumerable</code>
                                类时，查询会被分区，以便多个线程可以处理查询。集合可以被分成多个部分，不同的线程分别处理每个部分以过滤剩余的项。分区工作完成后，必须进行合并以获取所有部分的汇总结果：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0078"><code>static void ExtensionMethods(IEnumerable&lt;int&gt; data)</code>
<code>{</code>
<code>  var res = data.AsParallel()</code>
<code>    .Where(x =&gt; Math.Log(x) &lt; 4)</code>
<code>    .Select(x =&gt; x).Average();</code>
<code>  //…</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">When you run this code, you can also start the task manager
                    so you can confirm that all CPUs of your system are busy. If you remove the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code> method,
                    multiple CPUs might not be used. Of course, if you don't have multiple CPUs on your system, then
                    don't expect to see an improvement with the parallel version. On my system with 8 logical
                    processors, the method runs 0.351 seconds with <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code> and
                    1.23 seconds without.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行此代码时，你也可以启动任务管理器，以确认系统所有 CPU
                                都在忙碌状态。如果你移除 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code>
                                方法，可能不会使用到多个 CPU。当然，如果你的系统没有多个 CPU，那么不要期望并行版本会有改进。在我的 8 核系统上，使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AsParallel</code>
                                方法时该方法运行时间为 0.351 秒，不使用时为 1.23 秒。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0191" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">You can customize
                                parallel queries using extension methods such as </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithExecutionMode</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">, </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithDegreeOfParallelism</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">, and even custom
                                partitioners. With </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithExecutionMode</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> you can pass a
                                value of </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelExecutionMode</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">, which can be
                            </i>
                            <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Default</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> or </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ForceParallelism</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">. By default,
                                Parallel LINQ avoids parallelism with high overhead. With the method </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithDegreeOfParallelism</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">, you can pass an
                                integer value to specify the maximum number of tasks that should run in parallel. This
                                is useful if not all CPU cores should be used by the query. .NET contains specific
                                partitioners that are used based on the collection types, e.g. for arrays, and the
                                generic List type. You might have different requirements, or specific collection types
                                with other layouts that could take advantage of partitioning of the data in other ways.
                                Here you can write a custom partitioner deriving from the generic base classes </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderablePartitioner</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> or </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Partitioner</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> in the namespace
                            </i>
                            <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Collections.Generic</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 您可以使用扩展方法（如 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithExecutionMode</code>
                                        、 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithDegreeOfParallelism</code>
                                        ，甚至自定义分区器）来自定义并行查询。通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithExecutionMode</code>
                                        您可以传递一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelExecutionMode</code>
                                        的值，该值可以是 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Default</code>
                                        或 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ForceParallelism</code>
                                        。默认情况下，Parallel LINQ 会避免具有高开销的并行操作。通过 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithDegreeOfParallelism</code>
                                        方法，您可以传递一个整数值来指定应并行运行的最大任务数。如果查询不应使用所有 CPU 核心，则这很有用。.NET
                                        包含特定于集合类型的分区器，例如用于数组以及泛型 List
                                        类型。您可能有不同的需求，或具有其他布局的特定集合类型，这些类型可以通过其他方式利用数据分区。在这里，您可以编写一个从 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderablePartitioner</code>
                                        命名空间中的泛型基类 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Partitioner</code>
                                        派生的自定义分区器。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"><span id="c09-sec-0039"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
                <h3 id="head-3-209" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">Cancellation <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">取消操作</font>
                        </font>
                    </font>
                </h3>
                <p id="c09-para-0192" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1">.NET offers a standard way to cancel long-running tasks, and
                    this is also true for Parallel LINQ. The classes needed for cancellation are defined in the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Threading</code>
                    namespace.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">.NET 提供了一种标准方式来取消长时间运行的任务，Parallel
                                LINQ 也适用此方式。用于取消操作的类定义在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Threading</code>
                                命名空间中。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                    data-immersive-translate-paragraph="1"><span aria-label="258" epub:type="pagebreak" id="Page_258"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>To cancel a
                    long-running query, you can add the method <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithCancellation</code>
                    to the query and pass a <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationToken</code>
                    to the parameter. The <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationToken</code>
                    is created from the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationTokenSource</code>
                    instance that you create. The query is run in a separate thread where the exception of type <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OperationCanceledException</code>
                    is caught. This exception is fired if the query is canceled. From the main thread, the task can be
                    canceled by invoking the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cancel</code> method of
                    the <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationTokenSource</code>
                    (code file <code
                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelLinqSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">要取消一个长时间运行的查询，你可以向查询中添加方法 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">WithCancellation</code>
                                并向参数中传递 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationToken</code>
                                。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationToken</code>
                                是从你创建的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationTokenSource</code>
                                实例中创建的。查询在一个单独的线程中运行，在那里捕获类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OperationCanceledException</code>
                                的异常。如果查询被取消，就会触发这个异常。从主线程中，可以通过调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationTokenSource</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Cancel</code>
                                方法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParallelLinqSample/Program.cs</code>
                                ）来取消任务：</font>
                        </font>
                    </font>
                </p>
                <pre id="c09-code-0079"><code>public static void UseCancellation(IEnumerable&lt;int&gt; data)</code>
<code>{</code>
<code>  CancellationTokenSource cts = new();</code>
<code> </code>
<code>  Task.Run(() =&gt;</code>
<code>  {</code>
<code>    try</code>
<code>    {</code>
<code>      var res = (from x in data.AsParallel().WithCancellation(cts.Token)</code>
<code>                 where Math.Log(x) &lt; 4</code>
<code>                 select x).Average();</code>
<code> </code>
<code>      Console.WriteLine($"Query finished, sum: {res}");</code>
<code>    }</code>
<code>    catch (OperationCanceledException ex)</code>
<code>    {</code>
<code>      Console.WriteLine(ex.Message);</code>
<code>    }</code>
<code>  });</code>
<code>  Console.WriteLine("Query started");</code>
<code>  Console.Write("Cancel? ");</code>
<code>  string input = Console.ReadLine();</code>
<code>  if (input.ToLower().Equals("y"))</code>
<code>  {</code>
<code>    cts.Cancel();</code>
<code>  }</code>
<code>}</code></pre>
                <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <p id="c09-para-0195" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">You can read more
                                about cancellation and the </i> <code
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationToken</code>
                            <i data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> in <a
                                    href="c17.xhtml"
                                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Chapter
                                    17</a>, “Parallel Programming.”</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 您可以在第 17
                                        章“并行编程”中了解更多关于取消操作和 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">CancellationToken</code>
                                        的信息。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
        </section>
        <section aria-labelledby="head-2-85" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
            <span id="c09-sec-0041" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
            <h2 id="head-2-85" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">EXPRESSION TREES<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">表达式树</font>
                    </font>
                </font>
            </h2>
            <p id="c09-para-0196" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">With LINQ to Objects, the extension methods require a delegate
                type as parameter; this way, a lambda expression can be assigned to the parameter. Lambda expressions
                can also be assigned to parameters of type <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>.
                The C# compiler defines different behavior for lambda expressions depending on the type. If the type is
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>,
                the compiler creates an expression tree from the lambda expression and stores it in the assembly. The
                expression tree can be analyzed during runtime and optimized for querying against the data source.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">使用 LINQ to Objects
                            时，扩展方法需要一个委托类型作为参数；这样，一个 lambda 表达式就可以赋值给该参数。lambda 表达式也可以赋值给类型为 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>
                            的参数。C#编译器根据类型为 lambda 表达式定义不同的行为。如果类型是 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>
                            ，编译器会从 lambda 表达式创建一个表达式树，并将其存储在程序集中。表达式树可以在运行时进行分析，并针对数据源进行查询优化。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Consider the following query:<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">考虑以下查询：</font>
                    </font>
                </font>
            </p>
            <pre id="c09-code-0080"><code>var brazilRacers = from r in Formula1.GetChampions()</code>
<code>                   where r.Country == "Brazil"</code>
<code>                   orderby r.Wins descending</code>
<code>                   select r;</code></pre>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1"><span aria-label="259" epub:type="pagebreak" id="Page_259"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>The preceding query
                expression uses the extension methods <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>, <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>, and
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code>. The <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code> class
                defines the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                extension method with the delegate type <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Func&lt;T, bool&gt;</code> as
                a parameter predicate:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">前面的查询表达式使用了扩展方法 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> 、
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">OrderByDescending</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Select</code> 。
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                            类定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                            扩展方法，其参数谓词为委托类型 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Func&lt;T, bool&gt;</code>
                            ：</font>
                    </font>
                </font>
            </p>
            <pre id="c09-code-0081"><code>public static IEnumerable&lt;TSource&gt; Where&lt;TSource&gt;(</code>
<code>  this IEnumerable&lt;TSource&gt; source, Func&lt;TSource, bool&gt; predicate);</code></pre>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">This way, the lambda expression is assigned to the predicate.
                Here, the lambda expression is similar to an anonymous method, as explained earlier:<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">这样，lambda 表达式被赋值给谓词。在这里，lambda
                            表达式类似于前面解释的匿名方法：</font>
                    </font>
                </font>
            </p>
            <pre
                id="c09-code-0082"><code>Func&lt;Racer, bool&gt; predicate = r =&gt; r.Country == "Brazil";</code></pre>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">The <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code> class is
                not the only class for defining the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> extension
                method. The <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                extension method is also defined by the class <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Queryable&lt;T&gt;</code>.
                This class has a different definition of the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> extension
                method:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1"> <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                            类并非定义 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                            扩展方法的唯一类。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                            扩展方法也由 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Queryable&lt;T&gt;</code>
                            类定义。这个类对 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                            扩展方法有不同的定义：</font>
                    </font>
                </font>
            </p>
            <pre id="c09-code-0083"><code>public static IQueryable&lt;TSource&gt; Where&lt;TSource&gt;(</code>
<code>  this IQueryable&lt;TSource&gt; source,</code>
<code>  Expression&lt;Func&lt;TSource, bool&gt;&gt; predicate);</code></pre>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Here, the lambda expression is assigned to the type <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>
                (namespace <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq.Expressions</code>)
                which behaves differently:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">这里，lambda 表达式被赋值给类型 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>
                            （命名空间 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq.Expressions</code>
                            ），其行为有所不同：</font>
                    </font>
                </font>
            </p>
            <pre
                id="c09-code-0084"><code>Expression&lt;Func&lt;Racer, bool&gt;&gt; predicate = r =&gt; r.Country == "Brazil";</code></pre>
            <p id="c09-para-0202" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Instead of using delegates, the compiler emits an expression tree
                to the assembly. The expression tree can be read during runtime. Expression trees are built from classes
                derived from the abstract base class <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code>. The <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code> class is
                not the same as <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>.
                Some of the expression classes that inherit from <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code> include
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">BinaryExpression</code>,
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ConstantExpression</code>,
                <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">InvocationExpression</code>,
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LambdaExpression</code>,
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NewExpression</code>, <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NewArrayExpression</code>,
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TernaryExpression</code>,
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">UnaryExpression</code>, and
                more. The compiler creates an expression tree resulting from the lambda expression.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            编译器不使用委托，而是向程序集发射表达式树。表达式树可以在运行时读取。表达式树由从抽象基类 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code>
                            派生的类构建。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code>
                            类与 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>
                            类不同。从 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code>
                            继承的一些表达式类包括 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">BinaryExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ConstantExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">InvocationExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">LambdaExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NewExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NewArrayExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">TernaryExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">UnaryExpression</code>
                            等。编译器创建了一个由 lambda 表达式产生的表达式树。</font>
                    </font>
                </font>
            </p>
            <p id="c09-para-0203" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">For example, the lambda expression <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">r.Country == "Brazil"</code>
                makes use of <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParameterExpression</code>,
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">MemberExpression</code>,
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ConstantExpression</code>,
                and <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">MethodCallExpression</code>
                to create a tree and store the tree in the assembly. This tree is then used during runtime to create an
                optimized query to the underlying data source.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">例如，lambda 表达式 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">r.Country == "Brazil"</code>
                            利用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ParameterExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">MemberExpression</code>
                            、 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ConstantExpression</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">MethodCallExpression</code>
                            创建一棵树，并将树存储在程序集中。这棵树在运行时用于创建对底层数据源的优化查询。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">With the sample application, the method <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DisplayTree</code> is
                implemented to display an expression tree graphically on the console. In the following example, an <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code> object can
                be passed, and depending on the expression type, some information about the expression is written to the
                console. Depending on the type of the expression, <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DisplayTree</code> is called
                recursively (code file <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ExpressionTreeSample/Program.cs</code>):
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">通过示例应用程序，方法 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DisplayTree</code>
                            被实现以在控制台上图形化显示表达式树。在以下示例中，可以传递一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code>
                            对象，并根据表达式类型，将一些关于表达式的信息写入控制台。根据表达式的类型， <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DisplayTree</code>
                            会递归调用（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">ExpressionTreeSample/Program.cs</code>
                            ）：</font>
                    </font>
                </font>
            </p>
            <pre id="c09-code-0085"><code>static void DisplayTree(int indent, string message,</code>
<code>  Expression expression)</code>
<code>{</code>
<code>  string output = $"{string.Empty.PadLeft(indent, '&gt;')} {message}" +</code>
<code>    $"! NodeType: {expression.NodeType}; Expr: {expression}";</code>
<code> </code>
<code>  indent++;</code>
<code> </code>
<code>  switch (expression.NodeType)</code>
<code>  {</code>
<code>    case ExpressionType.Lambda:</code>
<code>      Console.WriteLine(output);</code>
<code>      LambdaExpression lambdaExpr = (LambdaExpression)expression;</code>
<code>      foreach (var parameter in lambdaExpr.Parameters)</code>
<code>      {</code>
<code>        DisplayTree(indent, "Parameter", parameter);</code>
<code>      }<span aria-label="260" epub:type="pagebreak" id="Page_260" role="doc-pagebreak"></span></code>
<code>      DisplayTree(indent, "Body", lambdaExpr.Body);</code>
<code>      break;</code>
<code>    case ExpressionType.Constant:</code>
<code>      ConstantExpression constExpr = (ConstantExpression)expression;</code>
<code>      Console.WriteLine($"{output} Const Value: {constExpr.Value}");</code>
<code>      break;</code>
<code>    case ExpressionType.Parameter:</code>
<code>      ParameterExpression paramExpr = (ParameterExpression)expression;</code>
<code>      Console.WriteLine($"{output} Param Type: {paramExpr.Type.Name}");</code>
<code>      break;</code>
<code>    case ExpressionType.Equal:</code>
<code>    case ExpressionType.AndAlso:</code>
<code>    case ExpressionType.GreaterThan:</code>
<code>      BinaryExpression binExpr = (BinaryExpression)expression;</code>
<code>      if (binExpr.Method != null)</code>
<code>      {</code>
<code>        Console.WriteLine($"{output} Method: {binExpr.Method.Name}");</code>
<code>      }</code>
<code>      else</code>
<code>      {</code>
<code>        Console.WriteLine(output);</code>
<code>      }</code>
<code>      DisplayTree(indent, "Left", binExpr.Left);</code>
<code>      DisplayTree(indent, "Right", binExpr.Right);</code>
<code>      break;</code>
<code>    case ExpressionType.MemberAccess:</code>
<code>      MemberExpression memberExpr = (MemberExpression)expression;</code>
<code>      Console.WriteLine($"{output} Member Name: {memberExpr.Member.Name}, " +</code>
<code>        " Type: {memberExpr.Expression}");</code>
<code>      DisplayTree(indent, "Member Expr", memberExpr.Expression);</code>
<code>      break;</code>
<code>    default:</code>
<code>      Console.WriteLine();</code>
<code>      Console.WriteLine($"{expression.NodeType} {expression.Type.Name}");</code>
<code>      break;</code>
<code>  }</code>
<code>}</code></pre>
            <aside data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                <div class="top hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                    <p id="c09-para-0206" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">NOTE</b> <i
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">The method </i> <code
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DisplayTree</code> <i
                            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"> does not deal with
                            all expression types—only the types that are used with the following example expression.</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意 方法 <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DisplayTree</code>
                                    并不处理所有表达式类型——仅处理以下示例表达式中使用的类型。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
                        <hr />
                    </div>
                </section>
            </aside>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">The expression that is used for showing the tree is already well
                known. It's a lambda expression with a <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> parameter, and
                the body of the expression takes racers from Brazil only if they have won more than six races. This
                expression is passed to the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DisplayTree</code> method to
                see the tree:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">用于显示树的表达式已经众所周知。它是一个带有 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Racer</code> 参数的
                            lambda 表达式，其表达式体仅从赢得超过六场比赛的巴西选手中获取选手。该表达式被传递给 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DisplayTree</code>
                            方法以查看树：</font>
                    </font>
                </font>
            </p>
            <pre id="c09-code-0086"><code>Expression&lt;Func&lt;Racer, bool&gt;&gt; expression =</code>
<code>  r =&gt; r.Country == "Brazil" &amp;&amp; r.Wins&gt; 6;</code>
<code> </code>
<code>DisplayTree(0, "Lambda", expression);</code></pre>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1"><span aria-label="261" epub:type="pagebreak" id="Page_261"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>Looking at the tree
                result, you can see from the output that the lambda expression consists of a <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Parameter</code> and an <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AndAlso</code> node type. The
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AndAlso</code> node type
                has an <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Equal</code> node
                type to the left and a <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GreaterThan</code> node type
                to the right. The <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Equal</code> node type to the
                left of the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AndAlso</code>
                node type has a <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">MemberAccess</code> node type
                to the left and a <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Constant</code> node type to
                the right, and so on:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">从树形结果来看，你可以从输出中看到 lambda 表达式由 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Parameter</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AndAlso</code>
                            节点类型组成。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AndAlso</code>
                            节点类型左侧有一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Equal</code>
                            节点类型，右侧有一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">GreaterThan</code>
                            节点类型。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">AndAlso</code>
                            节点类型左侧的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Equal</code>
                            节点类型左侧有一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">MemberAccess</code>
                            节点类型，右侧有一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Constant</code>
                            节点类型，以此类推：</font>
                    </font>
                </font>
            </p>
            <pre id="c09-code-0087"><code>Lambda! NodeType: Lambda; Expr: r =&gt; ((r.Country == "Brazil") AndAlso (r.Wins&gt; 6))</code>
<code>&gt; Parameter! NodeType: Parameter; Expr: r Param Type: Racer</code>
<code>&gt; Body! NodeType: AndAlso; Expr: ((r.Country == "Brazil") AndAlso (r.Wins&gt; 6))</code>
<code>&gt;&gt; Left! NodeType: Equal; Expr: (r.Country == "Brazil") Method: op_Equality</code>
<code>&gt;&gt;&gt; Left! NodeType: MemberAccess; Expr: r.Country Member Name: Country, Type: String</code>
<code>&gt;&gt;&gt;&gt; Member Expr! NodeType: Parameter; Expr: r Param Type: Racer</code>
<code>&gt;&gt;&gt; Right! NodeType: Constant; Expr: "Brazil" Const Value: Brazil</code>
<code>&gt;&gt; Right! NodeType: GreaterThan; Expr: (r.Wins&gt; 6)</code>
<code>&gt;&gt;&gt; Left! NodeType: MemberAccess; Expr: r.Wins Member Name: Wins, Type: Int32</code>
<code>&gt;&gt;&gt;&gt; Member Expr! NodeType: Parameter; Expr: r Param Type: Racer</code>
<code>&gt;&gt;&gt; Right! NodeType: Constant; Expr: 6 Const Value: 6</code></pre>
            <p id="c09-para-0209" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Entity Framework Core (EF Core) is an example where the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>
                type is used. EF Core providers convert LINQ expression trees to SQL statements.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">Entity Framework Core (EF Core)是 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;T&gt;</code>
                            类型的一个使用示例。EF Core 提供程序将 LINQ 表达式树转换为 SQL 语句。</font>
                    </font>
                </font>
            </p>
        </section>
        <section aria-labelledby="head-2-86" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
            <span id="c09-sec-0043" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
            <h2 id="head-2-86" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">LINQ PROVIDERS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">LINQ 提供程序 </font>
                    </font>
                </font>
            </h2>
            <p id="c09-para-0210" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">.NET includes several LINQ providers. A LINQ provider implements
                the standard query operators for a specific data source. LINQ providers might implement more extension
                methods than are defined by LINQ, but the standard operators must at least be implemented. LINQ to XML
                implements additional methods that are particularly useful with XML, such as the methods <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Elements</code>, <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Descendants</code>, and <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Ancestors</code> defined by
                the class <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Extensions</code>
                in the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Xml.Linq</code>
                namespace.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">.NET 包含多个 LINQ 提供程序。LINQ
                            提供程序为特定数据源实现了标准查询运算符。LINQ 提供程序可能实现比 LINQ 定义的更多的扩展方法，但标准运算符至少必须被实现。LINQ to XML 实现了额外的、特别适用于
                            XML 的方法，例如由 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Xml.Linq</code>
                            命名空间中 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Extensions</code>
                            类定义的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Elements</code> 、
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Descendants</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Ancestors</code>
                            方法。</font>
                    </font>
                </font>
            </p>
            <p id="c09-para-0211" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Implementation of the LINQ provider is selected based on the
                namespace and the type of the first parameter. The namespace of the class that implements the extension
                methods must be opened; otherwise, the extension class is not in scope. The parameter of the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method defined
                by LINQ to Objects and the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method defined
                by LINQ to Entities is different.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">LINQ
                            提供者的实现是根据命名空间和第一个参数的类型来选择的。实现扩展方法的类的命名空间必须被打开；否则，扩展类不在作用域内。LINQ to Objects 定义的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> 方法和
                            LINQ to Entities 定义的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                            方法的参数是不同的。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">The <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method of LINQ
                to Objects is defined with the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code> class:<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">LINQ to Objects 的 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> 方法是用
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Enumerable</code>
                            类定义的：</font>
                    </font>
                </font>
            </p>
            <pre id="c09-code-0088"><code>public static IEnumerable&lt;TSource&gt; Where&lt;TSource&gt;(</code>
<code>  this IEnumerable&lt;TSource&gt; source, Func&lt;TSource, bool&gt; predicate);</code></pre>
            <p data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Inside the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code> namespace
                is another class that implements the operator <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>. This
                implementation is used by LINQ to Entities. You can find the implementation in the class <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Queryable</code>
                :<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>
                            命名空间内部是另一个实现操作符 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code>
                            的类。这个实现被 LINQ to Entities 使用。你可以在类 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Queryable</code>
                            中找到这个实现：</font>
                    </font>
                </font>
            </p>
            <pre id="c09-code-0089"><code>public static IQueryable&lt;TSource&gt; Where&lt;TSource&gt;(</code>
<code>  this IQueryable&lt;TSource&gt; source,</code>
<code>  Expression&lt;Func&lt;TSource, bool&gt;&gt; predicate);</code></pre>
            <p id="c09-para-0214" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Both of these classes are implemented in the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Core</code> assembly
                in the <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>
                namespace. How does the compiler select what method to use, and what's the magic in the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code> type? The
                lambda expression is the same regardless of whether it is passed with a <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Func&lt;TSource, bool&gt;</code>
                parameter or an <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;Func&lt;TSource, bool&gt;&gt;</code>
                parameter—only the compiler behaves differently. The selection is done based on the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">source</code> parameter. The
                method that matches best based on its parameters is chosen by the compiler. Properties of Entity
                Framework Core contexts are of type <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DbSet&lt;TEntity&gt;</code>.
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DbSet&lt;TEntity&gt;</code>
                implements <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IQueryable&lt;TEntity&gt;</code>,
                and thus Entity Framework Core uses the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> method of the
                <code data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Queryable</code> class.
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">这两个类都实现在 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Core</code>
                            命名空间中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">System.Linq</code>
                            程序集中。编译器是如何选择使用哪个方法的， <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression</code>
                            类型中的魔法是什么？无论是否以 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Func&lt;TSource, bool&gt;</code>
                            参数还是 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Expression&lt;Func&lt;TSource, bool&gt;&gt;</code>
                            参数传递，lambda 表达式都是相同的——只有编译器的行为不同。选择是基于 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">source</code>
                            参数进行的。编译器根据参数选择最适合的方法。Entity Framework Core 上下文属性的类型是 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DbSet&lt;TEntity&gt;</code>
                            。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">DbSet&lt;TEntity&gt;</code>
                            实现了 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">IQueryable&lt;TEntity&gt;</code>
                            ，因此 Entity Framework Core 使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Queryable</code>
                            类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Where</code> 方法。
                        </font>
                    </font>
                </font>
            </p>
        </section> <span aria-label="262" epub:type="pagebreak" id="Page_262" role="doc-pagebreak"
            data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
        <section aria-labelledby="head-2-87" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">
            <span id="c09-sec-0044" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"></span>
            <h2 id="head-2-87" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">SUMMARY<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">摘要</font>
                    </font>
                </font>
            </h2>
            <p id="c09-para-0215" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">This chapter described and demonstrated the LINQ query and the
                language constructs on which the query is based, such as extension methods and lambda expressions.
                You've looked at the various LINQ query operators—not only for filtering and ordering of data sources,
                but also for partitioning, grouping, doing conversions, joins, and so on.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章描述并演示了 LINQ 查询及其基础的语言结构，如扩展方法和
                            lambda 表达式。你已经了解了各种 LINQ 查询运算符——不仅用于数据源的过滤和排序，还包括分区、分组、转换、连接等。 </font>
                    </font>
                </font>
            </p>
            <p id="c09-para-0216" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">With Parallel LINQ, you've seen how longer queries can easily be
                parallelized.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">通过并行 LINQ，你看到了如何轻松地将较长的查询并行化。 </font>
                    </font>
                </font>
            </p>
            <p id="c09-para-0217" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">Another important concept of this chapter is the expression tree.
                Expression trees allow a program to build the tree at compile time, store it in the assembly, and then
                optimize it at runtime. You can read about its great advantages in <a href="c21.xhtml"
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">Chapter 21</a>.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            本章另一个重要的概念是表达式树。表达式树允许程序在编译时构建树结构，将其存储在程序集中，然后在运行时进行优化。你可以在第 21 章中阅读到它的巨大优势。</font>
                    </font>
                </font>
            </p>
            <p id="c09-para-0218" data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a"
                data-immersive-translate-paragraph="1">The next chapter covers error handling—getting into the <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">try</code>, <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">catch</code>, and <code
                    data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">throw</code> keywords.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">下一章将涵盖错误处理——涉及 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">try</code> 、
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">catch</code> 和
                            <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="b68c14fd-1f03-43d3-9a19-bfb30d27a23a">throw</code> 关键字。
                        </font>
                    </font>
                </font>
            </p>
        </section>
    </section>
</body>
<div id="immersive-translate-popup" style="all: initial"></div>

</html>