<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops"
    xmlns:svg="http://www.w3.org/2000/svg" epub:prefix="index: http://www.index.com/" lang="en" xml:lang="en"
    imt-state="dual" imt-trans-position="after">

<head>
    <title>7 代表、Lambda 和事件 --- 7 Delegates, Lambdas, and Events</title>
    <link href="WileyTemplate_v5.5.css" rel="stylesheet" type="text/css" />
    <meta content="urn:uuid:e0000000-0000-0000-0000-000006715209" name="Adept.expected.resource" />
    <style data-id="immersive-translate-input-injected-css">
        .immersive-translate-input {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            z-index: 2147483647;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .immersive-translate-attach-loading::after {
            content: " ";

            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;

            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-2000%, -50%);
            z-index: 100;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .immersive-translate-input-loading {
            --loading-color: #f78fb6;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: block;
            margin: 12px auto;
            position: relative;
            color: white;
            left: -100px;
            box-sizing: border-box;
            animation: immersiveTranslateShadowRolling 1.5s linear infinite;
        }

        @keyframes immersiveTranslateShadowRolling {
            0% {
                box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            12% {
                box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            25% {
                box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color),
                    0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
            }

            36% {
                box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color),
                    100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
            }

            50% {
                box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color),
                    110px 0 var(--loading-color), 100px 0 var(--loading-color);
            }

            62% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color),
                    120px 0 var(--loading-color), 110px 0 var(--loading-color);
            }

            75% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    130px 0 var(--loading-color), 120px 0 var(--loading-color);
            }

            87% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
            }

            100% {
                box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
                    200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
            }
        }

        .immersive-translate-toast {
            display: flex;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            right: 0;
            top: 1%;
            width: fit-content;
            padding: 12px 20px;
            margin: auto;
            overflow: auto;
            background: #fef6f9;
            box-shadow: 0px 4px 10px 0px rgba(0, 10, 30, 0.06);
            font-size: 15px;
            border-radius: 8px;
            color: #333;
        }

        .immersive-translate-toast-content {
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .immersive-translate-toast-hidden {
            margin: 0 20px 0 72px;
            text-decoration: underline;
            cursor: pointer;
        }

        .immersive-translate-toast-close {
            color: #666666;
            font-size: 20px;
            font-weight: bold;
            padding: 0 10px;
            cursor: pointer;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-toast {
                top: 0;
                padding: 12px 0px 0 10px;
            }

            .immersive-translate-toast-content {
                flex-direction: column;
                text-align: center;
            }

            .immersive-translate-toast-hidden {
                margin: 10px auto;
            }
        }

        .immersive-translate-modal {
            display: none;
            position: fixed;
            z-index: 2147483647;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
            font-size: 15px;
        }

        .immersive-translate-modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 40px 24px 24px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 80%;
            max-width: 270px;
            font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
                "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
                "Segoe UI Symbol", "Noto Color Emoji";
            position: relative;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-content {
                margin: 50% auto !important;
            }
        }

        .immersive-translate-modal .immersive-translate-modal-content-in-input {
            max-width: 500px;
        }

        .immersive-translate-modal-content-in-input .immersive-translate-modal-body {
            text-align: left;
            max-height: unset;
        }

        .immersive-translate-modal-title {
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            color: #333333;
        }

        .immersive-translate-modal-body {
            text-align: center;
            font-size: 14px;
            font-weight: 400;
            color: #333333;
            word-break: break-all;
            margin-top: 24px;
        }

        @media screen and (max-width: 768px) {
            .immersive-translate-modal-body {
                max-height: 250px;
                overflow-y: auto;
            }
        }

        .immersive-translate-close {
            color: #666666;
            position: absolute;
            right: 16px;
            top: 16px;
            font-size: 20px;
            font-weight: bold;
        }

        .immersive-translate-close:hover,
        .immersive-translate-close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .immersive-translate-modal-footer {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 24px;
        }

        .immersive-translate-btn {
            width: fit-content;
            color: #fff;
            background-color: #ea4c89;
            border: none;
            font-size: 16px;
            margin: 0 8px;
            padding: 9px 30px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .immersive-translate-btn:hover {
            background-color: #f082ac;
        }

        .immersive-translate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .immersive-translate-btn:disabled:hover {
            background-color: #ea4c89;
        }

        .immersive-translate-cancel-btn {
            /* gray color */
            background-color: rgb(89, 107, 120);
        }

        .immersive-translate-cancel-btn:hover {
            background-color: hsl(205, 20%, 32%);
        }

        .immersive-translate-action-btn {
            background-color: transparent;
            color: #ea4c89;
            border: 1px solid #ea4c89;
        }

        .immersive-translate-btn svg {
            margin-right: 5px;
        }

        .immersive-translate-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #007bff;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-primary-link {
            cursor: pointer;
            user-select: none;
            -webkit-user-drag: none;
            text-decoration: none;
            color: #ea4c89;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }

        .immersive-translate-modal input[type="radio"] {
            margin: 0 6px;
            cursor: pointer;
        }

        .immersive-translate-modal label {
            cursor: pointer;
        }

        .immersive-translate-close-action {
            position: absolute;
            top: 2px;
            right: 0px;
            cursor: pointer;
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5) !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            border-radius: 16px !important;
        }

        .imt-image-status img,
        .imt-image-status svg,
        .imt-img-loading {
            width: 28px !important;
            height: 28px !important;
            margin: 0 0 8px 0 !important;
            min-height: 28px !important;
            min-width: 28px !important;
            position: relative !important;
        }

        .imt-img-loading {
            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAtFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////oK74hAAAAPHRSTlMABBMIDyQXHwyBfFdDMSw+OjXCb+5RG51IvV/k0rOqlGRM6KKMhdvNyZBz9MaupmxpWyj437iYd/yJVNZeuUC7AAACt0lEQVRIx53T2XKiUBCA4QYOiyCbiAsuuGBcYtxiYtT3f6/pbqoYHVFO5r+iivpo6DpAWYpqeoFfr9f90DsYAuRSWkFnPO50OgR9PwiCUFcl2GEcx+N/YBh6pvKaefHlUgZd1zVe0NbYcQjGBfzrPE8Xz8aF+71D8gG6DHFPpc4a7xFiCDuhaWgKgGIJQ3d5IMGDrpS4S5KgpIm+en9f6PlAhKby4JwEIxlYJV9h5k5nee9GoxHJ2IDSNB0dwdad1NAxDJ/uXDHYmebdk4PdbkS58CIVHdYSUHTYYRWOJblWSyu2lmy3KNFVJNBhxcuGW4YBVCbYGRZwIooipHsNqjM4FbgOQqQqSKQQU9V8xmi1QlgHqQQ6DDBvRUVCDirs+EzGDGOQTCATgtYTnbCVLgsVgRE0T1QE0qHCFAht2z6dLvJQs3Lo2FQoDxWNUiBhaP4eRgwNkI+dAjVOA/kUrIDwf3CG8NfNOE0eiFotSuo+rBiq8tD9oY4Qzc6YJw99hl1wzpQvD7ef2M8QgnOGJfJw+EltQc+oX2yn907QB22WZcvlUpd143dqQu+8pCJZuGE4xCuPXJqqcs5sNpsI93Rmzym1k4Npk+oD1SH3/a3LOK/JpUBpWfqNySxWzCfNCUITuDG5dtuphrUJ1myeIE9bIsPiKrfqTai5WZxbhtNphYx6GEIHihyGFTI69lje/rxajdh0s0msZ0zYxyPLhYCb1CyHm9Qsd2H37Y3lugVwL9kNh8Ot8cha6fUNQ8nuXi5z9/ExsAO4zQrb/ev1yrCB7lGyQzgYDGuxq1toDN/JGvN+HyWNHKB7zEoK+PX11e12G431erGYzwmytAWU56fkMHY5JJnDRR2eZji3AwtIcrEV8Cojat/BdQ7XOwGV1e1hDjGGjXbdArm8uJZtCH5MbcctVX8A1WpqumJHwckAAAAASUVORK5CYII=");
            background-size: 28px 28px;
            animation: image-loading-rotate 1s linear infinite !important;
        }

        .imt-image-status span {
            color: var(--bg-2, #fff) !important;
            font-size: 14px !important;
            line-height: 14px !important;
            font-weight: 500 !important;
            font-family: "PingFang SC", Arial, sans-serif !important;
        }

        @keyframes image-loading-rotate {
            from {
                transform: rotate(360deg);
            }

            to {
                transform: rotate(0deg);
            }
        }
    </style>
    <style data-id="immersive-translate-default-injected-css">
        :root {
            --immersive-translate-theme-underline-borderColor: #72ece9;
            --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
            --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
            --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
            --immersive-translate-theme-highlight-backgroundColor: #ffff00;
            --immersive-translate-theme-dashed-borderColor: #59c1bd;
            --immersive-translate-theme-blockquote-borderColor: #cc3355;
            --immersive-translate-theme-thinDashed-borderColor: #ff374f;
            --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
            --immersive-translate-theme-dashedBorder-borderRadius: 0;
            --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
            --immersive-translate-theme-solidBorder-borderRadius: 0;
            --immersive-translate-theme-dotted-borderColor: #94a3b8;
            --immersive-translate-theme-wavy-borderColor: #72ece9;
            --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
            --immersive-translate-theme-grey-textColor: #2f4f4f;
            --immersive-translate-theme-marker-backgroundColor: #fbda41;
            --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
            --immersive-translate-theme-marker2-backgroundColor: #ffff00;
            --immersive-translate-theme-background-backgroundColor: #dbafaf;
            --immersive-translate-theme-background-backgroundColor-rgb: 219, 175, 175;
            --immersive-translate-theme-background-backgroundOpacity: 12;
            --immersive-translate-theme-opacity-opacity: 10;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pre-whitespace {
            white-space: pre-wrap !important;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container {
            position: absolute;
            background-color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
                sans-serif;
            top: 0;
            width: 600px;
            height: 100%;
            z-index: 2;
            line-height: 1.3;
            font-size: 16px;
        }

        [imt-state="dual"] .immersive-translate-target-wrapper[dir="rtl"] {
            text-align: right;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
            color: rgb(0, 0, 0);
            white-space: normal;
            position: absolute;
        }

        [imt-state="dual"] .immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
            color: inherit;
            white-space: inherit;
            position: unset;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper &gt;

        br {
            display: none;
        }

        [imt-state="translation"] .immersive-translate-target-translation-block-wrapper {
            margin: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper {
            margin: 8px 0 !important;
            display: inline-block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            display: block;
        }

        [imt-trans-position="before"] .immersive-translate-target-translation-block-wrapper {
            margin-top: 0 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-pdf-block-wrapper {
            margin: 0 !important;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-grey-inner {
            color: var(--immersive-translate-theme-grey-textColor);
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-underline-inner {
            border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeUnderline-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
            border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 6px;
            margin-top: 2px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
            border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
            border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
            padding: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDashed-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
            text-decoration-style: dashed !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-thinDashed-inner {
            border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dotted-inner {
            background-image: linear-gradient(to right,
                    var(--immersive-translate-theme-dotted-borderColor) 30%,
                    rgba(255, 255, 255, 0) 0%);
            background-position: bottom;
            background-size: 5px 1px;
            background-repeat: repeat-x;
            padding-bottom: 3px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-nativeDotted-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
            text-decoration-style: dotted !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-wavy-inner {
            text-decoration: underline !important;
            text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
            text-decoration-style: wavy !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-dashed-inner {
            background: linear-gradient(to right,
                    var(--immersive-translate-theme-dashed-borderColor) 0%,
                    var(--immersive-translate-theme-dashed-borderColor) 50%,
                    transparent 50%,
                    transparent 100%) repeat-x left bottom;
            background-size: 8px 2px;
            padding-bottom: 2px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            content: "";
            display: block;
            max-width: 80px;
            width: 10%;
            border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            padding-top: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
            content: "";
            border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
            max-height: 16px;
            height: 16px;
            padding-left: 8px;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-highlight-inner {
            background: var(--immersive-translate-theme-highlight-backgroundColor);
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-marker {
            line-height: 1.5em;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker2-inner {
            font-weight: bold;
            text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
                16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
                2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
                -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-marker-inner {
            /* TODO: add more texture */
            background: linear-gradient(to right,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
                    rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-weakening {
            opacity: 0.618 !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-italic {
            font-style: italic !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-bold {
            font-weight: bold !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-paper {
            margin: 8px 0;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            padding: 16px 32px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-blockquote {
            border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
            padding-left: 12px !important;
            margin-top: 4px;
            margin-bottom: 4px;
            padding-top: 4px;
            padding-bottom: 4px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
            filter: blur(5px) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        /* opacity theme start */

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,
        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
            transition: filter 0.3s ease !important;
            border-radius: 10px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-opacity-inner:hover {
            filter: none !important;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-mask-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        [data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
            filter: none !important;
        }

        /* opacity theme end */

        /* background theme start */
        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper-theme-background {
            margin: 8px 0;
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            border-radius: 4px;
            box-shadow: unset !important;
            padding: 12px;
            display: inline-block;
        }

        [imt-state="dual"] .immersive-translate-target-translation-theme-background-inner {
            background: rgba(var(--immersive-translate-theme-background-backgroundColor-rgb),
                    calc(var(--immersive-translate-theme-background-backgroundOpacity) * 1%));
            padding-left: 6px;
            padding-right: 6px;
            box-decoration-break: clone;
            -webkit-box-decoration-break: clone;
        }

        [imt-state="dual"] .immersive-translate-target-translation-block-wrapper .immersive-translate-target-translation-theme-background-inner {
            background: unset;
            padding-left: unset;
            padding-right: unset;
        }

        /* background theme end */

        /* vertical css , please remain it in the last one. */
        .immersive-translate-target-translation-vertical-block-wrapper {
            margin: 0px 8px !important;
        }

        .immersive-translate-text {
            font-size: 15px !important;
        }

        .immersive-translate-error-toast {
            position: fixed;
            top: 5%;
            z-index: 99999999;
            left: 0;
            right: 0;
            margin: auto;
            max-width: 300px;
            padding: 16px;
            border-radius: 12px;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }

        @media all and (min-width: 750px) {
            .immersive-translate-error-toast {
                max-width: 400px;
            }
        }

        .immersive-translate-clickable-button {
            cursor: pointer;
        }

        .immersive-translate-help-button {
            cursor: pointer;
        }

        .immersive-translate-loading-text:before {
            content: "...";
        }

        /* dark mode for loading */

        @media only screen and (prefers-color-scheme: dark) {
            .immersive-translate-loading {
                border: 2px rgba(255, 255, 255, 0.25) solid !important;
                border-top: 2px rgba(255, 255, 255, 1) solid !important;
            }
        }

        .immersive-translate-error-wrapper {
            position: relative;
            display: inline-flex;
            padding: 6px;
            margin: 0 12px;
            white-space: nowrap;
            font-size: 0.9em;
        }

        [lang="zh-CN"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        [lang="zh-TW"] .immersive-translate-error-wrapper {
            font-size: 0.75em;
        }

        .immersive-translate-tooltip {
            position: relative;
            display: inline-flex;
            /* little indicater to indicate it's hoverable */
        }

        .immersive-translate-tooltip-content {
            /* here's the magic */
            position: absolute;
            z-index: 100000000000;

            left: 50%;
            bottom: 0;
            transform: translate(-50%, 110%);
            line-height: 1;
            /* and add a small left margin */

            /* basic styles */
            width: max-content;
            max-width: 250px;
            word-wrap: break-word;
            white-space: pre-line;
            padding: 10px;
            border-radius: 10px;
            background: #000c;
            color: #fff;
            text-align: center;
            font-size: 14px;
            display: none;
            /* hide by default */
        }

        .immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
            display: inline-block;
        }

        .immersive-translate-tooltip-content-table {
            left: unset !important;
            bottom: unset !important;
            transform: translate(-10%, 50%) !important;
        }

        .immersive-translate-tooltip:hover:before {
            display: inline-block;
        }

        .immersive-translate-loading-spinner {
            vertical-align: middle !important;
            width: 10px !important;
            height: 10px !important;
            display: inline-block !important;
            margin: 0 4px !important;
            border: 2px rgba(221, 244, 255, 0.6) solid !important;
            border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
            border-radius: 50% !important;
            padding: 0 !important;
            -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
            animation: immersive-translate-loading-animation 0.6s infinite linear !important;
        }

        @-webkit-keyframes immersive-translate-loading-animation {
            from {
                -webkit-transform: rotate(0deg);
            }

            to {
                -webkit-transform: rotate(359deg);
            }
        }

        @keyframes immersive-translate-loading-animation {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(359deg);
            }
        }

        .imt-image-status {
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--bg-2, #fff);
            font-size: 14px;
        }
    </style>
    <style data-id="immersive-translate-user-custom-style">
        :root {

            .immersive-translate-target-inner {
                font-family: inherit;
            }


            .immersive-translate-target-inner {
                font-family: inherit;
            }
        }
    </style>
    <style data-id="immersive-translate-dynamic-injected-css">
        .immersive-translate-target-wrapper[dir='rtl'] {
            text-align: right;
        }

        .immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {
            display: block;
        }

        .immersive-translate-target-wrapper {
            word-break: break-word;
            user-select: text;
        }

        [imt-state="translation"] .immersive-translate-target-wrapper[dir='rtl'] {
            display: inline-block;
        }

        [dir='rtl'] .immersive-translate-target-wrapper:not([dir]) {
            text-align: left;
        }

        [imt-state=dual] .immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
            display: block;
        }

        [imt-trans-position=before] .immersive-translate-target-translation-block-wrapper {
            display: block !important;
        }

        [imt-state][data-immersive-translate_rtl] .immersive-translate-target-wrapper {
            display: block !important;
        }
    </style>
</head>

<body epub:type="bodymatter" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
    <section aria-labelledby="c07_1" epub:type="chapter" role="doc-chapter"
        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
        <header data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
            <h1 id="c07_1" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1"><span aria-label="177" epub:type="pagebreak" id="Page_177"
                    role="doc-pagebreak"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span><span id="c07"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span><span
                    class="chapterNumber"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">7</span><br /><span
                    class="chapterTitle"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Delegates, Lambdas, and
                    Events</span>
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">7 委托、Lambda 表达式和事件</font>
                    </font>
                </font>
            </h1>
        </header>
        <section aria-label="chapter opening" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
            <span id="c07-sec-0001" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
            <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <hr />
                </div>
                <section class="feature3" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <h3 data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                        data-immersive-translate-paragraph="1">WHAT'S IN THIS CHAPTER?<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章内容</font>
                            </font>
                        </font>
                    </h3>
                    <ul class="check2" id="c07-list-0001"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <li id="c07-li-0001" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1">Delegates<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">委托</font>
                                </font>
                            </font>
                        </li>
                        <li id="c07-li-0002" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1">Lambda expressions<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">Lambda 表达式</font>
                                </font>
                            </font>
                        </li>
                        <li id="c07-li-0003" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1">Closures<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">闭包</font>
                                </font>
                            </font>
                        </li>
                        <li id="c07-li-0004" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1">Events<font
                                class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                                <font class="notranslate" data-immersive-translate-translation-element-mark="1">  
                                </font>
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">事件</font>
                                </font>
                            </font>
                        </li>
                    </ul>
                    <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                </section>
            </aside>
            <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <hr />
                </div>
                <section aria-labelledby="head-2-63" class="feature3"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-fea-0001"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                    <h3 id="head-2-63" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                        data-immersive-translate-paragraph="1">CODE DOWNLOADS FOR THIS CHAPTER<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">本章代码下载</font>
                            </font>
                        </font>
                    </h3>
                    <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span
                            id="c07-sec-0002"
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                        <p id="c07-para-0003" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1">The source code for this chapter is available on the
                            book page at <code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><a href="http://www.wiley.com">www.wiley.com</a></code>.
                            Click the Downloads link. The code can also be found at <code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                            in the directory <code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">1_CS/Delegates</code>.
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的源代码可在第 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><a href="http://www.wiley.com">www.wiley.com</a></code>
                                        页的书籍页面上找到。点击下载链接。代码也可以在第 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><a href="https://github.com/ProfessionalCSharp/ProfessionalCSharp2021">https://github.com/ProfessionalCSharp/ProfessionalCSharp2021</a></code>
                                        处的 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">1_CS/Delegates</code>
                                        目录中找到。</font>
                                </font>
                            </font>
                        </p>
                        <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1">The code for this chapter is divided into the
                            following major examples:<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">本章的代码分为以下主要示例：</font>
                                </font>
                            </font>
                        </p>
                        <ul class="check" id="c07-list-0002"
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <li id="c07-li-0005" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                                data-immersive-translate-paragraph="1">SimpleDelegates</li>
                            <li id="c07-li-0006" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                                data-immersive-translate-paragraph="1">MulticastDelegates</li>
                            <li id="c07-li-0007" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                                data-immersive-translate-paragraph="1">LambdaExpressions</li>
                            <li id="c07-li-0008" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                                data-immersive-translate-paragraph="1">EventsSample</li>
                        </ul>
                        <p id="c07-para-0005" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1">All the projects have nullable reference types
                            enabled.<font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">所有项目都启用了可空引用类型。 </font>
                                </font>
                            </font>
                        </p>
                    </section>
                    <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                </section>
            </aside>
        </section> <span aria-label="178" epub:type="pagebreak" id="Page_178" role="doc-pagebreak"
            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
        <section aria-labelledby="head-2-64" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
            <span id="c07-sec-0003" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
            <h2 id="head-2-64" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">REFERENCING METHODS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">引用方法</font>
                    </font>
                </font>
            </h2>
            <p id="c07-para-0006" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">Delegates are the .NET variant of addresses to methods. A
                delegate is an object-oriented type-safe pointer to one or multiple methods. Lambda expressions are
                directly related to delegates. When the parameter is a delegate type, you can use a lambda expression to
                implement a method that's referenced from the delegate.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">委托是.NET
                            中方法地址的变体。委托是一种面向对象类型安全的指向一个或多个方法的指针。Lambda 表达式与委托直接相关。当参数是委托类型时，你可以使用 Lambda
                            表达式来实现在委托中引用的方法。</font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">This chapter explains the basics of delegates and lambda
                expressions, and it shows you how to implement methods called by delegates with lambda expressions. It
                also demonstrates how .NET uses delegates as the means of implementing events.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章解释委托和 Lambda 表达式的基础知识，并展示如何使用 Lambda
                            表达式实现被委托调用的方法。它还演示了.NET 如何使用委托作为实现事件的手段。</font>
                    </font>
                </font>
            </p>
            <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <p id="c07-para-0008" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">C# 9 also has the
                            concept of a function pointer—a direct pointer to a managed or native method without the
                            overhead of a delegate. Function pointers are explained in <a href="c13.xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Chapter 13</a>,
                            “Managed and Unmanaged Memory.”</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意 C# 9
                                    也引入了函数指针的概念——直接指向托管或原生方法，而不需要委托的开销。函数指针在“托管和未托管内存”第 13 章中解释。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                </section>
            </aside>
        </section>
        <section aria-labelledby="head-2-65" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
            <span id="c07-sec-0005" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
            <h2 id="head-2-65" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">DELEGATES<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">委托</font>
                    </font>
                </font>
            </h2>
            <p id="c07-para-0009" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">In <a href="c04.xhtml"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Chapter 4</a>,
                “Object-Oriented Programming in C#,” you read about using interfaces as contracts. If the parameter of a
                method has the type of an interface, with the implementation of the method any members of the interface
                can be used without being dependent on any interface implementation. Indeed, the implementation of the
                interface can be done independently of the method implementation. Similarly, a method can be declared to
                receive a parameter of a delegate type. The method receiving the delegate parameter can invoke the
                method that's referenced from the delegate. Similar to interfaces, the implementation of the method
                that's referenced by the delegate can be done independently of the method that's invoking the delegate.
                <font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            在第四章“C#中的面向对象编程”中，你了解到如何使用接口作为契约。如果方法的参数是接口类型，那么在方法实现中可以使用接口的任何成员，而不依赖于任何接口实现。实际上，接口的实现可以独立于方法实现。类似地，方法可以声明为接收委托类型的参数。接收委托参数的方法可以调用委托所引用的方法。类似于接口，委托所引用的方法的实现可以独立于调用委托的方法。
                        </font>
                    </font>
                </font>
            </p>
            <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">The concept of passing delegates to methods can become clearer
                with some examples:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">通过一些示例，传递委托给方法的这一概念会变得更加清晰：</font>
                    </font>
                </font>
            </p>
            <ul class="check" id="c07-list-0003" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                <li id="c07-li-0009" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><b
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Tasks</b>—With tasks you
                    can define a sequence of execution that should run in parallel with what currently is running in the
                    main task. You can invoke the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Run</code> method of a
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Task</code> and pass
                    the address of a method via a delegate to invoke this method from the task. Tasks are explained in
                    <a href="c11.xhtml" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Chapter
                        11</a>, “Tasks and Asynchronous Programming.”<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                任务—通过任务，你可以定义一个执行序列，该序列应与当前在主任务中运行的内容并行执行。你可以调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Run</code> 的
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Task</code>
                                方法，并通过委托传递方法的地址来从任务中调用此方法。任务在第十一章“任务和异步编程”中解释。</font>
                        </font>
                    </font>
                </li>
                <li id="c07-li-0010" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><b
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">LINQ</b>—LINQ is
                    implemented via extension methods that require a delegate as a parameter. Here you can pass
                    functionality such as how to define the implementation to compare two values. LINQ is explained in
                    detail in <a href="c09.xhtml"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Chapter 9</a>, “Language
                    Integrated Query.”<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">LINQ—LINQ
                                通过需要委托作为参数的扩展方法实现。在这里，你可以传递功能，例如如何定义比较两个值的实现。LINQ 在第九章“语言集成查询”中详细解释。</font>
                        </font>
                    </font>
                </li>
                <li id="c07-li-0011" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><b
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Events</b>—With events,
                    you separate the producer that fires events and the subscribers that listen to events. The publisher
                    and subscriber are decoupled. What's common between them is the contract of a delegate. Events are
                    explained in detail later in this chapter.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                事件—通过事件，你将触发事件的发布者和监听事件的订阅者分离。发布者和订阅者是解耦的。它们之间的共同点是委托的契约。事件在本章后面详细解释。</font>
                        </font>
                    </font>
                </li>
            </ul>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0006"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-158" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Declaring Delegates <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">声明委托</font>
                        </font>
                    </font>
                </h3>
                <p id="c07-para-0011" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">When you want to use a class in C#, you do so in two stages.
                    First, you need to define the class—that is, you need to tell the compiler what fields and methods
                    make up the class. Then (unless you are using only static methods), you instantiate an object of
                    that class. With delegates, it is the same process. You start by declaring the delegates you want to
                    use. Declaring delegates means telling the compiler what kind of method a delegate of that type will
                    represent. Then, you have to create one or more instances of that delegate. Behind the scenes, a
                    delegate type is a class, but there's specific syntax for delegates that hide details.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你想在
                                C#中使用一个类时，你需要分两个阶段进行。首先，你需要定义这个类——也就是说，你需要告诉编译器构成类的字段和方法。然后（除非你只使用静态方法），你需要实例化该类的对象。对于委托来说，这个过程也是一样的。你首先声明你想要使用的委托。声明委托意味着告诉编译器该类型的委托将代表什么类型的方法。然后，你必须创建一个或多个该委托的实例。在幕后，委托类型是一个类，但有特定的委托语法来隐藏细节。
                            </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The syntax for declaring delegates looks like this:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">声明委托的语法如下：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0001"><code>delegate void IntMethodInvoker(int x);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><span aria-label="179" epub:type="pagebreak" id="Page_179"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>This declares a
                    delegate called <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">IntMethodInvoker</code>
                    and indicates that each instance of this delegate can hold a reference to a method that takes one
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code> parameter
                    and returns <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">void</code>. The crucial
                    point to understand about delegates is that they are type-safe. When you define the delegate, you
                    have to provide full details about the signature and the return type of the method that it
                    represents.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这声明了一个名为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">IntMethodInvoker</code>
                                的委托，并表明每个该委托的实例可以引用一个接受一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code>
                                参数并返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">void</code>
                                的方法。关于委托的关键点在于它们是类型安全的。当你定义委托时，必须提供它所代表的方法的完整签名和返回类型信息。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0014" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">One good way to
                                understand delegates is to think of a delegate as something that gives a name to a
                                method signature and the return type.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意
                                        理解委托的一个好方法是将其视为给方法签名和返回类型命名的东西。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Suppose that you want to define a delegate called <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">TwoLongsOp</code> that
                    represents a method that takes two <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">long</code>
                    s as its parameters and returns a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code>. You could
                    do so like this:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">假设你想定义一个名为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">TwoLongsOp</code>
                                的委托，它代表一个接受两个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">long</code>
                                作为参数并返回 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code>
                                的方法。你可以这样做：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0002"><code>delegate double TwoLongsOp(long first, long second);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Or, to define a delegate that represents a method that takes
                    no parameters and returns a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">string</code>, you might
                    write this (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAStringDemo/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">或者，要定义一个代表不接受参数且返回 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">string</code>
                                的方法的委托，你可以这样写（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAStringDemo/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0003"><code>//…</code>
<code>delegate string GetAString();</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The syntax is similar to that for a method definition, except
                    there is no method body and the definition is prefixed with the keyword <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">delegate</code>. Because
                    what you are doing here is basically defining a new class, you can define a delegate in any of the
                    same places that you would define a class—that is to say, either inside another class, outside of
                    any class, or in a namespace as a top-level object. Depending on how visible you want your
                    definition to be and the scope of the delegate, you can apply any of the access modifiers that also
                    apply to classes to define its visibility:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">其语法与方法定义相似，但不含方法体，且定义前缀有 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">delegate</code>
                                关键字。因为你这里实际上是在定义一个新类，所以你可以在任何可以定义类的地方定义委托——也就是说，可以在另一个类内部、任何类外部，或作为顶级对象在命名空间中定义。根据你希望定义的可见性和委托的作用域，你可以应用任何同样适用于类的访问修饰符来定义其可见性：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0004"><code>public delegate string GetAString();</code></pre>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0019" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Delegates are
                                implemented as classes derived from the class </i> <code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">System.MulticastDelegate</code>
                            <i data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">, which is derived
                                from the base class </i> <code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">System.Delegate</code>
                            <i data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">. The </i> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">C# compiler is
                                aware of this class and uses the delegate syntax to hide the details of the operations
                                of this class.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 委托被实现为从类 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">System.MulticastDelegate</code>
                                        派生的类，而类 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">System.MulticastDelegate</code>
                                        又是从基础类 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">System.Delegate</code>
                                        派生的。C# 编译器知道这个类，并使用委托语法来隐藏这个类的操作细节。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p id="c07-para-0020" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">After you have defined a delegate, you can create an instance
                    of it so that you can use it to store details about a particular method.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">定义委托后，你可以创建它的实例，以便使用它来存储特定方法的详细信息。
                            </font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0009"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-159" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Using Delegates <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用委托</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The following code snippet demonstrates the use of a
                    delegate. It is a rather long-winded way of calling the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code> method on
                    an <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code> (code
                    file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAStringDemo/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">以下代码片段展示了委托的使用。这是一种较为繁琐的方式来调用
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code>
                                方法在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code>
                                (代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAStringDemo/Program.cs</code>
                                ) 上：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0005"><code>int x = 40;</code>
<code>GetAString firstStringMethod = new GetAString(x.ToString);</code>
<code>Console.WriteLine($"String is {firstStringMethod()}");</code>
<code>//…</code></pre>
                <p id="c07-para-0022" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">This code instantiates a delegate of type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code> and
                    initializes it so it refers to the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code> method of
                    the integer variable <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code>. Delegates
                    always take a one-parameter constructor, which is the address of a method. This method must match
                    the signature and return type with which the delegate was defined. Because <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code> is an
                    instance method (as opposed to a static method), the instance needs to be supplied with the
                    parameter.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这段代码实例化了一个类型为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code>
                                的委托，并将其初始化为指向整数变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code> 的
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code>
                                方法。委托总是需要一个参数的构造函数，即方法的地址。这个方法必须与委托定义时的签名和返回类型相匹配。因为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code>
                                是一个实例方法（而不是静态方法），所以需要提供实例作为参数。</font>
                        </font>
                    </font>
                </p>
                <p id="c07-para-0023" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><span aria-label="180" epub:type="pagebreak" id="Page_180"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>The next line
                    invokes the delegate to display the string. In any code, supplying the name of a delegate instance,
                    followed by parentheses containing any parameters, has exactly the same effect as calling the method
                    wrapped by the delegate.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                下一行调用委托来显示字符串。在任何代码中，提供委托实例的名称，后跟包含任何参数的括号，与调用委托包装的方法具有完全相同的效果。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">In fact, supplying parentheses to the delegate instance is
                    the same as calling the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Invoke</code> method of
                    the delegate class. Because <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                    is a variable of a delegate type, the C# compiler replaces <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                    with <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod.Invoke</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">实际上，向委托实例提供括号与调用委托类的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Invoke</code>
                                方法相同。因为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                                是委托类型的变量，C# 编译器将 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                                替换为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod.Invoke</code>
                                :</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0006"><code>firstStringMethod();</code>
<code>firstStringMethod.Invoke();</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">For less typing, at every place where a delegate instance is
                    needed, you can just pass the name of the address. This is known by the term <i
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">delegate inference</i>.
                    This C# feature works as long as the compiler can resolve the delegate instance to a specific type.
                    The example initialized the variable <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                    of type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code> with a
                    new instance of the delegate <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                为了减少输入，在任何需要委托实例的地方，只需传递地址的名称即可。这被称为委托推断。只要编译器能够将委托实例解析为特定类型，C# 的这个特性就能正常工作。示例中用委托 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code>
                                的新实例初始化了类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code>
                                的变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                                :</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0007"><code>GetAString firstStringMethod = new GetAString(x.ToString);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">You can write the same just by passing the method name with
                    the variable <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code>
                    to the variable <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">只需将方法名称与变量 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code>
                                传递给变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                                ，即可写出相同的效果 :</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0008"><code>GetAString firstStringMethod = x.ToString;</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The code that is created by the C# compiler is the same. The
                    compiler detects that a delegate type is required with <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>,
                    so it creates an instance of the delegate type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code> and
                    passes the address of the method with the object <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code> to the
                    constructor.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">由 C#编译器创建的代码是相同的。编译器检测到需要 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                                类型的委托，因此它创建了一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code>
                                委托类型的实例，并将方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code>
                                的地址与对象一起传递给构造函数。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0028" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Be aware that you
                                can't add the parentheses to the method name as </i><code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x.ToString()</code><i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"> and pass it to
                                the delegate variable. This would be an invocation of the method. The invocation of the
                            </i><code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code><i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"> method returns a
                                string object that can't be assigned to the delegate variable. You can only assign the
                                address of a method to the delegate variable.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意：你不能将方法名作为 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x.ToString()</code>
                                        并加上括号传递给委托变量。这将是方法的调用。 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code>
                                        方法的调用会返回一个字符串对象，不能赋值给委托变量。你只能将方法的地址赋值给委托变量。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p id="c07-para-0029" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Delegate inference can be used anywhere a delegate instance
                    is required. Delegate inference can also be used with events because events are based on delegates
                    (as you'll see later in this chapter).<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                委托推断可以在任何需要委托实例的地方使用。委托推断也可以用于事件，因为事件是基于委托的（如本章后面所述）。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">One feature of delegates is that they are type-safe to the
                    extent that they ensure that the signature of the method being called is correct. However,
                    interestingly, they don't care what type of object the method is being called against or even
                    whether the method is a static method or an instance method.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                委托的一个特性是它们在类型安全方面确保被调用的方法的签名是正确的。然而有趣的是，它们并不关心被调用的方法是针对哪种类型的对象，甚至不关心该方法是否是静态方法还是实例方法。
                            </font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0031" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">An instance of a
                                given delegate can refer to any instance or static method on any object of any type
                                provided that the signature of the method matches the signature of the delegate.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">
                                        注意：给定委托的一个实例可以引用任何类型对象的任何实例方法或静态方法，只要方法的签名与委托的签名匹配。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">To demonstrate this, the following example expands the
                    previous code snippet so that it uses the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                    delegate to call a couple of other methods on another object—an instance method and a static method.
                    For this, the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Currency</code> struct is
                    defined. This type has its own overload of <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code> and a
                    static method with the same signature to <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetCurrencyUnit</code>.
                    This way, the same delegate variable can be used to invoke these methods (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAStringDemo/Currency.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">为了演示这一点，以下示例扩展了前面的代码片段，使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">firstStringMethod</code>
                                委托调用另一个对象上的其他方法——一个实例方法和一个静态方法。为此，定义了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Currency</code>
                                结构。该类型有自己的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ToString</code>
                                重载和一个与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetCurrencyUnit</code>
                                具有相同签名的静态方法。这样，相同的委托变量可以用来调用这些方法（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAStringDemo/Currency.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0009"><code>struct Currency</code>
<code>{</code>
<code>  public uint Dollars;</code>
<code>  public ushort Cents;<span aria-label="181" epub:type="pagebreak" id="Page_181" role="doc-pagebreak"></span></code>
<code>  public Currency(uint dollars, ushort cents)</code>
<code>  {</code>
<code>    Dollars = dollars;</code>
<code>    Cents = cents;</code>
<code>  }</code>
<code> </code>
<code>  public override string ToString() =&gt; $"${Dollars}.{Cents,2:00}";</code>
<code> </code>
<code>  public static string GetCurrencyUnit() =&gt; "Dollar";</code>
<code> </code>
<code>  public static explicit operator Currency (float value)</code>
<code>  {</code>
<code>    checked</code>
<code>    {</code>
<code>      uint dollars = (uint)value;</code>
<code>      ushort cents = (ushort)((value — dollars) * 100);</code>
<code>      return new Currency(dollars, cents);</code>
<code>    }</code>
<code>  }</code>
<code> </code>
<code>  public static implicit operator float (Currency value) =&gt;</code>
<code>    value.Dollars + (value.Cents / 100.0f);</code>
<code> </code>
<code>  public static implicit operator Currency (uint value) =&gt;</code>
<code>    new Currency(value, 0);</code>
<code> </code>
<code>  public static implicit operator uint (Currency value) =&gt;</code>
<code>    value.Dollars;</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Now you can use the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code>
                    instance as follows (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAStringDemo/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在你可以像这样使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAString</code>
                                实例（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetAStringDemo/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0010"><code>private delegate string GetAString();</code>
<code> </code>
<code>//…</code>
<code>var balance = new Currency(34, 50);</code>
<code> </code>
<code>// firstStringMethod references an instance method</code>
<code>firstStringMethod = balance.ToString;</code>
<code>Console.WriteLine($"String is {firstStringMethod()}");</code>
<code> </code>
<code>// firstStringMethod references a static method</code>
<code>firstStringMethod = new GetAString(Currency.GetCurrencyUnit);</code>
<code>Console.WriteLine($"String is {firstStringMethod()}");</code></pre>
                <p id="c07-para-0034" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">This code shows how you can call a method via a delegate and
                    subsequently reassign the delegate to refer to different methods on different instances of classes,
                    even static methods or methods against instances of different types of class, provided that the
                    signature of each method matches the delegate definition.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                这段代码展示了如何通过委托调用方法，并随后将委托重新分配给不同类的不同实例上的不同方法，即使这些方法是静态方法或针对不同类型类实例的方法，只要每个方法的签名与委托定义相匹配。
                            </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">When you run the application, you get the output from the
                    different methods that are referenced by the delegate:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">当你运行应用程序时，你会得到由委托引用的不同方法的输出：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0011"><code>String is 40</code>
<code>String is $34.50</code>
<code>String is Dollar</code></pre>
                <p id="c07-para-0036" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Now that you've been introduced to the foundations of
                    delegates, it's time to move onto something more useful and practical: passing delegates to methods.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                现在你已经了解了委托的基础知识，接下来是时候学习更实用和实用的内容：将委托传递给方法。</font>
                        </font>
                    </font>
                </p>
            </section> <span aria-label="182" epub:type="pagebreak" id="Page_182" role="doc-pagebreak"
                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0012"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-160" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Passing Delegates to Methods <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">将委托传递给方法</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">This example defines a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MathOperations</code>
                    class that uses a couple of static methods to perform two operations on doubles. Then you use
                    delegates to invoke these methods. The <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MathOperations</code>
                    class looks like this (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">SimpleDelegates/MathOperations</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这个示例定义了一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MathOperations</code>
                                类，该类使用几个静态方法对双精度浮点数执行两个操作。然后你使用委托来调用这些方法。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MathOperations</code>
                                类看起来像这样（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">SimpleDelegates/MathOperations</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0012"><code>public static class MathOperations</code>
<code>{</code>
<code>  public static double MultiplyByTwo(double value) =&gt; value * 2;</code>
<code>  public static double Square(double value) =&gt; value * value;</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">You invoke these methods as follows (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">SimpleDelegates/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你这样调用这些方法（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">SimpleDelegates/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0013"><code>using System;</code>
<code> </code>
<code>DoubleOp[] operations =</code>
<code>{</code>
<code>  MathOperations.MultiplyByTwo,</code>
<code>  MathOperations.Square</code>
<code>};</code>
<code> </code>
<code>for (int i=0; i &lt; operations.Length; i++)</code>
<code>{</code>
<code>  Console.WriteLine($"Using operations[{i}]");</code>
<code>  ProcessAndDisplayNumber(operations[i], 2.0);</code>
<code>  ProcessAndDisplayNumber(operations[i], 7.94);</code>
<code>  ProcessAndDisplayNumber(operations[i], 1.414);</code>
<code>  Console.WriteLine();</code>
<code>}</code>
<code> </code>
<code>void ProcessAndDisplayNumber(DoubleOp action, double value)</code>
<code>{</code>
<code>  double result = action(value);</code>
<code>  Console.WriteLine($"Value is {value}, result of operation is {result}");</code>
<code>}</code>
<code> </code>
<code>delegate double DoubleOp(double x);</code></pre>
                <p id="c07-para-0039" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">In this code, you instantiate an array of <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">DoubleOp</code> delegates
                    (remember that after you have defined a delegate class, you can basically instantiate instances just
                    as you can with normal classes, so putting some into an array is no problem). Each element of the
                    array is initialized to refer to a different operation implemented by the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MathOperations</code>
                    class. Then, you loop through the array, applying each operation to three different values. This
                    illustrates one way of using delegates—to group methods together into an array so that you can call
                    several methods in a loop.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在这个代码中，你实例化了一个包含 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">DoubleOp</code>
                                委托的数组（记住，在定义了委托类之后，你可以像普通类一样实例化实例，所以将它们放入数组中并没有问题）。数组中的每个元素被初始化为指向 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MathOperations</code>
                                类实现的不同的操作。然后，你遍历数组，将每个操作应用于三个不同的值。这说明了使用委托的一种方式——将方法组合到数组中，以便你可以在循环中调用多个方法。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The key lines in this code are the ones in which you actually
                    pass each delegate to the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                    method, such as this:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这段代码中的关键行是你实际将每个委托传递给 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                                方法，例如：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0014"><code>ProcessAndDisplayNumber(operations[i], 2.0);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">This passes in the name of a delegate but without any
                    parameters. Given that <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">operations[i]</code> is a
                    delegate, syntactically the following is true:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这传递了一个委托的名称，但没有任何参数。鉴于 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">operations[i]</code>
                                是一个委托，从语法上讲，以下情况成立：</font>
                        </font>
                    </font>
                </p>
                <ul class="check" id="c07-list-0004"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <li id="c07-li-0012" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                        data-immersive-translate-paragraph="1">
                        <code
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">operations[i]</code>
                        means the delegate (that is, the method represented by the delegate).<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">operations[i]</code>
                                    表示委托（即委托所代表的方法）。</font>
                            </font>
                        </font>
                    </li>
                    <li id="c07-li-0013" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                        data-immersive-translate-paragraph="1">
                        <code
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">operations[i](2.0)</code>
                        means actually calling this method, passing in the value in parentheses.<font
                            class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1"> <code
                                        xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">operations[i](2.0)</code>
                                    表示实际调用这个方法，传递括号中的值。</font>
                            </font>
                        </font>
                    </li>
                </ul>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><span aria-label="183" epub:type="pagebreak" id="Page_183"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>The <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                    method is defined to take a delegate as its first parameter:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                                方法定义了以委托作为其第一个参数：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0015"><code>void ProcessAndDisplayNumber(DoubleOp action, double value)</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Then, within the implementation of this method, you call
                    this:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">然后，在这个方法的实现中，你调用这个：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0016"><code>double result = action(value);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">This actually causes the method that is wrapped up by the
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">action</code> delegate
                    instance to be called, and its return result is stored in <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Result</code>. Running
                    this example gives you the following:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">这实际上会导致被 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">action</code>
                                委托实例封装的方法被调用，其返回结果存储在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Result</code>
                                中。运行这个示例会给你以下结果：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0017"><code>Using operations[0]:</code>
<code>Value is 2, result of operation is 4</code>
<code>Value is 7.94, result of operation is 15.88</code>
<code>Value is 1.414, result of operation is 2.828</code>
<code> </code>
<code>Using operations[1]:</code>
<code>Value is 2, result of operation is 4</code>
<code>Value is 7.94, result of operation is 63.043600000000005</code>
<code>Value is 1.414, result of operation is 1.9993959999999997</code></pre>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0046" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">With the outcome
                                you're seeing, you might expect different results with some of the multiplications, but
                                if you round the results, they match. This is because of how </i><code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code><i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"> values are
                                stored. Depending on the data you're working with, this might not be good enough—for
                                example with financial data. Here you should use the </i><code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">decimal</code><i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"> type
                                instead.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">
                                        注意：根据你看到的输出结果，你可能期望某些乘法运算的结果有所不同，但如果对结果进行四舍五入，它们是匹配的。这是由于 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code>
                                        值存储方式造成的。根据你处理的数据类型，这可能不够好——例如在处理财务数据时。在这种情况下，你应该使用 <code
                                            xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">decimal</code>
                                        类型。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0014"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-161" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Action&lt;T&gt; and Func&lt;T&gt; Delegates <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">Action&lt;T&gt; 和 Func&lt;T&gt; 代表
                            </font>
                        </font>
                    </font>
                </h3>
                <p id="c07-para-0047" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Instead of defining a new delegate type with every parameter
                    and return type, you can use the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;T&gt;</code>
                    and <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;T&gt;</code>
                    delegates. The generic <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;T&gt;</code>
                    delegate is meant to reference a method with <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">void</code> return. This
                    delegate class exists in different variants so that you can pass up to 16 different parameter types.
                    The <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action</code> class
                    without the generic parameter is for calling methods without parameters. <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;in T&gt;</code>
                    is for calling a method with one parameter; <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;in T1, in T2&gt;</code>
                    is for a method with two parameters; and <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;in T1, in T2, in T3, in T4, in T5, in T6, in T7, in T8&gt;</code>
                    is for a method with eight parameters.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你不必为每个参数和返回类型定义一个新的代表类型，可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;T&gt;</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;T&gt;</code>
                                代表。泛型 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;T&gt;</code>
                                代表用于引用具有 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">void</code>
                                返回值的函数。这个代表类存在不同的变体，以便你可以传递最多 16 种不同的参数类型。没有泛型参数的 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action</code>
                                类用于调用不带参数的函数。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;in T&gt;</code>
                                用于调用一个参数的函数； <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;in T1, in T2&gt;</code>
                                用于两个参数的函数； <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;in T1, in T2, in T3, in T4, in T5, in T6, in T7, in T8&gt;</code>
                                用于八个参数的函数。</font>
                        </font>
                    </font>
                </p>
                <p id="c07-para-0048" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;T&gt;</code>
                    delegates can be used in a similar manner. <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;T&gt;</code>
                    allows you to invoke methods with a return type. Similar to <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;T&gt;</code>,
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;T&gt;</code> is
                    defined in different variants to pass up to 16 parameter types and a return type. <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;out TResult&gt;</code>
                    is the delegate type to invoke a method with a return type and without parameters. <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;in T, out TResult&gt;</code>
                    is for a method with one parameter, and <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;in T1, in T2, in T3, in T4, out TResult&gt;</code>
                    is for a method with four parameters.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1"> <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;T&gt;</code>
                                代表可以使用类似的方式。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;T&gt;</code>
                                允许你调用具有返回类型的函数。类似于 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;T&gt;</code>
                                ， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;T&gt;</code>
                                以不同的变体定义，以传递最多 16 种参数类型和返回类型。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;out TResult&gt;</code>
                                是调用具有返回类型但不带参数的函数的代表类型。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;in T, out TResult&gt;</code>
                                用于一个参数的函数， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;in T1, in T2, in T3, in T4, out TResult&gt;</code>
                                用于四个参数的函数。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The example in the preceding section declared a delegate with
                    a <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code>
                    parameter and a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code> return
                    type:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">上一节中的示例声明了一个具有 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code>
                                参数和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code>
                                返回类型的代表：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0018"><code>delegate double DoubleOp(double x);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Instead of declaring the custom delegate <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">DoubleOp</code>, you can
                    use the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;in T, out TResult&gt;</code>
                    delegate. You can declare a variable of the delegate type or, as shown here, an array of the
                    delegate type:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;in T, out TResult&gt;</code>
                                代替声明自定义委托 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">DoubleOp</code>
                                。你可以声明委托类型的变量，或者像这里所示，声明委托类型的数组：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0019"><code>Func&lt;double, double&gt;[] operations =</code>
<code>{</code>
<code>  MathOperations.MultiplyByTwo,</code>
<code>  MathOperations.Square</code>
<code>};</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">and use it with the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                    method as a parameter:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">并使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                                方法作为参数：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0020"><code>static void ProcessAndDisplayNumber(Func&lt;double, double&gt; action,</code>
<code>  double value)<span aria-label="184" epub:type="pagebreak" id="Page_184" role="doc-pagebreak"></span></code>
<code>{</code>
<code>  double result = action(value);</code>
<code>  Console.WriteLine($"Value is {value}, result of operation is {result}");</code>
<code>}</code></pre>
            </section>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0015"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-162" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Multicast Delegates <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">多播委托</font>
                        </font>
                    </font>
                </h3>
                <p id="c07-para-0052" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">So far, each of the delegates you have used wraps just one
                    method call. Calling the delegate amounts to calling that method. If you want to call more than one
                    method, you need to make an explicit call through a delegate more than once. However, it is possible
                    for a delegate to wrap more than one method. Such a delegate is known as a <i
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">multicast delegate</i>.
                    When a multicast delegate is called, it successively calls each method in order. For this to work,
                    the delegate signature should return a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">void</code>
                    ; otherwise, you would only get the result of the last method invoked by the delegate.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                到目前为止，你使用的每个委托都包装了一个方法调用。调用委托相当于调用那个方法。如果你想要调用多个方法，需要通过委托多次显式调用。然而，委托可以包装多个方法。这种委托被称为多播委托。当调用多播委托时，它会按顺序依次调用每个方法。要实现这一点，委托的签名应该返回
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">void</code>
                                ，否则，你只会得到委托调用的最后一个方法的结果。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">With a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">void</code> return type,
                    you can use the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;double&gt;</code>
                    delegate (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegates/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">void</code>
                                返回类型，你可以使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action&lt;double&gt;</code>
                                委托（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegates/Program.cs</code>
                                ):</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0021"><code>Action&lt;double&gt; operations = MathOperations.MultiplyByTwo;</code>
<code>operations += MathOperations.Square;</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">In the earlier example, you wanted to store references to two
                    methods, so you instantiated an array of delegates. Here, you simply add both operations into the
                    same multicast delegate. Multicast delegates recognize the operators <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">+</code>, <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">+=</code>, and <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">-=</code>. Alternatively,
                    you can expand the last two lines of the preceding code, as in this snippet:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                在之前的例子中，你想存储两个方法的引用，所以你实例化了一个委托数组。这里，你只需将两个操作都添加到同一个多播委托中。多播委托识别操作符 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">+</code> 、
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">+=</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">-=</code>
                                。或者，你可以像这个代码片段一样扩展前面代码的最后两行：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0022"><code>Action&lt;double&gt; operation1 = MathOperations.MultiplyByTwo;</code>
<code>Action&lt;double&gt; operation2 = MathOperations.Square;</code>
<code>Action&lt;double&gt; operations = operation1 + operation2;</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">With the sample project <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegates</code>,
                    the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MathOperations</code>
                    type from <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">SimpleDelegates</code>
                    has been changed to return void and to display the results on the console (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegates/MathOperations.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用示例项目 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegates</code>
                                ，从 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">SimpleDelegates</code>
                                中的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MathOperations</code>
                                类型已更改为返回 void 并在控制台上显示结果（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegates/MathOperations.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0023"><code>public static class MathOperations</code>
<code>{</code>
<code>  public static void MultiplyByTwo(double value) =&gt;</code>
<code>    Console.WriteLine($"Multiplying by 2: {value} gives {value * 2}");</code>
<code> </code>
<code>  public static void Square(double value) =&gt;</code>
<code>    Console.WriteLine($"Squaring: {value} gives {value * value}");</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">To accommodate this change, you also have to rewrite <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                    (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegates/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">为了适应这一变化，你还需要重写 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegates/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0024"><code>static void ProcessAndDisplayNumber(Action&lt;double&gt; action, double value)</code>
<code>{</code>
<code>  Console.WriteLine($"ProcessAndDisplayNumber called with value = {value}");</code>
<code>  action(value);</code>
<code>  Console.WriteLine();</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Now you can try your multicast delegate:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在你可以尝试你的多播委托了：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0025"><code>Action&lt;double&gt; operations = MathOperations.MultiplyByTwo;</code>
<code>operations += MathOperations.Square;</code>
<code>ProcessAndDisplayNumber(operations, 2.0);<span aria-label="185" epub:type="pagebreak" id="Page_185" role="doc-pagebreak"></span></code>
<code>ProcessAndDisplayNumber(operations, 7.94);</code>
<code>ProcessAndDisplayNumber(operations, 1.414);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Each time <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                    is called, it displays a message saying that it has been called. Then the following statement causes
                    each of the method calls in the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">action</code> delegate
                    instance to be called in succession:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">每次调用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">ProcessAndDisplayNumber</code>
                                时，它会显示一条消息，表明它已被调用。然后，以下语句会导致 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">action</code>
                                委托实例中的每个方法调用依次被调用：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0026"><code>action(value);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Running the preceding code produces this result:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">运行前面的代码会产生这个结果： </font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0027"><code>ProcessAndDisplayNumber called with value = 2</code>
<code>Multiplying by 2: 2 gives 4</code>
<code>Squaring: 2 gives 4</code>
<code> </code>
<code>ProcessAndDisplayNumber called with value = 7.94</code>
<code>Multiplying by 2: 7.94 gives 15.88</code>
<code>Squaring: 7.94 gives 63.043600000000005</code>
<code> </code>
<code>ProcessAndDisplayNumber called with value = 1.414</code>
<code>Multiplying by 2: 1.414 gives 2.828</code>
<code>Squaring: 1.414 gives 1.9993959999999997</code></pre>
                <p id="c07-para-0060" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">If you are using multicast delegates, be aware that the order
                    in which methods chained to the same delegate will be called is formally undefined. Therefore, avoid
                    writing code that relies on such methods being called in any particular order.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                如果你使用多播委托，请注意连接到同一个委托的方法的调用顺序在形式上是不确定的。因此，避免编写依赖于这些方法按特定顺序调用的代码。 </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Invoking multiple methods by one delegate might cause an even
                    bigger problem. The multicast delegate contains a collection of delegates to invoke one after the
                    other. If one of the methods invoked by a delegate throws an exception, the complete iteration
                    stops. Consider the following <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastIteration</code>
                    example. Here, the simple delegate <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action</code> is used.
                    This delegate is meant to invoke the methods <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">One</code> and <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Two</code>, which fulfill
                    the parameter and return type requirements of the delegate. Be aware that method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">One</code> throws an
                    exception (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegatesUsingInvocationList/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                通过一个委托调用多个方法可能会导致更大的问题。多播委托包含一个委托集合，按顺序依次调用。如果一个委托调用的方法抛出异常，整个迭代会停止。考虑以下 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastIteration</code>
                                示例。这里，使用了简单的委托 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Action</code>
                                。这个委托用于调用方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">One</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Two</code>
                                ，它们满足委托的参数和返回类型要求。请注意方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">One</code>
                                抛出异常（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegatesUsingInvocationList/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0028"><code>static void One()</code>
<code>{</code>
<code>  Console.WriteLine("One");</code>
<code>  throw new Exception("Error in One");</code>
<code>}</code>
<code> </code>
<code>static void Two()</code>
<code>{</code>
<code>  Console.WriteLine("Two");</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">With the top-level statements, delegate <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">d1</code> is created to
                    reference method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">One</code>
                    ; next, the address of method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Two</code> is added to
                    the same delegate. <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">d1</code> is invoked to
                    call both methods. The exception is caught in a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">try</code>
                    /
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">catch</code> block:
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">通过顶层语句，创建委托 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">d1</code>
                                来引用方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">One</code>
                                ；接下来，将方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Two</code>
                                的地址添加到同一个委托中。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">d1</code>
                                被调用以调用这两个方法。异常在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">try</code> /
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">catch</code>
                                块中被捕获：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0029"><code>Action d1 = One;</code>
<code>d1 += Two;</code>
<code>try</code>
<code>{</code>
<code>  d1();</code>
<code>}</code>
<code>catch (Exception)</code>
<code>{</code>
<code>  Console.WriteLine("Exception caught");</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><span aria-label="186" epub:type="pagebreak" id="Page_186"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>Only the first
                    method is invoked by the delegate. Because the first method throws an exception, iterating the
                    delegates stops here, and method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Two</code> is never
                    invoked. The result might differ because the order of calling the methods is not defined:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                只有第一个方法被委托调用。由于第一个方法抛出异常，迭代委托在这里停止，方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Two</code>
                                永远不会被调用。结果可能会不同，因为调用方法的顺序未定义：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0030"><code>One</code>
<code>Exception Caught</code></pre>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0065" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Errors and
                                exceptions are explained in detail in <a href="c10.xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Chapter
                                    10</a>, “Errors and </i> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Exceptions.”</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意：错误和异常在“错误和异常”章节中有详细解释。
                                    </font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">In such a scenario, you can avoid the problem by iterating
                    the list on your own. The <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Delegate</code> class
                    defines the method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetInvocationList</code>
                    that returns an array of <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Delegate</code> objects.
                    You can now use these delegates to invoke the methods associated with them directly, catch
                    exceptions, and continue with the next iteration (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegatesUsingInvocationList/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在这种情况下，你可以通过自己迭代列表来避免这个问题。 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Delegate</code>
                                类定义了方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetInvocationList</code>
                                ，该方法返回一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Delegate</code>
                                对象的数组。现在你可以使用这些委托直接调用它们关联的方法，捕获异常，并继续下一次迭代（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">MulticastDelegatesUsingInvocationList/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0031"><code>Action d1 = One;</code>
<code>d1 += Two;</code>
<code>Delegate[] delegates = d1.GetInvocationList();</code>
<code>foreach (Action d in delegates)</code>
<code>{</code>
<code>  try</code>
<code>  {</code>
<code>    d();</code>
<code>  }</code>
<code>  catch (Exception)</code>
<code>  {</code>
<code>    Console.WriteLine("Exception caught");</code>
<code>  }</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">When you run the application with the code changes, you can
                    see that the iteration continues with the next method after the exception is caught:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                当你运行带代码更改的应用程序时，你会发现异常被捕获后，迭代会继续执行下一个方法：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0032"><code>One</code>
<code>Exception caught</code>
<code>Two</code></pre>
            </section>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0017"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-163" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Anonymous Methods <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">匿名方法</font>
                        </font>
                    </font>
                </h3>
                <p id="c07-para-0068" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Up to this point, a method must already exist for the
                    delegate to work (that is, the delegate is defined with the same signature as the method(s) it will
                    be used with). However, there is another way to use delegates—with <i
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">anonymous methods</i>. An
                    anonymous method is a block of code that is used as the parameter for the delegate.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                到目前为止，委托要工作必须已经存在一个方法（也就是说，委托是用与它将要使用的方法相同的签名来定义的）。然而，使用委托还有另一种方式——匿名方法。匿名方法是一段用作委托参数的代码块。
                            </font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The syntax for defining a delegate with an anonymous method
                    doesn't change. It's when the delegate is instantiated that things change. The following simple
                    console application shows how using an anonymous method can work (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">AnonymousMethods/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                定义使用匿名方法的委托的语法不会改变。变化发生在委托实例化的时候。以下简单的控制台应用程序展示了如何使用匿名方法（代码文件 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">AnonymousMethods/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0033"><code>string mid = ", middle part,";</code>
<code>Func&lt;string, string&gt; anonDel = delegate(string param)</code>
<code>{</code>
<code>  param += mid;</code>
<code>  param += " and this was added to the string.";</code>
<code>  return param;</code>
<code>};</code>
<code>Console.WriteLine(anonDel("Start of string"));</code></pre>
                <p id="c07-para-0070" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><span aria-label="187" epub:type="pagebreak" id="Page_187"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>The delegate <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;string, string&gt;</code>
                    takes a single string parameter and returns a string. <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">anonDel</code> is a
                    variable of this delegate type. Instead of assigning the name of a method to this variable, a simple
                    block of code is used, prefixed by the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">delegate</code> keyword
                    and followed by a string parameter.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">该委托 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;string, string&gt;</code>
                                接受一个字符串参数并返回一个字符串。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">anonDel</code>
                                是这种委托类型的变量。不是将一个方法的名称赋值给这个变量，而是使用一个简单的代码块，该代码块以 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">delegate</code>
                                关键字开头，后跟一个字符串参数。</font>
                        </font>
                    </font>
                </p>
                <p id="c07-para-0071" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">As you can see, the block of code uses a method-level string
                    variable, <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">mid</code>,
                    which is defined outside of the anonymous method and adds it to the parameter that was passed in.
                    The code then returns the string value. When the delegate is called, a string is passed in as the
                    parameter, and the returned string is output to the console.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如您所见，代码块使用了一个方法级别的字符串变量 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">mid</code>
                                ，它在匿名方法之外定义，并将其添加到传入的参数中。然后代码返回字符串值。当委托被调用时，将一个字符串作为参数传入，返回的字符串被输出到控制台。</font>
                        </font>
                    </font>
                </p>
                <p id="c07-para-0072" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The benefit of using anonymous methods is that it reduces the
                    amount of code you have to write. You don't need to define a method just to use it with a delegate.
                    This becomes evident when you define the delegate for an event (events are discussed later in this
                    chapter), and it helps reduce the complexity of the code, especially where several events are
                    defined. With anonymous methods, the code does not perform faster. The compiler still defines a
                    method; the method just has an automatically assigned name that you don't need to know.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                使用匿名方法的好处是减少了您需要编写的代码量。您不需要定义一个方法，只是为了使用它配合委托。当您在本章后面定义用于事件的委托时，这一点会变得明显，它有助于降低代码的复杂性，尤其是在定义多个事件的情况下。使用匿名方法，代码执行速度不会更快。编译器仍然定义了一个方法；只是这个方法有一个自动分配的名称，您不需要知道。
                            </font>
                        </font>
                    </font>
                </p>
                <p id="c07-para-0073" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">You must follow a couple of rules when using anonymous
                    methods. An anonymous method can't have a jump statement (<code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">break</code>, <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">goto</code>, or <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">continue</code>) that has
                    a target outside of the anonymous method. The reverse is also true: a jump statement outside the
                    anonymous method cannot have a target inside the anonymous method.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在使用匿名方法时，你必须遵循几条规则。匿名方法不能包含一个跳转语句（
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">break</code>
                                、 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">goto</code> 或
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">continue</code>
                                ），其目标位于匿名方法之外。反过来也是一样的：匿名方法之外的跳转语句不能以匿名方法内部的位置为目标。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">If you have to write the same functionality more than once,
                    don't use anonymous methods. In this case, instead of duplicating the code, write a named method.
                    You have to write it only once and reference it by its name.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                如果你需要多次编写相同的功能，不要使用匿名方法。在这种情况下，与其重复代码，不如编写一个命名方法。你只需要编写一次，并通过其名称来引用它。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0075" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">The syntax for
                                anonymous methods was introduced with C# 2. With new programs, you really don't need
                                this syntax anymore because lambda expressions (explained in the next section) offer the
                                same—and more—functionality. However, you'll find the syntax for anonymous methods in
                                many places in existing source code, which is why it's good to know it.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 匿名方法的语法是在 C# 2
                                        中引入的。对于新程序，你真的不再需要这种语法了，因为 Lambda
                                        表达式（在下一节中解释）提供了相同甚至更多功能。然而，你会在现有源代码的许多地方找到匿名方法的语法，这就是为什么要了解它的原因。</font>
                                </font>
                            </font>
                        </p>
                        <p id="c07-para-0076" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                                data-immersive-translate-paragraph="1">Lambda expressions have been available since C#
                                3.<font class="notranslate immersive-translate-target-wrapper"
                                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                    <font
                                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                        data-immersive-translate-translation-element-mark="1">
                                        <font
                                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                            data-immersive-translate-translation-element-mark="1">Lambda 表达式从 C# 3
                                            开始就可用。</font>
                                    </font>
                                </font></i></p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
        </section>
        <section aria-labelledby="head-2-66" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
            <span id="c07-sec-0019" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
            <h2 id="head-2-66" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">LAMBDA EXPRESSIONS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">Lambda 表达式</font>
                    </font>
                </font>
            </h2>
            <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">One way lambda expressions are used is to assign code—using a
                lambda expression—to a parameter. You can use lambda expressions whenever you have a delegate parameter
                type. The previous example using anonymous methods is modified in the following snippet to use a lambda
                expression:<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">一种 lambda 表达式使用的场景是将其分配给参数——使用 lambda
                            表达式为参数赋值。只要你有委托参数类型，就可以使用 lambda 表达式。以下代码片段将之前使用匿名方法的示例修改为使用 lambda 表达式：</font>
                    </font>
                </font>
            </p>
            <pre id="c07-code-0034"><code>string mid = ", middle part,";</code>
<code>Func&lt;string, string&gt; lambda = param =&gt;</code>
<code>{</code>
<code>  param += mid;</code>
<code>  param += " and this was added to the string.";</code>
<code>  return param;</code>
<code>};</code>
<code>Console.WriteLine(lambda("Start of string"));</code></pre>
            <p id="c07-para-0078" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">The left side of the lambda operator, <code
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">=&gt;</code>, lists the
                necessary parameters. The right side following the lambda operator defines the implementation of the
                method assigned to the variable <code
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">lambda</code>.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">lambda 运算符的左侧， <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">=&gt;</code>
                            ，列出了必要的参数。lambda 运算符右侧定义了分配给变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">lambda</code>
                            的方法的实现。</font>
                    </font>
                </font>
            </p>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0020"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-164" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Parameters <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">参数</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">With lambda expressions, there are several ways to define
                    parameters. If there's only one parameter, just the name of the parameter is enough. The following
                    lambda expression uses the parameter named <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">s</code>. Because the
                    delegate type defines a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">string</code> parameter,
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">s</code> is of type
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">string</code>. The
                    implementation returns a formatted string that is finally written to the console when the delegate
                    is invoked: <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">change uppercase TEST</code>
                    (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">LambdaExpressions/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 lambda
                                表达式时，有多种方式定义参数。如果只有一个参数，只需参数名即可。以下 lambda 表达式使用了名为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">s</code>
                                的参数。由于委托类型定义了一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">string</code>
                                参数， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">s</code> 的类型为
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">string</code>
                                。实现返回一个格式化的字符串，当委托被调用时最终写入控制台： <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">change uppercase TEST</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">LambdaExpressions/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0035"><code>Func&lt;string, string&gt; oneParam = s =&gt; $"change uppercase {s.ToUpper()}";</code>
<code>Console.WriteLine(oneParam("test"));</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><span aria-label="188" epub:type="pagebreak" id="Page_188"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>If a delegate uses
                    more than one parameter, you can combine the parameter names inside brackets. Here, the parameters
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code> and <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">y</code> are of type
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code> as
                    defined by the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;double, double, double&gt;</code>
                    delegate:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果一个委托使用多个参数，你可以在括号内组合参数名称。这里，参数
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">y</code> 的类型为
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">double</code>
                                ，该类型由 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;double, double, double&gt;</code>
                                委托定义：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0036"><code>Func&lt;double, double, double&gt; twoParams = (x, y) =&gt; x * y;</code>
<code>Console.WriteLine(twoParams(3, 2));</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">For convenience, you can add the parameter types to the
                    variable names inside the brackets. If the compiler can't match an overloaded version, using
                    parameter types can help resolve the matching delegate:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                为了方便，你可以在括号内的变量名中添加参数类型。如果编译器无法匹配重载版本，使用参数类型可以帮助解决委托的匹配问题：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0037"><code>Func&lt;double, double, double&gt; twoParamsWithTypes = </code>
<code>  (double x, double y) =&gt; x * y;</code>
<code>Console.WriteLine(twoParamsWithTypes(4, 2));</code></pre>
            </section>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0021"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-165" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Multiple Code Lines <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">多行代码</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">If the lambda expression consists of a single statement, a
                    method block with curly brackets and a return statement are not needed. There's an implicit <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">return</code> added by
                    the compiler:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果 lambda
                                表达式只包含一个语句，则不需要用大括号包围方法块和 return 语句。编译器会隐式添加一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">return</code>
                                ：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0038"><code>Func&lt;double, double&gt; square = x =&gt; x * x;</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">It's completely legal to add curly brackets, a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">return</code> statement,
                    and semicolons. Usually it's just easier to read without them:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">添加大括号、 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">return</code>
                                语句和分号是完全合法的。通常没有它们更容易阅读：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0039"><code>Func&lt;double, double&gt; square = x =&gt;</code>
<code>{</code>
<code>  return x * x;</code>
<code>};</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">However, if you need multiple statements in the
                    implementation of the lambda expression, curly brackets and the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">return</code> statement
                    are required:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">但是，如果你需要在 lambda
                                表达式的实现中使用多个语句，就必须使用大括号和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">return</code>
                                语句：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0040"><code>Func&lt;string, string&gt; lambda = param =&gt;</code>
<code>{</code>
<code>  param += mid;</code>
<code>  param += " and this was added to the string.";</code>
<code>  return param;</code>
<code>};</code></pre>
            </section>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0022"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-166" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Closures <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">闭包</font>
                        </font>
                    </font>
                </h3>
                <p id="c07-para-0085" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">With lambda expressions, you can access variables outside the
                    block of the lambda expression. This is known as <i
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">closure</i>. Closures are
                    a great feature, but they can also be dangerous if not used correctly.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 lambda 表达式，你可以访问 lambda
                                表达式块外部的变量。这被称为闭包。闭包是一个很棒的功能，但如果使用不当，它们也可能很危险。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">In the following example, a lambda expression of type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;int, int&gt;</code>
                    requires one <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code>
                    parameter and returns an <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code>. The parameter
                    for the lambda expression is defined with the variable <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code>. The
                    implementation also accesses the variable <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">someVal</code>, which is
                    outside the lambda expression. As long as you do not assume that the lambda expression creates a new
                    method that is used later when <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">f</code> is invoked, this
                    might not look confusing at all. Looking at this code block, the returned value calling <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">f</code> should be the
                    value from <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code>
                    plus 5, but this might not be the case (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">LambdaExpressions/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">在以下示例中，类型为 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Func&lt;int, int&gt;</code>
                                的 lambda 表达式需要一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code>
                                参数并返回一个 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code>
                                。lambda 表达式的参数通过变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code>
                                定义。实现还访问了 lambda 表达式之外的变量 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">someVal</code>
                                。只要你不假设 lambda 表达式在 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">f</code>
                                被调用时创建了一个稍后使用的新方法，这可能看起来并不令人困惑。查看这段代码块，调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">f</code>
                                返回的值应该是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x</code> 的值加
                                5，但这可能并非如此（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">LambdaExpressions/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0041"><code>int someVal = 5;</code>
<code>Func&lt;int, int&gt; f = x =&gt; x + someVal;</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Assuming the variable <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">someVal</code> is later
                    changed and then the lambda expression is invoked, the new value of <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">someVal</code> is used.
                    The result of invoking <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">f(3)</code> is <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">10</code>
                    :<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">假设变量 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">someVal</code>
                                稍后被修改，然后调用 lambda 表达式，将使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">someVal</code>
                                的新值。调用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">f(3)</code>
                                的结果是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">10</code> ：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0042"><code>someVal = 7;</code>
<code>Console.WriteLine(f(3));</code></pre>
                <p id="c07-para-0088" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1"><span aria-label="189" epub:type="pagebreak" id="Page_189"
                        role="doc-pagebreak"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>Similarly, when
                    you're changing the value of a closure variable within the lambda expression, you can access the
                    changed value outside of the lambda expression.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">类似地，当你在 lambda 表达式内部修改闭包变量的值时，可以在
                                lambda 表达式外部访问修改后的值。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Now, you might wonder how it is possible at all to access
                    variables outside of the lambda expression from within the lambda expression. To understand this,
                    consider what the compiler does when you define a lambda expression. With the lambda expression
                    <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x =&gt; x + someVal</code>,
                    the compiler creates an anonymous class that has a constructor to pass the outer variable. The
                    constructor depends on how many variables you access from the outside. With this simple example, the
                    constructor accepts an <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code>. The anonymous
                    class contains an anonymous method that has the implementation as defined by the lambda expression,
                    with the parameters and return type:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在，你可能想知道在 lambda 表达式内部如何访问 lambda
                                表达式外部的变量。要理解这一点，需要考虑编译器在定义 lambda 表达式时做了什么。对于 lambda 表达式 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">x =&gt; x + someVal</code>
                                ，编译器创建了一个匿名类，该类有一个构造函数用于传递外部变量。构造函数取决于你从外部访问了多少个变量。在这个简单的示例中，构造函数接受一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">int</code>
                                。匿名类包含一个匿名方法，该方法具有 lambda 表达式定义的实现，包括参数和返回类型：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0043"><code>public class AnonymousClass</code>
<code>{</code>
<code>  private int _someVal;</code>
<code>  public AnonymousClass(int someVal) =&gt; _someVal = someVal;</code>
<code>  </code>
<code>  public int AnonymousMethod(int x) =&gt; x + _someVal;</code>
<code>}</code></pre>
                <p id="c07-para-0090" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">In case a value outside of the scope of the lambda expression
                    needs to be returned, a reference type is used.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">如果需要在 lambda
                                表达式的范围内之外返回一个值，则使用引用类型。</font>
                        </font>
                    </font>
                </p>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Using the lambda expression and invoking the method creates
                    an instance of the anonymous class and passes the value of the variable from the time when the call
                    is made.<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">使用 lambda
                                表达式并调用方法会创建匿名类的实例，并将变量在调用时的时间值传递过去。</font>
                        </font>
                    </font>
                </p>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0092" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">In case you are
                                using closures with multiple threads, you can get into concurrency conflicts. It's best
                                to use only immutable types for closures. This way it's guaranteed the value can't
                                change, and synchronization is not needed.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意
                                        如果你使用多线程的闭包，可能会遇到并发冲突。最好只对闭包使用不可变类型。这样就能保证值不会改变，也不需要同步。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0093" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">You can use
                                lambda expressions anywhere the type is a delegate. Another use of lambda expressions is
                                when the type is </i>
                            <code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Expression</code>
                            <i data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"> or </i>
                            <code
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Expression&lt;T&gt;</code>
                            <i data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">, in which case
                                the compiler creates an expression tree. This feature is discussed in <a
                                    href="c09.xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Chapter
                                    9</a>.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意 你可以在类型是委托的地方使用 lambda
                                        表达式。lambda 表达式的另一个用途是当类型是 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Expression</code>
                                        或 <code xmlns="http://www.w3.org/1999/xhtml"
                                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Expression&lt;T&gt;</code>
                                        时，此时编译器会创建一个表达式树。这一特性在第九章中讨论。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
            </section>
        </section>
        <section aria-labelledby="head-2-67" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
            <span id="c07-sec-0025" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
            <h2 id="head-2-67" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">EVENTS<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">事件</font>
                    </font>
                </font>
            </h2>
            <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">Events are based on delegates and offer a publish/subscribe
                mechanism to delegates. You can find events everywhere across the framework. In Windows applications,
                the <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Button</code> class
                offers the <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Click</code>
                event. This type of event is a delegate. A handler method that is invoked when the <code
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Click</code> event is fired
                needs to be defined and to include parameters as defined by the delegate type.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            事件基于委托，并提供一种委托的发布/订阅机制。你可以在框架的各个地方找到事件。在 Windows 应用程序中， <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Button</code>
                            类提供了 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Click</code>
                            事件。这种事件是一种委托。当 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Click</code>
                            事件被触发时，需要定义一个处理方法，并包含委托类型定义的参数。</font>
                    </font>
                </font>
            </p>
            <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <hr />
                </div>
                <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <p id="c07-para-0095" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                        data-immersive-translate-paragraph="1"><b
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">See design guidelines
                            for events in the Microsoft documentation: </i><code
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><a href="https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/event">https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/event</a></code><i
                            data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">.</i>
                        <font class="notranslate immersive-translate-target-wrapper"
                            data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                            <font
                                class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                data-immersive-translate-translation-element-mark="1">
                                <font
                                    class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                    data-immersive-translate-translation-element-mark="1">注意 参考 Microsoft 文档中关于事件的设计指南：
                                    <code xmlns="http://www.w3.org/1999/xhtml"
                                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><a href="https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/event">https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/event</a></code>
                                    。</font>
                            </font>
                        </font>
                    </p>
                    <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                </section>
            </aside>
            <p id="c07-para-0096" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">In the code example shown in this section, events are used to
                connect the <code
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code> and <code
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Consumer</code> classes. The
                <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code> class
                offers an event when a new car arrives. The <code
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Consumer</code> class
                subscribes to the event to be informed when a new car arrives.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">在本节所示代码示例中，事件被用于连接 <code
                                xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                            和 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Consumer</code>
                            类。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                            类在新的汽车到达时提供事件。 <code xmlns="http://www.w3.org/1999/xhtml"
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Consumer</code>
                            类订阅该事件，以便在新的汽车到达时得到通知。</font>
                    </font>
                </font>
            </p> <span aria-label="190" epub:type="pagebreak" id="Page_190" role="doc-pagebreak"
                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0027"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-167" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Event Publisher <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">事件发布者</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">You start with a <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code> class
                    that offers a subscription based on events. <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code> defines
                    the event named <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarCreated</code> of
                    type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;CarInfoEventArgs&gt;</code>
                    with the <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">event</code>
                    keyword. Inside the method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CreateANewCar</code>, the
                    event <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarCreated</code> is
                    fired by invoking the method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">RaiseNewCarCreated</code>.
                    The implementation of this method verifies whether the delegate is not null and raises the event
                    (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventsSample/CarDealer.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">你从一个 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                                类开始，该类提供基于事件的订阅。 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                                使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarCreated</code>
                                关键字定义了名为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;CarInfoEventArgs&gt;</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">event</code>
                                类型事件。在方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CreateANewCar</code>
                                内部，通过调用方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">RaiseNewCarCreated</code>
                                触发事件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarCreated</code>
                                。此方法的实现验证委托是否不为 null 并引发事件（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventsSample/CarDealer.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0044"><code>public class CarInfoEventArgs: EventArgs</code>
<code>{</code>
<code>  public CarInfoEventArgs(string car) =&gt; Car = car;</code>
<code>  public string Car { get; }</code>
<code>}</code>
<code> </code>
<code>public class CarDealer</code>
<code>{</code>
<code>  public event EventHandler&lt;CarInfoEventArgs&gt;? NewCarInfo;</code>
<code>  public void CreateANewCar(string car)</code>
<code>  {</code>
<code>    Console.WriteLine($"CarDealer, new car {car}");</code>
<code>    RaiseNewCarCreated(car);</code>
<code>  }</code>
<code> </code>
<code>  private void RaiseNewCarCreated(string car) =&gt;</code>
<code>    NewCarCreated?.Invoke(this, new CarInfoEventArgs(car));</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The class <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code> offers
                    the event <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarCreated</code> of
                    type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;CarInfoEventArgs&gt;</code>.
                    As a convention, events typically use methods with two parameters; the first parameter is an object
                    and contains the sender of the event, and the second parameter provides information about the event.
                    The second parameter is different for various event types. You could create a specific delegate type
                    such as<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">类 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                                提供了类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;CarInfoEventArgs&gt;</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarCreated</code>
                                事件。按照惯例，事件通常使用具有两个参数的方法；第一个参数是对象，包含事件的发送者，第二个参数提供有关事件的信息。第二个参数因事件类型而异。你可以创建一个特定的委托类型，例如
                            </font>
                        </font>
                    </font>
                </p>
                <pre
                    id="c07-code-0045"><code>public delegate void NewCarCreatedHandler(object sender, CarInfoEventArgs e);</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">or use the generic type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler</code> as
                    shown in the sample code. With <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;TEventArgs&gt;</code>,
                    the first parameter needs to be of type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">object</code>, and the
                    second parameter is of type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">T</code>. <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;TEventArgs&gt;</code>
                    also defines a constraint on <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">T</code>
                    ; it must derive from the base class <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventArgs</code>, which
                    is the case with <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarInfoEventArgs</code>.
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">或者使用示例代码中所示的泛型类型 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler</code>
                                。使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;TEventArgs&gt;</code>
                                时，第一个参数需要是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">object</code>
                                类型，第二个参数是 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">T</code> 类型。
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;TEventArgs&gt;</code>
                                还对 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">T</code>
                                定义了一个约束；它必须派生自基类 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventArgs</code>
                                ，而 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarInfoEventArgs</code>
                                正是这种情况。</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0046"><code>public event EventHandler&lt;CarInfoEventArgs&gt; NewCarInfo;</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The delegate <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;TEventArgs&gt;</code>
                    is defined as follows:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">委托 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;TEventArgs&gt;</code>
                                定义如下：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0047"><code>public delegate void EventHandler&lt;TEventArgs&gt;(object sender, TEventArgs e)</code>
<code>  where TEventArgs: EventArgs</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Defining the event in one line is a C# shorthand notation.
                    The compiler creates a variable of the delegate type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;CarInfoEventArgs</code>
                    &gt; and adds methods to subscribe and unsubscribe from the delegate. The long form of the shorthand
                    notation is shown next. This is similar to auto-properties and full properties. With events, the
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">add</code> and <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">remove</code> keywords
                    are used to add and remove a handler to the delegate:<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">单行定义事件是 C# 的简写形式。编译器会创建一个委托类型的变量
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;CarInfoEventArgs</code>
                                &gt; 并添加用于订阅和取消订阅委托的方法。简写形式的完整写法如下所示。这与自动属性和完整属性类似。在事件中，使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">add</code> 和
                                <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">remove</code>
                                关键字来向委托添加和移除处理程序：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0048"><code>private EventHandler&lt;CarInfoEventArgs&gt;? _newCarCreated;</code>
<code>public event EventHandler&lt;CarInfoEventArgs&gt;? NewCarCreated</code>
<code>{</code>
<code>  add =&gt; _newCarCreated += value;</code>
<code>  remove =&gt; _newCarCreated -= value;</code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span aria-label="191"
                        epub:type="pagebreak" id="Page_191" role="doc-pagebreak"
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span></p>
                <aside data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                    <div class="top hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <hr />
                    </div>
                    <section class="feature2" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                        <p id="c07-para-0103" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                            data-immersive-translate-paragraph="1"><b
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NOTE</b> <i
                                data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">The long notation
                                to define events is useful if more needs to be done than just adding and removing the
                                event handler, such as adding synchronization for multiple thread access. The UWP, WPF,
                                and WinUI controls make use of the long notation to add bubbling and tunneling
                                functionality with the events.</i>
                            <font class="notranslate immersive-translate-target-wrapper"
                                data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                                <font
                                    class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                                    data-immersive-translate-translation-element-mark="1">
                                    <font
                                        class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                        data-immersive-translate-translation-element-mark="1">注意
                                        定义事件的完整写法在需要执行的操作不仅仅是添加和移除事件处理程序时很有用，例如添加多线程访问的同步。UWP、WPF 和 WinUI
                                        控件使用完整写法来为事件添加冒泡和隧道功能。</font>
                                </font>
                            </font>
                        </p>
                        <div class="bottom hr" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
                            <hr />
                        </div>
                    </section>
                </aside>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The class <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code> fires
                    the event by calling the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Invoke</code> method of
                    the delegate. This invokes all the handlers that are subscribed to the event. Remember, as
                    previously shown with multicast delegates, the order of the methods invoked is not guaranteed. To
                    have more control over calling the handler methods, you can use the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Delegate</code> class
                    method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetInvocationList</code>
                    to access every item in the delegate list and invoke each on its own, as shown earlier.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">类 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                                通过调用委托的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Invoke</code>
                                方法来触发事件。这会调用所有已订阅该事件的处理器。记住，如之前通过多播委托所示，调用方法的顺序是不确定的。若要更精确地控制调用处理器方法，可以使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Delegate</code>
                                类的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">GetInvocationList</code>
                                方法来访问委托列表中的每个项目并单独调用，如前文所示。</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0049"><code>NewCarCreated?.Invoke(this, new CarInfoEventArgs(car));</code></pre>
                <p id="c07-para-0105" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Firing the event requires only a one-liner. Prior to C# 6,
                    firing the event was more complex—checking the delegate for <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">null</code> (if no
                    subscriber was registered) before invoking the method, which should have been done in a thread-safe
                    manner. Now, checking for null is done using the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">?.</code> operator.<font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">触发事件只需要一行代码。在 C# 6
                                之前，触发事件更为复杂——在调用方法前需要检查委托是否为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">null</code>
                                （如果没有注册订阅者），并且这个操作必须在线程安全的方式下进行。现在，使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">?.</code>
                                运算符来检查 null。</font>
                        </font>
                    </font>
                </p>
            </section>
            <section data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"><span id="c07-sec-0029"
                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
                <h3 id="head-3-168" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Event Listener <font
                        class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                        <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">事件监听器</font>
                        </font>
                    </font>
                </h3>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">The class <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Consumer</code> is used
                    as the event listener. This class subscribes to the event of the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code> and
                    defines the method <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarIsHere</code> that
                    in turn fulfills the requirements of the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;CarInfoEventArgs&gt;</code>
                    delegate with parameters of type <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">object</code> and <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarInfoEventArgs</code>
                    (code file <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventsSample/Consumer.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">类 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">Consumer</code>
                                被用作事件监听器。这个类订阅了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                                的事件，并定义了方法 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarIsHere</code>
                                ，该方法进而满足了 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventHandler&lt;CarInfoEventArgs&gt;</code>
                                委托的要求，参数类型为 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">object</code>
                                和 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarInfoEventArgs</code>
                                （代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventsSample/Consumer.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0050"><code>public record Consumer(string Name)</code>
<code>{</code>
<code>  public void NewCarIsHere(object? sender, CarInfoEventArgs e) =&gt;</code>
<code>    Console.WriteLine($"{Name}: car {e.Car} is new");  </code>
<code>}</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">Now the event publisher and subscriber need to connect. You
                    do this by using the <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarInfo</code> event
                    of the <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                    to create a subscription with <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">+=</code>. The consumer
                    <code data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">sebastian</code>
                    subscribes to the event, and after the car Williams is created, the consumer <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">max</code> subscribes.
                    After the car Aston Martin is created, <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">sebastian</code>
                    unsubscribes with <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">-=</code> (code file
                    <code
                        data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventsSample/Program.cs</code>):
                    <font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">现在事件发布者和订阅者需要连接。您通过使用 <code
                                    xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">CarDealer</code>
                                的 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">NewCarInfo</code>
                                事件来创建与 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">+=</code>
                                的订阅来实现这一点。消费者 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">sebastian</code>
                                订阅了事件，在创建汽车威廉姆斯之后，消费者 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">max</code>
                                订阅。在创建汽车阿斯顿·马丁之后， <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">sebastian</code>
                                使用 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">-=</code>
                                取消订阅（代码文件 <code xmlns="http://www.w3.org/1999/xhtml"
                                    data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">EventsSample/Program.cs</code>
                                ）：</font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0051"><code>CarDealer dealer = new();</code>
<code>Consumer sebastian = new("Sebastian");</code>
<code>dealer.NewCarInfo += sebastian.NewCarIsHere;</code>
<code>dealer.NewCar("Williams");</code>
<code> </code>
<code>Consumer max = new("Max");</code>
<code>dealer.NewCarInfo += max.NewCarIsHere;</code>
<code>dealer.NewCar("Aston Martin");</code>
<code>dealer.NewCarInfo -= sebastian.NewCarIsHere;</code>
<code>dealer.NewCar("Ferrari");</code></pre>
                <p data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                    data-immersive-translate-paragraph="1">When you run the application, a Williams arrives, and
                    Sebastian is informed. After that, Max registers for the subscription as well, and both Sebastian
                    and Max are informed about the new Aston Martin. Then Sebastian unsubscribes, and only Max is
                    informed about the Ferrari:<font class="notranslate immersive-translate-target-wrapper"
                        data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                        <font
                            class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                            data-immersive-translate-translation-element-mark="1">
                            <font
                                class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                                data-immersive-translate-translation-element-mark="1">
                                当你运行应用程序时，一个威廉姆斯到来，塞巴斯蒂安被通知。之后，马克也注册了订阅，塞巴斯蒂安和马克都得知了新的阿斯顿·马丁。然后塞巴斯蒂安取消订阅，只有马克被通知到法拉利：
                            </font>
                        </font>
                    </font>
                </p>
                <pre id="c07-code-0052"><code>CarDealer, new car Williams</code>
<code>Sebastian: car Williams is new</code>
<code>CarDealer, new car Aston Martin</code>
<code>Sebastian: car Aston Martin is new<span aria-label="192" epub:type="pagebreak" id="Page_192" role="doc-pagebreak"></span></code>
<code>Max: car Aston Martin is new</code>
<code>CarDealer, new car Ferrari</code>
<code>Max: car Ferrari is new</code></pre>
            </section>
        </section>
        <section aria-labelledby="head-2-68" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49">
            <span id="c07-sec-0030" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"></span>
            <h2 id="head-2-68" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">SUMMARY<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN">
                    <font class="notranslate" data-immersive-translate-translation-element-mark="1">  </font>
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">摘要</font>
                    </font>
                </font>
            </h2>
            <p id="c07-para-0109" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">This chapter provided the basics of delegates, lambda
                expressions, and events. You learned how to declare a delegate and add methods to the delegate list; you
                learned how to implement methods called by delegates with lambda expressions; and you learned the
                process of declaring event handlers to respond to an event, as well as how to create a custom event and
                use the patterns for raising the event.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">本章介绍了委托、Lambda
                            表达式和事件的基础知识。你学习了如何声明委托并向委托列表中添加方法；学习了如何使用 Lambda
                            表达式实现被委托调用的方法；还学习了声明事件处理程序以响应事件的流程，以及如何创建自定义事件和使用引发事件的模式。</font>
                    </font>
                </font>
            </p>
            <p id="c07-para-0110" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">Using delegates and events in the design of a large application
                can reduce dependencies and the coupling of layers. This enables you to develop components that have a
                higher reusability factor.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">
                            在大型应用程序的设计中使用委托和事件可以减少依赖性和层之间的耦合。这使得你能够开发具有更高可重用性因子的组件。</font>
                    </font>
                </font>
            </p>
            <p id="c07-para-0111" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">Lambda expressions are C# language features based on delegates.
                With these, you can reduce the amount of code you need to write.<font
                    class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">Lambda 表达式是基于委托的
                            C#语言特性。有了这些，你可以减少需要编写的代码量。</font>
                    </font>
                </font>
            </p>
            <p id="c07-para-0112" data-immersive-translate-walked="738433b2-19d2-4c36-8bad-121b7aee7f49"
                data-immersive-translate-paragraph="1">The next chapter covers the use of different forms of
                collections.<font class="notranslate immersive-translate-target-wrapper"
                    data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br />
                    <font
                        class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper"
                        data-immersive-translate-translation-element-mark="1">
                        <font
                            class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner"
                            data-immersive-translate-translation-element-mark="1">下一章将涵盖不同形式集合的使用。</font>
                    </font>
                </font>
            </p>
        </section>
    </section>
</body>
<div id="immersive-translate-popup" style="all: initial"></div>

</html>